var tipuesearch = {"pages":[{"title":"About me","text":"Hao serves as an R&D Engineer at New H3C Technologies . In early 2017, He completed EIT Digital Dual Master Degree Programme with a major of Internet Technology and Architecture at KTH Royal Institute of Technology and a specialization of Internet of Things(IoT) at IMT Atlantique . He also minored in ICT Innovation and Entrepreneurship during his Master studies. Hao is a Cisco Certificated Internetwork Expert in Routing and Switching (CCIE R&S #40343). He is passionate about future networking technologies. His interests mainly focus on Wireless and Mobile Networking , Datacenter and Cloud Networking , and Network Intelligence(Big Data, AI, etc.) . He is highly motivated by the desire to see these technologies meet together to shape a more intelligent, efficient, and reliable networked society. His curriculum vitae is available here . You can also find him on Linkedin . ç°å°±èŒäº H3C æ‹…ä»»ç ”å‘å·¥ç¨‹å¸ˆã€‚2017å¹´åˆå®Œæˆæ¬§ç›Ÿ EIT Digital åŒç¡•å£«å­¦ä½è”åˆåŸ¹å…»é¡¹ç›®ï¼Œåˆ†åˆ«è·å¾— KTHç‘å…¸çš‡å®¶ç†å·¥å­¦é™¢ çš„äº’è”ç½‘æŠ€æœ¯ä¸æ¶æ„ç¡•å£«å­¦ä½å’Œ IMT Atlantiqueæ³•å›½å¤§è¥¿æ´‹é«˜ç­‰çŸ¿ä¸šç”µä¿¡å­¦æ ¡ çš„ç‰©è”ç½‘ç¡•å£«å­¦ä½ï¼Œä»¥åŠICTåˆ›æ–°åˆ›ä¸šå•†ç§‘è¾…ä¿®è¯ä¹¦ã€‚2016å¹´3æœˆè‡³9æœˆåœ¨ æ€ç§‘ å·´é»åˆ›æ–°ç ”ç©¶é™¢è¿›è¡Œç¡•å£«æ¯•ä¸šè®ºæ–‡å®ä¹ ã€‚2014å¹´æœ¬ç§‘æ¯•ä¸šäº æµ™æ±Ÿå¤§å­¦ ç¯å¢ƒä¸èµ„æºå­¦é™¢å¹¶è·å¾—å†œå­¦å­¦å£«å­¦ä½ã€‚ æ€ç§‘è®¤è¯äº’è”ç½‘ç»œä¸“å®¶ï¼ˆCCIE R&S #40343ï¼‰ï¼Œä¹Ÿæ˜¯æœªæ¥ç½‘ç»œæŠ€æœ¯çš„ç‹‚çƒ­çˆ±å¥½è€…ã€‚å…´è¶£ä¸»è¦é›†ä¸­åœ¨æ— çº¿å’Œç§»åŠ¨ç½‘ç»œï¼Œæ•°æ®ä¸­å¿ƒå’Œäº‘è®¡ç®—ç½‘ç»œï¼Œä»¥åŠç½‘ç»œå¤§æ•°æ®/äººå·¥æ™ºèƒ½ç­‰é¢†åŸŸã€‚æœŸå¾…è¿™äº›æŠ€æœ¯èåˆåæ„å»ºä¸€ä¸ªæ›´åŠ æ™ºèƒ½ã€é«˜æ•ˆå’Œå¯é çš„äº’è”ç¤¾ä¼šã€‚ è¯¦ç»†ç®€å†è¯·æˆ³ è¿™é‡Œ ã€‚æ‚¨ä¹Ÿå¯ä»¥åœ¨ é¢†è‹± ä¸Šæ‰¾åˆ°æˆ‘ã€‚","tags":"pages","url":"https://jiang-hao.com/pages/aboutme.html","loc":"https://jiang-hao.com/pages/aboutme.html"},{"title":"Self Management","text":"1. Skill Tree 2. Weekly Schedule Slot Sunday Monday Tuesday Wednesday Thursday Friday Saturday 06:00 getup getup getup getup getup getup getup 06:30 Java Java Java Java Java Java Java 07:00 Java Java Java Java Java Java Java 07:30 Java Java Java Java Java Java Java 08:00 Algorithms OTR OTR OTR OTR OTR Algorithms 08:30 Algorithms OTR OTR OTR OTR OTR Algorithms 09:00 Algorithms Algorithms 09:30 OTR 10:00 Security 10:30 Security 11:00 Security 11:30 Security 12:00 OTR OTR OTR OTR OTR OTR OTR 12:30 AI AI AI AI AI AI 13:00 AI AI AI AI AI AI 13:30 14:00 14:30 15:00 15:30 16:00 16:30 17:00 17:30 18:00 OTR OTR OTR OTR OTR OTR 18:30 Cloud Cloud Cloud Cloud OTR 19:00 Cloud Cloud Cloud Cloud Security 19:30 Cloud Cloud Cloud Cloud Security 20:00 Cloud Cloud Cloud Cloud Security 20:30 OTR OTR OTR OTR Security 21:00 Big Data Big Data Big Data Big Data OTR 21:30 Big Data Big Data Big Data Big Data 22:00 Big Data Big Data Big Data Big Data 22:30 SHW SHW SHW SHW SHW SHW SHW","tags":"pages","url":"https://jiang-hao.com/pages/management.html","loc":"https://jiang-hao.com/pages/management.html"},{"title":"Publications","text":"è®ºæ–‡ 2019 \"A JSON-Based Fast and Expressive Access Control Policy Framework\". H. Jiang and A. Bouabdallah. Advanced Data Modeling and Processing With JSON. To be published by IGI Global in 2019. 2017 \"JACPoL: A Simple but Expressive JSON-based Access Control Policy Language\". H. Jiang and A. Bouabdallah. Wistp 2017: International Conference on Information Security Theory and Practice, Springer Verlag, 28-29 September 2017. \"Towards a JSON-Based Fast Policy Evaluation Framework\". H. Jiang and A. Bouabdallah. In OTM Confederated International Conferences \"On the Move to Meaningful Internet Systems\", pp. 22-30. Springer, Cham, 2017. \"Controlled Replication for Higher Reliability and Predictability in Industrial IoT Networks\". H. Jiang , Z. Brodard, T.F. Chang, A. Bouabdallah, N. Montavont, G. Texier, P. Thubert, T. Watteyne, G. Z. Papadopoulos. In Proceedings of the 2017 International Conference on Embedded Wireless Systems and Networks (EWSN), Dependability Competition, ACM, Uppsala, Sweden, February 20-22, 2017. 2016 \"Rover: Poor (but Elegant) Man's Testbed\". Z. Brodard, H. Jiang , T.F. Chang, T. Watteyne, X. Vilajosana, P. Thubert, G. Texier. In Proceedings of the 13th ACM Symposium on Performance Evaluation of Wireless Ad Hoc, Sensor, and Ubiquitous Networks (PE-WASUN 2016). pp. 61-65. ACM. November 17, 2016. \"A Secure Multi-Tenant Framework for SDN\". H. Jiang , A. Bouabdallah, A. Aflatoonian, J. M. Bonnin, K. Guillouard. In Proceedings of the 9th International Conference on Security of Information and Networks(SIN 2016). pp. 40-44. ACM, July 20, 2016. ä¸“åˆ© 2016 \"Timeslot Shifting for Lower-Priority Packets in a Time Slotted Network\". P. Thubert, Z. Brodard, H. Jiang . U.S.Patent 15/207,621 filed 12-Jul-2016. æ ‡å‡† 2016 \"A 6loRH for Bit Strings\". P. Thubert, Z. Brodard, H. Jiang , & G. Texier. IETF Internet draft. Version: draft-thubert-6lo-bier-dispatch-01. IETF 6lo WG. June 29, 2016. \"BIER-TE-based OAM, Replication & Elimination\". P. Thubert, Z. Brodard, H. Jiang . IETF Internet draft. Version: draft-thubert-bier-replication-elimination-00. IETF BIER WG. September 14, 2016. â€‹ å…¶å®ƒ 2016 \"Software-defined IoT: 6TiSCH Centralized Scheduling and Multipath Construction\". H. Jiang . Internship report (Master Thesis). Cisco Paris Innovation and Research Lab, September 21, 2016. \"A Secure Multi-tenant Framework on the Northbound Side of SDN\". H. Jiang . Innovation project report. Department of Network, Security and Multimedia, Telecom Bretagne, March 07, 2016. 2014 æœªæ¥äº’è”ç½‘è¯•éªŒåºŠèµ„æºç®¡æ§ç³»ç»Ÿçš„è®¾è®¡ä¸å®ç°/ Design and Implementation of Resource Management and Control System for Future Internet Testbed (in Chinese). H. Jiang . Bachelor thesis. Next Generation Network Technology Laboratory (NGNT Lab), College of Computer Science and Technology, Zhejiang University, June 10, 2014. 2013 CCIEç¬”è®°-è·¯ç”±äº¤æ¢ç†è®ºå’Œå®æˆ˜/ CCIE Notes - Routing and Switching (in Chinese). H. Jiang . August 27, 2013.","tags":"pages","url":"https://jiang-hao.com/pages/publications.html","loc":"https://jiang-hao.com/pages/publications.html"},{"title":"Resume","text":"Last Updated: Feb 25, 2018 Hao JIANG Research & Development Engineer, New H3C Technologies Co., Limited Email: jiang DOT haoa AT h3c DOT com Address: 466 Changhe Road, Binjiang District, 310052 Hangzhou SUMMARY A 2-year-old master graduate with double degrees in Internet Technology and Architecture & Internet of Things(IoT) from EIT Digital Program, and a minor certificate in Innovation and Entrepreneurship . Possess extensive knowledge in IoT Data Communication and Management & Datacenter and Cloud Networking technologies. Understand deeply IP network architecture, protocols, and popular techniques. Master common system programming languages, e.g., Java, Python, C/C++. EDUCATION M.Sc. in Internet of Things, IMT Atlantique, GPA: 3.85/3.9, 2015/2016 M.Sc. in Internet Technology and Architecture, KTH Royal Institute of Technology, GPA: 4.61/5.0, 2014/2015 B.Sc. in Agricultural Resources and Environment, Zhejiang University, GPA: 3.66/4.0, 2010-2014 SELECTED HONORS & AWARDS Excellence Scholarship, 1000â‚¬/month+3000â‚¬ mobility allowance, sponsored by EIT Digital, 09/2014 - 08/2016 Outstanding Collegiate Volunteer, awarded by Chinese Society for Environmental Sciences (CSES), 03/2013 National Endeavor Scholarship, 5000Â¥, sponsored by Ministry of Education of China, 12/2012 Excellent Student Awards, awarded by Zhejiang University, 12/2012 Outstanding Student Leader Awards, Top 6%, awarded by Zhejiang University, 10/2012 Academic Excellence Scholarship, Top 15%, sponsored by Zhejiang University, 10/2012 Outstanding Student Scholarship, sponsored by Zhejiang University, 10/2011 Scholarship for Outstanding Students, Top 1â€°, sponsored by Yifeng Middle School of Jiangxi, China, 09/2007 - 06/2010 R&D EXPERIENCE R&D Engineer at New H3C Technologies Co., Limited, from 11/2017 Topic: SDN Research and Development R&D Engineer at Telecom Bretagne, 11/2016 - 08/2017 Topic: Trustful Hyper-linked Entities in Dynamic Networks Participated in the reThink project under the European Horizon 2020 Programme. Designed and developed JACPoL: a scalable, expressive but lightweight JSON-based access control policy language. Prototyped a performant policy evaluation engine associated with JACPoL adopting PEP/PDP architecture. Published 2 papers. Research Intern (Master Thesis) at Cisco Paris Innovation and Research Lab, 03/2016 - 09/2016 Topic: Software Defined Internet of Things (SDIoT) - 6TiSCH Centralized Scheduling and Multipath Construction Developed SDN-based routing and resource allocation schemes for deterministic IoT Low-power Lossy Networks (LLNs). Designed, implemented, and evaluated a multipath forwarding and control mechanism based on IPv6 over the TSCH mode of IEEE 802.15.4e (6TiSCH). Co-authored 3 papers, 2 Internet drafts at Internet Engineering Task Force (IETF), and 1 patent. Contributed actively to OpenWSN open-source projects. Independent Study at Telecom Bretagne, 11/2015 - 02/2016 Topic: A Secure Northbound Multi-tenant Framework for Software-defined Networks (SDN) Designed and implemented a novel multi-tenant framework with AAA, MySQL, and RESTful web services on top of OpenDaylight controller. Published the research and brought up a new concept of Software Defined Multi-tenant Networking (SDMTN). Research Intern (Bachelor Thesis) at Laboratory of Next Generation Network Technology (NGNT Lab), Zhejiang University, 02/2014 - 06/2014 Topic: Resource Management and Control for a Large-scale SDN Testbed Designed and implemented virtual-to-physical network mapping and resource allocation mechanisms for the data plane. Summer Intern at Institute of Agricultural Remote Sensing and Information Technology, Zhejiang University, 06/2013 - 08/2013 Topic: Greenhouse Environment Monitoring and Automatic Control Programmed on wireless sensor nodes with TinyOS/nesC. Conducted Matlab simulations for greenhouse energy-efficiency analysis. EXTRACURRICULAR ACTIVITIES Member of the Preparatory Committee of EU-China Youth Innovation & Entrepreneurship Forum 2017, 11/2016 - 06/2017 Participating actively in the design and preparation of the forum to promote cooperation and exchange between Chinese and European investors and start-up companies. Director of EIT CSSA (Chinese Students and Scholars Association) France, 10/2015 - 09/2016 Organized academic and recreational activities among EIT Digital students over European countries. Teaching Assistant at OpenLab IT Education, Inc., Hangzhou, 08/2013 - 01/2014 Offered technical courses on routing, switching, and troubleshooting technologies. Performed periodical maintenance of teaching materials and translation of technical documents. Director of General Affairs Department of Students' Union, Zhejiang University, 09/2011 - 09/2012 Organized a variety of campus and volunteer activities. Received Outstanding Student Leader Awards from Zhejiang University. English Tutor for a junior middle school student, 09/2011 - 02/2012 Student Technician of IT Support Center, Zhejiang University, 09/2010 - 06/2011 Supported students and faculty in solving computer and network problems. Figured out and solved the problem of DHCP failure once in a campus wireless network paralysis. TECHNICAL COURSE PROJECTS Multitasking and Event Scheduling on Wireless Sensor Networks , 01/2016-02/2016 UVDECX101-Distributed Architectures and Embedded Systems, TÃ©lÃ©com Bretagne Developed smart LED lighting control using networked Contiki motes with distributed sensing and actuation. IoT Data Stream Processing and Analytics , 11/2015-12/2015 UVDECX501-Internet of Things and Intelligent Transport, TÃ©lÃ©com Bretagne Analysed real-time data stream from campus wireless sensor network using Apache Storm. Performance Analysis of Backoff Algorithms in WiFi Networks , 01/2015-03/2015 IK2217-Advanced Internetworking II, KTH Royal Institute of Technology Evaluated and improved the backoff mechanism in CSMA wireless networks to optimize throughput performance through NS3 simulation. 5G Wireless System with Massive MIMO , 11/2014-01/2015 EP2950-Wireless Networks, KTH Royal Institute of Technology Investigated novel techniques of massive MIMO as a key enabler for 5G based on extensive literature research. Advanced ISP (Internet Service Provider) Networking , 09/2014-11/2014 IK2215-Advanced Internetworking, KTH Royal Institute of Technology Designed and implemented high availability inter/intra-domain routing functions, IP multicast, along with a suite of DNS, DHCP, Web, FTP, Mail, VPN, Firewall and IPS/IDS services. Traffic Light Control Based on PLC (Programmable Logic Controller) , 11/2012-01/2013 101C0020-Electrical and Electronic Experiment, Zhejiang University Designed and implemented a traffic light PLC program through ladder logic using LogixPro Simulator. BUSINESS COURSE PROJECTS An Assessment of the Business Opportunity in Telehealth Industry , 09/2016 Minor Thesis, EIT Digital Master Programme Investigated extensively key technologies and market environment for health monitoring wearable products. Proposed a novel business model based on open and user innovation paradigm. Intellitest - Loved by Everyone Except Cheaters , 07/2015-08/2015 ME2078-Summer School: Security & Privacy in Digital Life, University of Trento Designed a smart anti-cheating system integrating machine learning capabilities to make online exams more trustful. Received the top 3 best entrepreneurial team prize. Locate - Locate Things Easily , 04/2015-05/2015 ME2073-Business Development Lab of Entrepreneurship Engineers, KTH Designed, validated and developed a complete business plan with a focus on the value proposition and customer validation of personal Internet of Things products. GreenCoating , 10/2012-09/2013 National Student Research Training Program (SRTP), Zhejiang University Led the development of a plant-derived antibacterial coating additive based on mentor's patents, in cooperation with Hangzhou Risun Chemical Technology Co., LTD. Received sponsorship also from National College Student Entrepreneurship Training Program(SIETP). CCIE CERTIFICATION TRACKS CCIE (Cisco Certificated Internetwork Expert) Data Center Written Exam, Score: 984/1000, Stockholm 05/2015 CCIE Routing and Switching Lab Exam, PASS, License #40343, Beijing 08/2013 CCIE Routing and Switching Written Exam, Score: 972/1000, Hangzhou 03/2013 SKILLS Programming: Python, Java, C/C++, JavaScript, HTML, CSS, Shell, SQL Networking: TCP/IP, Software-defined Networking, Wireless and Mobile Networking, Multimedia Networking Tools: JetBrains IDEs, Microsoft Office, Adobe Creative Suite, MySQL Platforms: Linux, Mac OS, Windows Languages: Chinese (native), English (professional), French (elementary) VOLUNTEER EXPERIENCE Environmental Volunteer of Hangzhou scenic areas, 03/2014 Kept the scenic environment clean, and the gardens out of damage. Inspired the environmental awareness of tourists. Lead Volunteer of Public Environmental Education, Anji, Zhejiang Province, China, 07/2012 - 08/2012 Organized a set of public environmental education activities with topics on plant protection, waste classification, and energy conservation with 30 volunteers. Presented as a good example and received Outstanding Collegiate Volunteer awards in the annual conference of Chinese Society for Environmental Sciences. Teaching Volunteer in Shilian Primary School of Suichang, Zhejiang Province, China, 07/2011 â€“ 08/2011 Served as a Chinese teacher for more than 20 pupils during the summer holiday. PUBLICATION \"JACPoL: A Simple but Expressive JSON-based Access Control Policy Language\". H. Jiang and A. Bouabdallah. Wistp 2017: International Conference on Information Security Theory and Practice, Springer Verlag, 28-29 September 2017. \"Towards a JSON-Based Fast Policy Evaluation Framework\". H. Jiang and A. Bouabdallah. In OTM Confederated International Conferences \"On the Move to Meaningful Internet Systems\", pp. 22-30. Springer, Cham, 2017. \"Controlled Replication for Higher Reliability and Predictability in Industrial IoT Networks\". H. Jiang , Z. Brodard, T.F. Chang, A. Bouabdallah, N. Montavont, G. Texier, P. Thubert, T. Watteyne, G. Z. Papadopoulos. In Proceedings of the 2017 International Conference on Embedded Wireless Systems and Networks (EWSN), Dependability Competition, ACM, Uppsala, Swedenâ€‹, February 20-22, 2017. \"Rover: Poor (but Elegant) Man's Testbed\". Z. Brodard, H. Jiang , T.F. Chang, T. Watteyne, X. Vilajosana, P. Thubert, G. Texier. In Proceedings of the 13th ACM Symposium on Performance Evaluation of Wireless Ad Hoc, Sensor, and Ubiquitous Networks (PE-WASUN 2016). pp. 61-65. ACM. November 17, 2016. \"A Secure Multi-Tenant Framework for SDN\". H. Jiang , A. Bouabdallah, A. Aflatoonian, J. M. Bonnin, K. Guillouard. In Proceedings of the 9th International Conference on Security of Information and Networks(SIN 2016). pp. 40-44. ACM, July 20, 2016. \"Timeslot Shifting for Lower-Priority Packets in a Time Slotted Network\". P. Thubert, Z. Brodard, H. Jiang . U.S.Patent 15/207,621 filed 12-Jul-2016. \"A 6loRH for Bit Strings\". P. Thubert, Z. Brodard, H. Jiang , & G. Texier. IETF Internet draft. Version: draft-thubert-6lo-bier-dispatch-01. IETF 6lo WG. June 29, 2016. \"BIER-TE-based OAM, Replication & Elimination\". P. Thubert, Z. Brodard, H. Jiang . IETF Internet draft. Version: draft-thubert-bier-replication-elimination-00. IETF BIER WG. September 14, 2016.","tags":"pages","url":"https://jiang-hao.com/pages/resume.html","loc":"https://jiang-hao.com/pages/resume.html"},{"title":"Search Results","text":"","tags":"pages","url":"https://jiang-hao.com/pages/search.html","loc":"https://jiang-hao.com/pages/search.html"},{"title":"æ•°æ®ç»“æ„ä¸ç®—æ³•â€”â€”å½’å¹¶æ’åº: æ•°ç»„&é“¾è¡¨&é€’å½’&éé€’å½’è§£æ³•å…¨å®¶æ¡¶","text":"ç®—æ³•ä»‹ç» å½’å¹¶æ’åºï¼ˆMerge sortï¼‰æ˜¯å»ºç«‹åœ¨å½’å¹¶æ“ä½œä¸Šçš„ä¸€ç§æœ‰æ•ˆçš„æ’åºç®—æ³•ã€‚è¯¥ç®—æ³•æ˜¯é‡‡ç”¨åˆ†æ²»æ³•ï¼ˆDivide and Conquerï¼‰çš„ä¸€ä¸ªéå¸¸å…¸å‹çš„åº”ç”¨ã€‚ ä½œä¸ºä¸€ç§å…¸å‹çš„åˆ†è€Œæ²»ä¹‹æ€æƒ³çš„ç®—æ³•åº”ç”¨ï¼Œå½’å¹¶æ’åºçš„å®ç°ç”±ä¸¤ç§æ–¹æ³•ï¼š è‡ªä¸Šè€Œä¸‹çš„é€’å½’ï¼šå®ƒä»æ ‘çš„é¡¶ç«¯å¼€å§‹ï¼Œç„¶åå‘ä¸‹æ“ä½œï¼Œæ¯æ¬¡æ“ä½œéƒ½é—®åŒæ ·çš„é—®é¢˜ï¼ˆæˆ‘éœ€è¦åšä»€ä¹ˆæ¥æ’åºè¿™ä¸ªæ•°ç»„ï¼Ÿï¼‰å¹¶å›ç­”å®ƒï¼ˆåˆ†æˆä¸¤ä¸ªå­æ•°ç»„ï¼Œè¿›è¡Œé€’å½’è°ƒç”¨ï¼Œåˆå¹¶ç»“æœï¼‰ï¼Œç›´åˆ°æˆ‘ä»¬åˆ°è¾¾æ ‘çš„åº•éƒ¨ã€‚ è‡ªä¸‹è€Œä¸Šçš„è¿­ä»£ï¼šä¸éœ€è¦é€’å½’ã€‚å®ƒç›´æ¥ä»æ ‘çš„åº•éƒ¨å¼€å§‹ï¼Œç„¶åé€šè¿‡éå†è¿™äº›ç‰‡æ®µå†å°†å®ƒä»¬åˆå¹¶èµ·æ¥ã€‚ åœ¨ã€Šæ•°æ®ç»“æ„ä¸ç®—æ³• JavaScript æè¿°ã€‹ä¸­ï¼Œä½œè€…ç»™å‡ºäº†è‡ªä¸‹è€Œä¸Šçš„è¿­ä»£æ–¹æ³•ã€‚ä½†æ˜¯å¯¹äºé€’å½’æ³•ï¼Œä½œè€…å´è®¤ä¸ºï¼š However, it is not possible to do so in JavaScript, as the recursion goes too deep for the language to handle. ç„¶è€Œï¼Œåœ¨ JavaScript ä¸­è¿™ç§æ–¹å¼ä¸å¤ªå¯è¡Œï¼Œå› ä¸ºè¿™ä¸ªç®—æ³•çš„é€’å½’æ·±åº¦å¯¹å®ƒæ¥è®²å¤ªæ·±äº†ã€‚ å’Œé€‰æ‹©æ’åºä¸€æ ·ï¼Œå½’å¹¶æ’åºçš„æ€§èƒ½ä¸å—è¾“å…¥æ•°æ®çš„å½±å“ï¼Œä½†è¡¨ç°æ¯”é€‰æ‹©æ’åºå¥½çš„å¤šï¼Œå› ä¸ºå§‹ç»ˆéƒ½æ˜¯ O(nlogn) çš„æ—¶é—´å¤æ‚åº¦ã€‚ä»£ä»·æ˜¯éœ€è¦é¢å¤–çš„å†…å­˜ç©ºé—´ã€‚ å½’å¹¶æ’åºåˆ†ä¸ºä¸‰ä¸ªè¿‡ç¨‹ï¼š å°†æ•°åˆ—åˆ’åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼ˆåœ¨å‡åŒ€åˆ’åˆ†æ—¶æ—¶é—´å¤æ‚åº¦ä¸º ï¼‰ï¼› é€’å½’åœ°åˆ†åˆ«å¯¹ä¸¤ä¸ªå­åºåˆ—è¿›è¡Œå½’å¹¶æ’åºï¼› åˆå¹¶ä¸¤ä¸ªå­åºåˆ—ã€‚ ä¸éš¾å‘ç°ï¼Œå½’å¹¶æ’åºçš„æ ¸å¿ƒæ˜¯å¦‚ä½•åˆå¹¶ä¸¤ä¸ªå­åºåˆ—ï¼Œå‰ä¸¤æ­¥éƒ½å¾ˆå¥½å®ç°ã€‚ å…¶å®åˆå¹¶çš„æ—¶å€™ä¹Ÿä¸éš¾æ“ä½œã€‚æ³¨æ„åˆ°ä¸¤ä¸ªå­åºåˆ—åœ¨ç¬¬äºŒæ­¥ä¸­å·²ç»ä¿è¯äº†éƒ½æ˜¯æœ‰åºçš„äº†ï¼Œç¬¬ä¸‰æ­¥ä¸­å®é™…ä¸Šæ˜¯æƒ³è¦æŠŠä¸¤ä¸ª æœ‰åº çš„åºåˆ—åˆå¹¶èµ·æ¥ã€‚ ç®—æ³•æ­¥éª¤ ç”³è¯·ç©ºé—´ï¼Œä½¿å…¶å¤§å°ä¸ºä¸¤ä¸ªå·²ç»æ’åºåºåˆ—ä¹‹å’Œï¼Œè¯¥ç©ºé—´ç”¨æ¥å­˜æ”¾åˆå¹¶åçš„åºåˆ—ï¼› è®¾å®šä¸¤ä¸ªæŒ‡é’ˆï¼Œæœ€åˆä½ç½®åˆ†åˆ«ä¸ºä¸¤ä¸ªå·²ç»æ’åºåºåˆ—çš„èµ·å§‹ä½ç½®ï¼› æ¯”è¾ƒä¸¤ä¸ªæŒ‡é’ˆæ‰€æŒ‡å‘çš„å…ƒç´ ï¼Œé€‰æ‹©ç›¸å¯¹å°çš„å…ƒç´ æ”¾å…¥åˆ°åˆå¹¶ç©ºé—´ï¼Œå¹¶ç§»åŠ¨æŒ‡é’ˆåˆ°ä¸‹ä¸€ä½ç½®ï¼› é‡å¤æ­¥éª¤ 3 ç›´åˆ°æŸä¸€æŒ‡é’ˆè¾¾åˆ°åºåˆ—å°¾ï¼› å°†å¦ä¸€åºåˆ—å‰©ä¸‹çš„æ‰€æœ‰å…ƒç´ ç›´æ¥å¤åˆ¶åˆ°åˆå¹¶åºåˆ—å°¾ã€‚ ä»£ç å®ç° æ•°ç»„å®ç°æ—¶é—´å¤æ‚åº¦ O(NlogN) ï¼Œç©ºé—´å¤æ‚åº¦ O(N) é€’å½’å®ç°ä¸€ï¼šæ¯æ¬¡å½’å¹¶æ—¶éƒ½åˆ›å»ºä¸€ä¸ªè¾…åŠ©æ•°ç»„ public static int [] sort ( int [] nums ) { // å¯¹æ•°ç»„è¿›è¡Œæ‹·è´ï¼Œä¸æ”¹å˜å‚æ•°å†…å®¹ int [] arr = Arrays . copyOf ( nums , nums . length ); if ( arr . length < 2 ) return arr ; int middle = ( int ) Math . floor ( arr . length >> 1 ); int [] left = Arrays . copyOfRange ( arr , 0 , middle ); int [] right = Arrays . copyOfRange ( arr , middle , arr . length ); return merge ( sort ( left ), sort ( right )); } public static int [] merge ( int [] left , int [] right ) { // åˆ›å»ºä¸€ä¸ªè¾…åŠ©æ•°ç»„å­˜å‚¨å½’å¹¶ç»“æœ int [] result = new int [ left . length + right . length ] ; int i = 0 , j = 0 ; while ( i + j < result . length ) { // å³ä¾§æ•°ç»„å…¨éƒ½è½¬å­˜å®Œæ—¶ï¼Œç›´æ¥å°†å·¦ä¾§æ•°ç»„å‰©ä½™çš„å…ƒç´ è½¬å­˜åˆ°ç»“æœæ•°ç»„ if ( j == right . length ) { result [ i + j ] = left [ i ++] ; } // å·¦ä¾§æ•°ç»„å…¨éƒ½è½¬å­˜å®Œæ—¶ï¼Œç›´æ¥å°†å³ä¾§æ•°ç»„å‰©ä½™çš„å…ƒç´ è½¬å­˜åˆ°ç»“æœæ•°ç»„ else if ( i == left . length ) { result [ i + j ] = right [ j ++] ; } // å¦åˆ™ï¼Œå°†ä¸¤ä¸ªå­æ•°ç»„å½“å‰å…ƒç´ ä¸­è¾ƒå°çš„é‚£ä¸ªè½¬å­˜åˆ°ç»“æœæ•°ç»„ä¸­ else result [ i + j ] = left [ i ]<= right [ j ]? left [ i ++] : right [ j ++] ; } return result ; } åŠ›æ‰£è¿è¡Œç»“æœï¼š æ‰§è¡Œç”¨æ—¶ï¼š10 ms, åœ¨æ‰€æœ‰ Java æäº¤ä¸­å‡»è´¥äº†30.97%çš„ç”¨æˆ· å†…å­˜æ¶ˆè€—ï¼š44.2 MB, åœ¨æ‰€æœ‰ Java æäº¤ä¸­å‡»è´¥äº†99.55%çš„ç”¨æˆ· æäº¤æ—¶é—´ æäº¤ç»“æœ è¿è¡Œæ—¶é—´ å†…å­˜æ¶ˆè€— è¯­è¨€ å‡ ç§’å‰ é€šè¿‡ 10 ms 43.8 MB Java å‡ ç§’å‰ é€šè¿‡ 10 ms 43.9 MB Java å‡ ç§’å‰ é€šè¿‡ 10 ms 44.1 MB Java é€’å½’å®ç°äºŒï¼šä»…åˆ›å»ºä¸€æ¬¡ä¸€ä¸ªç­‰é•¿çš„è¾…åŠ©æ•°ç»„ï¼Œäº¤æ›¿å½’å¹¶ /** * é€’å½’äº¤æ›¿åˆå¹¶ * @param src å¾…åˆå¹¶çš„æ•°ç»„ * @param dst åˆå¹¶ç»“æœæ•°ç»„ * @param start æ•°ç»„ src çš„ start ä¸‹æ ‡ * @param end æ•°ç»„ src çš„ end ä¸‹æ ‡ */ public static void sort ( int [] src , int [] dst , int start , int end ) { // å½“å¾…æ’åºæ®µ[start,end)ä»…åŒ…å«å°äºç­‰äºä¸€ä¸ªå…ƒç´ æ—¶ï¼Œè‡ªç„¶æœ‰åº if ( end - start < 2 ) { dst [ start ]= src [ start ] ; return ; } // å°†å·¦å³ä¸¤æ®µå­æ•°ç»„åˆ†åˆ«æ’å¥½åº int i = start + ( end - start ) / 4 ; int ii = start + ( end - start ) / 2 ; int iii = start + 3 * ( end - start ) / 4 ; sort ( src , dst , start , i ); sort ( src , dst , i , ii ); sort ( src , dst , ii , iii ); sort ( src , dst , iii , end ); merge ( dst , src , start , i , ii ); merge ( dst , src , ii , iii , end ); // æœ€åå½’å¹¶ merge ( src , dst , start , ii , end ); } /** * å½’å¹¶æ–¹æ³•ï¼šåˆå¹¶å·¦å³ä¸¤æ®µå·²åˆ†åˆ«æ’å¥½åºçš„ src[start:middle) å’Œ src[middle:end) åˆ° dst[start:end) * æ•°ç»„ src çš„ [start:middle) éƒ¨åˆ†ä»¥åŠ [middle:end) éƒ¨åˆ†éƒ½å·²ç»å„è‡ªæ’å¥½åº * @param src å¾…åˆå¹¶çš„æ•°ç»„ * @param dst åˆå¹¶ç»“æœæ•°ç»„ * @param start æ•°ç»„ src çš„ start ä¸‹æ ‡ * @param middle æ•°ç»„ src çš„ middle ä¸‹æ ‡ * @param end æ•°ç»„ src çš„ end ä¸‹æ ‡ */ private static void merge ( int [] src , int [] dst , int start , int middle , int end ){ int i = start ; int j = middle ; int k = start ; while ( k < end ) { // å³ä¾§æ•°ç»„å…¨éƒ½è½¬å­˜å®Œæ—¶ï¼Œç›´æ¥å°†å·¦ä¾§æ•°ç»„å‰©ä½™çš„å…ƒç´ è½¬å­˜åˆ°ç»“æœæ•°ç»„ if ( j == end ) { dst [ k ++] = src [ i ++] ; } // å·¦ä¾§æ•°ç»„å…¨éƒ½è½¬å­˜å®Œæ—¶ï¼Œç›´æ¥å°†å³ä¾§æ•°ç»„å‰©ä½™çš„å…ƒç´ è½¬å­˜åˆ°ç»“æœæ•°ç»„ else if ( i == middle ) { dst [ k ++] = src [ j ++] ; } // å¦åˆ™ï¼Œå°†ä¸¤ä¸ªå­æ•°ç»„å½“å‰å…ƒç´ ä¸­è¾ƒå°çš„é‚£ä¸ªè½¬å­˜åˆ°ç»“æœæ•°ç»„ä¸­ else dst [ k ++] = src [ i ]<= src [ j ]? src [ i ++] : src [ j ++] ; } } åŠ›æ‰£è¿è¡Œç»“æœï¼š æ‰§è¡Œç”¨æ—¶ï¼š6 ms, åœ¨æ‰€æœ‰ Java æäº¤ä¸­å‡»è´¥äº†64.16%çš„ç”¨æˆ· å†…å­˜æ¶ˆè€—ï¼š45.7 MB, åœ¨æ‰€æœ‰ Java æäº¤ä¸­å‡»è´¥äº†86.98%çš„ç”¨æˆ· æäº¤æ—¶é—´ æäº¤ç»“æœ è¿è¡Œæ—¶é—´ å†…å­˜æ¶ˆè€— è¯­è¨€ å‡ ç§’å‰ é€šè¿‡ 6 ms 46.3 MB Java å‡ ç§’å‰ é€šè¿‡ 6 ms 45.9 MB Java å‡ ç§’å‰ é€šè¿‡ 6 ms 46 MB Java éé€’å½’å®ç° /** * å½’å¹¶æ–¹æ³•ï¼šåˆå¹¶å·¦å³ä¸¤æ®µå·²åˆ†åˆ«æ’å¥½åºçš„ src[start:middle) å’Œ src[middle:end) åˆ° dst[start:end) * æ•°ç»„ src çš„ [start:middle) éƒ¨åˆ†ä»¥åŠ [middle:end) éƒ¨åˆ†éƒ½å·²ç»å„è‡ªæ’å¥½åº * @param src å¾…åˆå¹¶çš„æ•°ç»„ * @param dst åˆå¹¶ç»“æœæ•°ç»„ * @param start æ•°ç»„ src çš„ start ä¸‹æ ‡ * @param middle æ•°ç»„ src çš„ middle ä¸‹æ ‡ * @param end æ•°ç»„ src çš„ end ä¸‹æ ‡ */ private static void merge ( int [] src , int [] dst , int start , int middle , int end ){ int i = start ; int j = middle ; int k = start ; while ( k < end ) { if ( i == middle ) dst [ k ++] = src [ j ++] ; else if ( j == end ) dst [ k ++] = src [ i ++] ; else dst [ k ++] = src [ i ] <= src [ j ] ? src [ i ++] : src [ j ++] ; } } /** * ç”¨äºåˆå¹¶æ’å¥½åºçš„ç›¸é‚»æ•°ç»„æ®µ * å°† x åˆå¹¶åˆ° y * @param x * @param y * @param s åˆå¹¶å¤§å° */ private static void mergePass ( int [] x , int [] y , int s ){ //ä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ int i = 0 ; //i+2*s è¦å°äºç­‰äºæ•°ç»„é•¿åº¦ï¼Œä¹Ÿå°±æ˜¯è¯´æœªåˆå¹¶çš„å…ƒç´ ä¸ªæ•°è¦å¤§äº2*s while ( i + 2 * s <= x . length ) { //åˆå¹¶å¤§å°ä¸ºsçš„ç›¸é‚»2æ®µå­æ•°ç»„ merge ( x , y , i , i + s , i + 2 * s ); i += 2 * s ; } //æ­¤å¾ªç¯æ‰§è¡Œçš„æ¬¡æ•°ä¸ºï¼š x.length/(2*s) æ¬¡ 9/(2*1)=4 //è‹¥æœªåˆå¹¶çš„å…ƒç´ ä¸ªæ•°å¤§äº 1*sï¼Œåˆ™åˆå¹¶æœ€åä¸¤ä¸ªåºåˆ— if ( i + s < x . length ) merge ( x , y , i , i + s , x . length ); //å¦åˆ™ç›´æ¥å¤åˆ¶åˆ°y else { while ( i < x . length ) { y [ i ] = x [ i ++] ; } } } /** * æ¶ˆå»é€’å½’åçš„å½’å¹¶æ’åºç®—æ³• * @param a */ public static void mergeSort ( int [] a ){ //ç”³è¯·ä¸ªå¤§å°å’Œaç›¸ç­‰çš„æ•°ç»„b int [] tmp = new int [ a . length ] ; int s = 1 ; //è¿™é‡Œä¸èƒ½ä¸º<= while ( s < a . length ) { //äº¤æ›¿åˆå¹¶ mergePass ( a , tmp , s ); s *= 2 ; mergePass ( tmp , a , s ); s *= 2 ; } } åŠ›æ‰£æ‰§è¡Œç»“æœï¼š æ‰§è¡Œç”¨æ—¶ï¼š7 ms, åœ¨æ‰€æœ‰ Java æäº¤ä¸­å‡»è´¥äº†55.19%çš„ç”¨æˆ· å†…å­˜æ¶ˆè€—ï¼š45.8 MB, åœ¨æ‰€æœ‰ Java æäº¤ä¸­å‡»è´¥äº†75.00%çš„ç”¨æˆ· æäº¤æ—¶é—´ æäº¤ç»“æœ è¿è¡Œæ—¶é—´ å†…å­˜æ¶ˆè€— è¯­è¨€ å‡ ç§’å‰ é€šè¿‡ 7 ms 45.8 MB Java å‡ ç§’å‰ é€šè¿‡ 8 ms 45.7 MB Java å‡ ç§’å‰ é€šè¿‡ 7 ms 45.7 MB Java é“¾è¡¨å®ç°æ—¶é—´å¤æ‚åº¦ O(NlogN) ï¼Œç©ºé—´å¤æ‚åº¦ O(1) é€’å½’å®ç° static class ListNode { int val ; ListNode next ; ListNode () {} ListNode ( int val ) { this . val = val ; } ListNode ( int val , ListNode next ) { this . val = val ; this . next = next ; } } public static ListNode sortList ( ListNode head ) { if ( head == null || head . next == null ) return head ; //é“¾è¡¨çš„å¿«æ…¢æŒ‡é’ˆäºŒåˆ†æ³• ListNode slow = head ; ListNode fast = head . next ; while ( fast != null && fast . next != null ) { slow = slow . next ; fast = fast . next . next ; } //æ‰¾åˆ°ä¸­é—´èŠ‚ç‚¹ ListNode tmp = slow . next ; //äºŒåˆ†åˆ‡å‰²é“¾è¡¨ slow . next = null ; //é€’å½’è°ƒç”¨å½’å¹¶ return merge ( sortList ( head ), sortList ( tmp )); } public static ListNode merge ( ListNode left , ListNode right ) { //åˆ›å»ºå“¨å…µèŠ‚ç‚¹ï¼Œå­˜æ”¾å½’å¹¶ç»“æœ ListNode sentinel = new ListNode ( - 1 ); //åˆ›å»ºæŒ‡é’ˆï¼Œç»´æŠ¤å°¾èŠ‚ç‚¹ ListNode tail = sentinel ; //ä¸¤ä¸ªå­é“¾éƒ½è¿˜å­˜åœ¨èŠ‚ç‚¹æ—¶ï¼Œè¿›å…¥å¾ªç¯ä½“ while ( left != null && right != null ) { //è¾ƒå°çš„èŠ‚ç‚¹æ”¾å…¥ç»“æœé“¾è¡¨ï¼Œå¯¹åº”å­é“¾å»å¤´ if ( left . val <= right . val ) { tail . next = left ; left = left . next ; } else { tail . next = right ; right = right . next ; } //æ›´æ–°å°¾èŠ‚ç‚¹ tail = tail . next ; } //å°†è¿˜æœ‰å‰©ä½™èŠ‚ç‚¹çš„å­é“¾ç›´æ¥å°¾æ¥åˆ°ç»“æœé“¾ tail . next = left == null ? right : left ; //è¿”å›å½’å¹¶ç»“æœ return sentinel . next ; } åŠ›æ‰£æ‰§è¡Œç»“æœï¼š æ‰§è¡Œç”¨æ—¶ï¼š6 ms, åœ¨æ‰€æœ‰ Java æäº¤ä¸­å‡»è´¥äº†53.76%çš„ç”¨æˆ· å†…å­˜æ¶ˆè€—ï¼š46.5 MB, åœ¨æ‰€æœ‰ Java æäº¤ä¸­å‡»è´¥äº†23.27%çš„ç”¨æˆ· æäº¤æ—¶é—´ æäº¤ç»“æœ è¿è¡Œæ—¶é—´ å†…å­˜æ¶ˆè€— è¯­è¨€ å‡ ç§’å‰ é€šè¿‡ 6 ms 46.5 MB Java 2 åˆ†é’Ÿå‰ é€šè¿‡ 6 ms 47 MB Java 2 åˆ†é’Ÿå‰ é€šè¿‡ 6 ms 46.6 MB Java éé€’å½’å®ç°(ä»åº•è‡³é¡¶ç›´æ¥åˆå¹¶) public static ListNode sortList ( ListNode head ) { ListNode h = head ; int length = 0 ; int blockSize = 1 ; while ( h != null ) { h = h . next ; length += 1 ; } ListNode res = new ListNode ( - 1 ); res . next = head ; // ä»1åˆ°lengthè¿­ä»£å•å…ƒå—å¤§å° while ( blockSize < length ) { ListNode pre = res ; h = res . next ; // ä¸¤ä¸¤éå†æ‰€æœ‰å•å…ƒå— while ( h != null ) { ListNode h1 = h ; int i = blockSize ; while ( i > 0 && h != null ) { h = h . next ; i -= 1 ; } if ( i > 0 ) break ; ListNode h2 = h ; i = blockSize ; while ( i > 0 && h != null ) { h = h . next ; i -= 1 ; } int c1 = blockSize ; int c2 = blockSize - i ; while ( c1 > 0 && c2 > 0 ) { if ( h1 . val <= h2 . val ) { pre . next = h1 ; h1 = h1 . next ; c1 -= 1 ; } else { pre . next = h2 ; h2 = h2 . next ; c2 -= 1 ; } pre = pre . next ; } pre . next = c1 > 0 ? h1 : h2 ; while ( c1 > 0 || c2 > 0 ) { pre = pre . next ; c1 -= 1 ; c2 -= 1 ; } pre . next = h ; } blockSize *= 2 ; } return res . next ; } åŠ›æ‰£æ‰§è¡Œç»“æœï¼š æ‰§è¡Œç”¨æ—¶ï¼š8 ms, åœ¨æ‰€æœ‰ Java æäº¤ä¸­å‡»è´¥äº†41.64%çš„ç”¨æˆ· å†…å­˜æ¶ˆè€—ï¼š43.1 MB, åœ¨æ‰€æœ‰ Java æäº¤ä¸­å‡»è´¥äº†66.86%çš„ç”¨æˆ· æäº¤æ—¶é—´ æäº¤ç»“æœ è¿è¡Œæ—¶é—´ å†…å­˜æ¶ˆè€— è¯­è¨€ å‡ ç§’å‰ é€šè¿‡ 8 ms 43.1 MB Java 3 åˆ†é’Ÿå‰ é€šè¿‡ 9 ms 43.1 MB Java 7 åˆ†é’Ÿå‰ é€šè¿‡ 8 ms 42.8 MB Java ç®—æ³•å¤æ‚åº¦ æœ€ä¼˜æ—¶é—´å¤æ‚åº¦ï¼šO(n*log(n)) æœ€åæ—¶é—´å¤æ‚åº¦ï¼šO(n*log(n)) å¹³å‡æ—¶é—´å¤æ‚åº¦ï¼šO(n*log(n)) æœ€åç©ºé—´å¤æ‚åº¦ï¼šæ€»å…±O(n)ï¼Œè¾…åŠ©O(n)ï¼›å½“ä½¿ç”¨linked listï¼Œè¾…åŠ©ç©ºé—´ä¸ºO(1).","tags":"Algorithms","url":"https://jiang-hao.com/articles/2020/algorithms-algorithms-merge-sort.html","loc":"https://jiang-hao.com/articles/2020/algorithms-algorithms-merge-sort.html"},{"title":"æ•°æ®ç»“æ„ä¸ç®—æ³•â€”â€”æ’å…¥æ’åºï¼ˆæ‰‘å…‹ç‰Œæ’åºï¼‰","text":"ç®—æ³•åŸç† æ’å…¥æ’åºçš„ä»£ç å®ç°è™½ç„¶æ²¡æœ‰å†’æ³¡æ’åºå’Œé€‰æ‹©æ’åºé‚£ä¹ˆç®€å•ç²—æš´ï¼Œä½†å®ƒçš„åŸç†åº”è¯¥æ˜¯æœ€å®¹æ˜“ç†è§£çš„äº†ï¼Œå› ä¸ºåªè¦æ‰“è¿‡æ‰‘å…‹ç‰Œçš„äººéƒ½åº”è¯¥èƒ½å¤Ÿç§’æ‡‚ã€‚æ’å…¥æ’åºæ˜¯ä¸€ç§æœ€ç®€å•ç›´è§‚çš„æ’åºç®—æ³•ï¼Œå®ƒçš„å·¥ä½œåŸç†æ˜¯é€šè¿‡æ„å»ºæœ‰åºåºåˆ—ï¼Œå¯¹äºæœªæ’åºæ•°æ®ï¼Œåœ¨å·²æ’åºåºåˆ—ä¸­ä»åå‘å‰æ‰«æï¼Œæ‰¾åˆ°ç›¸åº”ä½ç½®å¹¶æ’å…¥ã€‚ï¼ˆæœ‰ç‚¹åƒæ‰‘å…‹ç‰Œåœ¨æ‰‹ä¸Šæ’åºçš„è¿‡ç¨‹ï¼‰ æ’å…¥æ’åºå’Œå†’æ³¡æ’åºä¸€æ ·ï¼Œä¹Ÿæœ‰ä¸€ç§ä¼˜åŒ–ç®—æ³•ï¼Œå«åšæ‹†åŠæ’å…¥ã€‚ æ’åºæ­¥éª¤ å°†å¾…æ’åºåºåˆ—ç¬¬ä¸€ä¸ªå…ƒç´ çœ‹åšä¸€ä¸ªæœ‰åºåºåˆ—ï¼ŒæŠŠç¬¬äºŒä¸ªå…ƒç´ åˆ°æœ€åä¸€ä¸ªå…ƒç´ å½“æˆæ˜¯æœªæ’åºåºåˆ—ã€‚ä»å¤´åˆ°å°¾ä¾æ¬¡æ‰«ææœªæ’åºåºåˆ—ï¼Œå°†æ‰«æåˆ°çš„æ¯ä¸ªå…ƒç´ æ’å…¥æœ‰åºåºåˆ—çš„é€‚å½“ä½ç½®ã€‚ï¼ˆå¦‚æœå¾…æ’å…¥çš„å…ƒç´ ä¸æœ‰åºåºåˆ—ä¸­çš„æŸä¸ªå…ƒç´ ç›¸ç­‰ï¼Œåˆ™å°†å¾…æ’å…¥å…ƒç´ æ’å…¥åˆ°ç›¸ç­‰å…ƒç´ çš„åé¢ã€‚ï¼‰ åœ¨å…¶å®ç°è¿‡ç¨‹ä½¿ç”¨åŒå±‚å¾ªç¯ï¼Œå¤–å±‚å¾ªç¯å¯¹é™¤äº†ç¬¬ä¸€ä¸ªå…ƒç´ ä¹‹å¤–çš„æ‰€æœ‰å…ƒç´ ï¼Œå†…å±‚å¾ªç¯å¯¹å½“å‰å…ƒç´ å‰é¢æœ‰åºè¡¨è¿›è¡Œå¾…æ’å…¥ä½ç½®æŸ¥æ‰¾ï¼Œå¹¶è¿›è¡Œç§»åŠ¨ã€‚ åŠ¨å›¾æ¼”ç¤º ä»£ç å®ç° public static int [] insert_sort_original ( int [] nums ) { int [] arr = Arrays . copyOf ( nums , nums . length ); int valuationCnt = 0 ; // èµ‹å€¼æ“ä½œè®¡æ•° int comparisonCnt = 0 ; // æ¯”è¾ƒæ“ä½œè®¡æ•° for ( int i = 1 ; i < nums . length ; i ++ ) { int target = arr [ i ] ; int j ; for ( j = i ; j > 0 && target < arr [ j - 1 ] ; j -- ) { valuationCnt ++ ; comparisonCnt ++ ; arr [ j ] = arr [ j - 1 ] ; } arr [ j ] = target ; } System . out . println ( comparisonCnt + \",\" + valuationCnt ); return arr ; } å¤æ‚åº¦åˆ†æ æ—¶é—´å¤æ‚åº¦ åœ¨æ’å…¥æ’åºä¸­ï¼Œå½“å¾…æ’åºæ•°ç»„æ˜¯æœ‰åºæ—¶ï¼Œæ˜¯æœ€ä¼˜çš„æƒ…å†µï¼Œåªéœ€å½“å‰æ•°è·Ÿå‰ä¸€ä¸ªæ•°æ¯”è¾ƒä¸€ä¸‹å°±å¯ä»¥äº†ï¼Œè¿™æ—¶ä¸€å…±éœ€è¦æ¯”è¾ƒN- 1æ¬¡ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(N)ã€‚ æœ€åçš„æƒ…å†µæ˜¯å¾…æ’åºæ•°ç»„æ˜¯é€†åºçš„ï¼Œæ­¤æ—¶éœ€è¦æ¯”è¾ƒæ¬¡æ•°æœ€å¤šï¼Œæ€»æ¬¡æ•°è®°ä¸ºï¼š1+2+3+â€¦+N-1ï¼Œæ‰€ä»¥ï¼Œæ’å…¥æ’åºæœ€åæƒ…å†µä¸‹çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(N&#94;2)ã€‚ ç©ºé—´å¤æ‚åº¦ æ’å…¥æ’åºçš„ç©ºé—´å¤æ‚åº¦ä¸ºå¸¸æ•°é˜¶O(1)ã€‚ æ€»ç»“ å¹³å‡æ—¶é—´å¤æ‚åº¦ æœ€åæ—¶é—´å¤æ‚åº¦ æœ€ä¼˜æ—¶é—´å¤æ‚åº¦ ç©ºé—´å¤æ‚åº¦ ç¨³å®šæ€§ ç¨³å®š ç®—æ³•ä¼˜åŒ– æŠ˜åŠæ’å…¥ï¼ˆäºŒåˆ†æŸ¥æ‰¾ï¼‰ äºŒåˆ†æŸ¥æ‰¾æ’å…¥æ’åºçš„åŸç†ï¼šæ˜¯ç›´æ¥æ’å…¥æ’åºçš„ä¸€ä¸ªå˜ç§ï¼ŒåŒºåˆ«æ˜¯ï¼šåœ¨æœ‰åºåŒºä¸­æŸ¥æ‰¾æ–°å…ƒç´ æ’å…¥ä½ç½®æ—¶ï¼Œä¸ºäº†å‡å°‘å…ƒç´ æ¯”è¾ƒæ¬¡æ•°æé«˜æ•ˆç‡ï¼Œé‡‡ç”¨äºŒåˆ†æŸ¥æ‰¾ç®—æ³•è¿›è¡Œæ’å…¥ä½ç½®çš„ç¡®å®šã€‚ public static int [] insert_sort_binary_search ( int [] nums ) { int [] arr = Arrays . copyOf ( nums , nums . length ); int valuationCnt = 0 ; int comparisonCnt = 0 ; for ( int i = 1 ; i < nums . length ; i ++ ) { int target = arr [ i ] ; int left = 0 ; int right = i ; while ( left < right ) { comparisonCnt ++ ; int middle = left + ( right - left ) / 2 ; if ( arr [ middle ] > target ) { right = middle ; } else { left = middle + 1 ; } } int j ; for ( j = i ; j > left ; j -- ) { valuationCnt ++ ; arr [ j ] = arr [ j - 1 ] ; } arr [ j ] = target ; } System . out . println ( comparisonCnt + \",\" + valuationCnt ); return arr ; } ä¼˜åŒ–ç»“æœ è¿è¡Œç›´æ¥æ’å…¥æ’åºä»£ç å’ŒäºŒåˆ†æ’å…¥æ’åºä»£ç ï¼Œä½¿ç”¨æ•°æ®é›†https://leetcode-cn.com/submissions/detail/114474973/testcase/æµ‹è¯•è¿è¡Œï¼Œå¾—ç»“æœå¦‚ä¸‹ï¼š 622443661 , 622443661 // ç›´æ¥æ’å…¥æ’åº 711424 , 622443661 // äºŒåˆ†æ’å…¥æ’åº å¯è§äºŒåˆ†æ’å…¥æ’åºå¤§å¤§é™ä½äº†å…ƒç´ çš„æ¯”è¾ƒæ¬¡æ•°ï¼Œå…¶æ—¶é—´å¤æ‚åº¦å¦‚ä¸‹ï¼š æœ€å¥½æƒ…å†µ ï¼šæŸ¥æ‰¾çš„ä½ç½®æ˜¯æœ‰åºåŒºçš„æœ€åä¸€ä½åé¢ä¸€ä½ï¼Œåˆ™æ— é¡»è¿›è¡Œåç§»èµ‹å€¼æ“ä½œï¼Œå…¶æ¯”è¾ƒæ¬¡æ•°ä¸ºï¼šlog2n ã€‚å³O(log2N)ã€‚ æœ€åæƒ…å†µ ï¼šæŸ¥æ‰¾çš„ä½ç½®æ˜¯æœ‰åºåŒºçš„ç¬¬ä¸€ä¸ªä½ç½®ï¼Œåˆ™éœ€è¦çš„æ¯”è¾ƒæ¬¡æ•°ä¸ºï¼šlog2nï¼Œéœ€è¦çš„èµ‹å€¼æ“ä½œæ¬¡æ•°ä¸ºn(n-1)/2åŠ ä¸Š (n-1) æ¬¡ã€‚å³O(N&#94;2)ã€‚ å¹³å‡æ—¶é—´å¤æ‚åº¦ ï¼šO(N&#94;2)ã€‚ ä»å®ç°åŸç†å¯çŸ¥ï¼ŒäºŒåˆ†æŸ¥æ‰¾æ’å…¥æ’åºæ˜¯åœ¨åŸè¾“å…¥æ•°ç»„ä¸Šè¿›è¡Œåç§»èµ‹å€¼æ“ä½œçš„ï¼ˆç§°\"å°±åœ°æ’åº\"ï¼‰ï¼Œæ‰€éœ€å¼€è¾Ÿçš„è¾…åŠ©ç©ºé—´è·Ÿè¾“å…¥æ•°ç»„è§„æ¨¡æ— å…³ï¼Œæ‰€ä»¥ ç©ºé—´å¤æ‚åº¦ ä¸ºï¼šO(1)ã€‚","tags":"Algorithms","url":"https://jiang-hao.com/articles/2020/algorithms-algorithms-insert-sort.html","loc":"https://jiang-hao.com/articles/2020/algorithms-algorithms-insert-sort.html"},{"title":"æ•°æ®ç»“æ„ä¸ç®—æ³•â€”â€”å¸Œå°”æ’åº","text":"ç®—æ³•åŸç† å¸Œå°”æ’åºï¼Œä¹Ÿç§°é€’å‡å¢é‡æ’åºç®—æ³•ï¼Œæ˜¯æ’å…¥æ’åºçš„ä¸€ç§æ›´é«˜æ•ˆçš„æ”¹è¿›ç‰ˆæœ¬ã€‚ä½†å¸Œå°”æ’åºæ˜¯éç¨³å®šæ’åºç®—æ³•ã€‚ å¸Œå°”æ’åºæ˜¯åŸºäºæ’å…¥æ’åºçš„ä»¥ä¸‹ä¸¤ç‚¹æ€§è´¨è€Œæå‡ºæ”¹è¿›æ–¹æ³•çš„ï¼š æ’å…¥æ’åºåœ¨å¯¹å‡ ä¹å·²ç»æ’å¥½åºçš„æ•°æ®æ“ä½œæ—¶ï¼Œæ•ˆç‡é«˜ï¼Œå³å¯ä»¥è¾¾åˆ°çº¿æ€§æ’åºçš„æ•ˆç‡ï¼› ä½†æ’å…¥æ’åºä¸€èˆ¬æ¥è¯´æ˜¯ä½æ•ˆçš„ï¼Œå› ä¸ºæ’å…¥æ’åºæ¯æ¬¡åªèƒ½å°†æ•°æ®ç§»åŠ¨ä¸€ä½ï¼› å¸Œå°”æ’åºçš„åŸºæœ¬æ€æƒ³æ˜¯ï¼šå…ˆå°†æ•´ä¸ªå¾…æ’åºçš„è®°å½•åºåˆ—åˆ†å‰²æˆä¸ºè‹¥å¹²å­åºåˆ—åˆ†åˆ«è¿›è¡Œç›´æ¥æ’å…¥æ’åºï¼Œå¾…æ•´ä¸ªåºåˆ—ä¸­çš„è®°å½•\"åŸºæœ¬æœ‰åº\"æ—¶ï¼Œå†å¯¹å…¨ä½“è®°å½•è¿›è¡Œä¾æ¬¡ç›´æ¥æ’å…¥æ’åºã€‚ è¯¥æ–¹æ³•å®è´¨ä¸Šæ˜¯ä¸€ç§åˆ†ç»„æ’å…¥æ–¹æ³• ã€‚ å¸Œå°”æ’åºæŠŠå…ƒç´ æŒ‰ä¸‹æ ‡çš„ä¸€å®šå¢é‡åˆ†ç»„ï¼Œå¯¹æ¯ç»„ä½¿ç”¨ç›´æ¥æ’å…¥æ’åºç®—æ³•æ’åºï¼›éšç€å¢é‡é€æ¸å‡å°‘ï¼Œæ¯ç»„åŒ…å«çš„å…³é”®è¯è¶Šæ¥è¶Šå¤šï¼Œå½“å¢é‡å‡è‡³1æ—¶ï¼Œæ•´ä¸ªæ–‡ä»¶æ°è¢«åˆ†æˆä¸€ç»„ï¼Œç®—æ³•ä¾¿ç»ˆæ­¢ã€‚ ç®€å•æ’å…¥æ’åºå¾ˆå¾ªè§„è¹ˆçŸ©ï¼Œä¸ç®¡æ•°ç»„åˆ†å¸ƒæ˜¯æ€ä¹ˆæ ·çš„ï¼Œä¾ç„¶ä¸€æ­¥ä¸€æ­¥çš„å¯¹å…ƒç´ è¿›è¡Œæ¯”è¾ƒï¼Œç§»åŠ¨ï¼Œæ’å…¥ï¼Œæ¯”å¦‚[5,4,3,2,1,0]è¿™ç§å€’åºåºåˆ—ï¼Œæ•°ç»„æœ«ç«¯çš„0è¦å›åˆ°é¦–ä½ç½®å¾ˆæ˜¯è´¹åŠ²ï¼Œæ¯”è¾ƒå’Œç§»åŠ¨å…ƒç´ å‡éœ€n-1æ¬¡ã€‚è€Œå¸Œå°”æ’åºåœ¨æ•°ç»„ä¸­é‡‡ç”¨è·³è·ƒå¼åˆ†ç»„çš„ç­–ç•¥ï¼Œé€šè¿‡æŸä¸ªå¢é‡å°†æ•°ç»„å…ƒç´ åˆ’åˆ†ä¸ºè‹¥å¹²ç»„ï¼Œç„¶ååˆ†ç»„è¿›è¡Œæ’å…¥æ’åºï¼Œéšåé€æ­¥ç¼©å°å¢é‡ï¼Œç»§ç»­æŒ‰ç»„è¿›è¡Œæ’å…¥æ’åºæ“ä½œï¼Œç›´è‡³å¢é‡ä¸º1ã€‚å¸Œå°”æ’åºé€šè¿‡è¿™ç§ç­–ç•¥ä½¿å¾—æ•´ä¸ªæ•°ç»„åœ¨åˆå§‹é˜¶æ®µè¾¾åˆ°ä»å®è§‚ä¸Šçœ‹åŸºæœ¬æœ‰åºï¼Œå°çš„åŸºæœ¬åœ¨å‰ï¼Œå¤§çš„åŸºæœ¬åœ¨åã€‚ç„¶åç¼©å°å¢é‡ï¼Œåˆ°å¢é‡ä¸º1æ—¶ï¼Œå…¶å®å¤šæ•°æƒ…å†µä¸‹åªéœ€å¾®è°ƒå³å¯ï¼Œä¸ä¼šæ¶‰åŠè¿‡å¤šçš„æ•°æ®ç§»åŠ¨ã€‚ æˆ‘ä»¬æ¥çœ‹ä¸‹å¸Œå°”æ’åºçš„åŸºæœ¬æ­¥éª¤ï¼Œåœ¨æ­¤æˆ‘ä»¬é€‰æ‹©å¢é‡gap=length/2ï¼Œç¼©å°å¢é‡ç»§ç»­ä»¥gap = gap/2çš„æ–¹å¼ï¼Œè¿™ç§å¢é‡é€‰æ‹©æˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªåºåˆ—æ¥è¡¨ç¤ºï¼Œ{n/2,(n/2)/2...1}ï¼Œç§°ä¸º å¢é‡åºåˆ— ã€‚å¸Œå°”æ’åºçš„å¢é‡åºåˆ—çš„é€‰æ‹©ä¸è¯æ˜æ˜¯ä¸ªæ•°å­¦éš¾é¢˜ï¼Œæˆ‘ä»¬é€‰æ‹©çš„è¿™ä¸ªå¢é‡åºåˆ—æ˜¯æ¯”è¾ƒå¸¸ç”¨çš„ï¼Œä¹Ÿæ˜¯å¸Œå°”å»ºè®®çš„å¢é‡ï¼Œç§°ä¸ºå¸Œå°”å¢é‡ï¼Œä½†å…¶å®è¿™ä¸ªå¢é‡åºåˆ—ä¸æ˜¯æœ€ä¼˜çš„ã€‚æ­¤å¤„æˆ‘ä»¬åšç¤ºä¾‹ä½¿ç”¨å¸Œå°”å¢é‡ã€‚ ä»£ç å®ç° åœ¨å¸Œå°”æ’åºçš„ç†è§£æ—¶ï¼Œæˆ‘ä»¬å€¾å‘äºå¯¹äºæ¯ä¸€ä¸ªåˆ†ç»„ï¼Œé€ç»„è¿›è¡Œå¤„ç†ï¼Œä½†åœ¨ä»£ç å®ç°ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ç”¨è¿™ä¹ˆæŒ‰éƒ¨å°±ç­åœ°å¤„ç†å®Œä¸€ç»„å†è°ƒè½¬å›æ¥å¤„ç†ä¸‹ä¸€ç»„ï¼ˆè¿™æ ·è¿˜å¾—åŠ ä¸ªforå¾ªç¯å»å¤„ç†åˆ†ç»„ï¼‰æ¯”å¦‚[5,4,3,2,1,0] ï¼Œé¦–æ¬¡å¢é‡è®¾step=length/2=3,åˆ™ä¸º3ç»„[5,2] [4,1] [3,0]ï¼Œå®ç°æ—¶ä¸ç”¨å¾ªç¯æŒ‰ç»„å¤„ç†ï¼Œæˆ‘ä»¬å¯ä»¥ä»ä¸‹æ ‡ä¸ºstepçš„å…ƒç´ å¼€å§‹ï¼Œé€ä¸ªè·¨ç»„å¤„ç†ã€‚åŒæ—¶ï¼Œåœ¨æ’å…¥æ•°æ®æ—¶ï¼Œå¯ä»¥é‡‡ç”¨å…ƒç´ äº¤æ¢æ³•å¯»æ‰¾æœ€ç»ˆä½ç½®ï¼Œä¹Ÿå¯ä»¥é‡‡ç”¨æ•°ç»„å…ƒç´ ç§»åŠ¨æ³•å¯»è§…ã€‚å¸Œå°”æ’åºçš„ä»£ç æ¯”è¾ƒç®€å•ï¼Œå…±åŒ…å«ä¸‰å±‚forå¾ªç¯ï¼Œå¦‚ä¸‹ï¼š public static int [] shell_sort ( int [] nums ) { int [] arr = Arrays . copyOf ( nums , nums . length ); // è¿­ä»£é€æ­¥ç¼©å°å¢é‡step for ( int step = nums . length / 2 ; step > 0 ; step /= 2 ) { // ä»ä¸‹æ ‡ä¸ºstepçš„å…ƒç´ å¼€å§‹ï¼Œé€ä¸ªå¯¹å…¶æ‰€åœ¨ç»„è¿›è¡Œç›´æ¥æ’å…¥æ’åºæ“ä½œ for ( int i = step ; i < nums . length ; i ++ ) { int target = arr [ i ] ; int j ; // ç§»åŠ¨æ’å…¥æ³• for ( j = i ; j - step >= 0 && target < arr [ j - step ] ; j -= step ) { arr [ j ] = arr [ j - step ] ; } arr [ j ] = target ; } } return arr ; } å¢é‡åºåˆ—åŠæ—¶é—´å¤æ‚åº¦ Shellæ’åº çš„æ‰§è¡Œæ—¶é—´ä¾èµ–äº å¢é‡ åºåˆ—ã€‚ å¥½çš„ å¢é‡ åºåˆ—çš„å…±åŒç‰¹å¾ï¼š â‘  æœ€åä¸€ä¸ª å¢é‡ å¿…é¡»ä¸º1ï¼› â‘¡ åº”è¯¥å°½é‡é¿å…åºåˆ—ä¸­çš„å€¼(å°¤å…¶æ˜¯ç›¸é‚»çš„å€¼)äº’ä¸ºå€æ•°çš„æƒ…å†µã€‚ Shell å¢é‡åºåˆ— Shell å¢é‡åºåˆ—çš„é€’æ¨å…¬å¼ä¸ºï¼š $$ h_t=N/2,h_k=h_{k+1}/2 $$ å¯¹äºæ¯æ¬¡é™¤ä»¥ 2 çš„å¢é‡é€‰æ‹©ï¼Œå¸Œå°”æ’åºçš„æœ€å¥½æƒ…å†µå½“ç„¶æ˜¯æœ¬èº«æœ‰åºï¼Œæ¯æ¬¡åˆ†åŒºéƒ½ä¸ç”¨æ’åºï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ O(n) ï¼›ä½†æ˜¯åœ¨æœ€åçš„æƒ…å†µä¸‹ä»ç„¶æ¯æ¬¡éƒ½éœ€è¦ç§»åŠ¨ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ç›´æ¥æ’å…¥æ’åºåœ¨æœ€åæƒ…å†µä¸‹çš„æ—¶é—´å¤æ‚åº¦æ²¡ä»€ä¹ˆåŒºåˆ«ï¼Œä¹Ÿæ˜¯ O(n&#94;2) ã€‚ Shell å¢é‡åºåˆ—æ„é€ ä»£ç å¦‚ä¸‹ï¼š int IncrementSequence_Shell [ 35 ] ; void IncrementSequenceBuild_Shell () { IncrementSequence_Shell [ 0 ]= 1 ; IncrementSequence_Shell [ 1 ]= n ; while ( IncrementSequence_Shell [ IncrementSequence_Shell [ 0 ]]> 1 ) IncrementSequence_Shell [++ IncrementSequence_Shell [ 0 ]]= IncrementSequence_Shell [ IncrementSequence_Shell [ 0 ]- 1 ]/ 2 ; } Shellå¢é‡åºåˆ—ä¸æ»¡è¶³äº’è´¨çš„è¦æ±‚ï¼Œå› æ­¤åœ¨ä¸Šæ–¹å›¾1æ‰€ç¤ºçš„ä¾‹å­é‡Œï¼Œå‰å‡ ä¸ªå¢é‡æ²¡æœ‰èµ·åˆ°ä»»ä½•ä½œç”¨ï¼ˆåªèµ·åˆ°äº†æ‹–å»¶æ—¶é—´çš„ä½œç”¨å“ˆå“ˆï¼‰ã€‚ äºæ˜¯æœ‰äº›å¤§ä½¬ä»¬å°±æ•´å‡ºäº†ä¸‹é¢è¿™äº›å¢é‡åºåˆ—ï¼š Hibbardå¢é‡åºåˆ— ã€ Knuthå¢é‡åºåˆ— ã€ Sedgewickå¢é‡åºåˆ— ç­‰ç­‰ã€‚ Hibbardå¢é‡åºåˆ— Hibbardå¢é‡åºåˆ—çš„é€šé¡¹å…¬å¼ä¸ºï¼š $$ h_i=2&#94;iâˆ’1 $$ Hibbardå¢é‡åºåˆ—çš„é€’æ¨å…¬å¼ä¸ºï¼š $$ h_1=1,h_i=2âˆ—h_{i-1}+1 $$ å³ï¼š $$ {1, 3, 7, 15, 31, 63, 127, 255, 511, 1023, 2047, 4095, 8191...} $$ æœ€åæ—¶é—´å¤æ‚åº¦ä¸ºğ‘‚(ğ‘&#94;3/2)ï¼›å¹³å‡æ—¶é—´å¤æ‚åº¦çº¦ä¸ºğ‘‚(ğ‘&#94;5/4)ã€‚ å…ˆæ¥ä¸ªHibbardå¢é‡åºåˆ—çš„è·å–ä»£ç ï¼š # Hibbardå¢é‡åºåˆ— # D(i)=2&#94;iâˆ’1,i>0 def getHibbardStepArr ( n ): i = 1 arr = [] while True : tmp = ( 1 << i ) - 1 if tmp <= n : arr . append ( tmp ) else : break i += 1 return arr æ’åºä»£ç ç¨å¾®ä¿®æ”¹ä¸€ä¸‹å°±è¡Œï¼š # å¸Œå°”æ’åºï¼ˆHibbardå¢é‡åºåˆ—ï¼‰ def shellSort ( arr ): size = len ( arr ) # è·å–Hibbardå¢é‡åºåˆ— stepArr = getHibbardStepArr ( size ) # å› ä¸ºè¦å€’ç€ä½¿ç”¨åºåˆ—é‡Œçš„å¢é‡ï¼Œæ‰€ä»¥è¿™é‡Œç”¨äº†reversed for step in reversed ( stepArr ): for i in range ( step , size ): j = i tmp = arr [ j ] while j >= step : if tmp < arr [ j - step ]: arr [ j ] = arr [ j - step ] j -= step else : break arr [ j ] = tmp è‡³äºä¸ºä»€ä¹ˆè¦ç”¨pythonå†…ç½®å‡½æ•° reversed() ï¼Œè€Œä¸ç”¨å…¶å®ƒæ–¹æ³•ï¼Œæ˜¯å› ä¸º reversed() è¿”å›çš„æ˜¯è¿­ä»£å™¨ï¼Œå ç”¨å†…å­˜å°‘ï¼Œæ•ˆç‡æ¯”è¾ƒé«˜ã€‚ å¦‚æœå…ˆä½¿ç”¨ stepArr.reverse() ï¼Œå†ç”¨ range(len(arr)) çš„è¯ï¼Œæ•ˆç‡ä¼šæ¯”è¾ƒä½ï¼› è€Œä¸”å®æµ‹ reversed ä¹Ÿæ¯” range(len(arr) - 1, -1, -1) æ•ˆç‡é«˜ï¼Œæ•…ä½¿ç”¨ reversed() ; è¿˜æœ‰å°±æ˜¯å…ˆ stepArr.sort(reverse=True) ï¼Œå†ç”¨ range(len(arr)) ï¼ŒåŒæ ·æ•ˆç‡ä½ã€‚ è¿™å‡ ç§æ–¹æ³•æ¯”è¾ƒçš„æµ‹è¯•ä»£ç åœ¨è¿™é‡Œï¼Œæœ‰å…´è¶£çš„æœ‹å‹å¯ä»¥çœ‹çœ‹ï¼š Pythonåˆ—è¡¨å€’åºè¾“å‡ºåŠå…¶æ•ˆç‡ ã€‚ Sedgewickå¢é‡åºåˆ— Sedgewickå¢é‡åºåˆ—çš„å–æ³•ä¸ºï¼š $$ h_i=max(9âˆ—4&#94;iâˆ’9âˆ—2&#94;i+1, 4&#94;iâˆ’3âˆ—2&#94;i+1) $$ å³ï¼š $$ {1, 5, 19, 41, 109, 209, 505, 929, 2161...} $$ æœ€åæ—¶é—´å¤æ‚åº¦ä¸º ğ‘‚(ğ‘&#94;4/3) ï¼›å¹³å‡æ—¶é—´å¤æ‚åº¦çº¦ä¸ºğ‘‚(ğ‘&#94;7/6)ã€‚ Sedgewickå¢é‡åºåˆ—çš„è·å–ä»£ç ï¼š # Sedgewickå¢é‡åºåˆ— # D=9*4&#94;i-9*2&#94;i+1 æˆ– 4&#94;(i+2)-3*2&#94;(i+2)+1 , i>=0 # ç¨å¾®å˜ä¸€ä¸‹å½¢ï¼šD=9*(2&#94;(2i)-2&#94;i)+1 æˆ– 2&#94;(2i+4)-3*2&#94;(i+2)+1 , i>=0 def getSedgewickStepArr ( n ): i = 0 arr = [] while True : tmp = 9 * (( 1 << 2 * i ) - ( 1 << i )) + 1 if tmp <= n : arr . append ( tmp ) tmp = ( 1 << 2 * i + 4 ) - 3 * ( 1 << i + 2 ) + 1 if tmp <= n : arr . append ( tmp ) else : break i += 1 return arr æ’åºä»£ç ç¨å¾®ä¿®æ”¹ä¸€ä¸‹å°±è¡Œï¼š # å¸Œå°”æ’åºï¼ˆSedgewickå¢é‡åºåˆ—ï¼‰ def shellSort ( arr ): size = len ( arr ) # è·å–Sedgewickå¢é‡åºåˆ— stepArr = getSedgewickStepArr ( size ) for step in reversed ( stepArr ): for i in range ( step , size ): j = i tmp = arr [ j ] while j >= step : if tmp < arr [ j - step ]: arr [ j ] = arr [ j - step ] j -= step else : break arr [ j ] = tmp Knuthå¢é‡åºåˆ— Knuth å¢é‡åºåˆ—çš„é€šé¡¹å…¬å¼ä¸ºï¼š $$ h_i=(3&#94;iâˆ’1)/2 $$ Knuth å¢é‡åºåˆ—çš„é€’æ¨å…¬å¼ä¸ºï¼š $$ h_1=1,h_i=3âˆ—h_{iâˆ’1}+1 $$ å³ï¼š $$ {1,4,13,40,121,364,1093,3280...} $$ æ—¶é—´å¤æ‚åº¦æ˜¯ğ‘‚(ğ‘&#94;3/2)ã€‚ Knuth å¢é‡åºåˆ—æ„é€ ä»£ç å¦‚ä¸‹ï¼š int IncrementSequence_Knuth [ 25 ] ; void IncrementSequenceBuild_Knuth () { IncrementSequence_Knuth [ 0 ]= 20 ; IncrementSequence_Knuth [ 1 ]= 1 ; for ( int i = 2 ; i <= 20 ; i ++ ) IncrementSequence_Knuth [ i ]= IncrementSequence_Knuth [ i - 1 ]* 3 + 1 ; } ç©ºé—´å¤æ‚åº¦ åœ¨å¸Œå°”æ’åºçš„å®ç°ä¸­ä»ç„¶ä½¿ç”¨äº†æ’å…¥æ’åºï¼Œåªæ˜¯è¿›è¡Œäº†åˆ†ç»„ï¼Œå¹¶æ²¡æœ‰ä½¿ç”¨å…¶ä»–ç©ºé—´ï¼Œæ‰€ä»¥å¸Œå°”æ’åºçš„ ç©ºé—´å¤æ‚åº¦ åŒæ ·æ˜¯ O(1) ï¼Œæ˜¯å¸¸é‡çº§çš„ã€‚","tags":"Algorithms","url":"https://jiang-hao.com/articles/2020/algorithms-algorithms-shell-sort.html","loc":"https://jiang-hao.com/articles/2020/algorithms-algorithms-shell-sort.html"},{"title":"æ•°æ®ç»“æ„ä¸ç®—æ³•â€”â€”é€‰æ‹©æ’åº","text":"æ’åºæ€æƒ³ é¦–å…ˆï¼Œæ‰¾åˆ°æ•°ç»„ä¸­æœ€å°çš„é‚£ä¸ªå…ƒç´ ï¼Œå…¶æ¬¡ï¼Œå°†å®ƒå’Œæ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ äº¤æ¢ä½ç½®(å¦‚æœç¬¬ä¸€ä¸ªå…ƒç´ å°±æ˜¯æœ€å°å…ƒç´ é‚£ä¹ˆå®ƒå°±å’Œè‡ªå·±äº¤æ¢)ã€‚å…¶æ¬¡ï¼Œåœ¨å‰©ä¸‹çš„å…ƒç´ ä¸­æ‰¾åˆ°æœ€å°çš„å…ƒç´ ï¼Œå°†å®ƒä¸æ•°ç»„çš„ç¬¬äºŒä¸ªå…ƒç´ äº¤æ¢ä½ç½®ã€‚å¦‚æ­¤å¾€å¤ï¼Œç›´åˆ°å°†æ•´ä¸ªæ•°ç»„æ’åºã€‚è¿™ç§æ–¹æ³•æˆ‘ä»¬ç§°ä¹‹ä¸º é€‰æ‹©æ’åº ã€‚é€‰æ‹©æ’åºæ˜¯ä¸€ç§ç®€å•ç›´è§‚çš„æ’åºç®—æ³•ï¼Œæ— è®ºä»€ä¹ˆæ•°æ®è¿›å»éƒ½æ˜¯ O(nÂ²) çš„æ—¶é—´å¤æ‚åº¦ã€‚æ‰€ä»¥ç”¨åˆ°å®ƒçš„æ—¶å€™ï¼Œæ•°æ®è§„æ¨¡è¶Šå°è¶Šå¥½ã€‚å”¯ä¸€çš„å¥½å¤„å¯èƒ½å°±æ˜¯ä¸å ç”¨é¢å¤–çš„å†…å­˜ç©ºé—´äº†å§ã€‚ é‚£å¦‚ä½•é€‰å‡ºæœ€å°çš„ä¸€ä¸ªå…ƒç´ å‘¢ï¼Ÿ å¾ˆå®¹æ˜“æƒ³åˆ°ï¼šå…ˆéšä¾¿é€‰ä¸€ä¸ªå…ƒç´ å‡è®¾å®ƒä¸ºæœ€å°çš„å…ƒç´ ï¼ˆé»˜è®¤ä¸ºæ— åºåŒºé—´ç¬¬ä¸€ä¸ªå…ƒç´ ï¼‰ï¼Œç„¶åè®©è¿™ä¸ªå…ƒç´ ä¸æ— åºåŒºé—´ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœé‡åˆ°æ¯”è‡ªå·±å°çš„å…ƒç´ ï¼Œé‚£æ›´æ–°æœ€å°å€¼ä¸‹æ ‡ï¼Œç›´åˆ°æŠŠæ— åºåŒºé—´éå†å®Œï¼Œé‚£æœ€åçš„æœ€å°å€¼å°±æ˜¯è¿™ä¸ªæ— åºåŒºé—´çš„æœ€å°å€¼ã€‚ ç®—æ³•æ€§èƒ½ é€‰æ‹©æ’åºæ˜¯ä¸ç¨³å®šçš„æ’åºæ–¹æ³•ã€‚ æ—¶é—´å¤æ‚åº¦ é€‰æ‹©æ’åºçš„äº¤æ¢æ“ä½œä»‹äº 0 å’Œ (n - 1)æ¬¡ä¹‹é—´ã€‚é€‰æ‹©æ’åºçš„æ¯”è¾ƒæ“ä½œä¸º n(n - 1)/2 æ¬¡ã€‚é€‰æ‹©æ’åºçš„èµ‹å€¼æ“ä½œä»‹äº 0 å’Œ 3(n - 1) æ¬¡ä¹‹é—´ï¼Œ1æ¬¡äº¤æ¢å¯¹åº”ä¸‰æ¬¡èµ‹å€¼ã€‚ æ¯”è¾ƒæ¬¡æ•°O(n&#94;2) ï¼Œæ¯”è¾ƒæ¬¡æ•°ä¸å…³é”®å­—çš„åˆå§‹çŠ¶æ€æ— å…³ï¼Œæ€»çš„æ¯”è¾ƒæ¬¡æ•°N=(n-1) + (n-2) + ... +1 = n*(n-1)/2ã€‚ äº¤æ¢æ¬¡æ•°æ¯” å†’æ³¡æ’åº å°‘å¤šäº†ï¼Œç”±äºäº¤æ¢æ‰€éœ€CPUæ—¶é—´æ¯”æ¯”è¾ƒæ‰€éœ€çš„CPUæ—¶é—´å¤šï¼Œnå€¼è¾ƒå°æ—¶ï¼Œé€‰æ‹©æ’åºæ¯”å†’æ³¡æ’åºå¿«ã€‚é€‰æ‹©æ’åºæ¯äº¤æ¢ä¸€å¯¹å…ƒç´ ï¼Œå®ƒä»¬å½“ä¸­è‡³å°‘æœ‰ä¸€ä¸ªå°†è¢«ç§»åˆ°å…¶æœ€ç»ˆä½ç½®ä¸Šï¼Œå› æ­¤å¯¹nä¸ªå…ƒç´ çš„è¡¨è¿›è¡Œæ’åºæ€»å…±è¿›è¡Œè‡³å¤š(n-1)æ¬¡äº¤æ¢ã€‚åœ¨æ‰€æœ‰çš„å®Œå…¨ä¾é äº¤æ¢å»ç§»åŠ¨å…ƒç´ çš„æ’åºæ–¹æ³•ä¸­ï¼Œé€‰æ‹©æ’åºå±äºéå¸¸å¥½çš„ä¸€ç§ã€‚ æœ€å¥½æ—¶é—´å¤æ‚åº¦ï¼šæœ€å¥½æƒ…å†µæ˜¯è¾“å…¥åºåˆ—å·²ç»å‡åºæ’åˆ—ï¼Œéœ€è¦æ¯”è¾ƒn (n-1)/2æ¬¡ï¼Œä½†ä¸éœ€è¦äº¤æ¢å…ƒç´ ï¼Œå³äº¤æ¢æ¬¡æ•°ä¸ºï¼š0ï¼›æ‰€ä»¥ æœ€å¥½æ—¶é—´å¤æ‚åº¦ *ä¸ºĞ(nÂ²)ã€‚ æœ€åæ—¶é—´å¤æ‚åº¦ï¼šæœ€åæƒ…å†µæ˜¯è¾“å…¥åºåˆ—æ˜¯é€†åºçš„ï¼Œåˆ™æ¯ä¸€è¶Ÿéƒ½éœ€è¦äº¤æ¢ã€‚å³éœ€è¦æ¯”è¾ƒn (n-1)/2æ¬¡ï¼Œå…ƒç´ äº¤æ¢æ¬¡æ•°ä¸ºï¼šn-1æ¬¡ã€‚æ‰€ä»¥ æœ€åæ—¶é—´å¤æ‚åº¦ è¿˜æ˜¯ Ğ(nÂ²)ã€‚ å¹³å‡æ—¶é—´å¤æ‚åº¦ï¼šĞ(nÂ²) ç©ºé—´å¤æ‚åº¦ï¼šåªç”¨åˆ°ä¸€ä¸ªä¸´æ—¶å˜é‡ï¼Œæ‰€ä»¥ ç©ºé—´å¤æ‚åº¦ ä¸º O(1) ï¼› åŸåœ°æ“ä½œå‡ ä¹æ˜¯é€‰æ‹©æ’åºçš„å”¯ä¸€ä¼˜ç‚¹ï¼Œå½“ç©ºé—´å¤æ‚åº¦è¦æ±‚è¾ƒé«˜æ—¶ï¼Œå¯ä»¥è€ƒè™‘é€‰æ‹©æ’åºï¼›é€‰æ‹©æ’åºå®é™…é€‚ç”¨çš„åœºåˆéå¸¸ç½•è§ã€‚ ç¨³å®šæ€§ é€‰æ‹©æ’åºæ˜¯ç»™æ¯ä¸ªä½ç½®é€‰æ‹©å½“å‰å…ƒç´ æœ€å°çš„ï¼Œæ¯”å¦‚ç»™ç¬¬ä¸€ä¸ªä½ç½®é€‰æ‹©æœ€å°çš„ï¼Œåœ¨å‰©ä½™å…ƒç´ é‡Œé¢ç»™ç¬¬äºŒä¸ªå…ƒç´ é€‰æ‹©ç¬¬äºŒå°çš„ï¼Œä¾æ¬¡ç±»æ¨ï¼Œç›´åˆ°ç¬¬n-1ä¸ªå…ƒç´ ï¼Œç¬¬nä¸ªå…ƒç´ ä¸ç”¨é€‰æ‹©äº†ï¼Œå› ä¸ºåªå‰©ä¸‹å®ƒä¸€ä¸ªæœ€å¤§çš„å…ƒç´ äº†ã€‚é‚£ä¹ˆï¼Œåœ¨ä¸€è¶Ÿé€‰æ‹©ï¼Œå¦‚æœä¸€ä¸ªå…ƒç´ æ¯”å½“å‰å…ƒç´ å°ï¼Œè€Œè¯¥å°çš„å…ƒç´ åˆå‡ºç°åœ¨ä¸€ä¸ªå’Œå½“å‰å…ƒç´ ç›¸ç­‰çš„å…ƒç´ åé¢ï¼Œé‚£ä¹ˆäº¤æ¢åç¨³å®šæ€§å°±è¢«ç ´åäº†ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œåºåˆ—5 8 5 2 9ï¼Œæˆ‘ä»¬çŸ¥é“ç¬¬ä¸€éé€‰æ‹©ç¬¬1ä¸ªå…ƒç´ 5ä¼šå’Œ2äº¤æ¢ï¼Œé‚£ä¹ˆåŸåºåˆ—ä¸­ä¸¤ä¸ª5çš„ç›¸å¯¹å‰åé¡ºåºå°±è¢«ç ´åäº†ï¼Œæ‰€ä»¥é€‰æ‹©æ’åºæ˜¯ä¸€ä¸ªä¸ç¨³å®šçš„æ’åºç®—æ³•ã€‚ ä»£ç å®ç° å•å‘é€‰æ‹© å•å‘é€‰æ‹©çš„æ’åºç®—æ³•ä¹Ÿå°±æ˜¯æœ€ä¼ ç»Ÿç®€å•çš„é€‰æ‹©æ’åºã€‚å…¶Javaå®ç°å¦‚ä¸‹ï¼š public static int [] selection_sort_original ( int [] nums ) { // å…³é”®æ€§èƒ½æŒ‡æ ‡è®¡æ•° int loopCnt = 0 , compareCnt = 0 , swapCnt = 0 ; int [] arr = Arrays . copyOf ( nums , nums . length ); // æ€»å…±è¦ç»è¿‡ N-1 è½®æ¯”è¾ƒ for ( int i = 0 ; i < arr . length - 1 ; i ++ ) { loopCnt ++ ; int minIndex = i ; // æ¯è½®éœ€è¦æ¯”è¾ƒçš„æ¬¡æ•° N-i for ( int j = i + 1 ; j < arr . length ; j ++ ) { compareCnt ++ ; if ( arr [ j ]< arr [ minIndex ] ) { // éå†æ‰¾å‡ºæ¯è½®å‰©ä¸‹å…ƒç´ ä¸­æœ€å°å…ƒç´ çš„ä¸‹æ ‡ minIndex = j ; } } // å°†æ‰¾åˆ°çš„æœ€å°å€¼å’Œiä½ç½®æ‰€åœ¨çš„å€¼è¿›è¡Œäº¤æ¢ if ( minIndex != i ) { swapCnt ++ ; int tmp = arr [ i ] ; arr [ i ] = arr [ minIndex ] ; arr [ minIndex ] = tmp ; } } System . out . println ( loopCnt + \",\" + compareCnt + \",\" + swapCnt ); return arr ; } åŒå‘é€‰æ‹© å•å‘é€‰æ‹©æ–¹æ¡ˆä¸­çš„ä¸»è¦æ€è·¯æ˜¯ï¼Œæ¯æ¬¡éå†å‰©ä½™å…ƒç´ ï¼Œæ‰¾å‡ºå…¶ä¸­æœ€å°å€¼ï¼Œåªæ’å®šæœ€å°å€¼ã€‚å¯¹äºæ­¤ï¼Œæœ‰äººæå‡ºäº†ä¸€ç§ä¼˜åŒ–æ–¹æ³•ï¼Œå³æ¯æ¬¡éå†å‰©ä½™å…ƒç´ çš„æ—¶å€™ï¼Œæ‰¾å‡ºå…¶ä¸­æœ€å°å€¼å’Œæœ€å¤§å€¼ï¼Œå¹¶æ’å®šæœ€å°å€¼å’Œæœ€å¤§å€¼ï¼ŒæŠŠæœ€å¤§çš„æ”¾åˆ°æœ€å³è¾¹ï¼ˆé™åºç›¸åï¼‰ï¼ŒæŠŠæœ€å°çš„æ”¾åˆ°æœ€å·¦è¾¹ï¼ˆé™åºç›¸åï¼‰ã€‚è¿™æ ·éå†çš„æ¬¡æ•°ä¼šå‡å°‘ä¸€åŠã€‚ public static int [] selection_sort_bidirectional ( int [] nums ) { // å…³é”®æ€§èƒ½æŒ‡æ ‡è®¡æ•° int loopCnt = 0 , compareCnt = 0 , swapCnt = 0 ; int [] arr = Arrays . copyOf ( nums , nums . length ); int minIndex , maxIndex , tmp ; for ( int left = 0 , right = arr . length - 1 ; left < right ; left ++ , right -- ) { minIndex = left ; maxIndex = right ; loopCnt ++ ; for ( int i = left ; i <= right ; i ++ ) { compareCnt += 2 ; if ( arr [ minIndex ] > arr [ i ] ) minIndex = i ; if ( arr [ maxIndex ] < arr [ i ] ) maxIndex = i ; } // å°†æœ€å°å€¼äº¤æ¢åˆ° left çš„ä½ç½® if ( minIndex != left ) { swapCnt ++ ; tmp = arr [ left ] ; arr [ left ] = arr [ minIndex ] ; arr [ minIndex ] = tmp ; } //æ­¤å¤„æ˜¯å…ˆæ’æœ€å°å€¼çš„ä½ç½®ï¼Œæ‰€ä»¥å¾—è€ƒè™‘æœ€å¤§å€¼ï¼ˆarr[max]ï¼‰åœ¨æœ€å°ä½ç½®ï¼ˆleftï¼‰çš„æƒ…å†µã€‚ if ( left == maxIndex ) maxIndex = minIndex ; // å°†æœ€å¤§å€¼äº¤æ¢åˆ° right çš„ä½ç½® if ( maxIndex != right ) { swapCnt ++ ; tmp = arr [ right ] ; arr [ right ] = arr [ maxIndex ] ; arr [ maxIndex ] = tmp ; } } System . out . println ( loopCnt + \",\" + compareCnt + \",\" + swapCnt ); return arr ; } è¿è¡Œç»“æœ ä½¿ç”¨æ•°æ®é›†https://leetcode-cn.com/submissions/detail/114474973/testcase/æµ‹è¯•è¿è¡Œï¼Œå¾—ç»“æœå¦‚ä¸‹ï¼š 49999 , 1249975000 , 49983 //å•å‘é€‰æ‹© 25000 , 1250050000 , 49987 //åŒå‘é€‰æ‹© ç”±ç»“æœå¯çŸ¥ï¼Œä¸¤ç§æ–¹å¼é™¤å¤–å±‚å¾ªç¯æ¬¡æ•°åŒå‘æ¯”å•å‘å°‘ä¸€åŠä¹‹å¤–ï¼Œåœ¨å…³é”®æ€§èƒ½æŒ‡æ ‡ï¼ˆæ¯”è¾ƒæ¬¡æ•°å’Œäº¤æ¢æ¬¡æ•°ï¼‰ä¸Šå¹¶æ— å·®å¼‚ã€‚å› æ­¤ï¼Œå¯¹äºè®¸å¤šäººæ‰€æå‡ºçš„åŒå‘é€‰æ‹©çš„æ’åºæ–¹å¼ï¼Œåªèƒ½ç®—æ˜¯é€‰æ‹©æ’åºçš„ä¸€ä¸ªå˜ç§ï¼Œå¹¶æ— å®è´¨ä¸Šçš„ä¼˜åŒ–ã€‚","tags":"Algorithms","url":"https://jiang-hao.com/articles/2020/algorithms-algorithms-selection-sort.html","loc":"https://jiang-hao.com/articles/2020/algorithms-algorithms-selection-sort.html"},{"title":"æ•°æ®ç»“æ„ä¸ç®—æ³•â€”â€”å†’æ³¡æ’åº","text":"å®šä¹‰ å†’æ³¡æ’åºï¼ˆBubble Sortï¼‰ï¼Œæ˜¯ä¸€ç§ è®¡ç®—æœºç§‘å­¦ é¢†åŸŸçš„è¾ƒç®€å•çš„ æ’åºç®—æ³• ã€‚å®ƒé‡å¤åœ°èµ°è®¿è¿‡è¦æ’åºçš„å…ƒç´ åˆ—ï¼Œä¾æ¬¡æ¯”è¾ƒä¸¤ä¸ªç›¸é‚»çš„å…ƒç´ ï¼Œå¦‚æœé¡ºåºï¼ˆå¦‚ä»å¤§åˆ°å°ã€é¦–å­—æ¯ä»Zåˆ°Aï¼‰é”™è¯¯å°±æŠŠä»–ä»¬äº¤æ¢è¿‡æ¥ã€‚èµ°è®¿å…ƒç´ çš„å·¥ä½œæ˜¯é‡å¤åœ°è¿›è¡Œç›´åˆ°æ²¡æœ‰ç›¸é‚»å…ƒç´ éœ€è¦äº¤æ¢ï¼Œä¹Ÿå°±æ˜¯è¯´è¯¥å…ƒç´ åˆ—å·²ç»æ’åºå®Œæˆã€‚è¿™ä¸ªç®—æ³•çš„åå­—ç”±æ¥æ˜¯å› ä¸ºè¶Šå°çš„å…ƒç´ ä¼šç»ç”±äº¤æ¢æ…¢æ…¢\"æµ®\"åˆ°æ•°åˆ—çš„é¡¶ç«¯ï¼ˆå‡åºæˆ–é™åºæ’åˆ—ï¼‰ï¼Œå°±å¦‚åŒç¢³é…¸é¥®æ–™ä¸­äºŒæ°§åŒ–ç¢³çš„æ°”æ³¡æœ€ç»ˆä¼šä¸Šæµ®åˆ°é¡¶ç«¯ä¸€æ ·ï¼Œæ•…å\"å†’æ³¡æ’åº\"ã€‚ ç®—æ³•åŸç† å†’æ³¡ æ’åºç®—æ³• çš„åŸç†å¦‚ä¸‹ï¼š æ¯”è¾ƒç›¸é‚»çš„å…ƒç´ ã€‚å¦‚æœç¬¬ä¸€ä¸ªæ¯”ç¬¬äºŒä¸ªå¤§ï¼Œå°±äº¤æ¢ä»–ä»¬ä¸¤ä¸ªã€‚ å¯¹æ¯ä¸€å¯¹ç›¸é‚»å…ƒç´ åšåŒæ ·çš„å·¥ä½œï¼Œä»å¼€å§‹ç¬¬ä¸€å¯¹åˆ°ç»“å°¾çš„æœ€åä¸€å¯¹ã€‚åœ¨è¿™ä¸€ç‚¹ï¼Œæœ€åçš„å…ƒç´ åº”è¯¥ä¼šæ˜¯æœ€å¤§çš„æ•°ã€‚ é’ˆå¯¹æ‰€æœ‰çš„å…ƒç´ é‡å¤ä»¥ä¸Šçš„æ­¥éª¤ï¼Œé™¤äº†æœ€åä¸€ä¸ªã€‚ æŒç»­æ¯æ¬¡å¯¹è¶Šæ¥è¶Šå°‘çš„å…ƒç´ é‡å¤ä¸Šé¢çš„æ­¥éª¤ï¼Œç›´åˆ°æ²¡æœ‰ä»»ä½•ä¸€å¯¹æ•°å­—éœ€è¦æ¯”è¾ƒã€‚ ç®—æ³•å¤æ‚åº¦æ˜¯ O(n&#94;2)ï¼Œç©ºé—´å¤æ‚åº¦æ˜¯å¸¸æ•° O(1)ã€‚ä½†å¯ä»¥è®°å½•ä¸€ä¸ªä¸éœ€è¦äº¤æ¢çš„ä½ç½®ï¼ŒæŠŠæœ€å¥½æƒ…å†µçš„æ—¶é—´å¤æ‚åº¦é™åˆ° O(n)ã€‚è¯¦ç»†å¯ä»¥å‚è€ƒä¸‹æ–‡ä¼˜åŒ–éƒ¨åˆ†çš„å®ç°ã€‚ ç®—æ³•å®ç° public static int [] bubble_sort_original ( int [] nums ) { int [] arr = Arrays . copyOf ( nums , nums . length ); int count = 0 , swap_count = 0 ; for ( int i = 0 ; i < arr . length - 1 ; i ++ ) { for ( int j = 0 ; j < arr . length - 1 - i ; j ++ ) { count ++ ; if ( arr [ j ] > arr [ j + 1 ] ) { int tmp = arr [ j ] ; arr [ j ] = arr [ j + 1 ] ; arr [ j + 1 ] = tmp ; swap_count ++ ; } } } System . out . println ( \"bubble_sort_original: run \" + count + \", swap \" + swap_count + \", isSorted: \" + isSorted ( arr )); //æ‰“å°è¿è¡Œæ¬¡æ•°ã€äº¤æ¢æ¬¡æ•°ï¼Œä»¥åŠæ’åºæ£€éªŒ return arr ; } åŠ©è®°ç  i âˆˆ [ 0 , N - 1 ) //å¾ªç¯N-1é j âˆˆ [ 0 , N - 1 - i ) //æ¯éå¾ªç¯è¦å¤„ç†çš„æ— åºéƒ¨åˆ† swap ( j , j + 1 ) //ä¸¤ä¸¤æ’åºï¼ˆå‡åº/é™åºï¼‰ ç®—æ³•ä¼˜åŒ– ä¼˜åŒ–1ï¼šä¸€è½®éå†æœªå‘ç”Ÿäº¤æ¢å¯æå‰ç»“æŸ æ•°æ®çš„é¡ºåºæ’å¥½ä¹‹åï¼Œå†’æ³¡ç®—æ³•ä»ç„¶ä¼šç»§ç»­è¿›è¡Œä¸‹ä¸€è½®çš„æ¯”è¾ƒï¼Œç›´åˆ°arr.length-1æ¬¡ï¼Œåé¢çš„æ¯”è¾ƒæ²¡æœ‰æ„ä¹‰çš„ã€‚ è®¾ç½®æ ‡å¿—ä½flagï¼Œå¦‚æœå‘ç”Ÿäº†äº¤æ¢flagè®¾ç½®ä¸ºtrueï¼›å¦‚æœæ²¡æœ‰äº¤æ¢å°±è®¾ç½®ä¸ºfalseã€‚ è¿™æ ·å½“ä¸€è½®æ¯”è¾ƒç»“æŸåå¦‚æœflagä»ä¸ºfalseï¼Œå³ï¼šè¿™ä¸€è½®æ²¡æœ‰å‘ç”Ÿäº¤æ¢ï¼Œè¯´æ˜æ•°æ®çš„é¡ºåºå·²ç»æ’å¥½ï¼Œæ²¡æœ‰å¿…è¦ç»§ç»­è¿›è¡Œä¸‹å»ã€‚ public static int [] bubble_sort_quit_if_sorted ( int [] nums ) { int [] arr = Arrays . copyOf ( nums , nums . length ); int tmp ; int count = 0 , swap_count = 0 ; for ( int i = 0 ; i < arr . length - 1 ; i ++ ) { boolean head_sorted = true ; for ( int j = 0 ; j < arr . length - 1 - i ; j ++ ) { count ++ ; if ( arr [ j ] > arr [ j + 1 ] ) { tmp = arr [ j ] ; arr [ j ] = arr [ j + 1 ] ; arr [ j + 1 ] = tmp ; head_sorted = false ; swap_count ++ ; } } if ( head_sorted ) break ; } System . out . println ( \"bubble_sort_quit_if_sorted: run \" + count + \", swap \" + swap_count + \", isSorted: \" + isSorted ( arr )); return arr ; } ä¼˜åŒ–2ï¼šè®°å½•ä¸Šä¸€è½®æœ€åä¸€æ¬¡äº¤æ¢çš„ä½ç½® åœ¨ä¼ ç»Ÿçš„å®ç°ä¸­æœ‰åºåŒºçš„é•¿åº¦å’Œæ’åºçš„è½®æ•°æ˜¯ç›¸ç­‰çš„ã€‚æ¯”å¦‚ç¬¬ä¸€è½®æ’åºè¿‡åçš„æœ‰åºåŒºé•¿åº¦æ˜¯1ï¼Œç¬¬äºŒè½®æ’åºè¿‡åçš„æœ‰åºåŒºé•¿åº¦æ˜¯2 ......å®é™…ä¸Šï¼Œæ•°åˆ—çœŸæ­£çš„æœ‰åºåŒºå¯èƒ½ä¼šå¤§äºè¿™ä¸ªé•¿åº¦ï¼Œæ¯”å¦‚æœ‰å¯èƒ½åœ¨ç¬¬äºŒè½®ï¼Œåé¢5ä¸ªå…ƒç´ å®é™…éƒ½å·²ç»å±äºæœ‰åºåŒºã€‚å› æ­¤åé¢çš„è®¸å¤šæ¬¡å…ƒç´ æ¯”è¾ƒæ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚ æˆ‘ä»¬å¯ä»¥åœ¨æ¯ä¸€è½®æ’åºçš„æœ€åï¼Œè®°å½•ä¸‹æœ€åä¸€æ¬¡å…ƒç´ äº¤æ¢çš„ä½ç½®ï¼Œé‚£ä¸ªä½ç½®ä¹Ÿå°±æ˜¯æ— åºæ•°åˆ—çš„è¾¹ç•Œï¼Œå†å¾€åå°±æ˜¯æœ‰åºåŒºäº†ã€‚ public static int [] bubble_sort_mark_last_swap ( int [] nums ) { int [] arr = Arrays . copyOf ( nums , nums . length ); int count = 0 , swap_count = 0 ; int sorted_border = arr . length ; int tmp ; while ( sorted_border > 1 ) { int last_swap = 0 ; for ( int i = 0 ; i < sorted_border - 1 ; i ++ ) { count ++ ; if ( arr [ i ] > arr [ i + 1 ] ) { tmp = arr [ i ] ; arr [ i ] = arr [ i + 1 ] ; arr [ i + 1 ] = tmp ; last_swap = i + 1 ; swap_count ++ ; } } sorted_border = last_swap ; } System . out . println ( \"bubble_sort_mark_last_swap: run \" + count + \", swap \" + swap_count + \", isSorted: \" + isSorted ( arr )); return arr ; } ä¸Šè¿°ä»£ç ä¸­ç»´æŠ¤äº†ä¸€ä¸ªå·²æ’å¥½åºçš„åºåˆ—ï¼š [sorted_border,N) ï¼ˆNæ˜¯æ•°ç»„å¤§å°ï¼‰ï¼Œæ¯æ¬¡å†’æ³¡ä¼šè®°å½•æœ€å¤§çš„é‚£ä¸ªæ³¡æ³¡çš„ä½ç½®ä½œä¸º sorted_border ã€‚ ç›´åˆ° sorted_border == 1 æ—¶ï¼Œè¯´æ˜æ•´ä¸ªåºåˆ—å·²ç»æ’å¥½ã€‚ å› ä¸ºå†’æ³¡æ’åºä¸­æ¯æ¬¡å†’æ³¡éƒ½ç›¸å½“äºé€‰æœ€å¤§å€¼æ”¾åˆ°åºåˆ—ç»“å°¾ï¼Œæ‰€ä»¥ [sorted_border,N) ä¸ä»…æ˜¯æœ‰åºçš„ï¼Œè€Œä¸”ä½ç½®æ˜¯æ­£ç¡®çš„ã€‚ æ‰€ä»¥ sorted_border == 1 æ—¶ï¼Œ [1,N) å·²ç»è·å¾—äº†æ­£ç¡®çš„ä½ç½®ï¼Œé‚£ä¹ˆå…ƒç´ 0çš„ä½ç½®è‡ªç„¶å°±ç¡®å®šäº†ï¼ˆå®ƒå·²ç»æ²¡å¾—é€‰äº†ï¼‰ã€‚ ä¼˜åŒ–3ï¼šé¸¡å°¾é…’æ’åº(åŒå‘å†’æ³¡æ’åº) é¸¡å°¾é…’æ’åºä¹Ÿå°±æ˜¯\"å®šå‘å†’æ³¡æ’åº\"ã€\"åŒå‘å†’æ³¡æ’åº\"å’Œ\"æ”¹è¿›å†’æ³¡æ’åº\", é¸¡å°¾é…’æ…æ‹Œæ’åº, æ…æ‹Œæ’åº (ä¹Ÿå¯ä»¥è§†ä½œé€‰æ‹©æ’åºçš„ä¸€ç§å˜å½¢), æ¶Ÿæ¼ªæ’åº, æ¥å›æ’åº or å¿«ä¹å°æ—¶æ’åº, æ˜¯å†’æ³¡æ’åºçš„ä¸€ç§å˜å½¢ã€‚æ­¤ç®—æ³•ä¸å†’æ³¡æ’åºçš„ä¸åŒå¤„åœ¨äºæ’åºæ—¶æ˜¯ä»¥åŒå‘åœ¨åºåˆ—ä¸­è¿›è¡Œæ’åºã€‚ç®—æ³•å…ˆæ‰¾åˆ°æœ€å°çš„æ•°å­—ï¼ŒæŠŠä»–æ”¾åˆ°ç¬¬ä¸€ä½ï¼Œç„¶åæ‰¾åˆ°æœ€å¤§çš„æ•°å­—æ”¾åˆ°æœ€åä¸€ä½ã€‚ç„¶åå†æ‰¾åˆ°ç¬¬äºŒå°çš„æ•°å­—æ”¾åˆ°ç¬¬äºŒä½ï¼Œå†æ‰¾åˆ°ç¬¬äºŒå¤§çš„æ•°å­—æ”¾åˆ°å€’æ•°ç¬¬äºŒä½ã€‚ä»¥æ­¤ç±»æ¨ï¼Œç›´åˆ°å®Œæˆæ’åºã€‚ ï¼ˆ1ï¼‰æ—¶é—´å¤æ‚åº¦ ï¼šé¸¡å°¾é…’æ’åºçš„æ•ˆç‡è¿˜æ˜¯å¾ˆä½çš„ï¼Œä¸¤å±‚å¾ªç¯ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(n&#94;2) ã€‚ ï¼ˆ2ï¼‰ç©ºé—´å¤æ‚åº¦ ï¼šç”±äºåªéœ€è¦å‡ ä¸ªä¸´æ—¶å˜é‡ï¼Œæ‰€ä»¥ç©ºé—´å¤æ‚åº¦ä¸º O(1) ã€‚ é‚£ä¹ˆä½•ä»¥è§å¾—é¸¡å°¾é…’æ’åºæ¯”å†’æ³¡æ’åºå¥½ä¸€ç‚¹å‘¢ï¼Ÿ è€ƒè™‘è¿™æ ·çš„ä¸€ä¸ªåºåˆ—ï¼š(2,3,4,5,1) ã€‚å¦‚æœä½¿ç”¨é¸¡å°¾é…’æ’åºï¼Œä¸€ä¸ªæ¥å›å°±å¯ä»¥æå®šï¼›è€Œå†’æ³¡æ’åºåˆ™éœ€è¦è·‘å››è¶Ÿã€‚ å…¶ æ ¹æœ¬åŸå›  åœ¨äºå†’æ³¡æ˜¯å•å‘çš„ï¼Œå¦‚æœä»å·¦å‘å³å†’æ³¡ï¼Œå¯¹äºå°æ•°é åå°±ä¼šå¾ˆä¸åˆ©ï¼ˆä¸€è¶Ÿåªèƒ½æŒªä¸€ä¸ªä½ç½®ï¼Œé‚£å°±éœ€è¦å¤šæ¬¡å¾ªç¯ã€‚è¿™ç§æ•°åˆè¢«ç§°ä¹‹ä¸ºä¹Œé¾Ÿï¼‰ï¼›ç›¸åº”çš„ï¼Œå¦‚æœä»å³å‘å·¦å†’æ³¡ï¼Œå¯¹äºå¤§æ•°é å‰åˆä¼šå¾ˆä¸åˆ©ï¼ˆé å‰çš„ä¸€åªå¤§ä¹Œé¾Ÿï¼‰ã€‚é¸¡å°¾é…’æ’åºçš„ä¼˜ç‚¹å°±åœ¨äºè¿™é‡Œï¼Œç”±äºåœ¨åºåˆ—ä¸­å·¦å³æ‘‡æ‘†ï¼ˆä¸ºæ­¤é¸¡å°¾é…’æ’åºåˆç§°ä¹‹ä¸º shaker sortï¼‰ï¼Œä¸¤ç§è¾ƒå·®çš„å±€é¢å°±èƒ½å¾—åˆ°è§„é¿ï¼Œä»¥æ­¤åœ¨æ€§èƒ½ä¸Šå¸¦æ¥ä¸€äº›æå‡ã€‚ public static int [] cocktail_sort_original ( int [] nums ) { int [] arr = Arrays . copyOf ( nums , nums . length ); int i , tmp , left = 0 , right = arr . length - 1 ; int count = 0 , swap_count = 0 ; while ( left < right ) { for ( i = left ; i < right ; i ++ ) { count ++ ; if ( arr [ i ] > arr [ i + 1 ] ) { tmp = arr [ i ] ; arr [ i ] = arr [ i + 1 ] ; arr [ i + 1 ] = tmp ; swap_count ++ ; } } right -- ; for ( i = right ; i > left ; i -- ) { count ++ ; if ( arr [ i - 1 ] > arr [ i ] ) { tmp = arr [ i ] ; arr [ i ] = arr [ i - 1 ] ; arr [ i - 1 ] = tmp ; swap_count ++ ; } } left ++ ; } System . out . println ( \"cocktail_sort_original: run \" + count + \", swap \" + swap_count + \", isSorted: \" + isSorted ( arr )); return arr ; } å¯¹äºé¸¡å°¾é…’æ’åºï¼Œç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸ç©ºé—´å¤æ‚åº¦å¹¶æ²¡æœ‰æ”¹è¿›ã€‚ ä¸åŒçš„æ˜¯æ’åºçš„äº¤æ¢æ¬¡æ•°ã€‚æŸäº›æƒ…å†µä¸‹é¸¡å°¾é…’æ’åºæ¯”æ™®é€šå†’æ³¡æ’åºçš„äº¤æ¢æ¬¡æ•°å°‘ã€‚æ€»ä½“ä¸Šï¼Œé¸¡å°¾é…’æ’åºå¯ä»¥è·å¾—æ¯”å†’æ³¡æ’åºç¨å¥½çš„æ€§èƒ½ã€‚ä½†æ˜¯å®Œå…¨é€†åºæ—¶ï¼Œé¸¡å°¾é…’æ’åºä¸å†’æ³¡æ’åºçš„æ•ˆç‡éƒ½éå¸¸å·®ã€‚ ä¼˜åŒ–4ï¼šä¸€è½®éå†æœªå‘ç”Ÿäº¤æ¢å¯æå‰ç»“æŸçš„åŒå‘å†’æ³¡æ’åº public static int [] cocktail_sort_quit_if_sorted ( int [] nums ) { int [] arr = Arrays . copyOf ( nums , nums . length ); int i , tmp , left = 0 , right = arr . length - 1 ; int count = 0 , swap_count = 0 ; while ( left < right ) { boolean middle_sorted = true ; for ( i = left ; i < right ; i ++ ) { count ++ ; if ( arr [ i ] > arr [ i + 1 ] ) { tmp = arr [ i ] ; arr [ i ] = arr [ i + 1 ] ; arr [ i + 1 ] = tmp ; middle_sorted = false ; swap_count ++ ; } } if ( middle_sorted ) break ; right -- ; for ( i = right ; i > left ; i -- ) { count ++ ; if ( arr [ i - 1 ] > arr [ i ] ) { tmp = arr [ i ] ; arr [ i ] = arr [ i - 1 ] ; arr [ i - 1 ] = tmp ; swap_count ++ ; } } left ++ ; } System . out . println ( \"cocktail_sort_quit_if_sorted: run \" + count + \", swap \" + swap_count + \", isSorted: \" + isSorted ( arr )); return arr ; } ä¼˜åŒ–5ï¼šè®°å½•ä¸Šä¸€è½®æœ€åä¸€æ¬¡äº¤æ¢çš„ä½ç½®çš„åŒå‘å†’æ³¡æ’åº public static int [] cocktail_sort_mark_last_swap ( int [] nums ) { int [] arr = Arrays . copyOf ( nums , nums . length ); int i , tmp , left = 0 , right = arr . length - 1 ; int count = 0 , swap_count = 0 , last_swap = left ; while ( left < right ) { for ( i = left ; i < right ; i ++ ) { count ++ ; if ( arr [ i ] > arr [ i + 1 ] ) { tmp = arr [ i ] ; arr [ i ] = arr [ i + 1 ] ; arr [ i + 1 ] = tmp ; last_swap = i + 1 ; swap_count ++ ; } } right = last_swap ; for ( i = right ; i > left ; i -- ) { count ++ ; if ( arr [ i - 1 ] > arr [ i ] ) { tmp = arr [ i ] ; arr [ i ] = arr [ i - 1 ] ; arr [ i - 1 ] = tmp ; last_swap = i - 1 ; swap_count ++ ; } } left = last_swap ; } System . out . println ( \"cocktail_sort_mark_last_swap: run \" + count + \", swap \" + swap_count + \", isSorted: \" + isSorted ( arr )); return arr ; } ä¸¤ä¸ªæ–¹å‘éƒ½åŒæ—¶è·³ç€èµ°ï¼Œæ˜¯ç›®å‰å¯ä»¥æƒ³åˆ°çš„æ•ˆæœæœ€å¥½çš„ä¼˜åŒ–ã€‚ ä¼˜åŒ–æ€§èƒ½æµ‹è¯• é€šè¿‡è¿è¡ŒåŠ›æ‰£æµ‹è¯•æ•°æ®é›†https://leetcode-cn.com/submissions/detail/114474973/testcase/ï¼Œå¾—åˆ°å„ä¸ªå˜å½¢çš„ç»“æœå¦‚ä¸‹ï¼š bubble_sort_original: run 1249975000 , swap 622443661 , isSorted : true bubble_sort_quit_if_sorted: run 1249928029 , swap 622443661 , isSorted : true bubble_sort_mark_last_swap: run 1249543883 , swap 622443661 , isSorted : true cocktail_sort_original: run 1249975000 , swap 622443661 , isSorted : true cocktail_sort_quit_if_sorted: run 934706395 , swap 622443661 , isSorted : true cocktail_sort_mark_last_swap: run 828009788 , swap 622443661 , isSorted : true ä¼˜åŒ–5æ‰€è¿›è¡Œçš„è¿ç®—é‡æœ€å°‘ã€‚å¤§å¤šæ•°è¿ç®—éƒ½æœ‰æ•ˆè¿›è¡Œäº†å…ƒç´ äº¤æ¢ï¼ˆæ’åºï¼‰ï¼Œè€Œæ’é™¤äº†å¤§é‡æ— æ•ˆçš„å¾ªç¯æ¯”è¾ƒã€‚","tags":"Algorithms","url":"https://jiang-hao.com/articles/2020/algorithms-algorithms-bubble-sort.html","loc":"https://jiang-hao.com/articles/2020/algorithms-algorithms-bubble-sort.html"},{"title":"æ•°æ®ç»“æ„ä¸ç®—æ³•â€”â€”é“¾è¡¨","text":"å®šä¹‰ ç›¸æ¯”æ•°ç»„ï¼Œé“¾è¡¨æ˜¯ä¸€ç§ç¨å¾®å¤æ‚ä¸€ç‚¹çš„æ•°æ®ç»“æ„ã€‚å¯¹äºä¸¤è€…ï¼Œæˆ‘ä»¬å¸¸å¸¸å°†ä¼šæ”¾åˆ°ä¸€å—å„¿æ¥æ¯”è¾ƒã€‚ ä»å›¾ä¸­æˆ‘ä»¬çœ‹åˆ°ï¼Œæ•°ç»„éœ€è¦ä¸€å—è¿ç»­çš„å†…å­˜ç©ºé—´æ¥å­˜å‚¨ï¼Œå¯¹å†…å­˜çš„è¦æ±‚æ¯”è¾ƒé«˜ã€‚å¦‚æœæˆ‘ä»¬ç”³è¯·ä¸€ä¸ª 100MB å¤§å°çš„æ•°ç»„ï¼Œå½“å†…å­˜ä¸­æ²¡æœ‰è¿ç»­çš„ã€è¶³å¤Ÿå¤§çš„å­˜å‚¨ç©ºé—´æ—¶ï¼Œå³ä¾¿å†…å­˜çš„å‰©ä½™æ€»å¯ç”¨ç©ºé—´å¤§äº 100MBï¼Œä»ç„¶ä¼šç”³è¯·å¤±è´¥ã€‚ è€Œé“¾è¡¨æ°æ°ç›¸åï¼Œå®ƒå¹¶ä¸éœ€è¦ä¸€å—è¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œå®ƒé€šè¿‡\"æŒ‡é’ˆ\"å°†ä¸€ç»„é›¶æ•£çš„å†…å­˜å—ä¸²è”èµ·æ¥ä½¿ç”¨ï¼Œæ‰€ä»¥å¦‚æœæˆ‘ä»¬ç”³è¯·çš„æ˜¯ 100MB å¤§å°çš„é“¾è¡¨ï¼Œæ ¹æœ¬ä¸ä¼šæœ‰é—®é¢˜ã€‚ é“¾è¡¨ç»“æ„äº”èŠ±å…«é—¨ï¼Œä¸»è¦æœ‰ä¸‰ç§æœ€å¸¸è§çš„é“¾è¡¨ç»“æ„ï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯ï¼šå•é“¾è¡¨ã€åŒå‘é“¾è¡¨å’Œå¾ªç¯é“¾è¡¨ã€‚æˆ‘ä»¬é¦–å…ˆæ¥çœ‹æœ€ç®€å•ã€æœ€å¸¸ç”¨çš„å•é“¾è¡¨ã€‚ å•å‘é“¾è¡¨ æˆ‘ä»¬åˆšåˆšè®²åˆ°ï¼Œé“¾è¡¨é€šè¿‡æŒ‡é’ˆå°†ä¸€ç»„é›¶æ•£çš„å†…å­˜å—ä¸²è”åœ¨ä¸€èµ·ã€‚å…¶ä¸­ï¼Œæˆ‘ä»¬æŠŠå†…å­˜å—ç§°ä¸ºé“¾è¡¨çš„\"ç»“ç‚¹\"ã€‚ä¸ºäº†å°†æ‰€æœ‰çš„ç»“ç‚¹ä¸²èµ·æ¥ï¼Œæ¯ä¸ªé“¾è¡¨çš„ç»“ç‚¹é™¤äº†å­˜å‚¨æ•°æ®ä¹‹å¤–ï¼Œè¿˜éœ€è¦è®°å½•é“¾ä¸Šçš„ä¸‹ä¸€ä¸ªç»“ç‚¹çš„åœ°å€ã€‚å¦‚å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬æŠŠè¿™ä¸ªè®°å½•ä¸‹ä¸ªç»“ç‚¹åœ°å€çš„æŒ‡é’ˆå«ä½œåç»§æŒ‡é’ˆ nextã€‚ å…¶ä¸­æœ‰ä¸¤ä¸ªç»“ç‚¹æ˜¯æ¯”è¾ƒç‰¹æ®Šçš„ï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯ç¬¬ä¸€ä¸ªç»“ç‚¹å’Œæœ€åä¸€ä¸ªç»“ç‚¹ã€‚æˆ‘ä»¬ä¹ æƒ¯æ€§åœ°æŠŠç¬¬ä¸€ä¸ªç»“ç‚¹å«ä½œå¤´ç»“ç‚¹ï¼ŒæŠŠæœ€åä¸€ä¸ªç»“ç‚¹å«ä½œå°¾ç»“ç‚¹ã€‚å…¶ä¸­ï¼Œå¤´ç»“ç‚¹ç”¨æ¥è®°å½•é“¾è¡¨çš„åŸºåœ°å€ã€‚æœ‰äº†å®ƒï¼Œæˆ‘ä»¬å°±å¯ä»¥éå†å¾—åˆ°æ•´æ¡é“¾è¡¨ã€‚è€Œå°¾ç»“ç‚¹ç‰¹æ®Šçš„åœ°æ–¹æ˜¯ï¼šæŒ‡é’ˆä¸æ˜¯æŒ‡å‘ä¸‹ä¸€ä¸ªç»“ç‚¹ï¼Œè€Œæ˜¯æŒ‡å‘ä¸€ä¸ªç©ºåœ°å€ NULLï¼Œè¡¨ç¤ºè¿™æ˜¯é“¾è¡¨ä¸Šæœ€åä¸€ä¸ªç»“ç‚¹ã€‚ ä¸æ•°ç»„ä¸€æ ·ï¼Œé“¾è¡¨ä¹Ÿæ”¯æŒæ•°æ®çš„æŸ¥æ‰¾ã€æ’å…¥å’Œåˆ é™¤æ“ä½œã€‚ æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨è¿›è¡Œæ•°ç»„çš„æ’å…¥ã€åˆ é™¤æ“ä½œæ—¶ï¼Œä¸ºäº†ä¿æŒå†…å­˜æ•°æ®çš„è¿ç»­æ€§ï¼Œéœ€è¦åšå¤§é‡çš„æ•°æ®æ¬ç§»ï¼Œæ‰€ä»¥æ—¶é—´å¤æ‚åº¦æ˜¯ O(n)ã€‚è€Œåœ¨é“¾è¡¨ä¸­æ’å…¥æˆ–è€…åˆ é™¤ä¸€ä¸ªæ•°æ®ï¼Œæˆ‘ä»¬å¹¶ä¸éœ€è¦ä¸ºäº†ä¿æŒå†…å­˜çš„è¿ç»­æ€§è€Œæ¬ç§»ç»“ç‚¹ï¼Œå› ä¸ºé“¾è¡¨çš„å­˜å‚¨ç©ºé—´æœ¬èº«å°±ä¸æ˜¯è¿ç»­çš„ã€‚æ‰€ä»¥ï¼Œåœ¨é“¾è¡¨ä¸­æ’å…¥å’Œåˆ é™¤ä¸€ä¸ªæ•°æ®æ˜¯éå¸¸å¿«é€Ÿçš„ã€‚ é’ˆå¯¹é“¾è¡¨çš„æ’å…¥å’Œåˆ é™¤æ“ä½œï¼Œæˆ‘ä»¬åªéœ€è¦è€ƒè™‘ç›¸é‚»ç»“ç‚¹çš„æŒ‡é’ˆæ”¹å˜ï¼Œæ‰€ä»¥å¯¹åº”çš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(1)ã€‚ ä½†æ˜¯ï¼Œæœ‰åˆ©å°±æœ‰å¼Šã€‚é“¾è¡¨è¦æƒ³éšæœºè®¿é—®ç¬¬ k ä¸ªå…ƒç´ ï¼Œå°±æ²¡æœ‰æ•°ç»„é‚£ä¹ˆé«˜æ•ˆäº†ã€‚å› ä¸ºé“¾è¡¨ä¸­çš„æ•°æ®å¹¶éè¿ç»­å­˜å‚¨çš„ï¼Œæ‰€ä»¥æ— æ³•åƒæ•°ç»„é‚£æ ·ï¼Œæ ¹æ®é¦–åœ°å€å’Œä¸‹æ ‡ï¼Œé€šè¿‡å¯»å€å…¬å¼å°±èƒ½ç›´æ¥è®¡ç®—å‡ºå¯¹åº”çš„å†…å­˜åœ°å€ï¼Œè€Œæ˜¯éœ€è¦æ ¹æ®æŒ‡é’ˆä¸€ä¸ªç»“ç‚¹ä¸€ä¸ªç»“ç‚¹åœ°ä¾æ¬¡éå†ï¼Œç›´åˆ°æ‰¾åˆ°ç›¸åº”çš„ç»“ç‚¹ã€‚ ä½ å¯ä»¥æŠŠé“¾è¡¨æƒ³è±¡æˆä¸€ä¸ªé˜Ÿä¼ï¼Œé˜Ÿä¼ä¸­çš„æ¯ä¸ªäººéƒ½åªçŸ¥é“è‡ªå·±åé¢çš„äººæ˜¯è°ï¼Œæ‰€ä»¥å½“æˆ‘ä»¬å¸Œæœ›çŸ¥é“æ’åœ¨ç¬¬ k ä½çš„äººæ˜¯è°çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±éœ€è¦ä»ç¬¬ä¸€ä¸ªäººå¼€å§‹ï¼Œä¸€ä¸ªä¸€ä¸ªåœ°å¾€ä¸‹æ•°ã€‚æ‰€ä»¥ï¼Œé“¾è¡¨éšæœºè®¿é—®çš„æ€§èƒ½æ²¡æœ‰æ•°ç»„å¥½ï¼Œéœ€è¦ O(n) çš„æ—¶é—´å¤æ‚åº¦ã€‚ å¾ªç¯é“¾è¡¨ å¾ªç¯é“¾è¡¨æ˜¯ä¸€ç§ç‰¹æ®Šçš„å•é“¾è¡¨ã€‚å®é™…ä¸Šï¼Œå¾ªç¯é“¾è¡¨ä¹Ÿå¾ˆç®€å•ã€‚å®ƒè·Ÿå•é“¾è¡¨å”¯ä¸€çš„åŒºåˆ«å°±åœ¨å°¾ç»“ç‚¹ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œå•é“¾è¡¨çš„å°¾ç»“ç‚¹æŒ‡é’ˆæŒ‡å‘ç©ºåœ°å€ï¼Œè¡¨ç¤ºè¿™å°±æ˜¯æœ€åçš„ç»“ç‚¹äº†ã€‚è€Œå¾ªç¯é“¾è¡¨çš„å°¾ç»“ç‚¹æŒ‡é’ˆæ˜¯æŒ‡å‘é“¾è¡¨çš„å¤´ç»“ç‚¹ã€‚ä»æˆ‘ç”»çš„å¾ªç¯é“¾è¡¨å›¾ä¸­ï¼Œä½ åº”è¯¥å¯ä»¥çœ‹å‡ºæ¥ï¼Œå®ƒåƒä¸€ä¸ªç¯ä¸€æ ·é¦–å°¾ç›¸è¿ï¼Œæ‰€ä»¥å«ä½œ\"å¾ªç¯\"é“¾è¡¨ã€‚ å’Œå•é“¾è¡¨ç›¸æ¯”ï¼Œå¾ªç¯é“¾è¡¨çš„ä¼˜ç‚¹æ˜¯ä»é“¾å°¾åˆ°é“¾å¤´æ¯”è¾ƒæ–¹ä¾¿ã€‚å½“è¦å¤„ç†çš„æ•°æ®å…·æœ‰ç¯å‹ç»“æ„ç‰¹ç‚¹æ—¶ï¼Œå°±ç‰¹åˆ«é€‚åˆé‡‡ç”¨å¾ªç¯é“¾è¡¨ã€‚æ¯”å¦‚è‘—åçš„ çº¦ç‘Ÿå¤«é—®é¢˜ ã€‚å°½ç®¡ç”¨å•é“¾è¡¨ä¹Ÿå¯ä»¥å®ç°ï¼Œä½†æ˜¯ç”¨å¾ªç¯é“¾è¡¨å®ç°çš„è¯ï¼Œä»£ç å°±ä¼šç®€æ´å¾ˆå¤šã€‚ åŒå‘é“¾è¡¨ å•é“¾è¡¨å’Œå¾ªç¯é“¾è¡¨æ˜¯ä¸æ˜¯éƒ½ä¸éš¾ï¼Ÿæ¥ä¸‹æ¥æˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸ªç¨å¾®å¤æ‚çš„ï¼Œåœ¨å®é™…çš„è½¯ä»¶å¼€å‘ä¸­ï¼Œä¹Ÿæ›´åŠ å¸¸ç”¨çš„é“¾è¡¨ç»“æ„ï¼šåŒå‘é“¾è¡¨ã€‚ å•å‘é“¾è¡¨åªæœ‰ä¸€ä¸ªæ–¹å‘ï¼Œç»“ç‚¹åªæœ‰ä¸€ä¸ªåç»§æŒ‡é’ˆ next æŒ‡å‘åé¢çš„ç»“ç‚¹ã€‚è€ŒåŒå‘é“¾è¡¨ï¼Œé¡¾åæ€ä¹‰ï¼Œå®ƒæ”¯æŒä¸¤ä¸ªæ–¹å‘ï¼Œæ¯ä¸ªç»“ç‚¹ä¸æ­¢æœ‰ä¸€ä¸ªåç»§æŒ‡é’ˆ next æŒ‡å‘åé¢çš„ç»“ç‚¹ï¼Œè¿˜æœ‰ä¸€ä¸ªå‰é©±æŒ‡é’ˆ prev æŒ‡å‘å‰é¢çš„ç»“ç‚¹ã€‚ åŒå‘é“¾è¡¨éœ€è¦é¢å¤–çš„ä¸¤ä¸ªç©ºé—´æ¥å­˜å‚¨åç»§ç»“ç‚¹å’Œå‰é©±ç»“ç‚¹çš„åœ°å€ã€‚æ‰€ä»¥ï¼Œå¦‚æœå­˜å‚¨åŒæ ·å¤šçš„æ•°æ®ï¼ŒåŒå‘é“¾è¡¨è¦æ¯”å•é“¾è¡¨å ç”¨æ›´å¤šçš„å†…å­˜ç©ºé—´ã€‚è™½ç„¶ä¸¤ä¸ªæŒ‡é’ˆæ¯”è¾ƒæµªè´¹å­˜å‚¨ç©ºé—´ï¼Œä½†å¯ä»¥æ”¯æŒåŒå‘éå†ï¼Œè¿™æ ·ä¹Ÿå¸¦æ¥äº†åŒå‘é“¾è¡¨æ“ä½œçš„çµæ´»æ€§ã€‚é‚£ç›¸æ¯”å•é“¾è¡¨ï¼ŒåŒå‘é“¾è¡¨é€‚åˆè§£å†³å“ªç§é—®é¢˜å‘¢ï¼Ÿ ä»ç»“æ„ä¸Šæ¥çœ‹ï¼ŒåŒå‘é“¾è¡¨å¯ä»¥æ”¯æŒ O(1) æ—¶é—´å¤æ‚åº¦çš„æƒ…å†µä¸‹æ‰¾åˆ°å‰é©±ç»“ç‚¹ï¼Œæ­£æ˜¯è¿™æ ·çš„ç‰¹ç‚¹ï¼Œä¹Ÿä½¿åŒå‘é“¾è¡¨åœ¨æŸäº›æƒ…å†µä¸‹çš„æ’å…¥ã€åˆ é™¤ç­‰æ“ä½œéƒ½è¦æ¯”å•é“¾è¡¨ç®€å•ã€é«˜æ•ˆã€‚ ä½ å¯èƒ½ä¼šè¯´ï¼Œæˆ‘åˆšè®²åˆ°å•é“¾è¡¨çš„æ’å…¥ã€åˆ é™¤æ“ä½œçš„æ—¶é—´å¤æ‚åº¦å·²ç»æ˜¯ O(1) äº†ï¼ŒåŒå‘é“¾è¡¨è¿˜èƒ½å†æ€ä¹ˆé«˜æ•ˆå‘¢ï¼Ÿåˆ«ç€æ€¥ï¼Œåˆšåˆšçš„åˆ†ææ¯”è¾ƒåç†è®ºï¼Œå¾ˆå¤šæ•°æ®ç»“æ„å’Œç®—æ³•ä¹¦ç±ä¸­éƒ½ä¼šè¿™ä¹ˆè®²ï¼Œä½†æ˜¯è¿™ç§è¯´æ³•å®é™…ä¸Šæ˜¯ä¸å‡†ç¡®çš„ï¼Œæˆ–è€…è¯´æ˜¯æœ‰å…ˆå†³æ¡ä»¶çš„ã€‚ æˆ‘ä»¬å…ˆæ¥çœ‹åˆ é™¤æ“ä½œã€‚ åœ¨å®é™…çš„è½¯ä»¶å¼€å‘ä¸­ï¼Œä»é“¾è¡¨ä¸­åˆ é™¤ä¸€ä¸ªæ•°æ®æ— å¤–ä¹è¿™ä¸¤ç§æƒ…å†µï¼š åˆ é™¤ç»“ç‚¹ä¸­\"å€¼ç­‰äºæŸä¸ªç»™å®šå€¼\"çš„ç»“ç‚¹ï¼› åˆ é™¤ç»™å®šæŒ‡é’ˆæŒ‡å‘çš„ç»“ç‚¹ã€‚ å¯¹äºç¬¬ä¸€ç§æƒ…å†µï¼Œä¸ç®¡æ˜¯å•é“¾è¡¨è¿˜æ˜¯åŒå‘é“¾è¡¨ï¼Œä¸ºäº†æŸ¥æ‰¾åˆ°å€¼ç­‰äºç»™å®šå€¼çš„ç»“ç‚¹ï¼Œéƒ½éœ€è¦ä»å¤´ç»“ç‚¹å¼€å§‹ä¸€ä¸ªä¸€ä¸ªä¾æ¬¡éå†å¯¹æ¯”ï¼Œç›´åˆ°æ‰¾åˆ°å€¼ç­‰äºç»™å®šå€¼çš„ç»“ç‚¹ï¼Œç„¶åå†é€šè¿‡å‰é¢è®²çš„æŒ‡é’ˆæ“ä½œå°†å…¶åˆ é™¤ã€‚ å°½ç®¡å•çº¯çš„åˆ é™¤æ“ä½œæ—¶é—´å¤æ‚åº¦æ˜¯ O(1)ï¼Œä½†éå†æŸ¥æ‰¾çš„æ—¶é—´æ˜¯ä¸»è¦çš„è€—æ—¶ç‚¹ï¼Œå¯¹åº”çš„æ—¶é—´å¤æ‚åº¦ä¸º O(n)ã€‚æ ¹æ®æ—¶é—´å¤æ‚åº¦åˆ†æä¸­çš„åŠ æ³•æ³•åˆ™ï¼Œåˆ é™¤å€¼ç­‰äºç»™å®šå€¼çš„ç»“ç‚¹å¯¹åº”çš„é“¾è¡¨æ“ä½œçš„æ€»æ—¶é—´å¤æ‚åº¦ä¸º O(n)ã€‚ å¯¹äºç¬¬äºŒç§æƒ…å†µï¼Œæˆ‘ä»¬å·²ç»æ‰¾åˆ°äº†è¦åˆ é™¤çš„ç»“ç‚¹ï¼Œä½†æ˜¯åˆ é™¤æŸä¸ªç»“ç‚¹ q éœ€è¦çŸ¥é“å…¶å‰é©±ç»“ç‚¹ï¼Œè€Œå•é“¾è¡¨å¹¶ä¸æ”¯æŒç›´æ¥è·å–å‰é©±ç»“ç‚¹ï¼Œæ‰€ä»¥ï¼Œä¸ºäº†æ‰¾åˆ°å‰é©±ç»“ç‚¹ï¼Œæˆ‘ä»¬è¿˜æ˜¯è¦ä»å¤´ç»“ç‚¹å¼€å§‹éå†é“¾è¡¨ï¼Œç›´åˆ° p->next=qï¼Œè¯´æ˜ p æ˜¯ q çš„å‰é©±ç»“ç‚¹ã€‚ ä½†æ˜¯å¯¹äºåŒå‘é“¾è¡¨æ¥è¯´ï¼Œè¿™ç§æƒ…å†µå°±æ¯”è¾ƒæœ‰ä¼˜åŠ¿äº†ã€‚å› ä¸ºåŒå‘é“¾è¡¨ä¸­çš„ç»“ç‚¹å·²ç»ä¿å­˜äº†å‰é©±ç»“ç‚¹çš„æŒ‡é’ˆï¼Œä¸éœ€è¦åƒå•é“¾è¡¨é‚£æ ·éå†ã€‚æ‰€ä»¥ï¼Œé’ˆå¯¹ç¬¬äºŒç§æƒ…å†µï¼Œå•é“¾è¡¨åˆ é™¤æ“ä½œéœ€è¦ O(n) çš„æ—¶é—´å¤æ‚åº¦ï¼Œè€ŒåŒå‘é“¾è¡¨åªéœ€è¦åœ¨ O(1) çš„æ—¶é—´å¤æ‚åº¦å†…å°±æå®šäº†ï¼ åŒç†ï¼Œå¦‚æœæˆ‘ä»¬å¸Œæœ›åœ¨é“¾è¡¨çš„æŸä¸ªæŒ‡å®šç»“ç‚¹å‰é¢æ’å…¥ä¸€ä¸ªç»“ç‚¹ï¼ŒåŒå‘é“¾è¡¨æ¯”å•é“¾è¡¨æœ‰å¾ˆå¤§çš„ä¼˜åŠ¿ã€‚åŒå‘é“¾è¡¨å¯ä»¥åœ¨ O(1) æ—¶é—´å¤æ‚åº¦æå®šï¼Œè€Œå•å‘é“¾è¡¨éœ€è¦ O(n) çš„æ—¶é—´å¤æ‚åº¦ã€‚ é™¤äº†æ’å…¥ã€åˆ é™¤æ“ä½œæœ‰ä¼˜åŠ¿ä¹‹å¤–ï¼Œå¯¹äºä¸€ä¸ªæœ‰åºé“¾è¡¨ï¼ŒåŒå‘é“¾è¡¨çš„æŒ‰å€¼æŸ¥è¯¢çš„æ•ˆç‡ä¹Ÿè¦æ¯”å•é“¾è¡¨é«˜ä¸€äº›ã€‚å› ä¸ºï¼Œæˆ‘ä»¬å¯ä»¥è®°å½•ä¸Šæ¬¡æŸ¥æ‰¾çš„ä½ç½® pï¼Œæ¯æ¬¡æŸ¥è¯¢æ—¶ï¼Œæ ¹æ®è¦æŸ¥æ‰¾çš„å€¼ä¸ p çš„å¤§å°å…³ç³»ï¼Œå†³å®šæ˜¯å¾€å‰è¿˜æ˜¯å¾€åæŸ¥æ‰¾ï¼Œæ‰€ä»¥å¹³å‡åªéœ€è¦æŸ¥æ‰¾ä¸€åŠçš„æ•°æ®ã€‚ ç°åœ¨ï¼Œä½ æœ‰æ²¡æœ‰è§‰å¾—åŒå‘é“¾è¡¨è¦æ¯”å•é“¾è¡¨æ›´åŠ é«˜æ•ˆå‘¢ï¼Ÿè¿™å°±æ˜¯ä¸ºä»€ä¹ˆåœ¨å®é™…çš„è½¯ä»¶å¼€å‘ä¸­ï¼ŒåŒå‘é“¾è¡¨å°½ç®¡æ¯”è¾ƒè´¹å†…å­˜ï¼Œä½†è¿˜æ˜¯æ¯”å•é“¾è¡¨çš„åº”ç”¨æ›´åŠ å¹¿æ³›çš„åŸå› ã€‚å¦‚æœä½ ç†Ÿæ‚‰ Java è¯­è¨€ï¼Œä½ è‚¯å®šç”¨è¿‡ LinkedHashMap è¿™ä¸ªå®¹å™¨ã€‚å¦‚æœä½ æ·±å…¥ç ”ç©¶ LinkedHashMap çš„å®ç°åŸç†ï¼Œå°±ä¼šå‘ç°å…¶ä¸­å°±ç”¨åˆ°äº†åŒå‘é“¾è¡¨è¿™ç§æ•°æ®ç»“æ„ã€‚ å®é™…ä¸Šï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªæ›´åŠ é‡è¦çš„çŸ¥è¯†ç‚¹éœ€è¦ä½ æŒæ¡ï¼Œé‚£å°±æ˜¯ç”¨ç©ºé—´æ¢æ—¶é—´çš„è®¾è®¡æ€æƒ³ã€‚å½“å†…å­˜ç©ºé—´å……è¶³çš„æ—¶å€™ï¼Œå¦‚æœæˆ‘ä»¬æ›´åŠ è¿½æ±‚ä»£ç çš„æ‰§è¡Œé€Ÿåº¦ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€‰æ‹©ç©ºé—´å¤æ‚åº¦ç›¸å¯¹è¾ƒé«˜ã€ä½†æ—¶é—´å¤æ‚åº¦ç›¸å¯¹å¾ˆä½çš„ç®—æ³•æˆ–è€…æ•°æ®ç»“æ„ã€‚ç›¸åï¼Œå¦‚æœå†…å­˜æ¯”è¾ƒç´§ç¼ºï¼Œæ¯”å¦‚ä»£ç è·‘åœ¨æ‰‹æœºæˆ–è€…å•ç‰‡æœºä¸Šï¼Œè¿™ä¸ªæ—¶å€™ï¼Œå°±è¦åè¿‡æ¥ç”¨æ—¶é—´æ¢ç©ºé—´çš„è®¾è®¡æ€è·¯ã€‚ ç¼“å­˜å®é™…ä¸Šå°±æ˜¯åˆ©ç”¨äº†ç©ºé—´æ¢æ—¶é—´çš„è®¾è®¡æ€æƒ³ã€‚å¦‚æœæˆ‘ä»¬æŠŠæ•°æ®å­˜å‚¨åœ¨ç¡¬ç›˜ä¸Šï¼Œä¼šæ¯”è¾ƒèŠ‚çœå†…å­˜ï¼Œä½†æ¯æ¬¡æŸ¥æ‰¾æ•°æ®éƒ½è¦è¯¢é—®ä¸€æ¬¡ç¡¬ç›˜ï¼Œä¼šæ¯”è¾ƒæ…¢ã€‚ä½†å¦‚æœæˆ‘ä»¬é€šè¿‡ç¼“å­˜æŠ€æœ¯ï¼Œäº‹å…ˆå°†æ•°æ®åŠ è½½åœ¨å†…å­˜ä¸­ï¼Œè™½ç„¶ä¼šæ¯”è¾ƒè€—è´¹å†…å­˜ç©ºé—´ï¼Œä½†æ˜¯æ¯æ¬¡æ•°æ®æŸ¥è¯¢çš„é€Ÿåº¦å°±å¤§å¤§æé«˜äº†ã€‚ æ‰€ä»¥æ€»ç»“ä¸€ä¸‹ï¼Œå¯¹äºæ‰§è¡Œè¾ƒæ…¢çš„ç¨‹åºï¼Œå¯ä»¥é€šè¿‡æ¶ˆè€—æ›´å¤šçš„å†…å­˜ï¼ˆç©ºé—´æ¢æ—¶é—´ï¼‰æ¥è¿›è¡Œä¼˜åŒ–ï¼›è€Œæ¶ˆè€—è¿‡å¤šå†…å­˜çš„ç¨‹åºï¼Œå¯ä»¥é€šè¿‡æ¶ˆè€—æ›´å¤šçš„æ—¶é—´ï¼ˆæ—¶é—´æ¢ç©ºé—´ï¼‰æ¥é™ä½å†…å­˜çš„æ¶ˆè€—ã€‚ åŒå‘å¾ªç¯é“¾è¡¨ äº†è§£äº†å¾ªç¯é“¾è¡¨å’ŒåŒå‘é“¾è¡¨ï¼Œå¦‚æœæŠŠè¿™ä¸¤ç§é“¾è¡¨æ•´åˆåœ¨ä¸€èµ·å°±æ˜¯ä¸€ä¸ªæ–°çš„ç‰ˆæœ¬ï¼šåŒå‘å¾ªç¯é“¾è¡¨ã€‚ é“¾è¡¨VSæ•°ç»„ é€šè¿‡å‰é¢å†…å®¹çš„å­¦ä¹ ï¼Œä½ åº”è¯¥å·²ç»çŸ¥é“ï¼Œæ•°ç»„å’Œé“¾è¡¨æ˜¯ä¸¤ç§æˆªç„¶ä¸åŒçš„å†…å­˜ç»„ç»‡æ–¹å¼ã€‚æ­£æ˜¯å› ä¸ºå†…å­˜å­˜å‚¨çš„åŒºåˆ«ï¼Œå®ƒä»¬æ’å…¥ã€åˆ é™¤ã€éšæœºè®¿é—®æ“ä½œçš„æ—¶é—´å¤æ‚åº¦æ­£å¥½ç›¸åã€‚ ä¸è¿‡ï¼Œæ•°ç»„å’Œé“¾è¡¨çš„å¯¹æ¯”ï¼Œå¹¶ä¸èƒ½å±€é™äºæ—¶é—´å¤æ‚åº¦ã€‚è€Œä¸”ï¼Œåœ¨å®é™…çš„è½¯ä»¶å¼€å‘ä¸­ï¼Œä¸èƒ½ä»…ä»…åˆ©ç”¨å¤æ‚åº¦åˆ†æå°±å†³å®šä½¿ç”¨å“ªä¸ªæ•°æ®ç»“æ„æ¥å­˜å‚¨æ•°æ®ã€‚ æ•°ç»„ç®€å•æ˜“ç”¨ï¼Œåœ¨å®ç°ä¸Šä½¿ç”¨çš„æ˜¯è¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œå¯ä»¥å€ŸåŠ© CPU çš„ç¼“å­˜æœºåˆ¶ï¼Œé¢„è¯»æ•°ç»„ä¸­çš„æ•°æ®ï¼Œæ‰€ä»¥è®¿é—®æ•ˆç‡æ›´é«˜ã€‚è€Œé“¾è¡¨åœ¨å†…å­˜ä¸­å¹¶ä¸æ˜¯è¿ç»­å­˜å‚¨ï¼Œæ‰€ä»¥å¯¹ CPU ç¼“å­˜ä¸å‹å¥½ï¼Œæ²¡åŠæ³•æœ‰æ•ˆé¢„è¯»ã€‚ CPUåœ¨ä»å†…å­˜è¯»å–æ•°æ®çš„æ—¶å€™ï¼Œä¼šå…ˆæŠŠè¯»å–åˆ°çš„æ•°æ®åŠ è½½åˆ°CPUçš„ç¼“å­˜ä¸­ã€‚è€ŒCPUæ¯æ¬¡ä»å†…å­˜è¯»å–æ•°æ®å¹¶ä¸æ˜¯åªè¯»å–é‚£ä¸ªç‰¹å®šè¦è®¿é—®çš„åœ°å€ï¼Œè€Œæ˜¯è¯»å–ä¸€ä¸ªæ•°æ®å—å¹¶ä¿å­˜åˆ°CPUç¼“å­˜ä¸­ï¼Œç„¶åä¸‹æ¬¡è®¿é—®å†…å­˜æ•°æ®çš„æ—¶å€™å°±ä¼šå…ˆä»CPUç¼“å­˜å¼€å§‹æŸ¥æ‰¾ï¼Œå¦‚æœæ‰¾åˆ°å°±ä¸éœ€è¦å†ä»å†…å­˜ä¸­å–ã€‚è¿™æ ·å°±å®ç°äº†æ¯”å†…å­˜è®¿é—®é€Ÿåº¦æ›´å¿«çš„æœºåˆ¶ï¼Œä¹Ÿå°±æ˜¯CPUç¼“å­˜å­˜åœ¨çš„æ„ä¹‰:ä¸ºäº†å¼¥è¡¥å†…å­˜è®¿é—®é€Ÿåº¦è¿‡æ…¢ä¸CPUæ‰§è¡Œé€Ÿåº¦å¿«ä¹‹é—´çš„å·®å¼‚è€Œå¼•å…¥ã€‚ æ¯”å¦‚ä¸ºäº†å……åˆ†åˆ©ç”¨CPUçš„é«˜é€Ÿç¼“å­˜çš„é«˜é€Ÿè®¿é—®ï¼ŒJavaçš„å¼€æºé¡¹ç›® Disruptor ï¼ˆDisruptor å¯è°“æ˜¯å°†ç¡¬ä»¶ç”¨åˆ°äº†æè‡´ï¼Œçº¿ç¨‹å’ŒCPU æ ¸å¿ƒä¹‹é—´çš„äº²å’Œæ€§éƒ½è€ƒè™‘åˆ°äº†ï¼‰å°±æ˜¯é€šè¿‡ç¼“å­˜è¡Œå¡«å……è¿™ä¸ªç­–ç•¥æ¥ä¿æŒæ•°æ®ä¿æŒåœ¨CPUçš„é«˜é€Ÿç¼“å­˜ä¸­ã€‚å¾—ç›ŠäºCPUç¼“å­˜ä»å†…å­˜ä¸­åŠ è½½æ•°æ®æ˜¯æŒ‰å—åŠ è½½ï¼ˆä¹Ÿå¯ä»¥è¯´ä¸€æ•´ä¸ªç¼“å­˜è¡Œï¼Œçœ‹æ“ä½œç³»ç»Ÿä½æ•°å†³å®šï¼‰ï¼Œæ•°ç»„çš„è¿ç»­åœ°å€ç©ºé—´ä¼šä¸€å¹¶åŠ è½½åˆ°CPUçš„é«˜é€Ÿç¼“å­˜ä¸­ï¼Œè®¿é—®é€Ÿåº¦å’Œå†…å­˜ä¸æ˜¯ä¸€ä¸ªé‡çº§ã€‚ å¯¹äºæ•°ç»„æ¥è¯´ï¼Œå­˜å‚¨ç©ºé—´æ˜¯è¿ç»­çš„ï¼Œæ‰€ä»¥åœ¨åŠ è½½æŸä¸ªä¸‹æ ‡çš„æ—¶å€™å¯ä»¥æŠŠä»¥åçš„å‡ ä¸ªä¸‹æ ‡å…ƒç´ ä¹ŸåŠ è½½åˆ°CPUç¼“å­˜è¿™æ ·æ‰§è¡Œé€Ÿåº¦ä¼šå¿«äºå­˜å‚¨ç©ºé—´ä¸è¿ç»­çš„é“¾è¡¨å­˜å‚¨ã€‚ æ•°ç»„çš„ç¼ºç‚¹æ˜¯å¤§å°å›ºå®šï¼Œä¸€ç»å£°æ˜å°±è¦å ç”¨æ•´å—è¿ç»­å†…å­˜ç©ºé—´ã€‚å¦‚æœå£°æ˜çš„æ•°ç»„è¿‡å¤§ï¼Œç³»ç»Ÿå¯èƒ½æ²¡æœ‰è¶³å¤Ÿçš„è¿ç»­å†…å­˜ç©ºé—´åˆ†é…ç»™å®ƒï¼Œå¯¼è‡´\"å†…å­˜ä¸è¶³ï¼ˆout of memoryï¼‰\"ã€‚å¦‚æœå£°æ˜çš„æ•°ç»„è¿‡å°ï¼Œåˆ™å¯èƒ½å‡ºç°ä¸å¤Ÿç”¨çš„æƒ…å†µã€‚è¿™æ—¶åªèƒ½å†ç”³è¯·ä¸€ä¸ªæ›´å¤§çš„å†…å­˜ç©ºé—´ï¼ŒæŠŠåŸæ•°ç»„æ‹·è´è¿›å»ï¼Œéå¸¸è´¹æ—¶ã€‚é“¾è¡¨æœ¬èº«æ²¡æœ‰å¤§å°çš„é™åˆ¶ï¼Œå¤©ç„¶åœ°æ”¯æŒåŠ¨æ€æ‰©å®¹ï¼Œæˆ‘è§‰å¾—è¿™ä¹Ÿæ˜¯å®ƒä¸æ•°ç»„ æœ€å¤§çš„åŒºåˆ« ã€‚ ä½ å¯èƒ½ä¼šè¯´ï¼Œæˆ‘ä»¬ Java ä¸­çš„ ArrayList å®¹å™¨ï¼Œä¹Ÿå¯ä»¥æ”¯æŒåŠ¨æ€æ‰©å®¹å•Šï¼Ÿæˆ‘ä»¬ä¸Šä¸€èŠ‚è¯¾è®²è¿‡ï¼Œå½“æˆ‘ä»¬å¾€æ”¯æŒåŠ¨æ€æ‰©å®¹çš„æ•°ç»„ä¸­æ’å…¥ä¸€ä¸ªæ•°æ®æ—¶ï¼Œå¦‚æœæ•°ç»„ä¸­æ²¡æœ‰ç©ºé—²ç©ºé—´äº†ï¼Œå°±ä¼šç”³è¯·ä¸€ä¸ªæ›´å¤§çš„ç©ºé—´ï¼Œå°†æ•°æ®æ‹·è´è¿‡å»ï¼Œè€Œæ•°æ®æ‹·è´çš„æ“ä½œæ˜¯éå¸¸è€—æ—¶çš„ã€‚ ä¸¾ä¸€ä¸ªç¨å¾®æç«¯çš„ä¾‹å­ã€‚å¦‚æœæˆ‘ä»¬ç”¨ ArrayList å­˜å‚¨äº†äº† 1GB å¤§å°çš„æ•°æ®ï¼Œè¿™ä¸ªæ—¶å€™å·²ç»æ²¡æœ‰ç©ºé—²ç©ºé—´äº†ï¼Œå½“æˆ‘ä»¬å†æ’å…¥æ•°æ®çš„æ—¶å€™ï¼ŒArrayList ä¼šç”³è¯·ä¸€ä¸ª 1.5GB å¤§å°çš„å­˜å‚¨ç©ºé—´ï¼Œå¹¶ä¸”æŠŠåŸæ¥é‚£ 1GB çš„æ•°æ®æ‹·è´åˆ°æ–°ç”³è¯·çš„ç©ºé—´ä¸Šã€‚å¬èµ·æ¥æ˜¯ä¸æ˜¯å°±å¾ˆè€—æ—¶ï¼Ÿ é™¤æ­¤ä¹‹å¤–ï¼Œå¦‚æœä»£ç å¯¹å†…å­˜çš„ä½¿ç”¨éå¸¸è‹›åˆ»ï¼Œé‚£æ•°ç»„å°±æ›´é€‚åˆä½ ã€‚å› ä¸ºé“¾è¡¨ä¸­çš„æ¯ä¸ªç»“ç‚¹éƒ½éœ€è¦æ¶ˆè€—é¢å¤–çš„å­˜å‚¨ç©ºé—´å»å­˜å‚¨ä¸€ä»½æŒ‡å‘ä¸‹ä¸€ä¸ªç»“ç‚¹çš„æŒ‡é’ˆï¼Œæ‰€ä»¥å†…å­˜æ¶ˆè€—ä¼šç¿»å€ã€‚è€Œä¸”ï¼Œå¯¹é“¾è¡¨è¿›è¡Œé¢‘ç¹çš„æ’å…¥ã€åˆ é™¤æ“ä½œï¼Œè¿˜ä¼šå¯¼è‡´é¢‘ç¹çš„å†…å­˜ç”³è¯·å’Œé‡Šæ”¾ï¼Œå®¹æ˜“é€ æˆå†…å­˜ç¢ç‰‡ï¼Œå¦‚æœæ˜¯ Java è¯­è¨€ï¼Œå°±æœ‰å¯èƒ½ä¼šå¯¼è‡´é¢‘ç¹çš„ GCï¼ˆGarbage Collectionï¼Œåƒåœ¾å›æ”¶ï¼‰ã€‚ æ‰€ä»¥ï¼Œåœ¨æˆ‘ä»¬å®é™…çš„å¼€å‘ä¸­ï¼Œé’ˆå¯¹ä¸åŒç±»å‹çš„é¡¹ç›®ï¼Œè¦æ ¹æ®å…·ä½“æƒ…å†µï¼Œæƒè¡¡ç©¶ç«Ÿæ˜¯é€‰æ‹©æ•°ç»„è¿˜æ˜¯é“¾è¡¨ã€‚ åŸºäºé“¾è¡¨å®ç° LRU ç¼“å­˜æ·˜æ±°ç®—æ³• ç¼“å­˜æ˜¯ä¸€ç§æé«˜æ•°æ®è¯»å–æ€§èƒ½çš„æŠ€æœ¯ï¼Œåœ¨ç¡¬ä»¶è®¾è®¡ã€è½¯ä»¶å¼€å‘ä¸­éƒ½æœ‰ç€éå¸¸å¹¿æ³›çš„åº”ç”¨ï¼Œæ¯”å¦‚å¸¸è§çš„ CPU ç¼“å­˜ã€æ•°æ®åº“ç¼“å­˜ã€æµè§ˆå™¨ç¼“å­˜ç­‰ç­‰ã€‚ ç¼“å­˜çš„å¤§å°æœ‰é™ï¼Œå½“ç¼“å­˜è¢«ç”¨æ»¡æ—¶ï¼Œå“ªäº›æ•°æ®åº”è¯¥è¢«æ¸…ç†å‡ºå»ï¼Œå“ªäº›æ•°æ®åº”è¯¥è¢«ä¿ç•™ï¼Ÿè¿™å°±éœ€è¦ç¼“å­˜æ·˜æ±°ç­–ç•¥æ¥å†³å®šã€‚å¸¸è§çš„ç­–ç•¥æœ‰ä¸‰ç§ï¼šå…ˆè¿›å…ˆå‡ºç­–ç•¥ FIFOï¼ˆFirst Inï¼ŒFirst Outï¼‰ã€æœ€å°‘ä½¿ç”¨ç­–ç•¥ LFUï¼ˆLeast Frequently Usedï¼‰ã€æœ€è¿‘æœ€å°‘ä½¿ç”¨ç­–ç•¥ LRUï¼ˆLeast Recently Usedï¼‰ã€‚ å¦‚ä½•åŸºäºé“¾è¡¨å®ç° LRU ç¼“å­˜æ·˜æ±°ç®—æ³•ï¼Ÿæ€è·¯æ˜¯è¿™æ ·çš„ï¼šæˆ‘ä»¬ç»´æŠ¤ä¸€ä¸ªæœ‰åºå•é“¾è¡¨ï¼Œè¶Šé è¿‘é“¾è¡¨å°¾éƒ¨çš„ç»“ç‚¹æ˜¯è¶Šæ—©ä¹‹å‰è®¿é—®çš„ã€‚å½“æœ‰ä¸€ä¸ªæ–°çš„æ•°æ®è¢«è®¿é—®æ—¶ï¼Œæˆ‘ä»¬ä»é“¾è¡¨å¤´å¼€å§‹é¡ºåºéå†é“¾è¡¨ã€‚ å¦‚æœæ­¤æ•°æ®ä¹‹å‰å·²ç»è¢«ç¼“å­˜åœ¨é“¾è¡¨ä¸­äº†ï¼Œæˆ‘ä»¬éå†å¾—åˆ°è¿™ä¸ªæ•°æ®å¯¹åº”çš„ç»“ç‚¹ï¼Œå¹¶å°†å…¶ä»åŸæ¥çš„ä½ç½®åˆ é™¤ï¼Œç„¶åå†æ’å…¥åˆ°é“¾è¡¨çš„å¤´éƒ¨ã€‚ å¦‚æœæ­¤æ•°æ®æ²¡æœ‰åœ¨ç¼“å­˜é“¾è¡¨ä¸­ï¼Œåˆå¯ä»¥åˆ†ä¸ºä¸¤ç§æƒ…å†µï¼š å¦‚æœæ­¤æ—¶ç¼“å­˜æœªæ»¡ï¼Œåˆ™å°†æ­¤ç»“ç‚¹ç›´æ¥æ’å…¥åˆ°é“¾è¡¨çš„å¤´éƒ¨ï¼› å¦‚æœæ­¤æ—¶ç¼“å­˜å·²æ»¡ï¼Œåˆ™é“¾è¡¨å°¾ç»“ç‚¹åˆ é™¤ï¼Œå°†æ–°çš„æ•°æ®ç»“ç‚¹æ’å…¥é“¾è¡¨çš„å¤´éƒ¨ã€‚ è¿™æ ·æˆ‘ä»¬å°±ç”¨é“¾è¡¨å®ç°äº†ä¸€ä¸ª LRU ç¼“å­˜ã€‚ ç°åœ¨æˆ‘ä»¬æ¥çœ‹ä¸‹ç¼“å­˜è®¿é—®çš„æ—¶é—´å¤æ‚åº¦æ˜¯å¤šå°‘ã€‚å› ä¸ºä¸ç®¡ç¼“å­˜æœ‰æ²¡æœ‰æ»¡ï¼Œæˆ‘ä»¬éƒ½éœ€è¦éå†ä¸€éé“¾è¡¨ï¼Œæ‰€ä»¥è¿™ç§åŸºäºé“¾è¡¨çš„å®ç°æ€è·¯ï¼Œç¼“å­˜è®¿é—®çš„æ—¶é—´å¤æ‚åº¦ä¸º O(n)ã€‚ å®é™…ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­ä¼˜åŒ–è¿™ä¸ªå®ç°æ€è·¯ï¼Œæ¯”å¦‚å¼•å…¥æ•£åˆ—è¡¨ï¼ˆHash tableï¼‰æ¥è®°å½•æ¯ä¸ªæ•°æ®çš„ä½ç½®ï¼Œå°†ç¼“å­˜è®¿é—®çš„æ—¶é—´å¤æ‚åº¦é™åˆ° O(1)ã€‚ å•é“¾è¡¨çš„å›æ–‡å­—ç¬¦ä¸²åˆ¤æ–­ å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦æ˜¯å›æ–‡å­—ç¬¦ä¸²çš„é—®é¢˜ï¼Œæˆ‘æƒ³ä½ åº”è¯¥å¬è¿‡ï¼Œæˆ‘ä»¬ä»Šå¤©çš„é¢˜ç›®å°±æ˜¯åŸºäºè¿™ä¸ªé—®é¢˜çš„æ”¹é€ ç‰ˆæœ¬ã€‚å¦‚æœå­—ç¬¦ä¸²æ˜¯é€šè¿‡å•é“¾è¡¨æ¥å­˜å‚¨çš„ï¼Œé‚£è¯¥å¦‚ä½•æ¥åˆ¤æ–­æ˜¯ä¸€ä¸ªå›æ–‡ä¸²å‘¢ï¼Ÿä½ æœ‰ä»€ä¹ˆå¥½çš„è§£å†³æ€è·¯å‘¢ï¼Ÿç›¸åº”çš„æ—¶é—´ç©ºé—´å¤æ‚åº¦åˆæ˜¯å¤šå°‘å‘¢ï¼Ÿ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¿«æ…¢ä¸¤ä¸ªæŒ‡é’ˆæ‰¾åˆ°é“¾è¡¨ä¸­ç‚¹ï¼Œæ…¢æŒ‡é’ˆæ¯æ¬¡å‰è¿›ä¸€æ­¥ï¼Œå¿«æŒ‡é’ˆæ¯æ¬¡å‰è¿›ä¸¤æ­¥ã€‚åœ¨æ…¢æŒ‡é’ˆå‰è¿›çš„è¿‡ç¨‹ä¸­ï¼ŒåŒæ—¶ä¿®æ”¹å…¶ next æŒ‡é’ˆï¼Œä½¿å¾—é“¾è¡¨å‰åŠéƒ¨åˆ†ååºã€‚æœ€åæ¯”è¾ƒä¸­ç‚¹ä¸¤ä¾§çš„é“¾è¡¨æ˜¯å¦ç›¸ç­‰ã€‚ /** * Definition for singly-linked list. * public class ListNode { * int val; * ListNode next; * ListNode(int x) { val = x; } * } */ class Solution { public boolean isPalindrome ( ListNode head ) { if ( head == null || head . next == null ) { return true ; } ListNode prev = null ; ListNode slow = head ; ListNode fast = head ; while ( fast != null && fast . next != null ) { fast = fast . next . next ; ListNode next = slow . next ; slow . next = prev ; prev = slow ; slow = next ; } if ( fast != null ) { slow = slow . next ; } while ( slow != null ) { if ( slow . val != prev . val ) { return false ; } slow = slow . next ; prev = prev . next ; } return true ; } } æ—¶é—´å¤æ‚åº¦ï¼šO(n) ç©ºé—´å¤æ‚åº¦ï¼šO(1) å…³äºç©ºé—´å¤æ‚åº¦æ˜¯O(1)è€Œä¸æ˜¯O(n)çš„è¯´æ˜ï¼šè¦çœ‹ä¸ºè§£å†³é—®é¢˜è€Œå¼€æ”¯çš„é¢å¤–çš„å†…å­˜æ¶ˆè€—ï¼Œä¸æ˜¯çœ‹é“¾è¡¨æœ¬èº«å­˜å‚¨éœ€è¦å¤šå°‘ç©ºé—´ã€‚ é“¾è¡¨é…åˆæ ˆä¹Ÿå¯ä»¥å®Œæˆï¼Œä¸è¿‡ç©ºé—´å¤æ‚åº¦å°±O(n)äº†ã€‚ å¦‚ä½•å†™å¥½é“¾è¡¨ä»£ç  æƒ³è¦å†™å¥½é“¾è¡¨ä»£ç å¹¶ä¸æ˜¯å®¹æ˜“çš„äº‹å„¿ï¼Œå°¤å…¶æ˜¯é‚£äº›å¤æ‚çš„é“¾è¡¨æ“ä½œï¼Œæ¯”å¦‚é“¾è¡¨åè½¬ã€æœ‰åºé“¾è¡¨åˆå¹¶ç­‰ï¼Œå†™çš„æ—¶å€™éå¸¸å®¹æ˜“å‡ºé”™ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¾€å¾€èƒ½æŠŠ\"é“¾è¡¨åè½¬\"è¿™å‡ è¡Œä»£ç å†™å¯¹çš„äººä¸è¶³ 10%ã€‚ ä¸ºä»€ä¹ˆé“¾è¡¨ä»£ç è¿™ä¹ˆéš¾å†™ï¼Ÿç©¶ç«Ÿæ€æ ·æ‰èƒ½æ¯”è¾ƒè½»æ¾åœ°å†™å‡ºæ­£ç¡®çš„é“¾è¡¨ä»£ç å‘¢ï¼Ÿ åªè¦æ„¿æ„æŠ•å…¥æ—¶é—´ï¼Œå¤§å¤šæ•°äººéƒ½æ˜¯å¯ä»¥å­¦ä¼šçš„ã€‚æ¯”å¦‚è¯´ï¼Œå¦‚æœä½ çœŸçš„èƒ½èŠ±ä¸Šä¸€ä¸ªå‘¨æœ«æˆ–è€…ä¸€æ•´å¤©çš„æ—¶é—´ï¼Œå°±å»å†™é“¾è¡¨åè½¬è¿™ä¸€ä¸ªä»£ç ï¼Œå¤šå†™å‡ éï¼Œä¸€ç›´ç»ƒåˆ°èƒ½æ¯«ä¸è´¹åŠ›åœ°å†™å‡º Bug free çš„ä»£ç ã€‚è¿™ä¸ªåè¿˜ä¼šå¾ˆéš¾è·¨å—ï¼Ÿ å½“ç„¶ï¼Œè‡ªå·±æœ‰å†³å¿ƒå¹¶ä¸”ä»˜å‡ºç²¾åŠ›æ˜¯æˆåŠŸçš„å…ˆå†³æ¡ä»¶ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¸€äº›æ–¹æ³•å’ŒæŠ€å·§ã€‚ä¸‹é¢æ€»ç»“äº†å‡ ä¸ªå†™é“¾è¡¨ä»£ç æŠ€å·§ã€‚å¦‚æœä½ èƒ½ç†Ÿç»ƒæŒæ¡è¿™å‡ ä¸ªæŠ€å·§ï¼ŒåŠ ä¸Šä½ çš„ä¸»åŠ¨å’ŒåšæŒï¼Œè½»æ¾æ‹¿ä¸‹é“¾è¡¨ä»£ç å®Œå…¨æ²¡æœ‰é—®é¢˜ã€‚ æŠ€å·§ä¸€ï¼šç†è§£æŒ‡é’ˆæˆ–å¼•ç”¨çš„å«ä¹‰ äº‹å®ä¸Šï¼Œçœ‹æ‡‚é“¾è¡¨çš„ç»“æ„å¹¶ä¸æ˜¯å¾ˆéš¾ï¼Œä½†æ˜¯ä¸€æ—¦æŠŠå®ƒå’ŒæŒ‡é’ˆæ··åœ¨ä¸€èµ·ï¼Œå°±å¾ˆå®¹æ˜“è®©äººæ‘¸ä¸ç€å¤´è„‘ã€‚æ‰€ä»¥ï¼Œè¦æƒ³å†™å¯¹é“¾è¡¨ä»£ç ï¼Œé¦–å…ˆå°±è¦ç†è§£å¥½æŒ‡é’ˆã€‚æˆ‘ä»¬çŸ¥é“ï¼Œæœ‰äº›è¯­è¨€æœ‰\"æŒ‡é’ˆ\"çš„æ¦‚å¿µï¼Œæ¯”å¦‚ C è¯­è¨€ï¼›æœ‰äº›è¯­è¨€æ²¡æœ‰æŒ‡é’ˆï¼Œå–è€Œä»£ä¹‹çš„æ˜¯\"å¼•ç”¨\"ï¼Œæ¯”å¦‚ Javaã€Pythonã€‚ä¸ç®¡æ˜¯\"æŒ‡é’ˆ\"è¿˜æ˜¯\"å¼•ç”¨\"ï¼Œå®é™…ä¸Šï¼Œå®ƒä»¬çš„æ„æ€éƒ½æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯å­˜å‚¨æ‰€æŒ‡å¯¹è±¡çš„å†…å­˜åœ°å€ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä¼šæ‹¿ C è¯­è¨€ä¸­çš„\"æŒ‡é’ˆ\"æ¥è®²è§£ï¼Œå¦‚æœä½ ç”¨çš„æ˜¯ Java æˆ–è€…å…¶ä»–æ²¡æœ‰æŒ‡é’ˆçš„è¯­è¨€ä¹Ÿæ²¡å…³ç³»ï¼Œä½ æŠŠå®ƒç†è§£æˆ\"å¼•ç”¨\"å°±å¯ä»¥äº†ã€‚å®é™…ä¸Šï¼Œå¯¹äºæŒ‡é’ˆçš„ç†è§£ï¼Œä½ åªéœ€è¦è®°ä½ä¸‹é¢è¿™å¥è¯å°±å¯ä»¥äº†ï¼š å°†æŸä¸ªå˜é‡èµ‹å€¼ç»™æŒ‡é’ˆï¼Œå®é™…ä¸Šå°±æ˜¯å°†è¿™ä¸ªå˜é‡çš„åœ°å€èµ‹å€¼ç»™æŒ‡é’ˆï¼Œæˆ–è€…åè¿‡æ¥è¯´ï¼ŒæŒ‡é’ˆä¸­å­˜å‚¨äº†è¿™ä¸ªå˜é‡çš„å†…å­˜åœ°å€ï¼ŒæŒ‡å‘äº†è¿™ä¸ªå˜é‡ï¼Œé€šè¿‡æŒ‡é’ˆå°±èƒ½æ‰¾åˆ°è¿™ä¸ªå˜é‡ã€‚ è¿™å¥è¯å¬èµ·æ¥è¿˜æŒºæ‹—å£çš„ï¼Œä½ å¯ä»¥å…ˆè®°ä½ã€‚æˆ‘ä»¬å›åˆ°é“¾è¡¨ä»£ç çš„ç¼–å†™è¿‡ç¨‹ä¸­ï¼Œæˆ‘æ¥æ…¢æ…¢ç»™ä½ è§£é‡Šã€‚åœ¨ç¼–å†™é“¾è¡¨ä»£ç çš„æ—¶å€™ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šæœ‰è¿™æ ·çš„ä»£ç ï¼šp->next=qã€‚è¿™è¡Œä»£ç æ˜¯è¯´ï¼Œp ç»“ç‚¹ä¸­çš„ next æŒ‡é’ˆå­˜å‚¨äº† q ç»“ç‚¹çš„å†…å­˜åœ°å€ã€‚è¿˜æœ‰ä¸€ä¸ªæ›´å¤æ‚çš„ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬å†™é“¾è¡¨ä»£ç ç»å¸¸ä¼šç”¨åˆ°çš„ï¼šp->next=p->next->nextã€‚è¿™è¡Œä»£ç è¡¨ç¤ºï¼Œp ç»“ç‚¹çš„ next æŒ‡é’ˆå­˜å‚¨äº† p ç»“ç‚¹çš„ä¸‹ä¸‹ä¸€ä¸ªç»“ç‚¹çš„å†…å­˜åœ°å€ã€‚ æŒæ¡äº†æŒ‡é’ˆæˆ–å¼•ç”¨çš„æ¦‚å¿µï¼Œä½ åº”è¯¥å¯ä»¥å¾ˆè½»æ¾åœ°çœ‹æ‡‚é“¾è¡¨ä»£ç ã€‚ æŠ€å·§äºŒï¼šè­¦æƒ•æŒ‡é’ˆä¸¢å¤±å’Œå†…å­˜æ³„æ¼ ä¸çŸ¥é“ä½ æœ‰æ²¡æœ‰è¿™æ ·çš„æ„Ÿè§‰ï¼Œå†™é“¾è¡¨ä»£ç çš„æ—¶å€™ï¼ŒæŒ‡é’ˆæŒ‡æ¥æŒ‡å»ï¼Œä¸€ä¼šå„¿å°±ä¸çŸ¥é“æŒ‡åˆ°å“ªé‡Œäº†ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬åœ¨å†™çš„æ—¶å€™ï¼Œä¸€å®šæ³¨æ„ä¸è¦å¼„ä¸¢äº†æŒ‡é’ˆã€‚ æŒ‡é’ˆå¾€å¾€éƒ½æ˜¯æ€ä¹ˆå¼„ä¸¢çš„å‘¢ï¼Ÿæˆ‘ä»¬æ‹¿ä¸Šå›¾è¡¨ä¸­çš„å•é“¾è¡¨çš„æ’å…¥æ“ä½œä¸ºä¾‹æ¥åˆ†æä¸€ä¸‹ã€‚ å‡è®¾æˆ‘ä»¬å¸Œæœ›åœ¨ç»“ç‚¹ a å’Œç›¸é‚»çš„ç»“ç‚¹ b ä¹‹é—´æ’å…¥ç»“ç‚¹ xï¼Œå‡è®¾å½“å‰æŒ‡é’ˆ p æŒ‡å‘ç»“ç‚¹ aã€‚å¦‚æœæˆ‘ä»¬å°†ä»£ç å®ç°å˜æˆä¸‹é¢è¿™ä¸ªæ ·å­ï¼Œå°±ä¼šå‘ç”ŸæŒ‡é’ˆä¸¢å¤±å’Œå†…å­˜æ³„éœ²ã€‚ p -> next = x ; // å°†pçš„nextæŒ‡é’ˆæŒ‡å‘xç»“ç‚¹ï¼› x -> next = p -> next ; // å°†xçš„ç»“ç‚¹çš„nextæŒ‡é’ˆæŒ‡å‘bç»“ç‚¹ï¼› åˆå­¦è€…ç»å¸¸ä¼šåœ¨è¿™å„¿çŠ¯é”™ã€‚p->next æŒ‡é’ˆåœ¨å®Œæˆç¬¬ä¸€æ­¥æ“ä½œä¹‹åï¼Œå·²ç»ä¸å†æŒ‡å‘ç»“ç‚¹ b äº†ï¼Œè€Œæ˜¯æŒ‡å‘ç»“ç‚¹ xã€‚ç¬¬ 2 è¡Œä»£ç ç›¸å½“äºå°† x èµ‹å€¼ç»™ x->nextï¼Œè‡ªå·±æŒ‡å‘è‡ªå·±ã€‚å› æ­¤ï¼Œæ•´ä¸ªé“¾è¡¨ä¹Ÿå°±æ–­æˆäº†ä¸¤åŠï¼Œä»ç»“ç‚¹ b å¾€åçš„æ‰€æœ‰ç»“ç‚¹éƒ½æ— æ³•è®¿é—®åˆ°äº†ã€‚ å¯¹äºæœ‰äº›è¯­è¨€æ¥è¯´ï¼Œæ¯”å¦‚ C è¯­è¨€ï¼Œå†…å­˜ç®¡ç†æ˜¯ç”±ç¨‹åºå‘˜è´Ÿè´£çš„ï¼Œå¦‚æœæ²¡æœ‰æ‰‹åŠ¨é‡Šæ”¾ç»“ç‚¹å¯¹åº”çš„å†…å­˜ç©ºé—´ï¼Œå°±ä¼šäº§ç”Ÿå†…å­˜æ³„éœ²ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬æ’å…¥ç»“ç‚¹æ—¶ï¼Œä¸€å®šè¦æ³¨æ„æ“ä½œçš„é¡ºåºï¼Œè¦å…ˆå°†ç»“ç‚¹ x çš„ next æŒ‡é’ˆæŒ‡å‘ç»“ç‚¹ bï¼Œå†æŠŠç»“ç‚¹ a çš„ next æŒ‡é’ˆæŒ‡å‘ç»“ç‚¹ xï¼Œè¿™æ ·æ‰ä¸ä¼šä¸¢å¤±æŒ‡é’ˆï¼Œå¯¼è‡´å†…å­˜æ³„æ¼ã€‚æ‰€ä»¥ï¼Œå¯¹äºåˆšåˆšçš„æ’å…¥ä»£ç ï¼Œæˆ‘ä»¬åªéœ€è¦æŠŠç¬¬ 1 è¡Œå’Œç¬¬ 2 è¡Œä»£ç çš„é¡ºåºé¢ å€’ä¸€ä¸‹å°±å¯ä»¥äº†ã€‚ åŒç†ï¼Œåˆ é™¤é“¾è¡¨ç»“ç‚¹æ—¶ï¼Œä¹Ÿä¸€å®šè¦è®°å¾—æ‰‹åŠ¨é‡Šæ”¾å†…å­˜ç©ºé—´ï¼Œå¦åˆ™ï¼Œä¹Ÿä¼šå‡ºç°å†…å­˜æ³„æ¼çš„é—®é¢˜ã€‚å½“ç„¶ï¼Œå¯¹äºåƒ Java è¿™ç§è™šæ‹Ÿæœºè‡ªåŠ¨ç®¡ç†å†…å­˜çš„ç¼–ç¨‹è¯­è¨€æ¥è¯´ï¼Œå°±ä¸éœ€è¦è€ƒè™‘è¿™ä¹ˆå¤šäº†ã€‚ æŠ€å·§ä¸‰ï¼šåˆ©ç”¨å“¨å…µç®€åŒ–å®ç°éš¾åº¦ é¦–å…ˆï¼Œæˆ‘ä»¬å…ˆæ¥å›é¡¾ä¸€ä¸‹å•é“¾è¡¨çš„æ’å…¥å’Œåˆ é™¤æ“ä½œã€‚å¦‚æœæˆ‘ä»¬åœ¨ç»“ç‚¹ p åé¢æ’å…¥ä¸€ä¸ªæ–°çš„ç»“ç‚¹ï¼Œåªéœ€è¦ä¸‹é¢ä¸¤è¡Œä»£ç å°±å¯ä»¥æå®šã€‚ new_node -> next = p -> next ; p -> next = new_node ; ä½†æ˜¯ï¼Œå½“æˆ‘ä»¬è¦å‘ä¸€ä¸ªç©ºé“¾è¡¨ä¸­æ’å…¥ç¬¬ä¸€ä¸ªç»“ç‚¹ï¼Œåˆšåˆšçš„é€»è¾‘å°±ä¸èƒ½ç”¨äº†ã€‚æˆ‘ä»¬éœ€è¦è¿›è¡Œä¸‹é¢è¿™æ ·çš„ç‰¹æ®Šå¤„ç†ï¼Œå…¶ä¸­ head è¡¨ç¤ºé“¾è¡¨çš„å¤´ç»“ç‚¹ã€‚æ‰€ä»¥ï¼Œä»è¿™æ®µä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œå¯¹äºå•é“¾è¡¨çš„æ’å…¥æ“ä½œï¼Œç¬¬ä¸€ä¸ªç»“ç‚¹å’Œå…¶ä»–ç»“ç‚¹çš„æ’å…¥é€»è¾‘æ˜¯ä¸ä¸€æ ·çš„ã€‚ if ( head == null ) { head = new_node ; } æˆ‘ä»¬å†æ¥çœ‹å•é“¾è¡¨ç»“ç‚¹åˆ é™¤æ“ä½œã€‚å¦‚æœè¦åˆ é™¤ç»“ç‚¹ p çš„åç»§ç»“ç‚¹ï¼Œæˆ‘ä»¬åªéœ€è¦ä¸€è¡Œä»£ç å°±å¯ä»¥æå®šã€‚ p -> next = p -> next -> next ; ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬è¦åˆ é™¤é“¾è¡¨ä¸­çš„æœ€åä¸€ä¸ªç»“ç‚¹ï¼Œå‰é¢çš„åˆ é™¤ä»£ç å°±ä¸ work äº†ã€‚è·Ÿæ’å…¥ç±»ä¼¼ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦å¯¹äºè¿™ç§æƒ…å†µç‰¹æ®Šå¤„ç†ã€‚å†™æˆä»£ç æ˜¯è¿™æ ·å­çš„ï¼š if ( head -> next == null ) { head = null ; } ä»å‰é¢çš„ä¸€æ­¥ä¸€æ­¥åˆ†æï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œé’ˆå¯¹é“¾è¡¨çš„æ’å…¥ã€åˆ é™¤æ“ä½œï¼Œéœ€è¦å¯¹æ’å…¥ç¬¬ä¸€ä¸ªç»“ç‚¹å’Œåˆ é™¤æœ€åä¸€ä¸ªç»“ç‚¹çš„æƒ…å†µè¿›è¡Œç‰¹æ®Šå¤„ç†ã€‚è¿™æ ·ä»£ç å®ç°èµ·æ¥å°±ä¼šå¾ˆç¹çï¼Œä¸ç®€æ´ï¼Œè€Œä¸”ä¹Ÿå®¹æ˜“å› ä¸ºè€ƒè™‘ä¸å…¨è€Œå‡ºé”™ã€‚å¦‚ä½•æ¥è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ å“¨å…µå°±è¦ç™»åœºäº†ã€‚å“¨å…µï¼Œè§£å†³çš„æ˜¯å›½å®¶ä¹‹é—´çš„è¾¹ç•Œé—®é¢˜ã€‚åŒç†ï¼Œè¿™é‡Œè¯´çš„å“¨å…µä¹Ÿæ˜¯è§£å†³\"è¾¹ç•Œé—®é¢˜\"çš„ï¼Œä¸ç›´æ¥å‚ä¸ä¸šåŠ¡é€»è¾‘ã€‚ è¿˜è®°å¾—å¦‚ä½•è¡¨ç¤ºä¸€ä¸ªç©ºé“¾è¡¨å—ï¼Ÿhead=null è¡¨ç¤ºé“¾è¡¨ä¸­æ²¡æœ‰ç»“ç‚¹äº†ã€‚å…¶ä¸­ head è¡¨ç¤ºå¤´ç»“ç‚¹æŒ‡é’ˆï¼ŒæŒ‡å‘é“¾è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªç»“ç‚¹ã€‚ å¦‚æœæˆ‘ä»¬å¼•å…¥å“¨å…µç»“ç‚¹ï¼Œåœ¨ä»»ä½•æ—¶å€™ï¼Œä¸ç®¡é“¾è¡¨æ˜¯ä¸æ˜¯ç©ºï¼Œhead æŒ‡é’ˆéƒ½ä¼šä¸€ç›´æŒ‡å‘è¿™ä¸ªå“¨å…µç»“ç‚¹ã€‚æˆ‘ä»¬ä¹ŸæŠŠè¿™ç§æœ‰å“¨å…µç»“ç‚¹çš„é“¾è¡¨å«å¸¦å¤´é“¾è¡¨ã€‚ç›¸åï¼Œæ²¡æœ‰å“¨å…µç»“ç‚¹çš„é“¾è¡¨å°±å«ä½œä¸å¸¦å¤´é“¾è¡¨ã€‚ å¦‚ä¸‹å›¾ç”»äº†ä¸€ä¸ªå¸¦å¤´é“¾è¡¨ï¼Œä½ å¯ä»¥å‘ç°ï¼Œå“¨å…µç»“ç‚¹æ˜¯ä¸å­˜å‚¨æ•°æ®çš„ã€‚å› ä¸ºå“¨å…µç»“ç‚¹ä¸€ç›´å­˜åœ¨ï¼Œæ‰€ä»¥æ’å…¥ç¬¬ä¸€ä¸ªç»“ç‚¹å’Œæ’å…¥å…¶ä»–ç»“ç‚¹ï¼Œåˆ é™¤æœ€åä¸€ä¸ªç»“ç‚¹å’Œåˆ é™¤å…¶ä»–ç»“ç‚¹ï¼Œéƒ½å¯ä»¥ç»Ÿä¸€ä¸ºç›¸åŒçš„ä»£ç å®ç°é€»è¾‘äº†ã€‚ å®é™…ä¸Šï¼Œè¿™ç§åˆ©ç”¨å“¨å…µç®€åŒ–ç¼–ç¨‹éš¾åº¦çš„æŠ€å·§ï¼Œåœ¨å¾ˆå¤šä»£ç å®ç°ä¸­éƒ½æœ‰ç”¨åˆ°ï¼Œæ¯”å¦‚æ’å…¥æ’åºã€å½’å¹¶æ’åºã€åŠ¨æ€è§„åˆ’ç­‰ã€‚è¿™äº›å†…å®¹æˆ‘ä»¬åé¢æ‰ä¼šè®²ï¼Œç°åœ¨ä¸ºäº†è®©ä½ æ„Ÿå—æ›´æ·±ï¼Œæˆ‘å†ä¸¾ä¸€ä¸ªéå¸¸ç®€å•çš„ä¾‹å­ã€‚ä»£ç æˆ‘æ˜¯ç”¨ C è¯­è¨€å®ç°çš„ï¼Œä¸æ¶‰åŠè¯­è¨€æ–¹é¢çš„é«˜çº§è¯­æ³•ï¼Œå¾ˆå®¹æ˜“çœ‹æ‡‚ï¼Œä½ å¯ä»¥ç±»æ¯”åˆ°ä½ ç†Ÿæ‚‰çš„è¯­è¨€ã€‚ ä»£ç ä¸€ï¼š // åœ¨æ•°ç»„aä¸­ï¼ŒæŸ¥æ‰¾keyï¼Œè¿”å›keyæ‰€åœ¨çš„ä½ç½® // å…¶ä¸­ï¼Œnè¡¨ç¤ºæ•°ç»„açš„é•¿åº¦ int find ( char * a , int n , char key ) { // è¾¹ç•Œæ¡ä»¶å¤„ç†ï¼Œå¦‚æœaä¸ºç©ºï¼Œæˆ–è€…n<=0ï¼Œè¯´æ˜æ•°ç»„ä¸­æ²¡æœ‰æ•°æ®ï¼Œå°±ä¸ç”¨whileå¾ªç¯æ¯”è¾ƒäº† if ( a == null || n <= 0 ) { return - 1 ; } int i = 0 ; // è¿™é‡Œæœ‰ä¸¤ä¸ªæ¯”è¾ƒæ“ä½œï¼ši<nå’Œa[i]==key. while ( i < n ) { if ( a [ i ] == key ) { return i ; } ++ i ; } return - 1 ; } ä»£ç äºŒï¼š // åœ¨æ•°ç»„aä¸­ï¼ŒæŸ¥æ‰¾keyï¼Œè¿”å›keyæ‰€åœ¨çš„ä½ç½® // å…¶ä¸­ï¼Œnè¡¨ç¤ºæ•°ç»„açš„é•¿åº¦ // æˆ‘ä¸¾2ä¸ªä¾‹å­ï¼Œä½ å¯ä»¥æ‹¿ä¾‹å­èµ°ä¸€ä¸‹ä»£ç  // a = {4, 2, 3, 5, 9, 6} n=6 key = 7 // a = {4, 2, 3, 5, 9, 6} n=6 key = 6 int find ( char * a , int n , char key ) { if ( a == null || n <= 0 ) { return - 1 ; } // è¿™é‡Œå› ä¸ºè¦å°†a[n-1]çš„å€¼æ›¿æ¢æˆkeyï¼Œæ‰€ä»¥è¦ç‰¹æ®Šå¤„ç†è¿™ä¸ªå€¼ if ( a [ n - 1 ] == key ) { return n - 1 ; } // æŠŠa[n-1]çš„å€¼ä¸´æ—¶ä¿å­˜åœ¨å˜é‡tmpä¸­ï¼Œä»¥ä¾¿ä¹‹åæ¢å¤ã€‚tmp=6ã€‚ // ä¹‹æ‰€ä»¥è¿™æ ·åšçš„ç›®çš„æ˜¯ï¼šå¸Œæœ›find()ä»£ç ä¸è¦æ”¹å˜aæ•°ç»„ä¸­çš„å†…å®¹ char tmp = a [ n - 1 ]; // æŠŠkeyçš„å€¼æ”¾åˆ°a[n-1]ä¸­ï¼Œæ­¤æ—¶a = {4, 2, 3, 5, 9, 7} a [ n - 1 ] = key ; int i = 0 ; // while å¾ªç¯æ¯”èµ·ä»£ç ä¸€ï¼Œå°‘äº†i<nè¿™ä¸ªæ¯”è¾ƒæ“ä½œ while ( a [ i ] != key ) { ++ i ; } // æ¢å¤a[n-1]åŸæ¥çš„å€¼,æ­¤æ—¶a= {4, 2, 3, 5, 9, 6} a [ n - 1 ] = tmp ; if ( i == n - 1 ) { // å¦‚æœi == n-1è¯´æ˜ï¼Œåœ¨0...n-2ä¹‹é—´éƒ½æ²¡æœ‰keyï¼Œæ‰€ä»¥è¿”å›-1 return - 1 ; } else { // å¦åˆ™ï¼Œè¿”å›iï¼Œå°±æ˜¯ç­‰äºkeyå€¼çš„å…ƒç´ çš„ä¸‹æ ‡ return i ; } } å¯¹æ¯”ä¸¤æ®µä»£ç ï¼Œåœ¨å­—ç¬¦ä¸² a å¾ˆé•¿çš„æ—¶å€™ï¼Œæ¯”å¦‚å‡ ä¸‡ã€å‡ åä¸‡ï¼Œä½ è§‰å¾—å“ªæ®µä»£ç è¿è¡Œå¾—æ›´å¿«ç‚¹å‘¢ï¼Ÿç­”æ¡ˆæ˜¯ä»£ç äºŒï¼Œå› ä¸ºä¸¤æ®µä»£ç ä¸­æ‰§è¡Œæ¬¡æ•°æœ€å¤šå°±æ˜¯ while å¾ªç¯é‚£ä¸€éƒ¨åˆ†ã€‚ç¬¬äºŒæ®µä»£ç ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå“¨å…µ a[n-1] = keyï¼ŒæˆåŠŸçœæ‰äº†ä¸€ä¸ªæ¯”è¾ƒè¯­å¥ i<nï¼Œä¸è¦å°çœ‹è¿™ä¸€æ¡è¯­å¥ï¼Œå½“ç´¯ç§¯æ‰§è¡Œä¸‡æ¬¡ã€å‡ åä¸‡æ¬¡æ—¶ï¼Œç´¯ç§¯çš„æ—¶é—´å°±å¾ˆæ˜æ˜¾äº†ã€‚ å½“ç„¶ï¼Œè¿™åªæ˜¯ä¸ºäº†ä¸¾ä¾‹è¯´æ˜å“¨å…µçš„ä½œç”¨ï¼Œä½ å†™ä»£ç çš„æ—¶å€™åƒä¸‡ä¸è¦å†™ç¬¬äºŒæ®µé‚£æ ·çš„ä»£ç ï¼Œå› ä¸ºå¯è¯»æ€§å¤ªå·®äº†ã€‚å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¹¶ä¸éœ€è¦å¦‚æ­¤è¿½æ±‚æè‡´çš„æ€§èƒ½ã€‚ å“¨å…µå¯ä»¥ç†è§£ä¸ºå®ƒå¯ä»¥å‡å°‘ç‰¹æ®Šæƒ…å†µçš„åˆ¤æ–­ï¼Œæ¯”å¦‚åˆ¤ç©ºï¼Œæ¯”å¦‚åˆ¤è¶Šç•Œï¼Œæ¯”å¦‚å‡å°‘é“¾è¡¨æ’å…¥åˆ é™¤ä¸­å¯¹ç©ºé“¾è¡¨çš„åˆ¤æ–­ï¼Œæ¯”å¦‚ä¾‹å­ä¸­å¯¹iè¶Šç•Œçš„åˆ¤æ–­ã€‚ ç©ºä¸è¶Šç•Œå¯ä»¥è®¤ä¸ºæ˜¯å°æ¦‚ç‡æƒ…å†µï¼Œæ‰€ä»¥ä»£ç æ¯ä¸€æ¬¡æ“ä½œéƒ½èµ°ä¸€éåˆ¤æ–­ï¼Œåœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹éƒ½ä¼šæ˜¯å¤šä½™çš„ã€‚ å“¨å…µçš„å·§å¦™å°±æ˜¯æå‰å°†è¿™ç§æƒ…å†µå»é™¤ï¼Œæ¯”å¦‚ç»™ä¸€ä¸ªå“¨å…µç»“ç‚¹ï¼Œä»¥åŠå°†keyèµ‹å€¼ç»™æ•°ç»„æœ«å…ƒç´ ï¼Œè®©æ•°ç»„éå†ä¸ç”¨åˆ¤æ–­è¶Šç•Œä¹Ÿå¯ä»¥å› ä¸ºç›¸ç­‰åœä¸‹æ¥ã€‚ ä½¿ç”¨å“¨å…µçš„æŒ‡å¯¼æ€æƒ³åº”è¯¥æ˜¯å°†å°æ¦‚ç‡éœ€è¦çš„åˆ¤æ–­å…ˆæå‰æ‰¼æ€ï¼Œæ¯”å¦‚æå‰ç»™ä»–ä¸€ä¸ªå€¼è®©ä»–ä¸ä¸ºnullï¼Œæˆ–è€…æå‰é¢„è®¾å€¼ï¼Œæˆ–è€…å¤šæ€çš„æ—¶å€™æå‰ç»™ä¸ªç©ºå®ç°ï¼Œç„¶ååœ¨æ¯ä¸€æ¬¡æ“ä½œä¸­ä¸å¿…å†åˆ¤æ–­ä»¥å¢åŠ æ•ˆç‡ã€‚ æŠ€å·§å››ï¼šé‡ç‚¹ç•™æ„è¾¹ç•Œæ¡ä»¶å¤„ç† è½¯ä»¶å¼€å‘ä¸­ï¼Œä»£ç åœ¨ä¸€äº›è¾¹ç•Œæˆ–è€…å¼‚å¸¸æƒ…å†µä¸‹ï¼Œæœ€å®¹æ˜“äº§ç”Ÿ Bugã€‚é“¾è¡¨ä»£ç ä¹Ÿä¸ä¾‹å¤–ã€‚è¦å®ç°æ²¡æœ‰ Bug çš„é“¾è¡¨ä»£ç ï¼Œä¸€å®šè¦åœ¨ç¼–å†™çš„è¿‡ç¨‹ä¸­ä»¥åŠç¼–å†™å®Œæˆä¹‹åï¼Œæ£€æŸ¥è¾¹ç•Œæ¡ä»¶æ˜¯å¦è€ƒè™‘å…¨é¢ï¼Œä»¥åŠä»£ç åœ¨è¾¹ç•Œæ¡ä»¶ä¸‹æ˜¯å¦èƒ½æ­£ç¡®è¿è¡Œã€‚ ç»å¸¸ç”¨æ¥æ£€æŸ¥é“¾è¡¨ä»£ç æ˜¯å¦æ­£ç¡®çš„è¾¹ç•Œæ¡ä»¶æœ‰è¿™æ ·å‡ ä¸ªï¼š å¦‚æœé“¾è¡¨ä¸ºç©ºæ—¶ï¼Œä»£ç æ˜¯å¦èƒ½æ­£å¸¸å·¥ä½œï¼Ÿ å¦‚æœé“¾è¡¨åªåŒ…å«ä¸€ä¸ªç»“ç‚¹æ—¶ï¼Œä»£ç æ˜¯å¦èƒ½æ­£å¸¸å·¥ä½œï¼Ÿ å¦‚æœé“¾è¡¨åªåŒ…å«ä¸¤ä¸ªç»“ç‚¹æ—¶ï¼Œä»£ç æ˜¯å¦èƒ½æ­£å¸¸å·¥ä½œï¼Ÿ ä»£ç é€»è¾‘åœ¨å¤„ç†å¤´ç»“ç‚¹å’Œå°¾ç»“ç‚¹çš„æ—¶å€™ï¼Œæ˜¯å¦èƒ½æ­£å¸¸å·¥ä½œï¼Ÿ å½“ä½ å†™å®Œé“¾è¡¨ä»£ç ä¹‹åï¼Œé™¤äº†çœ‹ä¸‹ä½ å†™çš„ä»£ç åœ¨æ­£å¸¸çš„æƒ…å†µä¸‹èƒ½å¦å·¥ä½œï¼Œè¿˜è¦çœ‹ä¸‹åœ¨ä¸Šé¢æˆ‘åˆ—ä¸¾çš„å‡ ä¸ªè¾¹ç•Œæ¡ä»¶ä¸‹ï¼Œä»£ç ä»ç„¶èƒ½å¦æ­£ç¡®å·¥ä½œã€‚å¦‚æœè¿™äº›è¾¹ç•Œæ¡ä»¶ä¸‹éƒ½æ²¡æœ‰é—®é¢˜ï¼Œé‚£åŸºæœ¬ä¸Šå¯ä»¥è®¤ä¸ºæ²¡æœ‰é—®é¢˜äº†ã€‚ å½“ç„¶ï¼Œè¾¹ç•Œæ¡ä»¶ä¸æ­¢æˆ‘åˆ—ä¸¾çš„é‚£äº›ã€‚é’ˆå¯¹ä¸åŒçš„åœºæ™¯ï¼Œå¯èƒ½è¿˜æœ‰ç‰¹å®šçš„è¾¹ç•Œæ¡ä»¶ï¼Œè¿™ä¸ªéœ€è¦ä½ è‡ªå·±å»æ€è€ƒï¼Œä¸è¿‡å¥—è·¯éƒ½æ˜¯ä¸€æ ·çš„ã€‚ å®é™…ä¸Šï¼Œä¸å…‰å…‰æ˜¯å†™é“¾è¡¨ä»£ç ï¼Œä½ åœ¨å†™ä»»ä½•ä»£ç æ—¶ï¼Œä¹Ÿåƒä¸‡ä¸è¦åªæ˜¯å®ç°ä¸šåŠ¡æ­£å¸¸æƒ…å†µä¸‹çš„åŠŸèƒ½å°±å¥½äº†ï¼Œä¸€å®šè¦å¤šæƒ³æƒ³ï¼Œä½ çš„ä»£ç åœ¨è¿è¡Œçš„æ—¶å€™ï¼Œå¯èƒ½ä¼šé‡åˆ°å“ªäº›è¾¹ç•Œæƒ…å†µæˆ–è€…å¼‚å¸¸æƒ…å†µã€‚é‡åˆ°äº†åº”è¯¥å¦‚ä½•åº”å¯¹ï¼Œè¿™æ ·å†™å‡ºæ¥çš„ä»£ç æ‰å¤Ÿå¥å£®ï¼ æŠ€å·§äº”ï¼šä¸¾ä¾‹ç”»å›¾ï¼Œè¾…åŠ©æ€è€ƒ å¯¹äºç¨å¾®å¤æ‚çš„é“¾è¡¨æ“ä½œï¼Œæ¯”å¦‚å‰é¢æˆ‘ä»¬æåˆ°çš„å•é“¾è¡¨åè½¬ï¼ŒæŒ‡é’ˆä¸€ä¼šå„¿æŒ‡è¿™ï¼Œä¸€ä¼šå„¿æŒ‡é‚£ï¼Œä¸€ä¼šå„¿å°±è¢«ç»•æ™•äº†ã€‚æ€»æ„Ÿè§‰è„‘å®¹é‡ä¸å¤Ÿï¼Œæƒ³ä¸æ¸…æ¥šã€‚æ‰€ä»¥è¿™ä¸ªæ—¶å€™å°±è¦ä½¿ç”¨å¤§æ‹›äº†ï¼Œä¸¾ä¾‹æ³•å’Œç”»å›¾æ³•ã€‚ ä½ å¯ä»¥æ‰¾ä¸€ä¸ªå…·ä½“çš„ä¾‹å­ï¼ŒæŠŠå®ƒç”»åœ¨çº¸ä¸Šï¼Œé‡Šæ”¾ä¸€äº›è„‘å®¹é‡ï¼Œç•™æ›´å¤šçš„ç»™é€»è¾‘æ€è€ƒï¼Œè¿™æ ·å°±ä¼šæ„Ÿè§‰åˆ°æ€è·¯æ¸…æ™°å¾ˆå¤šã€‚ æŠ€å·§å…­ï¼šå¤šå†™å¤šç»ƒï¼Œæ²¡æœ‰æ·å¾„ å¦‚æœä½ å·²ç»ç†è§£å¹¶æŒæ¡äº†æˆ‘å‰é¢æ‰€è®²çš„æ–¹æ³•ï¼Œä½†æ˜¯æ‰‹å†™é“¾è¡¨ä»£ç è¿˜æ˜¯ä¼šå‡ºç°å„ç§å„æ ·çš„é”™è¯¯ï¼Œä¹Ÿä¸è¦ç€æ€¥ã€‚æŠŠå¸¸è§çš„é“¾è¡¨æ“ä½œéƒ½è‡ªå·±å¤šå†™å‡ éï¼Œå‡ºé—®é¢˜å°±ä¸€ç‚¹ä¸€ç‚¹è°ƒè¯•ï¼Œç†Ÿèƒ½ç”Ÿå·§ï¼ä¸‹é¢ç²¾é€‰äº† 5 ä¸ªå¸¸è§çš„é“¾è¡¨æ“ä½œã€‚ä½ åªè¦æŠŠè¿™å‡ ä¸ªæ“ä½œéƒ½èƒ½å†™ç†Ÿç»ƒï¼Œä¸ç†Ÿå°±å¤šå†™å‡ éï¼Œæˆ‘ä¿è¯ä½ ä¹‹åå†ä¹Ÿä¸ä¼šå®³æ€•å†™é“¾è¡¨ä»£ç ã€‚ å•é“¾è¡¨åè½¬ é“¾è¡¨ä¸­ç¯çš„æ£€æµ‹ ä¸¤ä¸ªæœ‰åºçš„é“¾è¡¨åˆå¹¶ åˆ é™¤é“¾è¡¨å€’æ•°ç¬¬ n ä¸ªç»“ç‚¹ æ±‚é“¾è¡¨çš„ä¸­é—´ç»“ç‚¹ å†™é“¾è¡¨ä»£ç æ˜¯æœ€è€ƒéªŒé€»è¾‘æ€ç»´èƒ½åŠ›çš„ã€‚å› ä¸ºï¼Œé“¾è¡¨ä»£ç åˆ°å¤„éƒ½æ˜¯æŒ‡é’ˆçš„æ“ä½œã€è¾¹ç•Œæ¡ä»¶çš„å¤„ç†ï¼Œç¨æœ‰ä¸æ…å°±å®¹æ˜“äº§ç”Ÿ Bugã€‚é“¾è¡¨ä»£ç å†™å¾—å¥½åï¼Œå¯ä»¥çœ‹å‡ºä¸€ä¸ªäººå†™ä»£ç æ˜¯å¦å¤Ÿç»†å¿ƒï¼Œè€ƒè™‘é—®é¢˜æ˜¯å¦å…¨é¢ï¼Œæ€ç»´æ˜¯å¦ç¼œå¯†ã€‚æ‰€ä»¥ï¼Œè¿™ä¹Ÿæ˜¯å¾ˆå¤šé¢è¯•å®˜å–œæ¬¢è®©äººæ‰‹å†™é“¾è¡¨ä»£ç çš„åŸå› ã€‚ é“¾è¡¨ç›¸å…³ç»ƒä¹ é¢˜LeetCodeå¯¹åº”ç¼–å·ï¼š206ï¼Œ141ï¼Œ21ï¼Œ19ï¼Œ876ã€‚å¯ä»¥å¤šå¤šç»ƒä¹ ï¼","tags":"Algorithms","url":"https://jiang-hao.com/articles/2020/algorithms-data-struct-linkedlist.html","loc":"https://jiang-hao.com/articles/2020/algorithms-data-struct-linkedlist.html"},{"title":"æ•°æ®ç»“æ„ä¸ç®—æ³•â€”â€”æ•°ç»„","text":"å®šä¹‰ æ•°ç»„ï¼ˆArrayï¼‰æ˜¯ä¸€ç§ çº¿æ€§è¡¨ æ•°æ®ç»“æ„ã€‚å®ƒç”¨ä¸€ç»„ è¿ç»­çš„å†…å­˜ç©ºé—´ ï¼Œæ¥å­˜å‚¨ä¸€ç»„å…·æœ‰ ç›¸åŒç±»å‹ çš„æ•°æ®ã€‚ è¿™ä¸ªå®šä¹‰é‡Œæœ‰å‡ ä¸ªå…³é”®è¯ï¼Œç†è§£äº†è¿™å‡ ä¸ªå…³é”®è¯ï¼Œæˆ‘æƒ³ä½ å°±èƒ½å½»åº•æŒæ¡æ•°ç»„çš„æ¦‚å¿µäº†ã€‚ é¦–å…ˆæ˜¯çº¿æ€§è¡¨ï¼ˆLinear Listï¼‰ã€‚é¡¾åæ€ä¹‰ï¼Œçº¿æ€§è¡¨å°±æ˜¯æ•°æ®æ’æˆåƒä¸€æ¡çº¿ä¸€æ ·çš„ç»“æ„ã€‚æ¯ä¸ªçº¿æ€§è¡¨ä¸Šçš„æ•°æ®æœ€å¤šåªæœ‰å‰å’Œåä¸¤ä¸ªæ–¹å‘ã€‚å…¶å®é™¤äº†æ•°ç»„ï¼Œé“¾è¡¨ã€é˜Ÿåˆ—ã€æ ˆç­‰ä¹Ÿæ˜¯çº¿æ€§è¡¨ç»“æ„ã€‚ è€Œä¸å®ƒç›¸å¯¹ç«‹çš„æ¦‚å¿µæ˜¯éçº¿æ€§è¡¨ï¼Œæ¯”å¦‚äºŒå‰æ ‘ã€å †ã€å›¾ç­‰ã€‚ä¹‹æ‰€ä»¥å«éçº¿æ€§ï¼Œæ˜¯å› ä¸ºï¼Œåœ¨éçº¿æ€§è¡¨ä¸­ï¼Œæ•°æ®ä¹‹é—´å¹¶ä¸æ˜¯ç®€å•çš„å‰åå…³ç³»ã€‚ ç¬¬äºŒä¸ªæ˜¯è¿ç»­çš„å†…å­˜ç©ºé—´å’Œç›¸åŒç±»å‹çš„æ•°æ®ã€‚æ­£æ˜¯å› ä¸ºè¿™ä¸¤ä¸ªé™åˆ¶ï¼Œå®ƒæ‰æœ‰äº†ä¸€ä¸ªå ªç§°\"æ€æ‰‹é”\"çš„ç‰¹æ€§ï¼š\"éšæœºè®¿é—®\"ã€‚ä½†æœ‰åˆ©å°±æœ‰å¼Šï¼Œè¿™ä¸¤ä¸ªé™åˆ¶ä¹Ÿè®©æ•°ç»„çš„å¾ˆå¤šæ“ä½œå˜å¾—éå¸¸ä½æ•ˆï¼Œæ¯”å¦‚è¦æƒ³åœ¨æ•°ç»„ä¸­åˆ é™¤ã€æ’å…¥ä¸€ä¸ªæ•°æ®ï¼Œä¸ºäº†ä¿è¯è¿ç»­æ€§ï¼Œå°±éœ€è¦åšå¤§é‡çš„æ•°æ®æ¬ç§»å·¥ä½œã€‚ éšæœºè®¿é—® æˆ‘ä»¬æ‹¿ä¸€ä¸ªé•¿åº¦ä¸º 10 çš„ int ç±»å‹çš„æ•°ç»„ int[] a = new int[10]æ¥ä¸¾ä¾‹ã€‚åœ¨ä¸‹é¢è¿™ä¸ªå›¾ä¸­ï¼Œè®¡ç®—æœºç»™æ•°ç»„ a[10]ï¼Œåˆ†é…äº†ä¸€å—è¿ç»­å†…å­˜ç©ºé—´ 1000ï½1039ï¼Œå…¶ä¸­ï¼Œå†…å­˜å—çš„é¦–åœ°å€ä¸º base_address = 1000ã€‚ æˆ‘ä»¬çŸ¥é“ï¼Œè®¡ç®—æœºä¼šç»™æ¯ä¸ªå†…å­˜å•å…ƒåˆ†é…ä¸€ä¸ªåœ°å€ï¼Œè®¡ç®—æœºé€šè¿‡åœ°å€æ¥è®¿é—®å†…å­˜ä¸­çš„æ•°æ®ã€‚å½“è®¡ç®—æœºéœ€è¦éšæœºè®¿é—®æ•°ç»„ä¸­çš„æŸä¸ªå…ƒç´ æ—¶ï¼Œå®ƒä¼šé¦–å…ˆé€šè¿‡ä¸‹é¢çš„å¯»å€å…¬å¼ï¼Œè®¡ç®—å‡ºè¯¥å…ƒç´ å­˜å‚¨çš„å†…å­˜åœ°å€ï¼š $$ a[i]\\_address = base\\_address + i * data\\_type\\_size $$ å…¶ä¸­ data_type_size è¡¨ç¤ºæ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ çš„å¤§å°ã€‚æˆ‘ä»¬ä¸¾çš„è¿™ä¸ªä¾‹å­é‡Œï¼Œæ•°ç»„ä¸­å­˜å‚¨çš„æ˜¯ int ç±»å‹æ•°æ®ï¼Œæ‰€ä»¥ data_type_size å°±ä¸º 4 ä¸ªå­—èŠ‚ã€‚ è¿™é‡Œè¦ç‰¹åˆ«çº æ­£ä¸€ä¸ª\"é”™è¯¯\"ã€‚åœ¨é¢è¯•çš„æ—¶å€™ï¼Œå¸¸å¸¸ä¼šé—®æ•°ç»„å’Œé“¾è¡¨çš„åŒºåˆ«ï¼Œå¾ˆå¤šäººéƒ½å›ç­”è¯´ï¼Œ\"é“¾è¡¨é€‚åˆæ’å…¥ã€åˆ é™¤ï¼Œæ—¶é—´å¤æ‚åº¦ O(1)ï¼›æ•°ç»„é€‚åˆæŸ¥æ‰¾ï¼ŒæŸ¥æ‰¾æ—¶é—´å¤æ‚åº¦ä¸º O(1)\"ã€‚ å®é™…ä¸Šï¼Œè¿™ç§è¡¨è¿°æ˜¯ä¸å‡†ç¡®çš„ã€‚æ•°ç»„æ˜¯é€‚åˆæŸ¥æ‰¾æ“ä½œï¼Œä½†æ˜¯æŸ¥æ‰¾çš„æ—¶é—´å¤æ‚åº¦å¹¶ä¸ä¸º O(1)ã€‚å³ä¾¿æ˜¯æ’å¥½åºçš„æ•°ç»„ï¼Œä½ ç”¨äºŒåˆ†æŸ¥æ‰¾ï¼Œæ—¶é—´å¤æ‚åº¦ä¹Ÿæ˜¯ O(logn)ã€‚æ‰€ä»¥ï¼Œæ­£ç¡®çš„è¡¨è¿°åº”è¯¥æ˜¯ï¼Œæ•°ç»„æ”¯æŒéšæœºè®¿é—®ï¼Œæ ¹æ®ä¸‹æ ‡éšæœºè®¿é—®çš„æ—¶é—´å¤æ‚åº¦ä¸º O(1)ã€‚ ä½æ•ˆçš„\"æ’å…¥\"å’Œ\"åˆ é™¤\" å‰é¢æ¦‚å¿µéƒ¨åˆ†æˆ‘ä»¬æåˆ°ï¼Œæ•°ç»„ä¸ºäº†ä¿æŒå†…å­˜æ•°æ®çš„è¿ç»­æ€§ï¼Œä¼šå¯¼è‡´æ’å…¥ã€åˆ é™¤è¿™ä¸¤ä¸ªæ“ä½œæ¯”è¾ƒä½æ•ˆã€‚ç°åœ¨æˆ‘ä»¬å°±æ¥è¯¦ç»†è¯´ä¸€ä¸‹ï¼Œç©¶ç«Ÿä¸ºä»€ä¹ˆä¼šå¯¼è‡´ä½æ•ˆï¼Ÿåˆæœ‰å“ªäº›æ”¹è¿›æ–¹æ³•å‘¢ï¼Ÿ æ’å…¥æ“ä½œ è®¾æ•°ç»„çš„é•¿åº¦ä¸º nï¼Œç°åœ¨ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦å°†ä¸€ä¸ªæ•°æ®æ’å…¥åˆ°æ•°ç»„ä¸­çš„ç¬¬ k ä¸ªä½ç½®ã€‚ä¸ºäº†æŠŠç¬¬ k ä¸ªä½ç½®è…¾å‡ºæ¥ï¼Œç»™æ–°æ¥çš„æ•°æ®ï¼Œæˆ‘ä»¬éœ€è¦å°†ç¬¬ kï½n è¿™éƒ¨åˆ†çš„å…ƒç´ éƒ½é¡ºåºåœ°å¾€åæŒªä¸€ä½ã€‚ å¦‚æœåœ¨æ•°ç»„çš„æœ«å°¾æ’å…¥å…ƒç´ ï¼Œé‚£å°±ä¸éœ€è¦ç§»åŠ¨æ•°æ®äº†ï¼Œè¿™æ—¶çš„æ—¶é—´å¤æ‚åº¦ä¸º O(1)ã€‚ä½†å¦‚æœåœ¨æ•°ç»„çš„å¼€å¤´æ’å…¥å…ƒç´ ï¼Œé‚£æ‰€æœ‰çš„æ•°æ®éƒ½éœ€è¦ä¾æ¬¡å¾€åç§»åŠ¨ä¸€ä½ï¼Œæ‰€ä»¥æœ€åæ—¶é—´å¤æ‚åº¦æ˜¯ O(n)ã€‚ å› ä¸ºæˆ‘ä»¬åœ¨æ¯ä¸ªä½ç½®æ’å…¥å…ƒç´ çš„æ¦‚ç‡æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥å¹³å‡æƒ…å†µæ—¶é—´å¤æ‚åº¦ä¸º (1+2+â€¦n)/n=O(n)ã€‚ å¦‚æœæ•°ç»„ä¸­çš„æ•°æ®æ˜¯æœ‰åºçš„ï¼Œæˆ‘ä»¬åœ¨æŸä¸ªä½ç½®æ’å…¥ä¸€ä¸ªæ–°çš„å…ƒç´ æ—¶ï¼Œå°±å¿…é¡»æŒ‰ç…§åˆšæ‰çš„æ–¹æ³•æ¬ç§» k ä¹‹åçš„æ•°æ®ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ•°ç»„ä¸­å­˜å‚¨çš„æ•°æ®å¹¶æ²¡æœ‰ä»»ä½•è§„å¾‹ï¼Œæ•°ç»„åªæ˜¯è¢«å½“ä½œä¸€ä¸ªå­˜å‚¨æ•°æ®çš„é›†åˆã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœè¦å°†æŸä¸ªæ•°æ®æ’å…¥åˆ°ç¬¬ k ä¸ªä½ç½®ï¼Œä¸ºäº†é¿å…å¤§è§„æ¨¡çš„æ•°æ®æ¬ç§»ï¼Œæˆ‘ä»¬è¿˜æœ‰ä¸€ä¸ªç®€å•çš„åŠæ³•å°±æ˜¯ï¼Œç›´æ¥å°†ç¬¬ k ä½çš„æ•°æ®æ¬ç§»åˆ°æ•°ç»„å…ƒç´ çš„æœ€åï¼ŒæŠŠæ–°çš„å…ƒç´ ç›´æ¥æ”¾å…¥ç¬¬ k ä¸ªä½ç½®ã€‚ ä¸ºäº†æ›´å¥½åœ°ç†è§£ï¼Œæˆ‘ä»¬ä¸¾ä¸€ä¸ªä¾‹å­ã€‚å‡è®¾æ•°ç»„ a[10]ä¸­å­˜å‚¨äº†å¦‚ä¸‹ 5 ä¸ªå…ƒç´ ï¼šaï¼Œbï¼Œcï¼Œdï¼Œeã€‚ æˆ‘ä»¬ç°åœ¨éœ€è¦å°†å…ƒç´  x æ’å…¥åˆ°ç¬¬ 3 ä¸ªä½ç½®ã€‚æˆ‘ä»¬åªéœ€è¦å°† c æ”¾å…¥åˆ° a[5]ï¼Œå°† a[2]èµ‹å€¼ä¸º x å³å¯ã€‚æœ€åï¼Œæ•°ç»„ä¸­çš„å…ƒç´ å¦‚ä¸‹ï¼š aï¼Œbï¼Œxï¼Œdï¼Œeï¼Œcã€‚ åˆ©ç”¨è¿™ç§å¤„ç†æŠ€å·§ï¼Œåœ¨ç‰¹å®šåœºæ™¯ä¸‹ï¼Œåœ¨ç¬¬ k ä¸ªä½ç½®æ’å…¥ä¸€ä¸ªå…ƒç´ çš„æ—¶é—´å¤æ‚åº¦å°±ä¼šé™ä¸º O(1)ã€‚è¿™ä¸ªå¤„ç†æ€æƒ³åœ¨å¿«æ’ä¸­ä¹Ÿä¼šç”¨åˆ°ã€‚ åˆ é™¤æ“ä½œ è·Ÿæ’å…¥æ•°æ®ç±»ä¼¼ï¼Œå¦‚æœæˆ‘ä»¬è¦åˆ é™¤ç¬¬ k ä¸ªä½ç½®çš„æ•°æ®ï¼Œä¸ºäº†å†…å­˜çš„è¿ç»­æ€§ï¼Œä¹Ÿéœ€è¦æ¬ç§»æ•°æ®ï¼Œä¸ç„¶ä¸­é—´å°±ä¼šå‡ºç°ç©ºæ´ï¼Œå†…å­˜å°±ä¸è¿ç»­äº†ã€‚ å’Œæ’å…¥ç±»ä¼¼ï¼Œå¦‚æœåˆ é™¤æ•°ç»„æœ«å°¾çš„æ•°æ®ï¼Œåˆ™æœ€å¥½æƒ…å†µæ—¶é—´å¤æ‚åº¦ä¸º O(1)ï¼›å¦‚æœåˆ é™¤å¼€å¤´çš„æ•°æ®ï¼Œåˆ™æœ€åæƒ…å†µæ—¶é—´å¤æ‚åº¦ä¸º O(n)ï¼›å¹³å‡æƒ…å†µæ—¶é—´å¤æ‚åº¦ä¹Ÿä¸º O(n)ã€‚ å®é™…ä¸Šï¼Œåœ¨æŸäº›ç‰¹æ®Šåœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬å¹¶ä¸ä¸€å®šéå¾—è¿½æ±‚æ•°ç»„ä¸­æ•°æ®çš„è¿ç»­æ€§ã€‚å¦‚æœæˆ‘ä»¬å°†å¤šæ¬¡åˆ é™¤æ“ä½œé›†ä¸­åœ¨ä¸€èµ·æ‰§è¡Œï¼Œåˆ é™¤çš„æ•ˆç‡æ˜¯ä¸æ˜¯ä¼šæé«˜å¾ˆå¤šå‘¢ï¼Ÿ æˆ‘ä»¬ç»§ç»­æ¥çœ‹ä¾‹å­ã€‚æ•°ç»„ a[10]ä¸­å­˜å‚¨äº† 8 ä¸ªå…ƒç´ ï¼šaï¼Œbï¼Œcï¼Œdï¼Œeï¼Œfï¼Œgï¼Œhã€‚ç°åœ¨ï¼Œæˆ‘ä»¬è¦ä¾æ¬¡åˆ é™¤ aï¼Œbï¼Œc ä¸‰ä¸ªå…ƒç´ ã€‚ ä¸ºäº†é¿å… dï¼Œeï¼Œfï¼Œgï¼Œh è¿™å‡ ä¸ªæ•°æ®ä¼šè¢«æ¬ç§»ä¸‰æ¬¡ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆè®°å½•ä¸‹å·²ç»åˆ é™¤çš„æ•°æ®ã€‚æ¯æ¬¡çš„åˆ é™¤æ“ä½œå¹¶ä¸æ˜¯çœŸæ­£åœ°æ¬ç§»æ•°æ®ï¼Œåªæ˜¯è®°å½•æ•°æ®å·²ç»è¢«åˆ é™¤ã€‚å½“æ•°ç»„æ²¡æœ‰æ›´å¤šç©ºé—´å­˜å‚¨æ•°æ®æ—¶ï¼Œæˆ‘ä»¬å†è§¦å‘æ‰§è¡Œä¸€æ¬¡çœŸæ­£çš„åˆ é™¤æ“ä½œï¼Œè¿™æ ·å°±å¤§å¤§å‡å°‘äº†åˆ é™¤æ“ä½œå¯¼è‡´çš„æ•°æ®æ¬ç§»ã€‚ å¦‚æœä½ äº†è§£ JVMï¼Œä½ ä¼šå‘ç°ï¼Œè¿™ä¸å°±æ˜¯ JVM æ ‡è®°æ¸…é™¤åƒåœ¾å›æ”¶ç®—æ³•çš„æ ¸å¿ƒæ€æƒ³å—ï¼Ÿæ²¡é”™ï¼Œæ•°æ®ç»“æ„å’Œç®—æ³•çš„é­…åŠ›å°±åœ¨äºæ­¤ï¼Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬å¹¶ä¸æ˜¯è¦å»æ­»è®°ç¡¬èƒŒæŸä¸ªæ•°æ®ç»“æ„æˆ–è€…ç®—æ³•ï¼Œè€Œæ˜¯è¦å­¦ä¹ å®ƒèƒŒåçš„æ€æƒ³å’Œå¤„ç†æŠ€å·§ï¼Œè¿™äº›ä¸œè¥¿æ‰æ˜¯æœ€æœ‰ä»·å€¼çš„ã€‚å¦‚æœä½ ç»†å¿ƒç•™æ„ï¼Œä¸ç®¡æ˜¯åœ¨è½¯ä»¶å¼€å‘è¿˜æ˜¯æ¶æ„è®¾è®¡ä¸­ï¼Œæ€»èƒ½æ‰¾åˆ°æŸäº›ç®—æ³•å’Œæ•°æ®ç»“æ„çš„å½±å­ã€‚ è­¦æƒ•æ•°ç»„çš„è®¿é—®è¶Šç•Œé—®é¢˜ é¦–å…ˆï¼Œæˆ‘è¯·ä½ æ¥åˆ†æä¸€ä¸‹è¿™æ®µ C è¯­è¨€ä»£ç çš„è¿è¡Œç»“æœï¼š int main ( int argc , char * argv []){ int i = 0 ; int arr [ 3 ] = { 0 }; for (; i <= 3 ; i ++ ){ arr [ i ] = 0 ; printf ( \"hello world \\n \" ); } return 0 ; } è¿™æ®µä»£ç çš„è¿è¡Œç»“æœå¹¶éæ˜¯æ‰“å°ä¸‰è¡Œ\"hello word\"ï¼Œè€Œæ˜¯ä¼šæ— é™æ‰“å°\"hello world\"ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ å› ä¸ºï¼Œæ•°ç»„å¤§å°ä¸º 3ï¼Œa[0]ï¼Œa[1]ï¼Œa[2]ï¼Œè€Œæˆ‘ä»¬çš„ä»£ç å› ä¸ºä¹¦å†™é”™è¯¯ï¼Œå¯¼è‡´ for å¾ªç¯çš„ç»“æŸæ¡ä»¶é”™å†™ä¸ºäº† i<=3 è€Œé i<3ï¼Œæ‰€ä»¥å½“ i=3 æ—¶ï¼Œæ•°ç»„ a[3]è®¿é—®è¶Šç•Œã€‚ æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨ C è¯­è¨€ä¸­ï¼Œåªè¦ä¸æ˜¯è®¿é—®å—é™çš„å†…å­˜ï¼Œæ‰€æœ‰çš„å†…å­˜ç©ºé—´éƒ½æ˜¯å¯ä»¥è‡ªç”±è®¿é—®çš„ã€‚æ ¹æ®æˆ‘ä»¬å‰é¢è®²çš„æ•°ç»„å¯»å€å…¬å¼ï¼Œa[3]ä¹Ÿä¼šè¢«å®šä½åˆ°æŸå—ä¸å±äºæ•°ç»„çš„å†…å­˜åœ°å€ä¸Šï¼Œè€Œè¿™ä¸ªåœ°å€æ­£å¥½æ˜¯å­˜å‚¨å˜é‡ i çš„å†…å­˜åœ°å€ï¼Œé‚£ä¹ˆ a[3]=0 å°±ç›¸å½“äº i=0ï¼Œæ‰€ä»¥å°±ä¼šå¯¼è‡´ä»£ç æ— é™å¾ªç¯ã€‚ å¯¹æ­¤å¤„çš„æ— é™å¾ªç¯æœ‰ç–‘é—®çš„è¯ï¼Œå¯ä»¥å»æŸ¥å‡½æ•°è°ƒç”¨çš„æ ˆæ¡¢ç»“æ„ç»†èŠ‚ï¼ˆæ“ä½œç³»ç»Ÿæˆ–è®¡ç®—æœºä½“ç³»ç»“æ„çš„æ•™æåº”è¯¥ä¼šè®²åˆ°ï¼‰ã€‚å‡½æ•°ä½“å†…çš„å±€éƒ¨å˜é‡å­˜åœ¨æ ˆä¸Šï¼Œä¸”æ˜¯è¿ç»­å‹æ ˆã€‚åœ¨Linuxè¿›ç¨‹çš„å†…å­˜å¸ƒå±€ä¸­ï¼Œæ ˆåŒºåœ¨é«˜åœ°å€ç©ºé—´ï¼Œä»é«˜å‘ä½å¢é•¿ã€‚å˜é‡iå’Œarråœ¨ç›¸é‚»åœ°å€ï¼Œä¸”iæ¯”arrçš„åœ°å€å¤§ï¼Œæ‰€ä»¥arrè¶Šç•Œæ­£å¥½è®¿é—®åˆ°iã€‚å½“ç„¶ï¼Œå‰ææ˜¯iå’Œarrå…ƒç´ åŒç±»å‹ï¼Œå¦åˆ™é‚£æ®µä»£ç ä»æ˜¯æœªå†³è¡Œä¸ºã€‚ æ•°ç»„è¶Šç•Œåœ¨ C è¯­è¨€ä¸­æ˜¯ä¸€ç§æœªå†³è¡Œä¸ºï¼Œå¹¶æ²¡æœ‰è§„å®šæ•°ç»„è®¿é—®è¶Šç•Œæ—¶ç¼–è¯‘å™¨åº”è¯¥å¦‚ä½•å¤„ç†ã€‚å› ä¸ºï¼Œè®¿é—®æ•°ç»„çš„æœ¬è´¨å°±æ˜¯è®¿é—®ä¸€æ®µè¿ç»­å†…å­˜ï¼Œåªè¦æ•°ç»„é€šè¿‡åç§»è®¡ç®—å¾—åˆ°çš„å†…å­˜åœ°å€æ˜¯å¯ç”¨çš„ï¼Œé‚£ä¹ˆç¨‹åºå°±å¯èƒ½ä¸ä¼šæŠ¥ä»»ä½•é”™è¯¯ã€‚ è¿™ç§æƒ…å†µä¸‹ï¼Œä¸€èˆ¬éƒ½ä¼šå‡ºç°è«åå…¶å¦™çš„é€»è¾‘é”™è¯¯ï¼Œå°±åƒæˆ‘ä»¬åˆšåˆšä¸¾çš„é‚£ä¸ªä¾‹å­ï¼Œdebug çš„éš¾åº¦éå¸¸çš„å¤§ã€‚è€Œä¸”ï¼Œå¾ˆå¤šè®¡ç®—æœºç—…æ¯’ä¹Ÿæ­£æ˜¯åˆ©ç”¨åˆ°äº†ä»£ç ä¸­çš„æ•°ç»„è¶Šç•Œå¯ä»¥è®¿é—®éæ³•åœ°å€çš„æ¼æ´ï¼Œæ¥æ”»å‡»ç³»ç»Ÿï¼Œæ‰€ä»¥å†™ä»£ç çš„æ—¶å€™ä¸€å®šè¦è­¦æƒ•æ•°ç»„è¶Šç•Œã€‚ ä½†å¹¶éæ‰€æœ‰çš„è¯­è¨€éƒ½åƒ C ä¸€æ ·ï¼ŒæŠŠæ•°ç»„è¶Šç•Œæ£€æŸ¥çš„å·¥ä½œä¸¢ç»™ç¨‹åºå‘˜æ¥åšï¼Œåƒ Java æœ¬èº«å°±ä¼šåšè¶Šç•Œæ£€æŸ¥ï¼Œæ¯”å¦‚ä¸‹é¢è¿™å‡ è¡Œ Java ä»£ç ï¼Œå°±ä¼šæŠ›å‡º java.lang.ArrayIndexOutOfBoundsExceptionã€‚ int [] a = new int [ 3 ] ; a [ 3 ] = 10 ; å®¹å™¨èƒ½å¦å®Œå…¨æ›¿ä»£æ•°ç»„ï¼Ÿ é’ˆå¯¹æ•°ç»„ç±»å‹ï¼Œå¾ˆå¤šè¯­è¨€éƒ½æä¾›äº†å®¹å™¨ç±»ï¼Œæ¯”å¦‚ Java ä¸­çš„ ArrayListã€C++ STL ä¸­çš„ vectorã€‚åœ¨é¡¹ç›®å¼€å‘ä¸­ï¼Œä»€ä¹ˆæ—¶å€™é€‚åˆç”¨æ•°ç»„ï¼Œä»€ä¹ˆæ—¶å€™é€‚åˆç”¨å®¹å™¨å‘¢ï¼Ÿ ArrayList æœ€å¤§çš„ä¼˜åŠ¿å°±æ˜¯å¯ä»¥å°†å¾ˆå¤šæ•°ç»„æ“ä½œçš„ ç»†èŠ‚å°è£… èµ·æ¥ã€‚æ¯”å¦‚å‰é¢æåˆ°çš„æ•°ç»„æ’å…¥ã€åˆ é™¤æ•°æ®æ—¶éœ€è¦æ¬ç§»å…¶ä»–æ•°æ®ç­‰ã€‚å¦å¤–ï¼Œå®ƒè¿˜æœ‰ä¸€ä¸ªä¼˜åŠ¿ï¼Œå°±æ˜¯æ”¯æŒ åŠ¨æ€æ‰©å®¹ ã€‚ æ•°ç»„æœ¬èº«åœ¨å®šä¹‰çš„æ—¶å€™éœ€è¦é¢„å…ˆæŒ‡å®šå¤§å°ï¼Œå› ä¸ºéœ€è¦åˆ†é…è¿ç»­çš„å†…å­˜ç©ºé—´ã€‚å¦‚æœæˆ‘ä»¬ç”³è¯·äº†å¤§å°ä¸º 10 çš„æ•°ç»„ï¼Œå½“ç¬¬ 11 ä¸ªæ•°æ®éœ€è¦å­˜å‚¨åˆ°æ•°ç»„ä¸­æ—¶ï¼Œæˆ‘ä»¬å°±éœ€è¦é‡æ–°åˆ†é…ä¸€å—æ›´å¤§çš„ç©ºé—´ï¼Œå°†åŸæ¥çš„æ•°æ®å¤åˆ¶è¿‡å»ï¼Œç„¶åå†å°†æ–°çš„æ•°æ®æ’å…¥ã€‚ å¦‚æœä½¿ç”¨ ArrayListï¼Œæˆ‘ä»¬å°±å®Œå…¨ä¸éœ€è¦å…³å¿ƒåº•å±‚çš„æ‰©å®¹é€»è¾‘ï¼ŒArrayList å·²ç»å¸®æˆ‘ä»¬å®ç°å¥½äº†ã€‚æ¯æ¬¡å­˜å‚¨ç©ºé—´ä¸å¤Ÿçš„æ—¶å€™ï¼Œå®ƒéƒ½ä¼šå°†ç©ºé—´è‡ªåŠ¨æ‰©å®¹ä¸º 1.5 å€å¤§å°ã€‚ ä¸è¿‡ï¼Œè¿™é‡Œéœ€è¦æ³¨æ„ä¸€ç‚¹ï¼Œå› ä¸ºæ‰©å®¹æ“ä½œæ¶‰åŠå†…å­˜ç”³è¯·å’Œæ•°æ®æ¬ç§»ï¼Œæ˜¯æ¯”è¾ƒè€—æ—¶çš„ã€‚æ‰€ä»¥ï¼Œå¦‚æœäº‹å…ˆèƒ½ç¡®å®šéœ€è¦å­˜å‚¨çš„æ•°æ®å¤§å°ï¼Œæœ€å¥½åœ¨åˆ›å»º ArrayList çš„æ—¶å€™äº‹å…ˆæŒ‡å®šæ•°æ®å¤§å°ã€‚ æ¯”å¦‚æˆ‘ä»¬è¦ä»æ•°æ®åº“ä¸­å–å‡º 10000 æ¡æ•°æ®æ”¾å…¥ ArrayListã€‚æˆ‘ä»¬çœ‹ä¸‹é¢è¿™å‡ è¡Œä»£ç ï¼Œä½ ä¼šå‘ç°ï¼Œç›¸æ¯”ä¹‹ä¸‹ï¼Œäº‹å…ˆæŒ‡å®šæ•°æ®å¤§å°å¯ä»¥çœæ‰å¾ˆå¤šæ¬¡å†…å­˜ç”³è¯·å’Œæ•°æ®æ¬ç§»æ“ä½œã€‚ ArrayList < User > users = new ArrayList ( 10000 ); for ( int i = 0 ; i < 10000 ; ++ i ) { users . add ( xxx ); } ä½œä¸ºé«˜çº§è¯­è¨€ç¼–ç¨‹è€…ï¼Œæ˜¯ä¸æ˜¯æ•°ç»„å°±æ— ç”¨æ­¦ä¹‹åœ°äº†å‘¢ï¼Ÿå½“ç„¶ä¸æ˜¯ï¼Œåœ¨ä»¥ä¸‹åœºæ™¯ï¼Œç”¨æ•°ç»„å¯èƒ½ä¼šæ›´åˆé€‚äº›ï¼š Java ArrayList æ— æ³•å­˜å‚¨åŸºæœ¬ç±»å‹ ï¼Œæ¯”å¦‚ intã€longï¼Œéœ€è¦å°è£…ä¸º Integerã€Long ç±»ï¼Œè€Œ Autoboxingã€Unboxing åˆ™ æœ‰ä¸€å®šçš„æ€§èƒ½æ¶ˆè€— ï¼Œæ‰€ä»¥å¦‚æœç‰¹åˆ«å…³æ³¨æ€§èƒ½ï¼Œæˆ–è€…å¸Œæœ›ä½¿ç”¨åŸºæœ¬ç±»å‹ï¼Œå°±å¯ä»¥é€‰ç”¨æ•°ç»„ã€‚ å¦‚æœæ•°æ®å¤§å°äº‹å…ˆå·²çŸ¥ï¼Œå¹¶ä¸”å¯¹æ•°æ®çš„æ“ä½œéå¸¸ç®€å•ï¼Œç”¨ä¸åˆ° ArrayList æä¾›çš„å¤§éƒ¨åˆ†æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨æ•°ç»„ã€‚ å½“è¦è¡¨ç¤º å¤šç»´æ•°ç»„æ—¶ï¼Œç”¨æ•°ç»„å¾€å¾€ä¼šæ›´åŠ ç›´è§‚ ã€‚æ¯”å¦‚ Object[][] arrayï¼›è€Œç”¨å®¹å™¨çš„è¯åˆ™éœ€è¦è¿™æ ·å®šä¹‰ï¼šArrayList > arrayã€‚ æ€»ç»“ä¸€ä¸‹ï¼Œå¯¹äºä¸šåŠ¡å¼€å‘ï¼Œç›´æ¥ä½¿ç”¨å®¹å™¨å°±è¶³å¤Ÿäº†ï¼Œçœæ—¶çœåŠ›ã€‚æ¯•ç«ŸæŸè€—ä¸€ä¸¢ä¸¢æ€§èƒ½ï¼Œå®Œå…¨ä¸ä¼šå½±å“åˆ°ç³»ç»Ÿæ•´ä½“çš„æ€§èƒ½ã€‚ä½†å¦‚æœä½ æ˜¯åšä¸€äº›éå¸¸åº•å±‚çš„å¼€å‘ï¼Œæ¯”å¦‚å¼€å‘ç½‘ç»œæ¡†æ¶ï¼Œæ€§èƒ½çš„ä¼˜åŒ–éœ€è¦åšåˆ°æè‡´ï¼Œè¿™ä¸ªæ—¶å€™æ•°ç»„å°±ä¼šä¼˜äºå®¹å™¨ï¼Œæˆä¸ºé¦–é€‰ã€‚ ä¸ºä»€ä¹ˆæ•°ç»„è¦ä» 0 å¼€å§‹ç¼–å·ï¼Œè€Œä¸æ˜¯ä» 1 å¼€å§‹ï¼Ÿ ä»æ•°ç»„å­˜å‚¨çš„å†…å­˜æ¨¡å‹ä¸Šæ¥çœ‹ï¼Œ\"ä¸‹æ ‡\"æœ€ç¡®åˆ‡çš„å®šä¹‰åº”è¯¥æ˜¯\"åç§»ï¼ˆoffsetï¼‰\"ã€‚å‰é¢ä¹Ÿè®²åˆ°ï¼Œå¦‚æœç”¨ a æ¥è¡¨ç¤ºæ•°ç»„çš„é¦–åœ°å€ï¼Œa[0]å°±æ˜¯åç§»ä¸º 0 çš„ä½ç½®ï¼Œä¹Ÿå°±æ˜¯é¦–åœ°å€ï¼Œa[k]å°±è¡¨ç¤ºåç§» k ä¸ª type_size çš„ä½ç½®ï¼Œæ‰€ä»¥è®¡ç®— a[k]çš„å†…å­˜åœ°å€åªéœ€è¦ç”¨è¿™ä¸ªå…¬å¼ï¼š $$ a[k]\\_address = base\\_address + k * type\\_size $$ ä½†æ˜¯ï¼Œå¦‚æœæ•°ç»„ä» 1 å¼€å§‹è®¡æ•°ï¼Œé‚£æˆ‘ä»¬è®¡ç®—æ•°ç»„å…ƒç´  a[k]çš„å†…å­˜åœ°å€å°±ä¼šå˜ä¸ºï¼š $$ a[k]\\_address = base\\_address + (k-1)*type\\_size $$ å¯¹æ¯”ä¸¤ä¸ªå…¬å¼ï¼Œæˆ‘ä»¬ä¸éš¾å‘ç°ï¼Œä» 1 å¼€å§‹ç¼–å·ï¼Œæ¯æ¬¡éšæœºè®¿é—®æ•°ç»„å…ƒç´ éƒ½å¤šäº†ä¸€æ¬¡å‡æ³•è¿ç®—ï¼Œå¯¹äº CPU æ¥è¯´ï¼Œå°±æ˜¯å¤šäº†ä¸€æ¬¡å‡æ³•æŒ‡ä»¤ã€‚ æ•°ç»„ä½œä¸ºéå¸¸åŸºç¡€çš„æ•°æ®ç»“æ„ï¼Œé€šè¿‡ä¸‹æ ‡éšæœºè®¿é—®æ•°ç»„å…ƒç´ åˆæ˜¯å…¶éå¸¸åŸºç¡€çš„ç¼–ç¨‹æ“ä½œï¼Œæ•ˆç‡çš„ä¼˜åŒ–å°±è¦å°½å¯èƒ½åšåˆ°æè‡´ã€‚æ‰€ä»¥ä¸ºäº†å‡å°‘ä¸€æ¬¡å‡æ³•æ“ä½œï¼Œæ•°ç»„é€‰æ‹©äº†ä» 0 å¼€å§‹ç¼–å·ï¼Œè€Œä¸æ˜¯ä» 1 å¼€å§‹ã€‚ é™¤æ­¤ä¹‹å¤–ï¼Œæ›´ä¸»è¦çš„åŸå› å¯èƒ½æ˜¯å†å²åŸå› ã€‚ C è¯­è¨€è®¾è®¡è€…ç”¨ 0 å¼€å§‹è®¡æ•°æ•°ç»„ä¸‹æ ‡ï¼Œä¹‹åçš„ Javaã€JavaScript ç­‰é«˜çº§è¯­è¨€éƒ½æ•ˆä»¿äº† C è¯­è¨€ï¼Œæˆ–è€…è¯´ï¼Œä¸ºäº†åœ¨ä¸€å®šç¨‹åº¦ä¸Šå‡å°‘ C è¯­è¨€ç¨‹åºå‘˜å­¦ä¹  Java çš„å­¦ä¹ æˆæœ¬ï¼Œå› æ­¤ç»§ç»­æ²¿ç”¨äº†ä» 0 å¼€å§‹è®¡æ•°çš„ä¹ æƒ¯ã€‚å®é™…ä¸Šï¼Œå¾ˆå¤šè¯­è¨€ä¸­æ•°ç»„ä¹Ÿå¹¶ä¸æ˜¯ä» 0 å¼€å§‹è®¡æ•°çš„ï¼Œæ¯”å¦‚ Matlabã€‚ç”šè‡³è¿˜æœ‰ä¸€äº›è¯­è¨€æ”¯æŒè´Ÿæ•°ä¸‹æ ‡ï¼Œæ¯”å¦‚ Pythonã€‚ å†…å®¹å°ç»“ æ•°ç»„å¯ä»¥è¯´æ˜¯æœ€åŸºç¡€ã€æœ€ç®€å•çš„æ•°æ®ç»“æ„äº†ã€‚æ•°ç»„ç”¨ä¸€å—è¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œæ¥å­˜å‚¨ç›¸åŒç±»å‹çš„ä¸€ç»„æ•°æ®ï¼Œæœ€å¤§çš„ç‰¹ç‚¹å°±æ˜¯æ”¯æŒéšæœºè®¿é—®ï¼Œä½†æ’å…¥ã€åˆ é™¤æ“ä½œä¹Ÿå› æ­¤å˜å¾—æ¯”è¾ƒä½æ•ˆï¼Œå¹³å‡æƒ…å†µæ—¶é—´å¤æ‚åº¦ä¸º O(n)ã€‚åœ¨å¹³æ—¶çš„ä¸šåŠ¡å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨ç¼–ç¨‹è¯­è¨€æä¾›çš„å®¹å™¨ç±»ï¼Œä½†æ˜¯ï¼Œå¦‚æœæ˜¯ç‰¹åˆ«åº•å±‚çš„å¼€å‘ï¼Œç›´æ¥ä½¿ç”¨æ•°ç»„å¯èƒ½ä¼šæ›´åˆé€‚ã€‚","tags":"Algorithms","url":"https://jiang-hao.com/articles/2020/algorithms-data-struct-array.html","loc":"https://jiang-hao.com/articles/2020/algorithms-data-struct-array.html"},{"title":"æ•°æ®ç»“æ„ä¸ç®—æ³•â€”â€”å¤æ‚åº¦åˆ†æ","text":"æ¦‚è¿° ä»å¹¿ä¹‰ä¸Šè®²ï¼Œæ•°æ®ç»“æ„å°±æ˜¯æŒ‡ä¸€ç»„æ•°æ®çš„å­˜å‚¨ç»“æ„ã€‚ç®—æ³•å°±æ˜¯æ“ä½œæ•°æ®çš„ä¸€ç»„æ–¹æ³•ã€‚ æ•°æ®ç»“æ„å’Œç®—æ³•æ˜¯ç›¸è¾…ç›¸æˆçš„ã€‚æ•°æ®ç»“æ„æ˜¯ä¸ºç®—æ³•æœåŠ¡çš„ï¼Œç®—æ³•è¦ä½œç”¨åœ¨ç‰¹å®šçš„æ•°æ®ç»“æ„ä¹‹ä¸Šã€‚æ¯”å¦‚ï¼Œå› ä¸ºæ•°ç»„å…·æœ‰éšæœºè®¿é—®çš„ç‰¹ç‚¹ï¼Œå¸¸ç”¨çš„äºŒåˆ†æŸ¥æ‰¾ç®—æ³•éœ€è¦ç”¨æ•°ç»„æ¥å­˜å‚¨æ•°æ®ã€‚ä½†å¦‚æœæˆ‘ä»¬é€‰æ‹©é“¾è¡¨è¿™ç§æ•°æ®ç»“æ„ï¼ŒäºŒåˆ†æŸ¥æ‰¾ç®—æ³•å°±æ— æ³•å·¥ä½œäº†ï¼Œå› ä¸ºé“¾è¡¨å¹¶ä¸æ”¯æŒéšæœºè®¿é—®ã€‚ æƒ³è¦å­¦ä¹ æ•°æ®ç»“æ„ä¸ç®—æ³•ï¼Œé¦–å…ˆè¦æŒæ¡ä¸€ä¸ªæ•°æ®ç»“æ„ä¸ç®—æ³•ä¸­æœ€é‡è¦çš„æ¦‚å¿µâ€”â€”å¤æ‚åº¦åˆ†æã€‚å®ƒå‡ ä¹å äº†æ•°æ®ç»“æ„å’Œç®—æ³•è¿™é—¨è¯¾çš„åŠå£æ±Ÿå±±ï¼Œæ˜¯æ•°æ®ç»“æ„å’Œç®—æ³•å­¦ä¹ çš„ç²¾é«“ã€‚ æ•°æ®ç»“æ„å’Œç®—æ³•è§£å†³çš„æ˜¯å¦‚ä½•æ›´çœã€æ›´å¿«åœ°å­˜å‚¨å’Œå¤„ç†æ•°æ®çš„é—®é¢˜ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬å°±éœ€è¦ä¸€ä¸ªè€ƒé‡æ•ˆç‡å’Œèµ„æºæ¶ˆè€—çš„æ–¹æ³•ï¼Œè¿™å°±æ˜¯å¤æ‚åº¦åˆ†ææ–¹æ³•ã€‚ ä¸‹å›¾å‡ ä¹æ¶µç›–äº†æ‰€æœ‰æ•°æ®ç»“æ„å’Œç®—æ³•ä¹¦ç±ä¸­éƒ½ä¼šè®²åˆ°çš„çŸ¥è¯†ç‚¹ï¼š ä½†æ˜¯ï¼Œä½œä¸ºåˆå­¦è€…ï¼Œæˆ–è€…ä¸€ä¸ªéç®—æ³•å·¥ç¨‹å¸ˆæ¥è¯´ï¼Œå¹¶ä¸éœ€è¦æŒæ¡å›¾é‡Œé¢çš„æ‰€æœ‰çŸ¥è¯†ç‚¹ã€‚ä¸‹é¢æ€»ç»“äº† 20 ä¸ªæœ€å¸¸ç”¨çš„ã€æœ€åŸºç¡€æ•°æ®ç»“æ„ä¸ç®—æ³•ï¼Œä¸ç®¡æ˜¯åº”ä»˜é¢è¯•è¿˜æ˜¯å·¥ä½œéœ€è¦ï¼Œå…¶å®åªè¦é›†ä¸­ç²¾åŠ›é€ä¸€æ”»å…‹è¿™ 20 ä¸ªçŸ¥è¯†ç‚¹å°±è¶³å¤Ÿäº†ï¼š 10 ä¸ªæ•°æ®ç»“æ„ï¼š æ•°ç»„ã€é“¾è¡¨ã€æ ˆã€é˜Ÿåˆ—ã€æ•£åˆ—è¡¨ã€äºŒå‰æ ‘ã€å †ã€è·³è¡¨ã€å›¾ã€Trie æ ‘ ï¼› 10 ä¸ªç®—æ³•ï¼š é€’å½’ã€æ’åºã€äºŒåˆ†æŸ¥æ‰¾ã€æœç´¢ã€å“ˆå¸Œç®—æ³•ã€è´ªå¿ƒç®—æ³•ã€åˆ†æ²»ç®—æ³•ã€å›æº¯ç®—æ³•ã€åŠ¨æ€è§„åˆ’ã€å­—ç¬¦ä¸²åŒ¹é…ç®—æ³• ï¼› åœ¨å­¦ä¹ æ•°æ®ç»“æ„å’Œç®—æ³•çš„è¿‡ç¨‹ä¸­ï¼Œä¹Ÿè¦æ³¨æ„ï¼Œä¸è¦åªæ˜¯æ­»è®°ç¡¬èƒŒï¼Œä¸è¦ä¸ºäº†å­¦ä¹ è€Œå­¦ä¹ ï¼Œè€Œæ˜¯è¦å­¦ä¹ å®ƒçš„\"æ¥å†\"\"è‡ªèº«çš„ç‰¹ç‚¹\"\"é€‚åˆè§£å†³çš„é—®é¢˜\"ä»¥åŠ\"å®é™…çš„åº”ç”¨åœºæ™¯\"ã€‚ æ—¶é—´å¤æ‚åº¦åˆ†æ æ•°æ®ç»“æ„å’Œç®—æ³•æœ¬èº«è§£å†³çš„æ˜¯\"å¿«\"å’Œ\"çœ\"çš„é—®é¢˜ï¼Œå³å¦‚ä½•è®©ä»£ç è¿è¡Œå¾—æ›´å¿«ï¼Œå¦‚ä½•è®©ä»£ç æ›´çœå­˜å‚¨ç©ºé—´ã€‚æ‰€ä»¥ï¼Œæ‰§è¡Œæ•ˆç‡æ˜¯ç®—æ³•ä¸€ä¸ªéå¸¸é‡è¦çš„è€ƒé‡æŒ‡æ ‡ã€‚é‚£å¦‚ä½•æ¥è¡¡é‡ä½ ç¼–å†™çš„ç®—æ³•ä»£ç çš„æ‰§è¡Œæ•ˆç‡å‘¢ï¼Ÿè¿™é‡Œå°±è¦ç”¨åˆ°æˆ‘ä»¬ä»Šå¤©è¦è®²çš„å†…å®¹ï¼šæ—¶é—´ã€ç©ºé—´å¤æ‚åº¦åˆ†æã€‚ å¤§ O å¤æ‚åº¦è¡¨ç¤ºæ³• å…³é”®ç»“è®ºï¼š å‡è®¾æ¯è¡Œä»£ç æ‰§è¡Œçš„æ—¶é—´éƒ½ä¸€æ ·ï¼Œä¸º \\(unitTime\\) ï¼Œåˆ™æ‰€æœ‰ä»£ç çš„æ‰§è¡Œæ—¶é—´ T(n) ä¸æ¯è¡Œä»£ç çš„æ‰§è¡Œæ¬¡æ•°æˆæ­£æ¯”ã€‚ æˆ‘ä»¬å¯ä»¥æŠŠè¿™ä¸ªè§„å¾‹æ€»ç»“æˆä¸€ä¸ªå…¬å¼ï¼š å…¶ä¸­ï¼ŒT(n) æˆ‘ä»¬å·²ç»è®²è¿‡äº†ï¼Œå®ƒè¡¨ç¤ºä»£ç æ‰§è¡Œçš„æ—¶é—´ï¼›n è¡¨ç¤ºæ•°æ®è§„æ¨¡çš„å¤§å°ï¼›f(n) è¡¨ç¤ºæ¯è¡Œä»£ç æ‰§è¡Œçš„æ¬¡æ•°æ€»å’Œã€‚å› ä¸ºè¿™æ˜¯ä¸€ä¸ªå…¬å¼ï¼Œæ‰€ä»¥ç”¨ f(n) æ¥è¡¨ç¤ºã€‚å…¬å¼ä¸­çš„ Oï¼Œè¡¨ç¤ºä»£ç çš„æ‰§è¡Œæ—¶é—´ T(n) ä¸ f(n) è¡¨è¾¾å¼æˆæ­£æ¯”ã€‚ æŒ‰ç…§è¿™ä¸ªåˆ†ææ€è·¯ï¼Œæˆ‘ä»¬å†æ¥çœ‹è¿™æ®µä»£ç ã€‚ int cal ( int n ) { int sum = 0 ; int i = 1 ; int j = 1 ; for (; i <= n ; ++ i ) { j = 1 ; for (; j <= n ; ++ j ) { sum = sum + i * j ; } } } ç¬¬ 2ã€3ã€4 è¡Œä»£ç ï¼Œæ¯è¡Œéƒ½éœ€è¦ 1 ä¸ª \\(unit Time\\) çš„æ‰§è¡Œæ—¶é—´ï¼Œç¬¬ 5ã€6 è¡Œä»£ç å¾ªç¯æ‰§è¡Œäº† \\(n\\) éï¼Œéœ€è¦ \\( 2n * unitTime\\) çš„æ‰§è¡Œæ—¶é—´ï¼Œç¬¬ 7ã€8 è¡Œä»£ç å¾ªç¯æ‰§è¡Œäº† \\(n&#94;2\\) éï¼Œæ‰€ä»¥éœ€è¦ \\(2n&#94;2* unitTime\\) çš„æ‰§è¡Œæ—¶é—´ã€‚æ‰€ä»¥ï¼Œæ•´æ®µä»£ç æ€»çš„æ‰§è¡Œæ—¶é—´ \\(T(n) = O(2n&#94;2+2n+3)\\) ã€‚ å¤§ O æ—¶é—´å¤æ‚åº¦å®é™…ä¸Šå¹¶ä¸å…·ä½“è¡¨ç¤ºä»£ç çœŸæ­£çš„æ‰§è¡Œæ—¶é—´ï¼Œè€Œæ˜¯ è¡¨ç¤ºä»£ç æ‰§è¡Œæ—¶é—´éšæ•°æ®è§„æ¨¡å¢é•¿çš„å˜åŒ–è¶‹åŠ¿ ï¼Œæ‰€ä»¥ï¼Œä¹Ÿå«ä½œæ¸è¿›æ—¶é—´å¤æ‚åº¦ï¼ˆasymptotic time complexityï¼‰ï¼Œç®€ç§°æ—¶é—´å¤æ‚åº¦ã€‚ å½“ n å¾ˆå¤§æ—¶ï¼Œä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆ 10000ã€100000ã€‚è€Œå…¬å¼ä¸­çš„ ä½é˜¶ã€å¸¸é‡ã€ç³»æ•°ä¸‰éƒ¨åˆ†å¹¶ä¸å·¦å³å¢é•¿è¶‹åŠ¿ï¼Œæ‰€ä»¥éƒ½å¯ä»¥å¿½ç•¥ã€‚æˆ‘ä»¬åªéœ€è¦è®°å½•ä¸€ä¸ªæœ€å¤§é‡çº§å°±å¯ä»¥ äº†ï¼Œå¦‚æœç”¨å¤§ O è¡¨ç¤ºæ³•è¡¨ç¤ºåˆšè®²çš„é‚£æ®µä»£ç çš„æ—¶é—´å¤æ‚åº¦ï¼Œå°±å¯ä»¥è®°ä¸ºï¼š \\(T(n) = O(n&#94;2)\\) ã€‚ æ—¶é—´å¤æ‚åº¦åˆ†æ å¦‚ä½•åˆ†æä¸€æ®µä»£ç çš„æ—¶é—´å¤æ‚åº¦ï¼Ÿæˆ‘ä»¬æœ‰ä¸‰ä¸ªæ¯”è¾ƒå®ç”¨çš„æ–¹æ³•ã€‚ åªå…³æ³¨å¾ªç¯æ‰§è¡Œæ¬¡æ•°æœ€å¤šçš„ä¸€æ®µä»£ç  å¤§ O è¿™ç§å¤æ‚åº¦è¡¨ç¤ºæ–¹æ³•åªæ˜¯è¡¨ç¤ºä¸€ç§å˜åŒ–è¶‹åŠ¿ã€‚æˆ‘ä»¬é€šå¸¸ä¼šå¿½ç•¥æ‰å…¬å¼ä¸­çš„å¸¸é‡ã€ä½é˜¶ã€ç³»æ•°ï¼Œåªéœ€è¦è®°å½•ä¸€ä¸ªæœ€å¤§é˜¶çš„é‡çº§å°±å¯ä»¥äº†ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬åœ¨åˆ†æä¸€ä¸ªç®—æ³•ã€ä¸€æ®µä»£ç çš„æ—¶é—´å¤æ‚åº¦çš„æ—¶å€™ï¼Œä¹Ÿåªå…³æ³¨å¾ªç¯æ‰§è¡Œæ¬¡æ•°æœ€å¤šçš„é‚£ä¸€æ®µä»£ç å°±å¯ä»¥äº†ã€‚è¿™æ®µæ ¸å¿ƒä»£ç æ‰§è¡Œæ¬¡æ•°çš„ n çš„é‡çº§ï¼Œå°±æ˜¯æ•´æ®µè¦åˆ†æä»£ç çš„æ—¶é—´å¤æ‚åº¦ã€‚ è¿™é‡Œæˆ‘è¦å†å¼ºè°ƒä¸€ä¸‹ï¼Œå³ä¾¿æŸæ®µä»£ç å¾ªç¯ 10000 æ¬¡ã€100000 æ¬¡ï¼Œåªè¦æ˜¯ä¸€ä¸ªå·²çŸ¥çš„æ•°ï¼Œè·Ÿ n æ— å…³ï¼Œç…§æ ·ä¹Ÿæ˜¯å¸¸é‡çº§çš„æ‰§è¡Œæ—¶é—´ã€‚å½“ n æ— é™å¤§çš„æ—¶å€™ï¼Œå°±å¯ä»¥å¿½ç•¥ã€‚å°½ç®¡å¯¹ä»£ç çš„æ‰§è¡Œæ—¶é—´ä¼šæœ‰å¾ˆå¤§å½±å“ï¼Œä½†æ˜¯å›åˆ°æ—¶é—´å¤æ‚åº¦çš„æ¦‚å¿µæ¥è¯´ï¼Œå®ƒè¡¨ç¤ºçš„æ˜¯ä¸€ä¸ªç®—æ³•æ‰§è¡Œæ•ˆç‡ä¸æ•°æ®è§„æ¨¡å¢é•¿çš„å˜åŒ–è¶‹åŠ¿ï¼Œæ‰€ä»¥ä¸ç®¡å¸¸é‡çš„æ‰§è¡Œæ—¶é—´å¤šå¤§ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥å¿½ç•¥æ‰ã€‚å› ä¸ºå®ƒæœ¬èº«å¯¹å¢é•¿è¶‹åŠ¿å¹¶æ²¡æœ‰å½±å“ã€‚ å¤šæ®µåŒçº§ä»£ç çš„æ€»å¤æ‚åº¦ç­‰äºé‡çº§æœ€å¤§çš„é‚£æ®µä»£ç çš„å¤æ‚åº¦ æŠ½è±¡æˆå…¬å¼å°±æ˜¯ï¼š $$ å¦‚æœ T_1(n)=O(f(n))ï¼ŒT_2(n)=O(g(n))ï¼›é‚£ä¹ˆ T(n)=max(O(f(n)), O(g(n))) =O(max(f(n), g(n))). $$ å¤šä¸ªåµŒå¥—å¾ªç¯ä»£ç çš„å¤æ‚åº¦ç­‰äºåµŒå¥—å†…å¤–ä»£ç å¤æ‚åº¦çš„ä¹˜ç§¯ æŠ½è±¡æˆå…¬å¼å°±æ˜¯ï¼š $$ å¦‚æœ T_1(n)=O(f(n))ï¼ŒT_2(n)=O(g(n))ï¼›é‚£ä¹ˆ T(n)=T_1(n)*T_2(n)=O(f(n))*O(g(n))=O(f(n)*g(n)). $$ ä¸¾ä¸ªä¾‹å­ï¼š int cal ( int n ) { int ret = 0 ; int i = 1 ; for (; i < n ; ++ i ) { ret = ret + f ( i ); } } int f ( int n ) { int sum = 0 ; int i = 1 ; for (; i < n ; ++ i ) { sum = sum + i ; } return sum ; } æˆ‘ä»¬å•ç‹¬çœ‹ \\(cal()\\) å‡½æ•°ã€‚å‡è®¾ \\(f()\\) åªæ˜¯ä¸€ä¸ªæ™®é€š \\(O(1)\\) çš„æ“ä½œï¼Œé‚£ç¬¬ 4ï½6 è¡Œçš„æ—¶é—´å¤æ‚åº¦å°±æ˜¯ï¼Œ \\(T_1(n) = O(n)\\) ã€‚ä½† \\(f()\\) å‡½æ•°æœ¬èº«ä¸æ˜¯ä¸€ä¸ªç®€å•çš„æ“ä½œï¼Œå®ƒçš„æ—¶é—´å¤æ‚åº¦æ˜¯ \\(T_2(n) = O(n)\\) ï¼Œæ‰€ä»¥ï¼Œæ•´ä¸ª \\(cal()\\) å‡½æ•°çš„æ—¶é—´å¤æ‚åº¦å°±æ˜¯ï¼Œ \\(T(n) = T_1(n) * T_2(n) = O(n*n) = O(n&#94;2)\\) ã€‚ å‡ ç§å¸¸è§æ—¶é—´å¤æ‚åº¦å®ä¾‹åˆ†æ è™½ç„¶ä»£ç åƒå·®ä¸‡åˆ«ï¼Œä½†æ˜¯å¸¸è§çš„å¤æ‚åº¦é‡çº§å¹¶ä¸å¤šã€‚æˆ‘ç¨å¾®æ€»ç»“äº†ä¸€ä¸‹ï¼Œè¿™äº›å¤æ‚åº¦é‡çº§å‡ ä¹æ¶µç›–äº†ä½ ä»Šåå¯ä»¥æ¥è§¦çš„æ‰€æœ‰ä»£ç çš„å¤æ‚åº¦é‡çº§ã€‚ å¯¹äºä»¥ä¸Šç½—åˆ—çš„å¤æ‚åº¦é‡çº§ï¼Œæˆ‘ä»¬å¯ä»¥ç²—ç•¥åœ°åˆ†ä¸ºä¸¤ç±»ï¼Œå¤šé¡¹å¼é‡çº§å’Œéå¤šé¡¹å¼é‡çº§ã€‚å…¶ä¸­ï¼Œéå¤šé¡¹å¼é‡çº§åªæœ‰ä¸¤ä¸ªï¼š \\(O(2&#94;n)\\) å’Œ \\(O(n!)\\) ã€‚ æˆ‘ä»¬æŠŠæ—¶é—´å¤æ‚åº¦ä¸ºéå¤šé¡¹å¼é‡çº§çš„ç®—æ³•é—®é¢˜å«ä½œ NPï¼ˆNon-Deterministic Polynomialï¼Œéç¡®å®šå¤šé¡¹å¼ï¼‰é—®é¢˜ã€‚ å½“æ•°æ®è§„æ¨¡ n è¶Šæ¥è¶Šå¤§æ—¶ï¼Œéå¤šé¡¹å¼é‡çº§ç®—æ³•çš„æ‰§è¡Œæ—¶é—´ä¼šæ€¥å‰§å¢åŠ ï¼Œæ±‚è§£é—®é¢˜çš„æ‰§è¡Œæ—¶é—´ä¼šæ— é™å¢é•¿ã€‚æ‰€ä»¥ï¼Œéå¤šé¡¹å¼æ—¶é—´å¤æ‚åº¦çš„ç®—æ³•å…¶å®æ˜¯éå¸¸ä½æ•ˆçš„ç®—æ³•ã€‚å› æ­¤ï¼Œå…³äº NP æ—¶é—´å¤æ‚åº¦æˆ‘ä»¬å°±ä¸å±•å¼€è®²äº†ã€‚æˆ‘ä»¬ä¸»è¦æ¥çœ‹å‡ ç§å¸¸è§çš„å¤šé¡¹å¼æ—¶é—´å¤æ‚åº¦ã€‚ O(1) é¦–å…ˆå¿…é¡»æ˜ç¡®ä¸€ä¸ªæ¦‚å¿µï¼ŒO(1) åªæ˜¯å¸¸é‡çº§æ—¶é—´å¤æ‚åº¦çš„ä¸€ç§è¡¨ç¤ºæ–¹æ³•ï¼Œå¹¶ä¸æ˜¯æŒ‡åªæ‰§è¡Œäº†ä¸€è¡Œä»£ç ã€‚æ¯”å¦‚è¿™æ®µä»£ç ï¼Œå³ä¾¿æœ‰ 3 è¡Œï¼Œå®ƒçš„æ—¶é—´å¤æ‚åº¦ä¹Ÿæ˜¯ O(1ï¼‰ï¼Œè€Œä¸æ˜¯ O(3)ã€‚ int i = 8 ; int j = 6 ; int sum = i + j ; æ€»ç»“ä¸€ä¸‹ï¼Œåªè¦ä»£ç çš„æ‰§è¡Œæ—¶é—´ä¸éš n çš„å¢å¤§è€Œå¢é•¿ï¼Œè¿™æ ·ä»£ç çš„æ—¶é—´å¤æ‚åº¦æˆ‘ä»¬éƒ½è®°ä½œ O(1)ã€‚æˆ–è€…è¯´ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œåªè¦ç®—æ³•ä¸­ä¸å­˜åœ¨å¾ªç¯è¯­å¥ã€é€’å½’è¯­å¥ï¼Œå³ä½¿æœ‰æˆåƒä¸Šä¸‡è¡Œçš„ä»£ç ï¼Œå…¶æ—¶é—´å¤æ‚åº¦ä¹Ÿæ˜¯ÎŸ(1)ã€‚ O(logn)ã€O(nlogn) å¯¹æ•°é˜¶æ—¶é—´å¤æ‚åº¦éå¸¸å¸¸è§ï¼ŒåŒæ—¶ä¹Ÿæ˜¯æœ€éš¾åˆ†æçš„ä¸€ç§æ—¶é—´å¤æ‚åº¦ã€‚æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥è¯´æ˜ä¸€ä¸‹ã€‚ i = 1 ; while ( i <= n ) { i = i * 2 ; } æ ¹æ®æˆ‘ä»¬å‰é¢è®²çš„å¤æ‚åº¦åˆ†ææ–¹æ³•ï¼Œç¬¬ä¸‰è¡Œä»£ç æ˜¯å¾ªç¯æ‰§è¡Œæ¬¡æ•°æœ€å¤šçš„ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬åªè¦èƒ½è®¡ç®—å‡ºè¿™è¡Œä»£ç è¢«æ‰§è¡Œäº†å¤šå°‘æ¬¡ï¼Œå°±èƒ½çŸ¥é“æ•´æ®µä»£ç çš„æ—¶é—´å¤æ‚åº¦ã€‚ ä»ä»£ç ä¸­å¯ä»¥çœ‹å‡ºï¼Œå˜é‡ i çš„å€¼ä» 1 å¼€å§‹å–ï¼Œæ¯å¾ªç¯ä¸€æ¬¡å°±ä¹˜ä»¥ 2ã€‚å½“å¤§äº n æ—¶ï¼Œå¾ªç¯ç»“æŸã€‚è¿˜è®°å¾—æˆ‘ä»¬é«˜ä¸­å­¦è¿‡çš„ç­‰æ¯”æ•°åˆ—å—ï¼Ÿå®é™…ä¸Šï¼Œå˜é‡ i çš„å–å€¼å°±æ˜¯ä¸€ä¸ªç­‰æ¯”æ•°åˆ—ã€‚å¦‚æœæˆ‘æŠŠå®ƒä¸€ä¸ªä¸€ä¸ªåˆ—å‡ºæ¥ï¼Œå°±åº”è¯¥æ˜¯è¿™ä¸ªæ ·å­çš„ï¼š æ‰€ä»¥ï¼Œæˆ‘ä»¬åªè¦çŸ¥é“ x å€¼æ˜¯å¤šå°‘ï¼Œå°±çŸ¥é“è¿™è¡Œä»£ç æ‰§è¡Œçš„æ¬¡æ•°äº†ã€‚é€šè¿‡ \\(2&#94;x=n\\) æ±‚è§£ x è¿™ä¸ªé—®é¢˜æˆ‘ä»¬æƒ³é«˜ä¸­åº”è¯¥å°±å­¦è¿‡äº†ï¼Œæˆ‘å°±ä¸å¤šè¯´äº†ã€‚ \\(x=log_2n\\) ï¼Œæ‰€ä»¥ï¼Œè¿™æ®µä»£ç çš„æ—¶é—´å¤æ‚åº¦å°±æ˜¯ \\(O(log_2n)\\) ã€‚ ç°åœ¨ï¼Œæˆ‘æŠŠä»£ç ç¨å¾®æ”¹ä¸‹ï¼Œä½ å†çœ‹çœ‹ï¼Œè¿™æ®µä»£ç çš„æ—¶é—´å¤æ‚åº¦æ˜¯å¤šå°‘ï¼Ÿ i = 1 ; while ( i <= n ) { i = i * 3 ; } æ ¹æ®æˆ‘åˆšåˆšè®²çš„æ€è·¯ï¼Œå¾ˆç®€å•å°±èƒ½çœ‹å‡ºæ¥ï¼Œè¿™æ®µä»£ç çš„æ—¶é—´å¤æ‚åº¦ä¸º \\(O(log_3n)\\) ã€‚ å®é™…ä¸Šï¼Œä¸ç®¡æ˜¯ä»¥ 2 ä¸ºåº•ã€ä»¥ 3 ä¸ºåº•ï¼Œè¿˜æ˜¯ä»¥ 10 ä¸ºåº•ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæ‰€æœ‰å¯¹æ•°é˜¶çš„æ—¶é—´å¤æ‚åº¦éƒ½è®°ä¸º \\(O(logn)\\) ã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ æˆ‘ä»¬çŸ¥é“ï¼Œå¯¹æ•°ä¹‹é—´æ˜¯å¯ä»¥äº’ç›¸è½¬æ¢çš„ï¼Œ \\(log_3n\\) å°±ç­‰äº \\(log_32 * log_2n\\) ï¼Œæ‰€ä»¥ \\(O(log_3n) = O(C * log_2n)\\) ï¼Œå…¶ä¸­ \\(C=log_32\\) æ˜¯ä¸€ä¸ªå¸¸é‡ã€‚åŸºäºæˆ‘ä»¬å‰é¢çš„ä¸€ä¸ªç†è®ºï¼šåœ¨é‡‡ç”¨å¤§ O æ ‡è®°å¤æ‚åº¦çš„æ—¶å€™ï¼Œå¯ä»¥å¿½ç•¥ç³»æ•°ï¼Œå³ \\(O(Cf(n)) = O(f(n))\\) ã€‚æ‰€ä»¥ï¼Œ \\(O(log_2n)\\) å°±ç­‰äº \\(O(log_3n)\\) ã€‚å› æ­¤ï¼Œåœ¨å¯¹æ•°é˜¶æ—¶é—´å¤æ‚åº¦çš„è¡¨ç¤ºæ–¹æ³•é‡Œï¼Œæˆ‘ä»¬å¿½ç•¥å¯¹æ•°çš„\"åº•\"ï¼Œç»Ÿä¸€è¡¨ç¤ºä¸º \\(O(logn)\\) ã€‚ å¦‚æœä½ ç†è§£äº†æˆ‘å‰é¢è®²çš„ \\(O(logn)\\) ï¼Œé‚£ \\(O(nlogn)\\) å°±å¾ˆå®¹æ˜“ç†è§£äº†ã€‚è¿˜è®°å¾—æˆ‘ä»¬åˆšè®²çš„ä¹˜æ³•æ³•åˆ™å—ï¼Ÿå¦‚æœä¸€æ®µä»£ç çš„æ—¶é—´å¤æ‚åº¦æ˜¯ \\(O(logn)\\) ï¼Œæˆ‘ä»¬å¾ªç¯æ‰§è¡Œ n éï¼Œæ—¶é—´å¤æ‚åº¦å°±æ˜¯ \\(O(nlogn)\\) äº†ã€‚è€Œä¸”ï¼Œ \\(O(nlogn)\\) ä¹Ÿæ˜¯ä¸€ç§éå¸¸å¸¸è§çš„ç®—æ³•æ—¶é—´å¤æ‚åº¦ã€‚æ¯”å¦‚ï¼Œå½’å¹¶æ’åºã€å¿«é€Ÿæ’åºçš„æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯ \\(O(nlogn)\\) ã€‚ O(m+n)ã€O(m*n) å†æ¥è®²ä¸€ç§è·Ÿå‰é¢éƒ½ä¸ä¸€æ ·çš„æ—¶é—´å¤æ‚åº¦ï¼Œä»£ç çš„å¤æ‚åº¦ç”±ä¸¤ä¸ªæ•°æ®çš„è§„æ¨¡æ¥å†³å®šã€‚ int cal ( int m , int n ) { int sum_1 = 0 ; int i = 1 ; for (; i < m ; ++ i ) { sum_1 = sum_1 + i ; } int sum_2 = 0 ; int j = 1 ; for (; j < n ; ++ j ) { sum_2 = sum_2 + j ; } return sum_1 + sum_2 ; } ä»ä»£ç ä¸­å¯ä»¥çœ‹å‡ºï¼Œm å’Œ n æ˜¯è¡¨ç¤ºä¸¤ä¸ªæ•°æ®è§„æ¨¡ã€‚æˆ‘ä»¬æ— æ³•äº‹å…ˆè¯„ä¼° m å’Œ n è°çš„é‡çº§å¤§ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨è¡¨ç¤ºå¤æ‚åº¦çš„æ—¶å€™ï¼Œå°±ä¸èƒ½ç®€å•åœ°åˆ©ç”¨åŠ æ³•æ³•åˆ™ï¼Œçœç•¥æ‰å…¶ä¸­ä¸€ä¸ªã€‚æ‰€ä»¥ï¼Œä¸Šé¢ä»£ç çš„æ—¶é—´å¤æ‚åº¦å°±æ˜¯ O(m+n)ã€‚ é’ˆå¯¹è¿™ç§æƒ…å†µï¼ŒåŸæ¥çš„æ³•åˆ™å°±ä¸æ­£ç¡®äº†ï¼Œæˆ‘ä»¬éœ€è¦å°†è§„åˆ™æ”¹ä¸ºï¼š \\(T_1(m) + T_2(n) = O(f(m) + g(n))\\) ã€‚ä½†æ˜¯å¯¹äºåµŒå¥—å¾ªç¯æ¥è¯´çš„ä¹˜æ³•æ³•åˆ™ç»§ç»­æœ‰æ•ˆï¼š \\(T_1(m)*T_2(n) = O(f(m) * f(n))\\) ã€‚ æœ€å¥½ã€æœ€åæƒ…å†µæ—¶é—´å¤æ‚åº¦ åˆ†æä¸€ä¸‹è¿™æ®µä»£ç çš„æ—¶é—´å¤æ‚åº¦ã€‚ // nè¡¨ç¤ºæ•°ç»„arrayçš„é•¿åº¦ int find ( int [] array , int n , int x ) { int i = 0 ; int pos = - 1 ; for (; i < n ; ++ i ) { if ( array [ i ] == x ) pos = i ; } return pos ; } ä½ åº”è¯¥å¯ä»¥çœ‹å‡ºæ¥ï¼Œè¿™æ®µä»£ç è¦å®ç°çš„åŠŸèƒ½æ˜¯ï¼Œåœ¨ä¸€ä¸ªæ— åºçš„æ•°ç»„ï¼ˆarrayï¼‰ä¸­ï¼ŒæŸ¥æ‰¾å˜é‡ x å‡ºç°çš„ä½ç½®ã€‚å¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œå°±è¿”å› -1ã€‚æŒ‰ç…§ä¸ŠèŠ‚è¯¾è®²çš„åˆ†ææ–¹æ³•ï¼Œè¿™æ®µä»£ç çš„å¤æ‚åº¦æ˜¯ O(n)ï¼Œå…¶ä¸­ï¼Œn ä»£è¡¨æ•°ç»„çš„é•¿åº¦ã€‚ æˆ‘ä»¬åœ¨æ•°ç»„ä¸­æŸ¥æ‰¾ä¸€ä¸ªæ•°æ®ï¼Œå¹¶ä¸éœ€è¦æ¯æ¬¡éƒ½æŠŠæ•´ä¸ªæ•°ç»„éƒ½éå†ä¸€éï¼Œå› ä¸ºæœ‰å¯èƒ½ä¸­é€”æ‰¾åˆ°å°±å¯ä»¥æå‰ç»“æŸå¾ªç¯äº†ã€‚ä½†æ˜¯ï¼Œè¿™æ®µä»£ç å†™å¾—ä¸å¤Ÿé«˜æ•ˆã€‚æˆ‘ä»¬å¯ä»¥è¿™æ ·ä¼˜åŒ–ä¸€ä¸‹è¿™æ®µæŸ¥æ‰¾ä»£ç ã€‚ // nè¡¨ç¤ºæ•°ç»„arrayçš„é•¿åº¦ int find ( int [] array , int n , int x ) { int i = 0 ; int pos = - 1 ; for (; i < n ; ++ i ) { if ( array [ i ] == x ) { pos = i ; break ; } } return pos ; } è¿™ä¸ªæ—¶å€™ï¼Œé—®é¢˜å°±æ¥äº†ã€‚æˆ‘ä»¬ä¼˜åŒ–å®Œä¹‹åï¼Œè¿™æ®µä»£ç çš„æ—¶é—´å¤æ‚åº¦è¿˜æ˜¯ O(n) å—ï¼Ÿå¾ˆæ˜¾ç„¶ï¼Œå’±ä»¬ä¸Šä¸€èŠ‚è®²çš„åˆ†ææ–¹æ³•ï¼Œè§£å†³ä¸äº†è¿™ä¸ªé—®é¢˜ã€‚ å› ä¸ºï¼Œè¦æŸ¥æ‰¾çš„å˜é‡ x å¯èƒ½å‡ºç°åœ¨æ•°ç»„çš„ä»»æ„ä½ç½®ã€‚å¦‚æœæ•°ç»„ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ æ­£å¥½æ˜¯è¦æŸ¥æ‰¾çš„å˜é‡ xï¼Œé‚£å°±ä¸éœ€è¦ç»§ç»­éå†å‰©ä¸‹çš„ n-1 ä¸ªæ•°æ®äº†ï¼Œé‚£æ—¶é—´å¤æ‚åº¦å°±æ˜¯ O(1)ã€‚ä½†å¦‚æœæ•°ç»„ä¸­ä¸å­˜åœ¨å˜é‡ xï¼Œé‚£æˆ‘ä»¬å°±éœ€è¦æŠŠæ•´ä¸ªæ•°ç»„éƒ½éå†ä¸€éï¼Œæ—¶é—´å¤æ‚åº¦å°±æˆäº† O(n)ã€‚æ‰€ä»¥ï¼Œä¸åŒçš„æƒ…å†µä¸‹ï¼Œè¿™æ®µä»£ç çš„æ—¶é—´å¤æ‚åº¦æ˜¯ä¸ä¸€æ ·çš„ã€‚ ä¸ºäº†è¡¨ç¤ºä»£ç åœ¨ä¸åŒæƒ…å†µä¸‹çš„ä¸åŒæ—¶é—´å¤æ‚åº¦ï¼Œæˆ‘ä»¬éœ€è¦å¼•å…¥ä¸‰ä¸ªæ¦‚å¿µï¼šæœ€å¥½æƒ…å†µæ—¶é—´å¤æ‚åº¦ã€æœ€åæƒ…å†µæ—¶é—´å¤æ‚åº¦å’Œå¹³å‡æƒ…å†µæ—¶é—´å¤æ‚åº¦ã€‚ é¡¾åæ€ä¹‰ï¼Œæœ€å¥½æƒ…å†µæ—¶é—´å¤æ‚åº¦å°±æ˜¯ï¼Œåœ¨æœ€ç†æƒ³çš„æƒ…å†µä¸‹ï¼Œæ‰§è¡Œè¿™æ®µä»£ç çš„æ—¶é—´å¤æ‚åº¦ã€‚å°±åƒæˆ‘ä»¬åˆšåˆšè®²åˆ°çš„ï¼Œåœ¨æœ€ç†æƒ³çš„æƒ…å†µä¸‹ï¼Œè¦æŸ¥æ‰¾çš„å˜é‡ x æ­£å¥½æ˜¯æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œè¿™ä¸ªæ—¶å€™å¯¹åº”çš„æ—¶é—´å¤æ‚åº¦å°±æ˜¯æœ€å¥½æƒ…å†µæ—¶é—´å¤æ‚åº¦ã€‚ åŒç†ï¼Œæœ€åæƒ…å†µæ—¶é—´å¤æ‚åº¦å°±æ˜¯ï¼Œåœ¨æœ€ç³Ÿç³•çš„æƒ…å†µä¸‹ï¼Œæ‰§è¡Œè¿™æ®µä»£ç çš„æ—¶é—´å¤æ‚åº¦ã€‚å°±åƒåˆšä¸¾çš„é‚£ä¸ªä¾‹å­ï¼Œå¦‚æœæ•°ç»„ä¸­æ²¡æœ‰è¦æŸ¥æ‰¾çš„å˜é‡ xï¼Œæˆ‘ä»¬éœ€è¦æŠŠæ•´ä¸ªæ•°ç»„éƒ½éå†ä¸€éæ‰è¡Œï¼Œæ‰€ä»¥è¿™ç§æœ€ç³Ÿç³•æƒ…å†µä¸‹å¯¹åº”çš„æ—¶é—´å¤æ‚åº¦å°±æ˜¯æœ€åæƒ…å†µæ—¶é—´å¤æ‚åº¦ã€‚ å¹³å‡æƒ…å†µæ—¶é—´å¤æ‚åº¦ æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œæœ€å¥½æƒ…å†µæ—¶é—´å¤æ‚åº¦å’Œæœ€åæƒ…å†µæ—¶é—´å¤æ‚åº¦å¯¹åº”çš„éƒ½æ˜¯æç«¯æƒ…å†µä¸‹çš„ä»£ç å¤æ‚åº¦ï¼Œå‘ç”Ÿçš„æ¦‚ç‡å…¶å®å¹¶ä¸å¤§ã€‚ä¸ºäº†æ›´å¥½åœ°è¡¨ç¤ºå¹³å‡æƒ…å†µä¸‹çš„å¤æ‚åº¦ï¼Œæˆ‘ä»¬éœ€è¦å¼•å…¥å¦ä¸€ä¸ªæ¦‚å¿µï¼šå¹³å‡æƒ…å†µæ—¶é—´å¤æ‚åº¦ï¼Œåé¢æˆ‘ç®€ç§°ä¸ºå¹³å‡æ—¶é—´å¤æ‚åº¦ã€‚å¹³å‡æ—¶é—´å¤æ‚åº¦åˆè¯¥æ€ä¹ˆåˆ†æå‘¢ï¼Ÿæˆ‘è¿˜æ˜¯å€ŸåŠ©åˆšæ‰æŸ¥æ‰¾å˜é‡ x çš„ä¾‹å­æ¥è§£é‡Šã€‚ è¦æŸ¥æ‰¾çš„å˜é‡ x åœ¨æ•°ç»„ä¸­çš„ä½ç½®ï¼Œæœ‰ n+1 ç§æƒ…å†µï¼šåœ¨æ•°ç»„çš„ 0ï½n-1 ä½ç½®ä¸­å’Œä¸åœ¨æ•°ç»„ä¸­ã€‚æˆ‘ä»¬æŠŠæ¯ç§æƒ…å†µä¸‹ï¼ŒæŸ¥æ‰¾éœ€è¦éå†çš„å…ƒç´ ä¸ªæ•°ç´¯åŠ èµ·æ¥ï¼Œç„¶åå†é™¤ä»¥ n+1ï¼Œå°±å¯ä»¥å¾—åˆ°éœ€è¦éå†çš„å…ƒç´ ä¸ªæ•°çš„å¹³å‡å€¼ï¼Œå³ï¼š æˆ‘ä»¬çŸ¥é“ï¼Œæ—¶é—´å¤æ‚åº¦çš„å¤§ O æ ‡è®°æ³•ä¸­ï¼Œå¯ä»¥çœç•¥æ‰ç³»æ•°ã€ä½é˜¶ã€å¸¸é‡ï¼Œæ‰€ä»¥ï¼Œå’±ä»¬æŠŠåˆšåˆšè¿™ä¸ªå…¬å¼ç®€åŒ–ä¹‹åï¼Œå¾—åˆ°çš„å¹³å‡æ—¶é—´å¤æ‚åº¦å°±æ˜¯ O(n)ã€‚è¿™ä¸ªç»“è®ºè™½ç„¶æ˜¯æ­£ç¡®çš„ï¼Œä½†æ˜¯è®¡ç®—è¿‡ç¨‹ç¨å¾®æœ‰ç‚¹å„¿é—®é¢˜ã€‚ç©¶ç«Ÿæ˜¯ä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿæˆ‘ä»¬åˆšè®²çš„è¿™ n+1 ç§æƒ…å†µï¼Œå‡ºç°çš„æ¦‚ç‡å¹¶ä¸æ˜¯ä¸€æ ·çš„ã€‚ æˆ‘ä»¬çŸ¥é“ï¼Œè¦æŸ¥æ‰¾çš„å˜é‡ xï¼Œè¦ä¹ˆåœ¨æ•°ç»„é‡Œï¼Œè¦ä¹ˆå°±ä¸åœ¨æ•°ç»„é‡Œã€‚è¿™ä¸¤ç§æƒ…å†µå¯¹åº”çš„æ¦‚ç‡ç»Ÿè®¡èµ·æ¥å¾ˆéº»çƒ¦ï¼Œä¸ºäº†æ–¹ä¾¿ä½ ç†è§£ï¼Œæˆ‘ä»¬å‡è®¾åœ¨æ•°ç»„ä¸­ä¸ä¸åœ¨æ•°ç»„ä¸­çš„æ¦‚ç‡éƒ½ä¸º 1/2ã€‚å¦å¤–ï¼Œè¦æŸ¥æ‰¾çš„æ•°æ®å‡ºç°åœ¨ 0ï½n-1 è¿™ n ä¸ªä½ç½®çš„æ¦‚ç‡ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œä¸º 1/nã€‚æ‰€ä»¥ï¼Œæ ¹æ®æ¦‚ç‡ä¹˜æ³•æ³•åˆ™ï¼Œè¦æŸ¥æ‰¾çš„æ•°æ®å‡ºç°åœ¨ 0ï½n-1 ä¸­ä»»æ„ä½ç½®çš„æ¦‚ç‡å°±æ˜¯ 1/(2n)ã€‚ å› æ­¤ï¼Œå‰é¢çš„æ¨å¯¼è¿‡ç¨‹ä¸­å­˜åœ¨çš„æœ€å¤§é—®é¢˜å°±æ˜¯ï¼Œæ²¡æœ‰å°†å„ç§æƒ…å†µå‘ç”Ÿçš„æ¦‚ç‡è€ƒè™‘è¿›å»ã€‚å¦‚æœæˆ‘ä»¬æŠŠæ¯ç§æƒ…å†µå‘ç”Ÿçš„æ¦‚ç‡ä¹Ÿè€ƒè™‘è¿›å»ï¼Œé‚£å¹³å‡æ—¶é—´å¤æ‚åº¦çš„è®¡ç®—è¿‡ç¨‹å°±å˜æˆäº†è¿™æ ·ï¼š è¿™ä¸ªå€¼å°±æ˜¯æ¦‚ç‡è®ºä¸­çš„åŠ æƒå¹³å‡å€¼ï¼Œä¹Ÿå«ä½œæœŸæœ›å€¼ï¼Œæ‰€ä»¥å¹³å‡æ—¶é—´å¤æ‚åº¦çš„å…¨ç§°åº”è¯¥å«åŠ æƒå¹³å‡æ—¶é—´å¤æ‚åº¦æˆ–è€…æœŸæœ›æ—¶é—´å¤æ‚åº¦ã€‚ å¼•å…¥æ¦‚ç‡ä¹‹åï¼Œå‰é¢é‚£æ®µä»£ç çš„åŠ æƒå¹³å‡å€¼ä¸º (3n+1)/4ã€‚ç”¨å¤§ O è¡¨ç¤ºæ³•æ¥è¡¨ç¤ºï¼Œå»æ‰ç³»æ•°å’Œå¸¸é‡ï¼Œè¿™æ®µä»£ç çš„åŠ æƒå¹³å‡æ—¶é—´å¤æ‚åº¦ä»ç„¶æ˜¯ O(n)ã€‚ å®é™…ä¸Šï¼Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¹¶ä¸éœ€è¦åŒºåˆ†æœ€å¥½ã€æœ€åã€å¹³å‡æƒ…å†µæ—¶é—´å¤æ‚åº¦ä¸‰ç§æƒ…å†µã€‚åƒæˆ‘ä»¬ä¸Šä¸€èŠ‚è¯¾ä¸¾çš„é‚£äº›ä¾‹å­é‚£æ ·ï¼Œå¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªå¤æ‚åº¦å°±å¯ä»¥æ»¡è¶³éœ€æ±‚äº†ã€‚åªæœ‰åŒä¸€å—ä»£ç åœ¨ä¸åŒçš„æƒ…å†µä¸‹ï¼Œæ—¶é—´å¤æ‚åº¦æœ‰é‡çº§çš„å·®è·ï¼Œæˆ‘ä»¬æ‰ä¼šä½¿ç”¨è¿™ä¸‰ç§å¤æ‚åº¦è¡¨ç¤ºæ³•æ¥åŒºåˆ†ã€‚ å‡æ‘Šæ—¶é—´å¤æ‚åº¦ å‡æ‘Šæ—¶é—´å¤æ‚åº¦ï¼Œå¬èµ·æ¥è·Ÿå¹³å‡æ—¶é—´å¤æ‚åº¦æœ‰ç‚¹å„¿åƒã€‚å¯¹äºåˆå­¦è€…æ¥è¯´ï¼Œè¿™ä¸¤ä¸ªæ¦‚å¿µç¡®å®éå¸¸å®¹æ˜“å¼„æ··ã€‚ å¹³å‡å¤æ‚åº¦åªåœ¨æŸäº›ç‰¹æ®Šæƒ…å†µä¸‹æ‰ä¼šç”¨åˆ°ï¼Œè€Œå‡æ‘Šæ—¶é—´å¤æ‚åº¦åº”ç”¨çš„åœºæ™¯æ¯”å®ƒæ›´åŠ ç‰¹æ®Šã€æ›´åŠ æœ‰é™ã€‚ å€ŸåŠ©ä¸€ä¸ªå…·ä½“çš„ä¾‹å­: // arrayè¡¨ç¤ºä¸€ä¸ªé•¿åº¦ä¸ºnçš„æ•°ç»„ // ä»£ç ä¸­çš„array.lengthå°±ç­‰äºn int [] array = new int [ n ]; int count = 0 ; void insert ( int val ) { if ( count == array . length ) { int sum = 0 ; for ( int i = 0 ; i < array . length ; ++ i ) { sum = sum + array [ i ]; } array [ 0 ] = sum ; count = 1 ; } array [ count ] = val ; ++ count ; } è¿™æ®µä»£ç å®ç°äº†ä¸€ä¸ªå¾€æ•°ç»„ä¸­æ’å…¥æ•°æ®çš„åŠŸèƒ½ã€‚å½“æ•°ç»„æ»¡äº†ä¹‹åï¼Œä¹Ÿå°±æ˜¯ä»£ç ä¸­çš„ count == array.length æ—¶ï¼Œæˆ‘ä»¬ç”¨ for å¾ªç¯éå†æ•°ç»„æ±‚å’Œï¼Œå¹¶æ¸…ç©ºæ•°ç»„ï¼Œå°†æ±‚å’Œä¹‹åçš„ sum å€¼æ”¾åˆ°æ•°ç»„çš„ç¬¬ä¸€ä¸ªä½ç½®ï¼Œç„¶åå†å°†æ–°çš„æ•°æ®æ’å…¥ã€‚ä½†å¦‚æœæ•°ç»„ä¸€å¼€å§‹å°±æœ‰ç©ºé—²ç©ºé—´ï¼Œåˆ™ç›´æ¥å°†æ•°æ®æ’å…¥æ•°ç»„ã€‚ é‚£è¿™æ®µä»£ç çš„æ—¶é—´å¤æ‚åº¦æ˜¯å¤šå°‘å‘¢ï¼Ÿä½ å¯ä»¥å…ˆç”¨æˆ‘ä»¬åˆšè®²åˆ°çš„ä¸‰ç§æ—¶é—´å¤æ‚åº¦çš„åˆ†ææ–¹æ³•æ¥åˆ†æä¸€ä¸‹ã€‚ æœ€ç†æƒ³çš„æƒ…å†µä¸‹ï¼Œæ•°ç»„ä¸­æœ‰ç©ºé—²ç©ºé—´ï¼Œæˆ‘ä»¬åªéœ€è¦å°†æ•°æ®æ’å…¥åˆ°æ•°ç»„ä¸‹æ ‡ä¸º count çš„ä½ç½®å°±å¯ä»¥äº†ï¼Œæ‰€ä»¥æœ€å¥½æƒ…å†µæ—¶é—´å¤æ‚åº¦ä¸º O(1)ã€‚æœ€åçš„æƒ…å†µä¸‹ï¼Œæ•°ç»„ä¸­æ²¡æœ‰ç©ºé—²ç©ºé—´äº†ï¼Œæˆ‘ä»¬éœ€è¦å…ˆåšä¸€æ¬¡æ•°ç»„çš„éå†æ±‚å’Œï¼Œç„¶åå†å°†æ•°æ®æ’å…¥ï¼Œæ‰€ä»¥æœ€åæƒ…å†µæ—¶é—´å¤æ‚åº¦ä¸º O(n)ã€‚ é‚£å¹³å‡æ—¶é—´å¤æ‚åº¦æ˜¯å¤šå°‘å‘¢ï¼Ÿç­”æ¡ˆæ˜¯ O(1)ã€‚æˆ‘ä»¬è¿˜æ˜¯å¯ä»¥é€šè¿‡å‰é¢è®²çš„æ¦‚ç‡è®ºçš„æ–¹æ³•æ¥åˆ†æã€‚ å‡è®¾æ•°ç»„çš„é•¿åº¦æ˜¯ nï¼Œæ ¹æ®æ•°æ®æ’å…¥çš„ä½ç½®çš„ä¸åŒï¼Œæˆ‘ä»¬å¯ä»¥åˆ†ä¸º n ç§æƒ…å†µï¼Œæ¯ç§æƒ…å†µçš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(1)ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€ç§\"é¢å¤–\"çš„æƒ…å†µï¼Œå°±æ˜¯åœ¨æ•°ç»„æ²¡æœ‰ç©ºé—²ç©ºé—´æ—¶æ’å…¥ä¸€ä¸ªæ•°æ®ï¼Œè¿™ä¸ªæ—¶å€™çš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(n)ã€‚è€Œä¸”ï¼Œè¿™ n+1 ç§æƒ…å†µå‘ç”Ÿçš„æ¦‚ç‡ä¸€æ ·ï¼Œéƒ½æ˜¯ 1/(n+1)ã€‚æ‰€ä»¥ï¼Œæ ¹æ®åŠ æƒå¹³å‡çš„è®¡ç®—æ–¹æ³•ï¼Œæˆ‘ä»¬æ±‚å¾—çš„å¹³å‡æ—¶é—´å¤æ‚åº¦å°±æ˜¯ï¼š è‡³æ­¤ä¸ºæ­¢ï¼Œå‰é¢çš„æœ€å¥½ã€æœ€åã€å¹³å‡æ—¶é—´å¤æ‚åº¦çš„è®¡ç®—ï¼Œç†è§£èµ·æ¥åº”è¯¥éƒ½æ²¡æœ‰é—®é¢˜ã€‚ä½†æ˜¯è¿™ä¸ªä¾‹å­é‡Œçš„å¹³å‡å¤æ‚åº¦åˆ†æå…¶å®å¹¶ä¸éœ€è¦è¿™ä¹ˆå¤æ‚ï¼Œä¸éœ€è¦å¼•å…¥æ¦‚ç‡è®ºçš„çŸ¥è¯†ã€‚è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿæˆ‘ä»¬å…ˆæ¥å¯¹æ¯”ä¸€ä¸‹è¿™ä¸ª insert() çš„ä¾‹å­å’Œå‰é¢é‚£ä¸ª find() çš„ä¾‹å­ï¼Œä½ å°±ä¼šå‘ç°è¿™ä¸¤è€…æœ‰å¾ˆå¤§å·®åˆ«ã€‚ é¦–å…ˆï¼Œfind() å‡½æ•°åœ¨æç«¯æƒ…å†µä¸‹ï¼Œå¤æ‚åº¦æ‰ä¸º O(1)ã€‚ä½† insert() åœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œæ—¶é—´å¤æ‚åº¦éƒ½ä¸º O(1)ã€‚åªæœ‰ä¸ªåˆ«æƒ…å†µä¸‹ï¼Œå¤æ‚åº¦æ‰æ¯”è¾ƒé«˜ï¼Œä¸º O(n)ã€‚è¿™æ˜¯ insert()ç¬¬ä¸€ä¸ªåŒºåˆ«äº find() çš„åœ°æ–¹ã€‚ æˆ‘ä»¬å†æ¥çœ‹ç¬¬äºŒä¸ªä¸åŒçš„åœ°æ–¹ã€‚å¯¹äº insert() å‡½æ•°æ¥è¯´ï¼ŒO(1) æ—¶é—´å¤æ‚åº¦çš„æ’å…¥å’Œ O(n) æ—¶é—´å¤æ‚åº¦çš„æ’å…¥ï¼Œå‡ºç°çš„é¢‘ç‡æ˜¯éå¸¸æœ‰è§„å¾‹çš„ï¼Œè€Œä¸”æœ‰ä¸€å®šçš„å‰åæ—¶åºå…³ç³»ï¼Œä¸€èˆ¬éƒ½æ˜¯ä¸€ä¸ª O(n) æ’å…¥ä¹‹åï¼Œç´§è·Ÿç€ n-1 ä¸ª O(1) çš„æ’å…¥æ“ä½œï¼Œå¾ªç¯å¾€å¤ã€‚ æ‰€ä»¥ï¼Œé’ˆå¯¹è¿™æ ·ä¸€ç§ç‰¹æ®Šåœºæ™¯çš„å¤æ‚åº¦åˆ†æï¼Œæˆ‘ä»¬å¹¶ä¸éœ€è¦åƒä¹‹å‰è®²å¹³å‡å¤æ‚åº¦åˆ†ææ–¹æ³•é‚£æ ·ï¼Œæ‰¾å‡ºæ‰€æœ‰çš„è¾“å…¥æƒ…å†µåŠç›¸åº”çš„å‘ç”Ÿæ¦‚ç‡ï¼Œç„¶åå†è®¡ç®—åŠ æƒå¹³å‡å€¼ã€‚ é’ˆå¯¹è¿™ç§ç‰¹æ®Šçš„åœºæ™¯ï¼Œæˆ‘ä»¬å¼•å…¥äº†ä¸€ç§æ›´åŠ ç®€å•çš„åˆ†ææ–¹æ³•ï¼šæ‘Šè¿˜åˆ†ææ³•ï¼Œé€šè¿‡æ‘Šè¿˜åˆ†æå¾—åˆ°çš„æ—¶é—´å¤æ‚åº¦æˆ‘ä»¬èµ·äº†ä¸€ä¸ªåå­—ï¼Œå«å‡æ‘Šæ—¶é—´å¤æ‚åº¦ã€‚ é‚£ç©¶ç«Ÿå¦‚ä½•ä½¿ç”¨æ‘Šè¿˜åˆ†ææ³•æ¥åˆ†æç®—æ³•çš„å‡æ‘Šæ—¶é—´å¤æ‚åº¦å‘¢ï¼Ÿ æˆ‘ä»¬è¿˜æ˜¯ç»§ç»­çœ‹åœ¨æ•°ç»„ä¸­æ’å…¥æ•°æ®çš„è¿™ä¸ªä¾‹å­ã€‚æ¯ä¸€æ¬¡ O(n) çš„æ’å…¥æ“ä½œï¼Œéƒ½ä¼šè·Ÿç€ n-1 æ¬¡ O(1) çš„æ’å…¥æ“ä½œï¼Œæ‰€ä»¥æŠŠè€—æ—¶å¤šçš„é‚£æ¬¡æ“ä½œå‡æ‘Šåˆ°æ¥ä¸‹æ¥çš„ n-1 æ¬¡è€—æ—¶å°‘çš„æ“ä½œä¸Šï¼Œå‡æ‘Šä¸‹æ¥ï¼Œè¿™ä¸€ç»„è¿ç»­çš„æ“ä½œçš„å‡æ‘Šæ—¶é—´å¤æ‚åº¦å°±æ˜¯ O(1)ã€‚è¿™å°±æ˜¯å‡æ‘Šåˆ†æçš„å¤§è‡´æ€è·¯ã€‚ä½ éƒ½ç†è§£äº†å—ï¼Ÿ å‡æ‘Šæ—¶é—´å¤æ‚åº¦å’Œæ‘Šè¿˜åˆ†æåº”ç”¨åœºæ™¯æ¯”è¾ƒç‰¹æ®Šï¼Œæ‰€ä»¥æˆ‘ä»¬å¹¶ä¸ä¼šç»å¸¸ç”¨åˆ°ã€‚ä¸ºäº†æ–¹ä¾¿ä½ ç†è§£ã€è®°å¿†ï¼Œæˆ‘è¿™é‡Œç®€å•æ€»ç»“ä¸€ä¸‹å®ƒä»¬çš„åº”ç”¨åœºæ™¯ã€‚å¦‚æœä½ é‡åˆ°äº†ï¼ŒçŸ¥é“æ˜¯æ€ä¹ˆå›äº‹å„¿å°±è¡Œäº†ã€‚ å¯¹ä¸€ä¸ªæ•°æ®ç»“æ„è¿›è¡Œä¸€ç»„è¿ç»­æ“ä½œä¸­ï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹æ—¶é—´å¤æ‚åº¦éƒ½å¾ˆä½ï¼Œåªæœ‰ä¸ªåˆ«æƒ…å†µä¸‹æ—¶é—´å¤æ‚åº¦æ¯”è¾ƒé«˜ï¼Œè€Œä¸”è¿™äº›æ“ä½œä¹‹é—´å­˜åœ¨å‰åè¿è´¯çš„æ—¶åºå…³ç³»ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å°±å¯ä»¥å°†è¿™ä¸€ç»„æ“ä½œæ”¾åœ¨ä¸€å—å„¿åˆ†æï¼Œçœ‹æ˜¯å¦èƒ½å°†è¾ƒé«˜æ—¶é—´å¤æ‚åº¦é‚£æ¬¡æ“ä½œçš„è€—æ—¶ï¼Œå¹³æ‘Šåˆ°å…¶ä»–é‚£äº›æ—¶é—´å¤æ‚åº¦æ¯”è¾ƒä½çš„æ“ä½œä¸Šã€‚è€Œä¸”ï¼Œåœ¨èƒ½å¤Ÿåº”ç”¨å‡æ‘Šæ—¶é—´å¤æ‚åº¦åˆ†æçš„åœºåˆï¼Œä¸€èˆ¬å‡æ‘Šæ—¶é—´å¤æ‚åº¦å°±ç­‰äºæœ€å¥½æƒ…å†µæ—¶é—´å¤æ‚åº¦ã€‚ å°½ç®¡å¾ˆå¤šæ•°æ®ç»“æ„å’Œç®—æ³•ä¹¦ç±éƒ½èŠ±äº†å¾ˆå¤§åŠ›æ°”æ¥åŒºåˆ†å¹³å‡æ—¶é—´å¤æ‚åº¦å’Œå‡æ‘Šæ—¶é—´å¤æ‚åº¦ï¼Œä½†å…¶å®æˆ‘ä¸ªäººè®¤ä¸ºï¼Œå‡æ‘Šæ—¶é—´å¤æ‚åº¦å°±æ˜¯ä¸€ç§ç‰¹æ®Šçš„å¹³å‡æ—¶é—´å¤æ‚åº¦ï¼Œæˆ‘ä»¬æ²¡å¿…è¦èŠ±å¤ªå¤šç²¾åŠ›å»åŒºåˆ†å®ƒä»¬ã€‚ä½ æœ€åº”è¯¥æŒæ¡çš„æ˜¯å®ƒçš„åˆ†ææ–¹æ³•ï¼Œæ‘Šè¿˜åˆ†æã€‚è‡³äºåˆ†æå‡ºæ¥çš„ç»“æœæ˜¯å«å¹³å‡è¿˜æ˜¯å«å‡æ‘Šï¼Œè¿™åªæ˜¯ä¸ªè¯´æ³•ï¼Œå¹¶ä¸é‡è¦ã€‚ ç©ºé—´å¤æ‚åº¦åˆ†æ å‰é¢æˆ‘è®²è¿‡ï¼Œæ—¶é—´å¤æ‚åº¦çš„å…¨ç§°æ˜¯æ¸è¿›æ—¶é—´å¤æ‚åº¦ï¼Œè¡¨ç¤ºç®—æ³•çš„æ‰§è¡Œæ—¶é—´ä¸æ•°æ®è§„æ¨¡ä¹‹é—´çš„å¢é•¿å…³ç³»ã€‚ç±»æ¯”ä¸€ä¸‹ï¼Œç©ºé—´å¤æ‚åº¦å…¨ç§°å°±æ˜¯æ¸è¿›ç©ºé—´å¤æ‚åº¦ï¼ˆasymptotic space complexityï¼‰ï¼Œè¡¨ç¤ºç®—æ³•çš„å­˜å‚¨ç©ºé—´ä¸æ•°æ®è§„æ¨¡ä¹‹é—´çš„å¢é•¿å…³ç³»ã€‚çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š void print ( int n ) { int i = 0 ; int [] a = new int [ n ]; for ( i ; i < n ; ++ i ) { a [ i ] = i * i ; } for ( i = n - 1 ; i >= 0 ; -- i ) { print out a [ i ] } } è·Ÿæ—¶é—´å¤æ‚åº¦åˆ†æä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œç¬¬ 2 è¡Œä»£ç ä¸­ï¼Œæˆ‘ä»¬ç”³è¯·äº†ä¸€ä¸ªç©ºé—´å­˜å‚¨å˜é‡ iï¼Œä½†æ˜¯å®ƒæ˜¯å¸¸é‡é˜¶çš„ï¼Œè·Ÿæ•°æ®è§„æ¨¡ n æ²¡æœ‰å…³ç³»ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å¿½ç•¥ã€‚ç¬¬ 3 è¡Œç”³è¯·äº†ä¸€ä¸ªå¤§å°ä¸º n çš„ int ç±»å‹æ•°ç»„ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œå‰©ä¸‹çš„ä»£ç éƒ½æ²¡æœ‰å ç”¨æ›´å¤šçš„ç©ºé—´ï¼Œæ‰€ä»¥æ•´æ®µä»£ç çš„ç©ºé—´å¤æ‚åº¦å°±æ˜¯ O(n)ã€‚ æˆ‘ä»¬å¸¸è§çš„ç©ºé—´å¤æ‚åº¦å°±æ˜¯ O(1)ã€O(n)ã€O(n2)ï¼Œåƒ O(logn)ã€O(nlogn) è¿™æ ·çš„å¯¹æ•°é˜¶å¤æ‚åº¦å¹³æ—¶éƒ½ç”¨ä¸åˆ°ã€‚è€Œä¸”ï¼Œç©ºé—´å¤æ‚åº¦åˆ†ææ¯”æ—¶é—´å¤æ‚åº¦åˆ†æè¦ç®€å•å¾ˆå¤šã€‚æ‰€ä»¥ï¼Œå¯¹äºç©ºé—´å¤æ‚åº¦ï¼ŒæŒæ¡ä»¥ä¸Šè¿°çš„è¿™äº›å†…å®¹å·²ç»è¶³å¤Ÿäº†ã€‚ å†…å®¹å°ç»“ ä»€ä¹ˆæ˜¯å¤æ‚åº¦åˆ†æï¼Ÿ æ•°æ®ç»“æ„å’Œç®—æ³•è§£å†³æ˜¯\"å¦‚ä½•è®©è®¡ç®—æœºæ›´å¿«æ—¶é—´ã€æ›´çœç©ºé—´çš„è§£å†³é—®é¢˜\"ã€‚ å› æ­¤éœ€ä»æ‰§è¡Œæ—¶é—´å’Œå ç”¨ç©ºé—´ä¸¤ä¸ªç»´åº¦æ¥è¯„ä¼°æ•°æ®ç»“æ„å’Œç®—æ³•çš„æ€§èƒ½ã€‚ åˆ†åˆ«ç”¨æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦ä¸¤ä¸ªæ¦‚å¿µæ¥æè¿°æ€§èƒ½é—®é¢˜ï¼ŒäºŒè€…ç»Ÿç§°ä¸ºå¤æ‚åº¦ã€‚ å¤æ‚åº¦æè¿°çš„æ˜¯ç®—æ³•æ‰§è¡Œæ—¶é—´ï¼ˆæˆ–å ç”¨ç©ºé—´ï¼‰ä¸æ•°æ®è§„æ¨¡çš„å¢é•¿å…³ç³»ã€‚ ä¸ºä»€ä¹ˆè¦è¿›è¡Œå¤æ‚åº¦åˆ†æï¼Ÿ å’Œæ€§èƒ½æµ‹è¯•ç›¸æ¯”ï¼Œå¤æ‚åº¦åˆ†ææœ‰ä¸ä¾èµ–æ‰§è¡Œç¯å¢ƒã€æˆæœ¬ä½ã€æ•ˆç‡é«˜ã€æ˜“æ“ä½œã€æŒ‡å¯¼æ€§å¼ºçš„ç‰¹ç‚¹ã€‚ æŒæ¡å¤æ‚åº¦åˆ†æï¼Œå°†èƒ½ç¼–å†™å‡ºæ€§èƒ½æ›´ä¼˜çš„ä»£ç ï¼Œæœ‰åˆ©äºé™ä½ç³»ç»Ÿå¼€å‘å’Œç»´æŠ¤æˆæœ¬ã€‚ å¦‚ä½•è¿›è¡Œå¤æ‚åº¦åˆ†æï¼Ÿ å¤§Oè¡¨ç¤ºæ³• ç®—æ³•çš„æ‰§è¡Œæ—¶é—´ä¸æ¯è¡Œä»£ç çš„æ‰§è¡Œæ¬¡æ•°æˆæ­£æ¯”ï¼Œç”¨T(n) = O(f(n))è¡¨ç¤ºï¼Œå…¶ä¸­T(n)è¡¨ç¤ºç®—æ³•æ‰§è¡Œæ€»æ—¶é—´ï¼Œf(n)è¡¨ç¤ºæ¯è¡Œä»£ç æ‰§è¡Œæ€»æ¬¡æ•°ï¼Œè€Œnå¾€å¾€è¡¨ç¤ºæ•°æ®çš„è§„æ¨¡ã€‚ä»¥æ—¶é—´å¤æ‚åº¦ä¸ºä¾‹ï¼Œç”±äºæ—¶é—´å¤æ‚åº¦æè¿°çš„æ˜¯ç®—æ³•æ‰§è¡Œæ—¶é—´ä¸æ•°æ®è§„æ¨¡çš„å¢é•¿å˜åŒ–è¶‹åŠ¿ï¼Œæ‰€ä»¥å¸¸é‡é˜¶ã€ä½é˜¶ä»¥åŠç³»æ•°å®é™…ä¸Šå¯¹è¿™ç§å¢é•¿è¶‹åŠ¿ä¸äº§å†³å®šæ€§å½±å“ï¼Œæ‰€ä»¥åœ¨åšæ—¶é—´å¤æ‚åº¦åˆ†ææ—¶å¿½ç•¥è¿™äº›é¡¹ã€‚ å¤æ‚åº¦åˆ†ææ³•åˆ™ 1ï¼‰å•æ®µä»£ç çœ‹é«˜é¢‘ï¼šæ¯”å¦‚å¾ªç¯ã€‚ 2ï¼‰å¤šæ®µä»£ç å–æœ€å¤§ï¼šæ¯”å¦‚ä¸€æ®µä»£ç ä¸­æœ‰å•å¾ªç¯å’Œå¤šé‡å¾ªç¯ï¼Œé‚£ä¹ˆå–å¤šé‡å¾ªç¯çš„å¤æ‚åº¦ã€‚ 3ï¼‰åµŒå¥—ä»£ç æ±‚ä¹˜ç§¯ï¼šæ¯”å¦‚é€’å½’ã€å¤šé‡å¾ªç¯ç­‰ 4ï¼‰å¤šä¸ªè§„æ¨¡æ±‚åŠ æ³•ï¼šæ¯”å¦‚æ–¹æ³•æœ‰ä¸¤ä¸ªå‚æ•°æ§åˆ¶ä¸¤ä¸ªå¾ªç¯çš„æ¬¡æ•°ï¼Œé‚£ä¹ˆè¿™æ—¶å°±å–äºŒè€…å¤æ‚åº¦ç›¸åŠ ã€‚ ä¸ºäº†è¡¨ç¤ºä»£ç åœ¨ä¸åŒæƒ…å†µä¸‹çš„ä¸åŒæ—¶é—´å¤æ‚åº¦ï¼Œå¼•å…¥æœ€å¥½æƒ…å†µæ—¶é—´å¤æ‚åº¦ã€æœ€åæƒ…å†µæ—¶é—´å¤æ‚åº¦ã€å¹³å‡æƒ…å†µæ—¶é—´å¤æ‚åº¦ã€å‡æ‘Šæ—¶é—´å¤æ‚åº¦ã€‚åœ¨å¼•å…¥è¿™å‡ ä¸ªæ¦‚å¿µä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥æ›´åŠ å…¨é¢åœ°è¡¨ç¤ºä¸€æ®µä»£ç çš„æ‰§è¡Œæ•ˆç‡ã€‚è€Œä¸”ï¼Œè¿™å‡ ä¸ªæ¦‚å¿µç†è§£èµ·æ¥éƒ½ä¸éš¾ã€‚æœ€å¥½ã€æœ€åæƒ…å†µä¸‹çš„æ—¶é—´å¤æ‚åº¦åˆ†æèµ·æ¥æ¯”è¾ƒç®€å•ï¼Œä½†å¹³å‡ã€å‡æ‘Šä¸¤ä¸ªå¤æ‚åº¦åˆ†æç›¸å¯¹æ¯”è¾ƒå¤æ‚ã€‚å¦‚æœä½ è§‰å¾—ç†è§£å¾—è¿˜ä¸æ˜¯å¾ˆæ·±å…¥ï¼Œä¸ç”¨æ‹…å¿ƒï¼Œåœ¨åç»­å…·ä½“çš„æ•°æ®ç»“æ„å’Œç®—æ³•å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ…¢æ…¢å®è·µï¼ å¸¸ç”¨çš„å¤æ‚åº¦çº§åˆ« ï¼Ÿ å¤šé¡¹å¼é˜¶ï¼šéšç€æ•°æ®è§„æ¨¡çš„å¢é•¿ï¼Œç®—æ³•çš„æ‰§è¡Œæ—¶é—´å’Œç©ºé—´å ç”¨ï¼ŒæŒ‰ç…§å¤šé¡¹å¼çš„æ¯”ä¾‹å¢é•¿ã€‚åŒ…æ‹¬ï¼Œ $$ O(1)ï¼ˆå¸¸æ•°é˜¶ï¼‰ã€O(logn)ï¼ˆå¯¹æ•°é˜¶ï¼‰ã€O(n)ï¼ˆçº¿æ€§é˜¶ï¼‰ã€O(nlogn)ï¼ˆçº¿æ€§å¯¹æ•°é˜¶ï¼‰ã€O(n&#94;2)ï¼ˆå¹³æ–¹é˜¶ï¼‰ã€O(n&#94;3)ï¼ˆç«‹æ–¹é˜¶ï¼‰ $$ éå¤šé¡¹å¼é˜¶ï¼šéšç€æ•°æ®è§„æ¨¡çš„å¢é•¿ï¼Œç®—æ³•çš„æ‰§è¡Œæ—¶é—´å’Œç©ºé—´å ç”¨æš´å¢ï¼Œè¿™ç±»ç®—æ³•æ€§èƒ½æå·®ã€‚åŒ…æ‹¬ï¼Œ $$ O(2&#94;n)ï¼ˆæŒ‡æ•°é˜¶ï¼‰ã€O(n!)ï¼ˆé˜¶ä¹˜é˜¶ï¼‰ $$ æ€§èƒ½æµ‹è¯•å’Œå¤æ‚åº¦åˆ†æçš„å…³ç³»ï¼Ÿ æœ‰äººè¯´ï¼Œæˆ‘ä»¬é¡¹ç›®ä¹‹å‰éƒ½ä¼šè¿›è¡Œæ€§èƒ½æµ‹è¯•ï¼Œå†åšä»£ç çš„æ—¶é—´å¤æ‚åº¦ã€ç©ºé—´å¤æ‚åº¦åˆ†æï¼Œæ˜¯ä¸æ˜¯å¤šæ­¤ä¸€ä¸¾å‘¢ï¼Ÿè€Œä¸”ï¼Œæ¯æ®µä»£ç éƒ½åˆ†æä¸€ä¸‹æ—¶é—´å¤æ‚åº¦ã€ç©ºé—´å¤æ‚åº¦ï¼Œæ˜¯ä¸æ˜¯å¾ˆæµªè´¹æ—¶é—´å‘¢ï¼Ÿäº‹å®ä¸Šï¼Œæ¸è¿›æ—¶é—´ï¼Œç©ºé—´å¤æ‚åº¦åˆ†æä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªå¾ˆå¥½çš„ç†è®ºåˆ†æçš„æ–¹å‘ï¼Œå¹¶ä¸”å®ƒæ˜¯å®¿ä¸»å¹³å°æ— å…³çš„ï¼Œèƒ½å¤Ÿè®©æˆ‘ä»¬å¯¹æˆ‘ä»¬çš„ç¨‹åºæˆ–ç®—æ³•æœ‰ä¸€ä¸ªå¤§è‡´çš„è®¤è¯†ï¼Œè®©æˆ‘ä»¬çŸ¥é“ï¼Œæ¯”å¦‚åœ¨æœ€åçš„æƒ…å†µä¸‹ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡å¦‚ä½•ï¼ŒåŒæ—¶ä¹Ÿä¸ºæˆ‘ä»¬äº¤æµæä¾›äº†ä¸€ä¸ªä¸é”™çš„æ¡¥æ¢ï¼Œæˆ‘ä»¬å¯ä»¥è¯´ï¼Œç®—æ³•1çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(n)ï¼Œç®—æ³•2çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(logN)ï¼Œè¿™æ ·æˆ‘ä»¬ç«‹åˆ»å°±å¯¹ä¸åŒçš„ç®—æ³•æœ‰äº†ä¸€ä¸ª\"æ•ˆç‡\"ä¸Šçš„æ„Ÿæ€§è®¤è¯†ã€‚ å½“ç„¶ï¼Œæ¸è¿›å¼æ—¶é—´ï¼Œç©ºé—´å¤æ‚åº¦åˆ†æåªæ˜¯ä¸€ä¸ªç†è®ºæ¨¡å‹ï¼Œåªèƒ½æä¾›ç»™ç²—ç•¥çš„ä¼°è®¡åˆ†æï¼Œæˆ‘ä»¬ä¸èƒ½ç›´æ¥æ–­å®šå°±è§‰å¾—O(logN)çš„ç®—æ³•ä¸€å®šä¼˜äºO(n), é’ˆå¯¹ä¸åŒçš„å®¿ä¸»ç¯å¢ƒï¼Œä¸åŒçš„æ•°æ®é›†ï¼Œä¸åŒçš„æ•°æ®é‡çš„å¤§å°ï¼Œåœ¨å®é™…åº”ç”¨ä¸Šé¢å¯èƒ½çœŸæ­£çš„æ€§èƒ½ä¼šä¸åŒ.é’ˆå¯¹ä¸åŒçš„å®é™…æƒ…å†µï¼Œè¿›è€Œè¿›è¡Œä¸€å®šçš„æ€§èƒ½åŸºå‡†æµ‹è¯•ä¹Ÿæ˜¯å¾ˆæœ‰å¿…è¦çš„ï¼Œæ¯”å¦‚åœ¨ç»Ÿä¸€åœ¨æŸä¸€æ‰¹å‹å·æ‰‹æœºä¸Š(åŒæ ·çš„ç¡¬ä»¶ï¼Œç³»ç»Ÿç­‰ç­‰)è¿›è¡Œæ¨ªå‘åŸºå‡†æµ‹è¯•ï¼Œè¿›è€Œé€‰æ‹©é€‚åˆç‰¹å®šåº”ç”¨åœºæ™¯ä¸‹çš„æœ€ä¼˜ç®—æ³•ã€‚ ç»¼ä¸Šæ‰€è¿°ï¼Œæ¸è¿›å¼æ—¶é—´ï¼Œç©ºé—´å¤æ‚åº¦åˆ†æä¸æ€§èƒ½åŸºå‡†æµ‹è¯•å¹¶ä¸å†²çªï¼Œè€Œæ˜¯ç›¸è¾…ç›¸æˆçš„ï¼Œä½†æ˜¯ä¸€ä¸ªä½é˜¶çš„æ—¶é—´å¤æ‚åº¦ç¨‹åºæœ‰æå¤§çš„å¯èƒ½æ€§ä¼šä¼˜äºä¸€ä¸ªé«˜é˜¶çš„æ—¶é—´å¤æ‚åº¦ç¨‹åºï¼Œæ‰€ä»¥åœ¨å®é™…ç¼–ç¨‹ä¸­ï¼Œæ—¶åˆ»å…³å¿ƒç†è®ºæ—¶é—´ï¼Œç©ºé—´åº¦æ¨¡å‹æ˜¯æœ‰åŠ©äºäº§å‡ºæ•ˆç‡é«˜çš„ç¨‹åºçš„ï¼ŒåŒæ—¶ï¼Œå› ä¸ºæ¸è¿›å¼æ—¶é—´ï¼Œç©ºé—´å¤æ‚åº¦åˆ†æåªæ˜¯æä¾›ä¸€ä¸ªç²—ç•¥çš„åˆ†ææ¨¡å‹ï¼Œå› æ­¤ä¹Ÿä¸ä¼šæµªè´¹å¤ªå¤šæ—¶é—´ï¼Œé‡ç‚¹åœ¨äºåœ¨ç¼–ç¨‹æ—¶ï¼Œè¦å…·æœ‰è¿™ç§å¤æ‚åº¦åˆ†æçš„æ€ç»´ã€‚ å‘æ•£æ€è€ƒ ï¼š ç®—æ³•åˆ†æä¸­ï¼Œé€šå¸¸åˆ†ææœ€åæƒ…å†µè¿˜æ˜¯å¹³å‡æƒ…å†µï¼Ÿ","tags":"Algorithms","url":"https://jiang-hao.com/articles/2020/algorithms-data-structure-n-algorithm-1.html","loc":"https://jiang-hao.com/articles/2020/algorithms-data-structure-n-algorithm-1.html"},{"title":"VxLANåè®®è¯¦è§£","text":"VxLANç®€ä»‹ èƒŒæ™¯ ä»»ä½•æŠ€æœ¯çš„äº§ç”Ÿï¼Œéƒ½æœ‰å…¶ç‰¹å®šçš„æ—¶ä»£èƒŒæ™¯ä¸å®é™…éœ€æ±‚ï¼ŒVXLANæ­£æ˜¯ä¸ºäº†è§£å†³äº‘è®¡ç®—æ—¶ä»£è™šæ‹ŸåŒ–ä¸­çš„ä¸€ç³»åˆ—é—®é¢˜è€Œäº§ç”Ÿçš„ä¸€é¡¹æŠ€æœ¯ã€‚é‚£ä¹ˆæˆ‘ä»¬å…ˆçœ‹çœ‹ VXLAN åˆ°åº•è¦è§£å†³å“ªäº›é—®é¢˜ã€‚ è™šæ‹Ÿæœºè§„æ¨¡å—ç½‘ç»œè®¾å¤‡è¡¨é¡¹è§„æ ¼çš„é™åˆ¶ å¯¹äºåŒç½‘æ®µä¸»æœºçš„é€šä¿¡è€Œè¨€ï¼ŒæŠ¥æ–‡é€šè¿‡æŸ¥è¯¢MACè¡¨è¿›è¡ŒäºŒå±‚è½¬å‘ã€‚æœåŠ¡å™¨è™šæ‹ŸåŒ–åï¼Œæ•°æ®ä¸­å¿ƒä¸­VMçš„æ•°é‡æ¯”åŸæœ‰çš„ç‰©ç†æœºå‘ç”Ÿäº†æ•°é‡çº§çš„å¢é•¿ï¼Œä¼´éšè€Œæ¥çš„ä¾¿æ˜¯è™šæ‹Ÿæœºç½‘å¡MACåœ°å€æ•°é‡çš„ç©ºå‰å¢åŠ ã€‚ä¸€èˆ¬è€Œè¨€ï¼Œæ¥å…¥ä¾§äºŒå±‚è®¾å¤‡çš„è§„æ ¼è¾ƒå°ï¼ŒMACåœ°å€è¡¨é¡¹è§„æ¨¡å·²ç»æ— æ³•æ»¡è¶³å¿«é€Ÿå¢é•¿çš„VMæ•°é‡ã€‚ ä¼ ç»Ÿç½‘ç»œçš„éš”ç¦»èƒ½åŠ›æœ‰é™ è™šæ‹ŸåŒ–ï¼ˆè™šæ‹Ÿæœºå’Œå®¹å™¨ï¼‰çš„å…´èµ·ä½¿å¾—ä¸€ä¸ªæ•°æ®ä¸­å¿ƒä¼šæœ‰åŠ¨è¾„ä¸Šä¸‡çš„æœºå™¨éœ€è¦é€šä¿¡ï¼Œè€Œä¼ ç»Ÿçš„ VLAN æŠ€æœ¯åœ¨æ ‡å‡†å®šä¹‰ä¸­åªæœ‰12æ¯”ç‰¹ï¼Œä¹Ÿå°±åªèƒ½æ”¯æŒ 4096 ä¸ªç½‘ç»œä¸Šé™ï¼Œå·²ç»æ˜¾ç„¶æ»¡è¶³ä¸äº†ä¸æ–­æ‰©å±•çš„æ•°æ®ä¸­å¿ƒè§„æ¨¡ã€‚ è™šæ‹Ÿæœºè¿ç§»èŒƒå›´å—é™ è™šæ‹Ÿæœºè¿ç§»ï¼Œé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯å°†è™šæ‹Ÿæœºä»ä¸€ä¸ªç‰©ç†æœºè¿ç§»åˆ°å¦ä¸€ä¸ªç‰©ç†æœºï¼Œä½†æ˜¯è¦æ±‚åœ¨è¿ç§»è¿‡ç¨‹ä¸­ä¸šåŠ¡ä¸èƒ½ä¸­æ–­ã€‚è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œéœ€è¦ä¿è¯è™šæ‹Ÿæœºè¿ç§»å‰åï¼Œå…¶IPåœ°å€ã€MACåœ°å€ç­‰å‚æ•°ç»´æŒä¸å˜ã€‚è¿™å°±å†³å®šäº†ï¼Œè™šæ‹Ÿæœºè¿ç§»å¿…é¡»å‘ç”Ÿåœ¨ä¸€ä¸ªäºŒå±‚åŸŸä¸­ã€‚è€Œä¼ ç»Ÿæ•°æ®ä¸­å¿ƒç½‘ç»œçš„äºŒå±‚åŸŸï¼Œå°†è™šæ‹Ÿæœºè¿ç§»é™åˆ¶åœ¨äº†ä¸€ä¸ªè¾ƒå°çš„å±€éƒ¨èŒƒå›´å†…ã€‚æ­¤å¤–ï¼Œè§£å†³è¿™ä¸ªé—®é¢˜åŒæ—¶è¿˜éœ€ä¿è¯äºŒå±‚çš„å¹¿æ’­åŸŸä¸ä¼šè¿‡åˆ†æ‰©å¤§ï¼Œè¿™ä¹Ÿæ˜¯äº‘è®¡ç®—ç½‘ç»œçš„è¦æ±‚ã€‚ ä¼ ç»Ÿ\"äºŒå±‚+ä¸‰å±‚\"çš„ç½‘ç»œåœ¨åº”å¯¹è¿™äº›è¦æ±‚æ—¶å˜å¾—åŠ›ä¸ä»å¿ƒï¼Œè™½ç„¶é€šè¿‡å¾ˆå¤šæ”¹è¿›å‹çš„æŠ€æœ¯æ¯”å¦‚å †å ã€SVFã€TRILLç­‰å¯ä»¥æ„å»ºç‰©ç†ä¸Šçš„å¤§äºŒå±‚ç½‘ç»œï¼Œå¯ä»¥å°†è™šæ‹Ÿæœºè¿ç§»çš„èŒƒå›´æ‰©å¤§ã€‚ä½†æ˜¯ï¼Œæ„å»ºç‰©ç†ä¸Šçš„å¤§äºŒå±‚ï¼Œéš¾å…éœ€è¦å¯¹åŸæ¥çš„ç½‘ç»œåšå¤§çš„æ”¹åŠ¨ï¼Œå¹¶ä¸”å¤§äºŒå±‚ç½‘ç»œçš„èŒƒå›´ä¾ç„¶ä¼šå—åˆ°ç§ç§æ¡ä»¶çš„é™åˆ¶ã€‚ ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œæœ‰å¾ˆå¤šæ–¹æ¡ˆè¢«æå‡ºæ¥ï¼ŒVxLANå°±æ˜¯å…¶ä¸­ä¹‹ä¸€ã€‚VxLAN æ˜¯ VMwareã€Cisco ç­‰ä¸€ä¼—å¤§å‹ä¼ä¸šå…±åŒæ¨å‡ºçš„ï¼Œç›®å‰æ ‡å‡†æ–‡æ¡£åœ¨ RFC7348 ã€‚ å®šä¹‰ åœ¨ä»‹ç»å®ŒVxLANè¦è§£å†³çš„é—®é¢˜ä¹Ÿå°±æ˜¯æŠ€æœ¯èƒŒæ™¯ä¹‹åï¼Œæ¥ä¸‹æ¥æ­£å¼é˜è¿°ä¸€ä¸‹VxLANçš„å®šä¹‰ï¼Œä¹Ÿå°±æ˜¯å®ƒåˆ°åº•æ˜¯ä»€ä¹ˆã€‚ VXLAN å…¨ç§°æ˜¯ Virtual eXtensible Local Area Network ï¼Œè™šæ‹Ÿå¯æ‰©å±•çš„å±€åŸŸç½‘ã€‚å®ƒæ˜¯ä¸€ç§ Overlay æŠ€æœ¯ï¼Œé‡‡ç”¨L2 over L4ï¼ˆMAC-in-UDPï¼‰å°è£…æ–¹å¼ï¼Œæ˜¯NVO3ï¼ˆNetwork Virtualization over Layer 3ï¼‰ä¸­çš„ä¸€ç§ç½‘ç»œè™šæ‹ŸåŒ–æŠ€æœ¯ï¼Œå°†äºŒå±‚æŠ¥æ–‡ç”¨ä¸‰å±‚åè®®è¿›è¡Œå°è£…ï¼Œå¯å®ç°è™šæ‹Ÿçš„äºŒå±‚ç½‘ç»œåœ¨ä¸‰å±‚èŒƒå›´å†…è¿›è¡Œæ‰©å±•ï¼ŒåŒæ—¶æ»¡è¶³æ•°æ®ä¸­å¿ƒå¤§äºŒå±‚è™šæ‹Ÿè¿ç§»å’Œå¤šç§Ÿæˆ·çš„éœ€æ±‚ã€‚RFC7348ä¸Šçš„ä»‹ç»æ˜¯è¿™æ ·çš„ï¼š A framework for overlaying virtualized layer 2 networks over lay 3 networks. æ„ä¹‰ é’ˆå¯¹å¤§äºŒå±‚ç½‘ç»œï¼ŒVxLANæŠ€æœ¯çš„å‡ºç°å¾ˆå¥½çš„è§£å†³äº†äº‘è®¡ç®—æ—¶ä»£èƒŒæ™¯ä¸‹æ•°æ®ä¸­å¿ƒåœ¨ç‰©ç†ç½‘ç»œåŸºç¡€è®¾æ–½ä¸Šå®æ–½æœåŠ¡å™¨è™šæ‹ŸåŒ–çš„éš”ç¦»å’Œå¯æ‰©å±•æ€§é—®é¢˜ï¼š é€šè¿‡24æ¯”ç‰¹çš„VNIå¯ä»¥æ”¯æŒå¤šè¾¾16Mçš„VXLANæ®µçš„ç½‘ç»œéš”ç¦»ï¼Œå¯¹ç”¨æˆ·è¿›è¡Œéš”ç¦»å’Œæ ‡è¯†ä¸å†å—åˆ°é™åˆ¶ï¼Œå¯æ»¡è¶³æµ·é‡ç§Ÿæˆ·ã€‚ é™¤VXLANç½‘ç»œè¾¹ç¼˜è®¾å¤‡ï¼Œç½‘ç»œä¸­çš„å…¶ä»–è®¾å¤‡ä¸éœ€è¦è¯†åˆ«è™šæ‹Ÿæœºçš„MACåœ°å€ï¼Œå‡è½»äº†è®¾å¤‡çš„MACåœ°å€å­¦ä¹ å‹åŠ›ï¼Œæå‡äº†è®¾å¤‡æ€§èƒ½ã€‚ é€šè¿‡é‡‡ç”¨MAC in UDPå°è£…æ¥å»¶ä¼¸äºŒå±‚ç½‘ç»œï¼Œå®ç°äº†ç‰©ç†ç½‘ç»œå’Œè™šæ‹Ÿç½‘ç»œè§£è€¦ï¼Œç§Ÿæˆ·å¯ä»¥è§„åˆ’è‡ªå·±çš„è™šæ‹Ÿç½‘ç»œï¼Œä¸éœ€è¦è€ƒè™‘ç‰©ç†ç½‘ç»œIPåœ°å€å’Œå¹¿æ’­åŸŸçš„é™åˆ¶ï¼Œå¤§å¤§é™ä½äº†ç½‘ç»œç®¡ç†çš„éš¾åº¦ã€‚ VxLANç»„ç½‘æ¨¡å‹ VxLANä¸»è¦ç”¨äºæ•°æ®ä¸­å¿ƒç½‘ç»œã€‚VxLANæŠ€æœ¯å°†å·²æœ‰çš„ä¸‰å±‚ç‰©ç†ç½‘ç»œä½œä¸ºUnderlayç½‘ç»œï¼Œåœ¨å…¶ä¸Šæ„å»ºå‡ºè™šæ‹Ÿçš„äºŒå±‚ç½‘ç»œï¼Œå³Overlayç½‘ç»œã€‚Overlayç½‘ç»œé€šè¿‡Mac-in-UDPå°è£…æŠ€æœ¯ã€åˆ©ç”¨Underlayç½‘ç»œæä¾›çš„ä¸‰å±‚è½¬å‘è·¯å¾„ï¼Œå®ç°ç§Ÿæˆ·äºŒå±‚æŠ¥æ–‡è·¨è¶Šä¸‰å±‚ç½‘ç»œåœ¨ä¸åŒçš„ç«™ç‚¹é—´ä¼ é€’ã€‚å¯¹äºç§Ÿæˆ·æ¥è¯´ï¼ŒUnderlayç½‘ç»œæ˜¯é€æ˜çš„ï¼ŒåŒä¸€ç§Ÿæˆ·çš„ä¸åŒç«™ç‚¹å°±åƒæ˜¯å·¥ä½œåœ¨ä¸€ä¸ªå±€åŸŸç½‘ä¸­ã€‚åŒæ—¶ï¼Œåœ¨åŒä¸€ä¸ªç‰©ç†ç½‘ç»œä¸Šå¯ä»¥æ„å»ºå¤šä¸ªVxLANç½‘ç»œï¼Œæ¯ä¸ªVxLANç½‘ç»œç”±å”¯ä¸€çš„VNIæ ‡è¯†ï¼Œä¸åŒVxLANä¹‹é—´äº’ä¸å½±å“ï¼Œä»è€Œå®ç°ç§Ÿæˆ·ç½‘ç»œä¹‹é—´çš„éš”ç¦»ã€‚ å¦‚ä¸Šå›¾æ‰€ç¤ºï¼ŒVxLANçš„å…¸å‹ç½‘ç»œæ¨¡å‹ä¸­ä¸»è¦åŒ…å«ä»¥ä¸‹å‡ ä¸ªåŸºæœ¬å…ƒç´ ï¼š VM (Virtual Machine): è™šæ‹Ÿæœºã€‚åœ¨ä¸€å°æœåŠ¡å™¨ä¸Šå¯ä»¥åˆ›å»ºå¤šå°è™šæ‹Ÿæœºï¼Œä¸åŒçš„è™šæ‹Ÿæœºå¯ä»¥å±äºä¸åŒçš„ VXLANã€‚å¤„äºç›¸åŒVxLANçš„è™šæ‹Ÿæœºå¤„äºåŒä¸€ä¸ªé€»è¾‘äºŒå±‚ç½‘ç»œï¼Œå½¼æ­¤ä¹‹é—´äºŒå±‚äº’é€šï¼›å±äºä¸åŒVxLANçš„è™šæ‹Ÿæœºä¹‹é—´äºŒå±‚éš”ç¦»ã€‚ VxLAN Tunnel: VxLANéš§é“ã€‚\"éš§é“\"æ˜¯ä¸€ä¸ªé€»è¾‘ä¸Šçš„æ¦‚å¿µï¼Œå®ƒå¹¶ä¸æ–°é²œï¼Œæ¯”å¦‚å¤§å®¶ç†Ÿæ‚‰çš„GREã€‚è¯´ç™½äº†å°±æ˜¯å°†åŸå§‹æŠ¥æ–‡\"å˜èº«\"ä¸‹ï¼ŒåŠ ä»¥\"åŒ…è£…\"ï¼Œå¥½è®©å®ƒå¯ä»¥åœ¨æ‰¿è½½ç½‘ç»œï¼ˆæ¯”å¦‚IPç½‘ç»œï¼‰ä¸Šä¼ è¾“ã€‚ä»ä¸»æœºçš„è§’åº¦çœ‹ï¼Œå°±å¥½åƒåŸå§‹æŠ¥æ–‡çš„èµ·ç‚¹å’Œç»ˆç‚¹ä¹‹é—´ï¼Œæœ‰ä¸€æ¡ç›´é€šçš„é“¾è·¯ä¸€æ ·ã€‚è€Œè¿™ä¸ªçœ‹èµ·æ¥ç›´é€šçš„é“¾è·¯ï¼Œå°±æ˜¯\"éš§é“\"ã€‚é¡¾åæ€ä¹‰ï¼Œ\"VXLANéš§é“\"ä¾¿æ˜¯ç”¨æ¥ä¼ è¾“ç»è¿‡VXLANå°è£…çš„æŠ¥æ–‡çš„ï¼Œå®ƒæ˜¯å»ºç«‹åœ¨ä¸¤ä¸ªVTEPä¹‹é—´çš„ä¸€æ¡è™šæ‹Ÿé€šé“ã€‚Vxlan é€šä¿¡åŒæ–¹ï¼ˆå›¾ä¸­çš„è™šæ‹Ÿæœºï¼‰è®¤ä¸ºè‡ªå·±æ˜¯é€šè¿‡äºŒå±‚VSIç›´æ¥é€šä¿¡ï¼Œå¹¶ä¸çŸ¥é“åº•å±‚ç½‘ç»œçš„å­˜åœ¨ã€‚ VTEP (VxLAN Tunnel Endpoints): VXLANéš§é“ç«¯ç‚¹ã€‚VXLANç½‘ç»œçš„è¾¹ç¼˜è®¾å¤‡ï¼Œæ˜¯VXLANéš§é“çš„èµ·ç‚¹å’Œç»ˆç‚¹ï¼ŒVXLANæŠ¥æ–‡çš„å°è£…å’Œè§£å°è£…å¤„ç†å‡åœ¨è¿™ä¸Šé¢è¿›è¡Œã€‚VTEPå¯ä»¥ç†è§£ä¸ºOverlayç½‘ç»œç«‹è¶³äºUnderlayç‰©ç†ç½‘ç»œä¹‹ä¸Šçš„æ”¯è„šç‚¹ï¼Œåˆ†é…æœ‰ç‰©ç†ç½‘ç»œçš„IPåœ°å€ï¼Œè¯¥åœ°å€ä¸è™šæ‹Ÿç½‘ç»œæ— å…³ã€‚VXLANæŠ¥æ–‡ä¸­æºIPåœ°å€ä¸ºéš§é“ä¸€ç«¯èŠ‚ç‚¹çš„VTEPåœ°å€ï¼Œç›®çš„IPåœ°å€ä¸ºéš§é“å¦ä¸€ç«¯èŠ‚ç‚¹çš„VTEPåœ°å€ï¼Œä¸€å¯¹VTEPåœ°å€å°±å¯¹åº”ç€ä¸€ä¸ªVXLANéš§é“ã€‚VTEP å¯ä»¥æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ç½‘ç»œè®¾å¤‡ï¼ˆæ¯”å¦‚äº¤æ¢æœºï¼‰ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€å°ç‰©ç†æœåŠ¡å™¨ï¼ˆæ¯”å¦‚è™šæ‹Ÿæœºæ‰€åœ¨çš„å®¿ä¸»æœºï¼‰ã€‚ VNI (VXLAN Network Identifier): VXLAN ç½‘ç»œæ ‡è¯†ç¬¦ã€‚ä»¥å¤ªç½‘æ•°æ®å¸§ä¸­VLANåªå äº†12æ¯”ç‰¹çš„ç©ºé—´ï¼Œè¿™ä½¿å¾—VLANçš„éš”ç¦»èƒ½åŠ›åœ¨æ•°æ®ä¸­å¿ƒç½‘ç»œä¸­åŠ›ä¸ä»å¿ƒã€‚è€ŒVNIçš„å‡ºç°ï¼Œå°±æ˜¯ä¸“é—¨è§£å†³è¿™ä¸ªé—®é¢˜çš„ã€‚VNIæ˜¯ä¸€ç§ç±»ä¼¼äºVLAN IDçš„ç”¨æˆ·æ ‡ç¤ºï¼Œä¸€ä¸ªVNIä»£è¡¨äº†ä¸€ä¸ªç§Ÿæˆ·ï¼Œå³ä½¿å¤šä¸ªç»ˆç«¯ç”¨æˆ·å±äºåŒä¸€ä¸ªVNIï¼Œä¹Ÿè¡¨ç¤ºä¸€ä¸ªç§Ÿæˆ·ã€‚VNI ç”±24æ¯”ç‰¹ç»„æˆï¼Œæ”¯æŒå¤šè¾¾16Mçš„ç§Ÿæˆ·ã€‚å±äºä¸åŒVNIçš„è™šæ‹Ÿæœºä¹‹é—´ä¸èƒ½ç›´æ¥è¿›è¡ŒäºŒå±‚é€šä¿¡ã€‚VXLANæŠ¥æ–‡å°è£…æ—¶ï¼Œç»™VNIåˆ†é…äº†è¶³å¤Ÿçš„ç©ºé—´ä½¿å…¶å¯ä»¥æ”¯æŒæµ·é‡ç§Ÿæˆ·çš„éš”ç¦»ã€‚ IPæ ¸å¿ƒè®¾å¤‡/éš§é“ä¸­é—´è®¾å¤‡: ç½‘ç»œä¸­æ™®é€šçš„è·¯ç”±/è½¬å‘è®¾å¤‡ï¼Œä¸å‚ä¸VxLANå¤„ç†ï¼Œä»…éœ€æ ¹æ®å°è£…åçš„VxLANæŠ¥æ–‡çš„ç›®çš„VTEP IPåœ°å€æ²¿ç€VxLANéš§é“è·¯å¾„è¿›è¡Œæ™®é€šçš„ä¸‰å±‚è½¬å‘ã€‚ VSI (Virtual Switch Instance): è™šæ‹Ÿäº¤æ¢å®ä¾‹ã€‚VTEPä¸Šä¸ºæ¯ä¸ªVxLANæä¾›äºŒå±‚äº¤æ¢æœåŠ¡çš„è™šæ‹Ÿäº¤æ¢å®ä¾‹ã€‚VSIå¯ä»¥çœ‹åšæ˜¯VTEPä¸Šçš„ä¸€å°é’ˆå¯¹æŸä¸ªVxLANå†…çš„æ•°æ®å¸§è¿›è¡ŒäºŒå±‚è½¬å‘çš„è™šæ‹Ÿäº¤æ¢æœºï¼Œå®ƒå…·æœ‰ä¼ ç»Ÿä»¥å¤ªç½‘äº¤æ¢æœºçš„æ‰€æœ‰åŠŸèƒ½ï¼ŒåŒ…æ‹¬æºMACåœ°å€å­¦ä¹ ã€MACåœ°å€è€åŒ–ã€æ³›æ´ªç­‰ã€‚VSIä¸VxLANä¸€ä¸€å¯¹åº”ã€‚ VSI-Interface: VSIçš„è™šæ‹Ÿä¸‰å±‚æ¥å£ã€‚ç±»ä¼¼äºVlan-Interfaceï¼Œç”¨æ¥å¤„ç†è·¨VNIå³è·¨VXLANçš„æµé‡ã€‚VSI-Interfaceä¸VSIä¸€ä¸€å¯¹åº”ï¼Œåœ¨æ²¡æœ‰è·¨VNIæµé‡æ—¶å¯ä»¥æ²¡æœ‰VSI-Interfaceã€‚ VxLANæŠ¥æ–‡æ ¼å¼ VXLANæ˜¯MAC in UDPçš„ç½‘ç»œè™šæ‹ŸåŒ–æŠ€æœ¯ï¼Œæ‰€ä»¥å…¶æŠ¥æ–‡å°è£…æ˜¯åœ¨åŸå§‹ä»¥å¤ªæŠ¥æ–‡ä¹‹å‰æ·»åŠ äº†ä¸€ä¸ªUDPå¤´åŠVXLANå¤´å°è£…ï¼šVTEPä¼šå°†VMå‘å‡ºçš„åŸå§‹æŠ¥æ–‡å°è£…æˆä¸€ä¸ªæ–°çš„UDPæŠ¥æ–‡ï¼Œå¹¶ä½¿ç”¨ç‰©ç†ç½‘ç»œçš„IPå’ŒMACåœ°å€ä½œä¸ºå¤–å±‚å¤´ï¼Œå¯¹ç½‘ç»œä¸­çš„å…¶ä»–è®¾å¤‡åªè¡¨ç°ä¸ºå°è£…åçš„å‚æ•°ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç½‘ç»œä¸­çš„å…¶ä»–è®¾å¤‡çœ‹ä¸åˆ°VMå‘é€çš„åŸå§‹æŠ¥æ–‡ã€‚ å¦‚æœæœåŠ¡å™¨ä½œä¸ºVTEPï¼Œé‚£ä»æœåŠ¡å™¨å‘é€åˆ°æ¥å…¥è®¾å¤‡çš„æŠ¥æ–‡ä¾¿æ˜¯ç»è¿‡å°è£…åçš„æŠ¥æ–‡ï¼Œè¿™æ ·ï¼Œæ¥å…¥è®¾å¤‡å°±ä¸éœ€è¦å­¦ä¹ VMçš„MACåœ°å€äº†ï¼Œå®ƒåªéœ€è¦æ ¹æ®å¤–å±‚å°è£…çš„æŠ¥æ–‡å¤´è´Ÿè´£åŸºæœ¬çš„ä¸‰å±‚è½¬å‘å°±å¯ä»¥äº†ã€‚å› æ­¤ï¼Œè™šæ‹Ÿæœºè§„æ¨¡å°±ä¸ä¼šå—ç½‘ç»œè®¾å¤‡è¡¨é¡¹è§„æ ¼çš„é™åˆ¶äº†ã€‚ å½“ç„¶ï¼Œå¦‚æœç½‘ç»œè®¾å¤‡ä½œä¸ºVTEPï¼Œå®ƒè¿˜æ˜¯éœ€è¦å­¦ä¹ VMçš„MACåœ°å€ã€‚ä½†æ˜¯ï¼Œä»å¯¹æŠ¥æ–‡è¿›è¡Œå°è£…çš„è§’åº¦æ¥è¯´ï¼Œç½‘ç»œè®¾å¤‡çš„æ€§èƒ½è¿˜æ˜¯è¦æ¯”æœåŠ¡å™¨å¼ºå¾ˆå¤šã€‚ ä¸‹å›¾æ˜¯ VxLAN åè®®çš„æŠ¥æ–‡ï¼Œç™½è‰²çš„éƒ¨åˆ†æ˜¯è™šæ‹Ÿæœºå‘å‡ºçš„åŸå§‹æŠ¥æ–‡ï¼ˆäºŒå±‚å¸§ï¼ŒåŒ…å«äº† MAC å¤´éƒ¨ã€IP å¤´éƒ¨å’Œä¼ è¾“å±‚å¤´éƒ¨çš„æŠ¥æ–‡ï¼‰ï¼Œå‰é¢åŠ äº†VxLAN å¤´éƒ¨ç”¨æ¥ä¸“é—¨ä¿å­˜ VxLAN ç›¸å…³çš„å†…å®¹ï¼Œå†å‰é¢æ˜¯æ ‡å‡†çš„ UDP åè®®å¤´éƒ¨ï¼ˆUDP å¤´éƒ¨ã€IP å¤´éƒ¨å’Œ MAC å¤´éƒ¨ï¼‰ç”¨æ¥åœ¨ç‰©ç†ç½‘è·¯ä¸Šä¼ è¾“æŠ¥æ–‡ã€‚ ä»è¿™ä¸ªæŠ¥æ–‡ä¸­å¯ä»¥çœ‹åˆ°ä¸‰ä¸ªéƒ¨åˆ†ï¼š æœ€å¤–å±‚çš„ UDP åè®®æŠ¥æ–‡ç”¨æ¥åœ¨åº•å±‚ç‰©ç†ç½‘ç»œä¸Šä¼ è¾“ï¼Œä¹Ÿå°±æ˜¯ VTEP ä¹‹é—´äº’ç›¸é€šä¿¡çš„åŸºç¡€ï¼› ä¸­é—´æ˜¯ VXLAN å¤´éƒ¨ï¼ŒVTEP æ¥å—åˆ°æŠ¥æ–‡ä¹‹åï¼Œå»é™¤å‰é¢çš„ UDP åè®®éƒ¨åˆ†ï¼Œæ ¹æ®è¿™éƒ¨åˆ†æ¥å¤„ç† VxLAN çš„é€»è¾‘ï¼Œä¸»è¦æ˜¯æ ¹æ® VNI å‘é€åˆ°æœ€ç»ˆçš„è™šæ‹Ÿæœºï¼› æœ€é‡Œé¢æ˜¯åŸå§‹çš„äºŒå±‚å¸§ï¼Œä¹Ÿå°±æ˜¯è™šæ‹Ÿæœºæ‰€è§çš„æŠ¥æ–‡å†…å®¹ã€‚ VxLANæŠ¥æ–‡å„ä¸ªéƒ¨åˆ†è§£é‡Šå¦‚ä¸‹ï¼š Outer Ethernet/MAC Header: å¤–å±‚ä»¥å¤ªå¤´ã€‚14å­—èŠ‚ï¼Œå¦‚æœæœ‰VLAN TAGåˆ™ä¸º18å­—èŠ‚ã€‚ SAï¼šå‘é€æŠ¥æ–‡çš„è™šæ‹Ÿæœºæ‰€å±VTEPçš„MACåœ°å€ã€‚ DAï¼šåˆ°è¾¾ç›®çš„VTEPçš„è·¯å¾„ä¸Šä¸‹ä¸€è·³è®¾å¤‡çš„MACåœ°å€ã€‚ VLAN Typeï¼šå¯é€‰å­—æ®µï¼Œå½“æŠ¥æ–‡ä¸­æºå¸¦VLAN Tagæ—¶ï¼Œè¯¥å­—æ®µå–å€¼ä¸º0x8100ã€‚ Ethernet Typeï¼šä»¥å¤ªæŠ¥æ–‡ç±»å‹ï¼ŒIPåè®®æŠ¥æ–‡è¯¥å­—æ®µå–å€¼ä¸º0x0800ã€‚ Outer IP Header: å¤–å±‚IPå¤´ã€‚20å­—èŠ‚ã€‚å…¶ä¸­ï¼ŒæºIPåœ°å€ï¼ˆOuter Src. IPï¼‰ä¸ºæºVMæ‰€å±VTEPçš„IPåœ°å€ï¼Œç›®çš„IPåœ°å€ï¼ˆOuter Dst. IPï¼‰ä¸ºç›®çš„VMæ‰€å±VTEPçš„IPåœ°å€ã€‚IPåè®®å·ï¼ˆProtocolï¼‰ä¸º17ï¼ˆ0x11ï¼‰ï¼ŒæŒ‡ç¤ºå†…å±‚å°è£…çš„æ˜¯UDPæŠ¥æ–‡ã€‚ Outer UDP Header: å¤–å±‚UDPå¤´ã€‚8å­—èŠ‚ã€‚å…¶ä¸­ï¼ŒUDPç›®çš„ç«¯å£å·ï¼ˆUDP Destination Portï¼‰å›ºå®šä¸º4789ï¼ŒæŒ‡ç¤ºå†…å±‚å°è£…æŠ¥æ–‡ä¸ºVxLANæŠ¥æ–‡ã€‚UDPæºç«¯å£å·ï¼ˆUDP Source Portï¼‰ä¸ºåŸå§‹ä»¥å¤ªå¸§é€šè¿‡å“ˆå¸Œç®—æ³•è®¡ç®—åçš„éšæœºä»»æ„å€¼ï¼Œå¯ä»¥ç”¨äºVxLANç½‘ç»œVTEPèŠ‚ç‚¹ä¹‹é—´ECMPè´Ÿè½½å‡è¡¡ã€‚ VxLAN Header: VxLANå¤´ã€‚8å­—èŠ‚ã€‚ Flags: 8æ¯”ç‰¹ï¼ŒRRRRIRRRã€‚\"I\"ä½ä¸º1æ—¶ï¼Œè¡¨ç¤ºVXLANå¤´ä¸­çš„VXLAN IDæœ‰æ•ˆï¼›ä¸º0ï¼Œè¡¨ç¤ºVXLAN IDæ— æ•ˆã€‚\"R\"ä½ä¿ç•™æœªç”¨ï¼Œè®¾ç½®ä¸º0ã€‚ VxLAN ID (VNI): 24æ¯”ç‰¹ï¼Œç”¨äºæ ‡è¯†ä¸€ä¸ªå•ç‹¬çš„VXLANç½‘ç»œã€‚è¿™ä¹Ÿæ˜¯ VxLAN èƒ½æ”¯æŒåƒä¸‡ç§Ÿæˆ·çš„åœ°æ–¹ã€‚ Reserved: ä¸¤ä¸ªä¿ç•™å­—æ®µï¼Œåˆ†åˆ«ä¸º24æ¯”ç‰¹å’Œ8æ¯”ç‰¹ã€‚ Original L2 Frame: åŸå§‹ä»¥å¤ªç½‘æŠ¥æ–‡ã€‚ ä»æŠ¥æ–‡çš„å°è£…å¯ä»¥çœ‹å‡ºï¼ŒVXLANå¤´å’ŒåŸå§‹äºŒå±‚æŠ¥æ–‡æ˜¯ä½œä¸ºUDPæŠ¥æ–‡çš„è½½è·å­˜åœ¨çš„ã€‚åœ¨VTEPä¹‹é—´çš„ç½‘ç»œè®¾å¤‡ï¼Œåªéœ€è¦æ ¹æ®Outer MAC Headerå’ŒOuter IP Headerè¿›è¡Œè½¬å‘ï¼Œåˆ©ç”¨UDP Source Portè¿›è¡Œè´Ÿè½½åˆ†æ‹…ï¼Œè¿™ä¸€è¿‡ç¨‹ï¼Œä¸è½¬å‘æ™®é€šçš„IPæŠ¥æ–‡å®Œå…¨ç›¸åŒã€‚è¿™æ ·ï¼Œé™¤äº†VTEPè®¾å¤‡ï¼Œç°ç½‘çš„å¤§é‡è®¾å¤‡æ— éœ€æ›´æ¢æˆ–å‡çº§å³å¯æ”¯æŒVXLANç½‘ç»œã€‚ VxLANåè®®æ¯”åŸå§‹æŠ¥æ–‡å¤šå‡º50å­—èŠ‚çš„å†…å®¹ï¼Œè¿™ä¼šé™ä½ç½‘ç»œé“¾è·¯ä¼ è¾“æœ‰æ•ˆæ•°æ®çš„æ¯”ä¾‹ã€‚æ­¤å¤–ï¼Œæ–°å¢åŠ çš„VXLANæŠ¥æ–‡å°è£…ä¹Ÿå¼•å…¥äº†ä¸€ä¸ªé—®é¢˜ï¼Œå³MTUå€¼çš„è®¾ç½®ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œè™šæ‹Ÿæœºçš„é»˜è®¤MTUä¸º1500 Bytesï¼Œä¹Ÿå°±æ˜¯è¯´åŸå§‹ä»¥å¤ªç½‘æŠ¥æ–‡æœ€å¤§ä¸º1500å­—èŠ‚ã€‚è¿™ä¸ªæŠ¥æ–‡åœ¨ç»è¿‡VTEPæ—¶ï¼Œä¼šå°è£…ä¸Š50å­—èŠ‚çš„æ–°æŠ¥æ–‡å¤´ï¼ˆVXLANå¤´8å­—èŠ‚+UDPå¤´8å­—èŠ‚+å¤–éƒ¨IPå¤´20å­—èŠ‚+å¤–éƒ¨MACå¤´14å­—èŠ‚ï¼‰ï¼Œè¿™æ ·ä¸€æ¥ï¼Œæ•´ä¸ªæŠ¥æ–‡é•¿åº¦è¾¾åˆ°äº†1550å­—èŠ‚ã€‚è€Œç°æœ‰çš„VTEPè®¾å¤‡ï¼Œä¸€èˆ¬åœ¨è§£å°è£…VXLANæŠ¥æ–‡æ—¶ï¼Œè¦æ±‚VXLANæŠ¥æ–‡ä¸èƒ½è¢«åˆ†ç‰‡ï¼Œå¦åˆ™æ— æ³•æ­£ç¡®è§£å°è£…ã€‚è¿™å°±è¦æ±‚VTEPä¹‹é—´çš„æ‰€æœ‰ç½‘ç»œè®¾å¤‡çš„MTUæœ€å°ä¸º 1550å­—èŠ‚ã€‚å¦‚æœä¸­é—´è®¾å¤‡çš„MTUå€¼ä¸æ–¹ä¾¿è¿›è¡Œæ›´æ”¹ï¼Œé‚£ä¹ˆè®¾ç½®è™šæ‹Ÿæœºçš„MTUå€¼ä¸º1450ï¼Œä¹Ÿå¯ä»¥æš‚æ—¶è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ VxLANå¤´éƒ¨æœ€é‡è¦çš„æ˜¯VNIDå­—æ®µï¼Œå…¶ä»–çš„ä¿ç•™å­—æ®µä¸»è¦æ˜¯ä¸ºäº†æœªæ¥çš„æ‰©å±•ï¼Œå¾ˆå¤šå‚å•†éƒ½ä¼šåŠ ä»¥è¿ç”¨æ¥å®ç°è‡ªå·±ç»„ç½‘çš„ä¸€äº›ç‰¹æ€§ã€‚ VxLANè¿è¡Œæœºåˆ¶ éš§é“å»ºç«‹ ç½‘ç»œä¸­å­˜åœ¨å¤šä¸ªVTEPï¼Œé‚£ä¹ˆè¿™å…¶ä¸­å“ªäº›VTEPé—´éœ€è¦å»ºç«‹VXLANéš§é“å‘¢ï¼Ÿå¦‚å‰æ‰€è¿°ï¼Œé€šè¿‡VXLANéš§é“ï¼Œ\"äºŒå±‚åŸŸ\"å¯ä»¥çªç ´ç‰©ç†ä¸Šçš„ç•Œé™ï¼Œå®ç°å¤§äºŒå±‚ç½‘ç»œä¸­VMä¹‹é—´çš„é€šä¿¡ã€‚æ‰€ä»¥ï¼Œè¿æ¥åœ¨ä¸åŒVTEPä¸Šçš„VMä¹‹é—´å¦‚æœæœ‰\"å¤§äºŒå±‚\"äº’é€šçš„éœ€æ±‚ï¼Œè¿™ä¸¤ä¸ªVTEPä¹‹é—´å°±éœ€è¦å»ºç«‹VXLANéš§é“ã€‚æ¢è¨€ä¹‹ï¼ŒåŒä¸€å¤§äºŒå±‚åŸŸå†…çš„VTEPä¹‹é—´éƒ½éœ€è¦å»ºç«‹VXLANéš§é“ã€‚ ä¸€èˆ¬è€Œè¨€ï¼Œéš§é“çš„å»ºç«‹ä¸å¤–ä¹æ‰‹å·¥æ–¹å¼å’Œè‡ªåŠ¨æ–¹å¼ä¸¤ç§ã€‚ æ‰‹å·¥æ–¹å¼ è¿™ç§æ–¹å¼éœ€è¦ç”¨æˆ·æ‰‹åŠ¨æŒ‡å®šVXLANéš§é“çš„æºå’Œç›®çš„IPåœ°å€åˆ†åˆ«ä¸ºæœ¬ç«¯å’Œå¯¹ç«¯VTEPçš„IPåœ°å€ï¼Œä¹Ÿå°±æ˜¯äººä¸ºçš„åœ¨æœ¬ç«¯VTEPå’Œå¯¹ç«¯VTEPä¹‹é—´å»ºç«‹é™æ€VXLANéš§é“ã€‚ä»¥åä¸ºCEç³»åˆ—äº¤æ¢æœºä¸ºä¾‹ï¼Œä»¥ä¸Šé…ç½®æ˜¯åœ¨NVEï¼ˆNetwork Virtualization Edgeï¼‰æ¥å£ä¸‹å®Œæˆçš„ã€‚é…ç½®è¿‡ç¨‹å¦‚ä¸‹ï¼š # interface Nve1 //åˆ›å»ºé€»è¾‘æ¥å£NVE 1 source 1.1.1.1 //é…ç½®æºVTEPçš„IPåœ°å€ï¼ˆæ¨èä½¿ç”¨Loopbackæ¥å£çš„IPåœ°å€ï¼‰ vni 5000 head-end peer-list 2.2.2.2 vni 5000 head-end peer-list 2.2.2.3 # å…¶ä¸­ï¼Œvni 5000 head-end peer-list 2.2.2.2å’Œvni 5000 head-end peer-list 2.2.2.3çš„é…ç½®ï¼Œè¡¨ç¤ºå±äºVNI 5000çš„å¯¹ç«¯VTEPæœ‰ä¸¤ä¸ªï¼ŒIPåœ°å€åˆ†åˆ«ä¸º2.2.2.2å’Œ2.2.2.3ã€‚æ ¹æ®è¿™ä¸¤æ¡é…ç½®ï¼ŒVTEPä¸Šä¼šç”Ÿæˆå¦‚ä¸‹æ‰€ç¤ºçš„ä¸€å¼ è¡¨ï¼š <HUAWEI> display vxlan vni 5000 verbose BD ID : 10 State : up NVE : 288 Source : 1.1.1.1 UDP Port : 4789 BUM Mode : head-end Group Address : - Peer List : 2.2.2.2 2.2.2.3 æ ¹æ®ä¸Šè¡¨ä¸­çš„Peer Listï¼Œæœ¬ç«¯VTEPå°±å¯ä»¥çŸ¥é“å±äºåŒä¸€VNIçš„å¯¹ç«¯VTEPéƒ½æœ‰å“ªäº›ï¼Œè¿™ä¹Ÿå°±å†³å®šäº†åŒä¸€å¤§äºŒå±‚å¹¿æ’­åŸŸçš„èŒƒå›´ã€‚å½“VTEPæ”¶åˆ°BUMï¼ˆBroadcast&Unknown-unicast&Multicastï¼Œå¹¿æ’­&æœªçŸ¥å•æ’­&ç»„æ’­ï¼‰æŠ¥æ–‡æ—¶ï¼Œä¼šå°†æŠ¥æ–‡å¤åˆ¶å¹¶å‘é€ç»™Peer Listä¸­æ‰€åˆ—çš„æ‰€æœ‰å¯¹ç«¯VTEPï¼ˆè¿™å°±å¥½æ¯”å¹¿æ’­æŠ¥æ–‡åœ¨VLANå†…å¹¿æ’­ï¼‰ã€‚å› æ­¤ï¼Œè¿™å¼ è¡¨ä¹Ÿè¢«ç§°ä¸º\"å¤´ç«¯å¤åˆ¶åˆ—è¡¨\"ã€‚å½“VTEPæ”¶åˆ°å·²çŸ¥å•æ’­æŠ¥æ–‡æ—¶ï¼Œä¼šæ ¹æ®VTEPä¸Šçš„MACè¡¨æ¥ç¡®å®šæŠ¥æ–‡è¦ä»å“ªæ¡VXLANéš§é“èµ°ã€‚è€Œæ­¤æ—¶Peer Listä¸­æ‰€åˆ—çš„å¯¹ç«¯ï¼Œåˆ™å……å½“äº†MACè¡¨ä¸­\"å‡ºæ¥å£\"çš„è§’è‰²ã€‚åœ¨åé¢çš„æŠ¥æ–‡è½¬å‘æµç¨‹ä¸­ï¼Œä½ å°†ä¼šçœ‹åˆ°å¤´ç«¯å¤åˆ¶åˆ—è¡¨æ˜¯å¦‚ä½•åœ¨VXLANç½‘ç»œä¸­æŒ‡å¯¼æŠ¥æ–‡è¿›è¡Œè½¬å‘çš„ã€‚ è‡ªåŠ¨æ–¹å¼ è‡ªåŠ¨æ–¹å¼ä¸‹VXLANéš§é“çš„å»ºç«‹éœ€è¦å€ŸåŠ©äºå…¶ä»–çš„åè®®ï¼Œä¾‹å¦‚é€šè¿‡BGP/EVPN(Ethernet Virtual Private Network)æˆ–ENDP(Enhanced Neighbor Discovery Protocol)å‘ç°è¿œç«¯VTEPåï¼Œè‡ªåŠ¨åœ¨æœ¬ç«¯å’Œè¿œç«¯VTEPä¹‹é—´å»ºç«‹VXLANéš§é“ã€‚ äºŒå±‚MACå­¦ä¹  é€šè¿‡ä¸ŠèŠ‚çš„å†…å®¹ï¼Œæˆ‘ä»¬å¤§è‡´äº†è§£ VxLAN æŠ¥æ–‡çš„å‘é€è¿‡ç¨‹ã€‚æ¦‚æ‹¬åœ°è¯´å°±æ˜¯è™šæ‹Ÿæœºçš„æŠ¥æ–‡é€šè¿‡ VTEP æ·»åŠ ä¸Š VxLAN ä»¥åŠå¤–éƒ¨çš„UDP/IPæŠ¥æ–‡å¤´ï¼Œç„¶åå‘é€å‡ºå»ï¼Œå¯¹æ–¹ VTEP æ”¶åˆ°ä¹‹åæ‹†é™¤ VxLAN å¤´éƒ¨ç„¶åæ ¹æ® VNI æŠŠåŸå§‹æŠ¥æ–‡å‘é€åˆ°ç›®çš„è™šæ‹Ÿæœºã€‚ è¿™ä¸ªè¿‡ç¨‹æ˜¯åŒæ–¹å·²ç»çŸ¥é“æ‰€æœ‰é€šä¿¡æ‰€éœ€ä¿¡æ¯çš„æƒ…å†µä¸‹çš„è½¬å‘æµç¨‹ï¼Œä½†æ˜¯åœ¨ç¬¬ä¸€æ¬¡é€šä¿¡ä¹‹å‰è¿˜æœ‰å¾ˆå¤šé—®é¢˜æœ‰è§£å†³ï¼š VTEPæ˜¯å¦‚ä½•å¯¹æŠ¥æ–‡è¿›è¡Œå°è£…ï¼Ÿ å‘é€æ–¹è™šæ‹Ÿæœºæ€ä¹ˆçŸ¥é“å¯¹æ–¹çš„ MAC åœ°å€ï¼Ÿ VTEPæ€ä¹ˆçŸ¥é“ç›®çš„è™šæ‹Ÿæœºåœ¨å“ªä¸€å°å®¿ä¸»æœºä¸Šï¼Ÿ è¦å›ç­”è¿™äº›é—®é¢˜ï¼Œæˆ‘ä»¬è¿˜æ˜¯å›åˆ° VxLAN åè®®æŠ¥æ–‡ä¸Šï¼Œçœ‹çœ‹ä¸€ä¸ªå®Œæ•´çš„ VxLAN æŠ¥æ–‡éœ€è¦å“ªäº›ä¿¡æ¯ã€‚ å†…å±‚æŠ¥æ–‡ï¼šé€šä¿¡çš„è™šæ‹ŸæœºåŒæ–¹è¦ä¹ˆç›´æ¥ä½¿ç”¨ IP åœ°å€ï¼Œè¦ä¹ˆé€šè¿‡ DNS ç­‰æ–¹å¼å·²ç»è·å–äº†å¯¹æ–¹çš„ IP åœ°å€ã€‚å› æ­¤ç½‘ç»œå±‚çš„æºå’Œç›®çš„åœ°å€å·²ç»çŸ¥é“ã€‚åŒä¸€ä¸ªç½‘ç»œçš„è™šæ‹Ÿæœºéœ€è¦é€šä¿¡ï¼Œè¿˜éœ€è¦çŸ¥é“å¯¹æ–¹è™šæ‹Ÿæœºçš„ MAC åœ°å€ï¼Œ VxLANéœ€è¦ä¸€ä¸ªæœºåˆ¶æ¥å®ç°ç±»ä¼¼ä¼ ç»Ÿç½‘ç»œ ARP çš„åŠŸèƒ½ ã€‚ VxLAN å¤´éƒ¨ï¼šåªéœ€è¦çŸ¥é“ VNIï¼Œè¿™ä¸€èˆ¬æ˜¯ç›´æ¥é…ç½®åœ¨ VTEP ä¸Šçš„ï¼Œè¦ä¹ˆæ˜¯æå‰è§„åˆ’å›ºå®šçš„ï¼Œè¦ä¹ˆæ˜¯æ ¹æ®å†…éƒ¨æŠ¥æ–‡è‡ªåŠ¨ç”Ÿæˆçš„ï¼Œä¹Ÿä¸éœ€è¦æ‹…å¿ƒã€‚ UDP å¤´éƒ¨ï¼šæœ€é‡è¦çš„æ˜¯æºç«¯å£å’Œç›®çš„ç«¯å£ï¼Œæºç«¯å£æ˜¯ç³»ç»Ÿç”Ÿæˆå¹¶ç®¡ç†çš„ï¼Œç›®çš„ç«¯å£ä¹Ÿæ˜¯å›ºå®šçš„ï¼Œæ¯”å¦‚ IANA è§„å®šçš„ 4789 ç«¯å£ï¼Œè¿™éƒ¨åˆ†ä¹Ÿä¸éœ€è¦æ‹…å¿ƒã€‚ å¤–å±‚IPå¤´éƒ¨ï¼šå¤–å±‚IPå¤´éƒ¨å…³å¿ƒçš„æ˜¯éš§é“ä¸¤ç«¯VTEPçš„IPåœ°å€ï¼Œæºåœ°å€å¯ä»¥å¾ˆç®€å•ç¡®å®šï¼Œç›®çš„åœ°å€æ˜¯ ç›®çš„è™šæ‹Ÿæœºæ‰€åœ¨å®¿ä¸»æœºå…³è”çš„VTEP IP åœ°å€ ï¼Œè¿™ä¸ªä¹Ÿéœ€è¦ç”±æŸç§æ–¹å¼æ¥ç¡®å®šã€‚ å¤–å±‚MACå¤´éƒ¨ï¼šå¦‚æœç›®çš„VTEP çš„ IP åœ°å€ç¡®å®šäº†ï¼Œæ ¹æ®è·¯ç”±è¡¨æŸ¥æ‰¾åˆ°ä¸‹ä¸€è·³çš„MAC åœ°å€å¯ä»¥é€šè¿‡ç»å…¸çš„ ARP æ–¹å¼æ¥è·å–ï¼Œæ¯•ç«Ÿ VTEP ç½‘ç»œåœ¨åŒä¸€ä¸ªä¸‰å±‚ï¼Œç»å…¸ç½‘ç»œæ¶æ„é‚£ä¸€å¥—å°±èƒ½ç›´æ¥ç”¨äº†ã€‚ æ€»ç»“ä¸€ä¸‹ï¼Œä¸€ä¸ª VxLAN æŠ¥æ–‡éœ€è¦ç¡®å®šä¸¤ä¸ªåœ°å€ä¿¡æ¯ï¼šç›®çš„è™šæ‹Ÿæœºçš„ MAC åœ°å€å’Œç›®çš„ VTEP çš„ IP åœ°å€ï¼Œå¦‚æœ VNI ä¹Ÿæ˜¯åŠ¨æ€æ„ŸçŸ¥çš„ï¼Œé‚£ä¹ˆ VTEP å°±éœ€è¦ä¸€ä¸ªä¸‰å…ƒç»„ï¼š (å†…å±‚ç›®çš„è™šæœºMAC, VNI, å¤–å±‚ç›®çš„VTEP IP) ç»„æˆä¸ºæ§åˆ¶å¹³é¢çš„è¡¨æ¥è®°å½•å¯¹ç«¯åœ°å€å¯è¾¾æƒ…å†µã€‚VXLANæœ‰ç€ä¸ä¼ ç»Ÿä»¥å¤ªç½‘éå¸¸ç›¸ä¼¼çš„MACå­¦ä¹ æœºåˆ¶ï¼Œå½“VTEPæ¥æ”¶åˆ°VXLANæŠ¥æ–‡åï¼Œä¼šè®°å½•æºVTEPçš„IPã€è™šæ‹ŸæœºMACå’ŒVNIåˆ°æœ¬åœ°MACè¡¨ä¸­ï¼Œè¿™æ ·å½“VTEPæ¥æ”¶åˆ°ç›®çš„MACä¸ºæ­¤è™šæ‹Ÿæœºçš„MACæ—¶ï¼Œå°±å¯ä»¥è¿›è¡ŒVXLANå°è£…å¹¶è½¬å‘ã€‚VXLANå­¦ä¹ åœ°å€çš„æ—¶å€™ä»ç„¶ä¿å­˜ç€äºŒå±‚åè®®çš„ç‰¹å¾ï¼ŒèŠ‚ç‚¹ä¹‹é—´ä¸ä¼šå‘¨æœŸæ€§çš„äº¤æ¢å„è‡ªçš„è½¬å‘è¡¨ã€‚å¯¹äºä¸è®¤è¯†çš„MACåœ°å€ï¼ŒVXLANä¸€èˆ¬ä¾é ç»„æ’­æˆ–æ§åˆ¶ä¸­å¿ƒæ¥è·å–è·¯å¾„ä¿¡æ¯ã€‚ç»„æ’­çš„æ¦‚å¿µæ˜¯åŒä¸ª VxLAN ç½‘ç»œçš„ VTEP åŠ å…¥åˆ°åŒä¸€ä¸ªç»„æ’­ç½‘ç»œï¼Œå¦‚æœéœ€è¦çŸ¥é“ä»¥ä¸Šä¿¡æ¯ï¼Œå°±åœ¨ç»„å†…å‘é€å¤šæ’­æ¥æŸ¥è¯¢ï¼›æ§åˆ¶ä¸­å¿ƒçš„æ¦‚å¿µæ˜¯åœ¨æŸä¸ªé›†ä¸­å¼çš„åœ°æ–¹ä¿å­˜äº†æ‰€æœ‰è™šæ‹Ÿæœºçš„ä¸Šè¿°ä¿¡æ¯ï¼Œè‡ªåŠ¨åŒ–å‘ŠçŸ¥ VTEP å®ƒéœ€è¦çš„ä¿¡æ¯ã€‚ ç»„æ’­æ–¹å¼ æ¯ä¸ªå¤šæ’­ç»„å¯¹åº”ä¸€ä¸ªå¤šæ’­IPåœ°å€ï¼Œvtep å»ºç«‹çš„æ—¶å€™ä¼šé€šè¿‡é…ç½®åŠ å…¥åˆ°å¤šæ’­ç»„ï¼ˆå…·ä½“åšæ³•å–å†³äºå®ç°ï¼‰ï¼Œå¾€è¿™ä¸ªå¤šæ’­IPåœ°å€å‘é€çš„æŠ¥æ–‡ä¼šå‘ç»™å¤šæ’­ç»„çš„æ‰€æœ‰ä¸»æœºã€‚ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å¤šæ’­ï¼Ÿå› ä¸ºvxlançš„åº•å±‚ç½‘ç»œæ˜¯ä¸‰å±‚çš„ï¼Œå¹¿æ’­åœ°å€æ— æ³•ç©¿è¶Šä¸‰å±‚ç½‘ç»œï¼Œè¦ç»™vxlan ç½‘ç»œæ‰€æœ‰vtepå‘é€æŠ¥æ–‡åªèƒ½é€šè¿‡å¤šæ’­ã€‚ é€šè¿‡ç»„æ’­çš„æ–¹å¼æ‰¿è½½ARPçš„å¹¿æ’­æŠ¥æ–‡å¯ä»¥å®ç°æ•´ä¸ªVxLANç½‘ç»œä¸‹çš„åœ°å€è§£æä»¥åŠVSIçš„MACåœ°å€å­¦ä¹ ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œåªéœ€è¦æœ‰ä¸€æ¬¡å¤šæ’­ï¼Œå› ä¸ºVTEPæœ‰è‡ªåŠ¨å­¦ä¹ çš„èƒ½åŠ›ï¼Œåç»­çš„æŠ¥æ–‡éƒ½æ˜¯é€šè¿‡å•æ’­ç›´æ¥å‘é€çš„ã€‚ä¹Ÿå¯ä»¥çœ‹åˆ°ï¼Œå¤šæ’­æŠ¥æ–‡éå¸¸æµªè´¹ï¼Œæ¯æ¬¡çš„å¤šæ’­å…¶å®åªæœ‰ä¸€ä¸ªæŠ¥æ–‡æ˜¯æœ‰æ•ˆçš„ï¼Œå¦‚æœæŸä¸ªå¤šæ’­ç»„çš„ vtep æ•°é‡å¾ˆå¤šï¼Œè¿™ä¸ªæµªè´¹æ˜¯éå¸¸å¤§çš„ã€‚ä½†æ˜¯å¤šæ’­ç»„ä¹Ÿæœ‰å®ƒçš„å®ç°èµ·æ¥æ¯”è¾ƒç®€å•ï¼Œä¸éœ€è¦ä¸­å¿ƒåŒ–çš„æ§åˆ¶ï¼Œåªè¦åº•å±‚ç½‘ç»œæ”¯æŒå¤šæ’­ï¼Œåªéœ€é…ç½®å¥½å¤šæ’­ç»„å°±èƒ½è‡ªåŠ¨å‘ç°äº†ã€‚å› ä¸ºå¹¶ä¸æ˜¯æ‰€æœ‰çš„ç½‘ç»œè®¾å¤‡éƒ½æ”¯æŒå¤šæ’­ï¼Œå†åŠ ä¸Šå¤šæ’­æ–¹å¼å¸¦æ¥çš„æŠ¥æ–‡æµªè´¹ï¼Œåœ¨å®é™…ç”Ÿäº§ä¸­è¿™ç§æ–¹å¼å¾ˆå°‘ç”¨åˆ°ã€‚ç»¼ä¸Šï¼ŒVXLANå’Œä¼ ç»ŸVLANç½‘ç»œæ•°æ®å¹³é¢ä¸€æ ·ï¼Œæ•°æ®ç»è¿‡æœªçŸ¥å•æ’­æ³›æ´ª->MACè¡¨é¡¹åŠARPè¡¨é¡¹å»ºç«‹->å•æ’­è½¬å‘çš„è¿‡ç¨‹ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºè‡ªå­¦ä¹ æ¨¡å¼ã€‚ä½†è‡ªå­¦ä¹ æ–¹å¼è¿‡äºç®€å•ï¼Œå…¶å¤§é‡çš„æ³›æ´ªæŠ¥æ–‡ä»¥åŠæ— æ³•æ™ºèƒ½è°ƒæ•´çš„ç¼ºç‚¹ï¼Œä½¿å¾—è¿™æ ·çš„æ§åˆ¶å¹³é¢æ„å»ºæ–¹å¼ä¸é€‚åˆSDNç½‘ç»œã€‚ æ§åˆ¶å™¨æ–¹å¼ VTEPå‘é€æŠ¥æ–‡æœ€å…³é”®çš„å°±æ˜¯çŸ¥é“å¯¹æ–¹è™šæ‹Ÿæœºçš„ MAC åœ°å€å’Œè™šæ‹Ÿæœºæ‰€åœ¨ä¸»æœºçš„ VTEP IP åœ°å€ï¼Œå¦‚æœå®ç°çŸ¥é“è¿™ä¸¤ä¸ªä¿¡æ¯ï¼Œé‚£ä¹ˆå°±ä¸éœ€è¦å¤šæ’­äº†ã€‚SDNæœ€å¤§çš„ç‰¹ç‚¹å°±æ˜¯è½¬æ§åˆ†ç¦»ï¼Œé›†ä¸­æ§åˆ¶ã€‚æŒ‰ç…§è¿™ä¸ªæŒ‡å¯¼æ€æƒ³ï¼Œå°†æ§åˆ¶åŠŸèƒ½å•ç‹¬å‰¥ç¦»å‡ºæ¥æˆä¸ºä¸€ä¸ªå•ç‹¬çš„è®¾å¤‡ä¾¿æ˜¯å¾ˆè‡ªç„¶çš„äº‹äº†ã€‚è¿™ä¸ªè®¾å¤‡å°±æ˜¯ Controllerã€‚Controllerå¯ä»¥æ˜¯ä¸€ä¸ªæˆ–è€…ä¸€ç»„ç¡¬ä»¶è®¾å¤‡ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€å¥—è½¯ä»¶ã€‚Controllerä¸ç½‘ç»œä¸­æ‰€æœ‰è®¾å¤‡å»ºç«‹è¿æ¥ï¼Œæ•´ä¸ªVXLANç½‘ç»œçš„æ•°æ®è½¬å‘éƒ½ç”±Controlleræ¥ç®¡ç†ã€‚Controllerä¸è®¾å¤‡è¿æ¥çš„æ¥å£ç§°ä¸ºå—å‘æ¥å£ï¼Œå¯ä»¥ä½¿ç”¨OpenFlowã€Netconfç­‰åè®®ï¼›å¯¹ç”¨æˆ·æä¾›æœåŠ¡çš„æ¥å£ç§°ä¸ºåŒ—å‘æ¥å£ï¼Œä¹Ÿå¯ä»¥æä¾›APIä»¥ä¾¿ä¸å…¶ä»–ç®¡ç†å¹³å°å¯¹æ¥æˆ–è¿›è¡Œæ·±åº¦å¼€å‘ã€‚åŸºäºControllerçš„å—å‘æ¥å£ï¼Œå¯ä»¥é€šè¿‡OpenFlowæˆ–OVSDBåè®®çš„æ–¹å¼å‘VTEPè®¾å¤‡ä¸‹å‘è¿œç«¯MACåœ°å€è¡¨é¡¹ã€‚å…·ä½“ä¸åœ¨è¿™é‡Œè¿›è¡Œå±•å¼€è®²è¿°ã€‚ BUMæŠ¥æ–‡è½¬å‘ å‰é¢æè¿°çš„æŠ¥æ–‡è½¬å‘è¿‡ç¨‹éƒ½æ˜¯å·²çŸ¥å•æ’­æŠ¥æ–‡è½¬å‘ï¼Œå¦‚æœVTEPæ”¶åˆ°ä¸€ä¸ªæœªçŸ¥åœ°å€çš„BUMæŠ¥æ–‡å¦‚ä½•å¤„ç†å‘¢ã€‚ä¸ä¼ ç»Ÿä»¥å¤ªç½‘BUMæŠ¥æ–‡è½¬å‘ç±»ä¼¼ï¼ŒVTEPä¼šé€šè¿‡æ³›æ´ªçš„æ–¹å¼è½¬å‘æµé‡ã€‚BUMï¼ˆBroadcast, Unknown-unicast, Multicastï¼‰å³å¹¿æ’­ã€æœªçŸ¥å•æ’­ã€ç»„æ’­æµé‡ã€‚æ ¹æ®å¯¹æ³›æ´ªæµé‡çš„å¤åˆ¶æ–¹å¼ä¸åŒå¯åˆ†ä¸ºå•æ’­è·¯ç”±æ–¹å¼ï¼ˆå¤´ç«¯å¤åˆ¶ï¼‰å’Œç»„æ’­è·¯ç”±æ–¹å¼ï¼ˆæ ¸å¿ƒå¤åˆ¶ï¼‰ä¸¤ç§ã€‚ å•æ’­è·¯ç”±æ–¹å¼æ³›æ´ªï¼ˆå¤´ç«¯å¤åˆ¶ï¼‰ åœ¨å¤´ç«¯å¤åˆ¶æ–¹å¼ä¸‹ï¼ŒVTEPè´Ÿè´£å¤åˆ¶æŠ¥æ–‡ï¼Œé‡‡ç”¨å•æ’­æ–¹å¼å°†å¤åˆ¶åçš„æŠ¥æ–‡é€šè¿‡æœ¬åœ°æ¥å£å‘é€ç»™æœ¬åœ°ç«™ç‚¹ï¼Œå¹¶é€šè¿‡VXLANéš§é“å‘é€ç»™VXLANå†…çš„æ‰€æœ‰è¿œç«¯VTEPã€‚ å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå½“VTEP 1ä¸Šçš„VM 1å‘å‡ºBUMæŠ¥æ–‡åï¼ŒVTEP 1åˆ¤æ–­æ•°æ®æ‰€å±çš„VXLANï¼Œé€šè¿‡è¯¥VXLANå†…æ‰€æœ‰æœ¬åœ°æ¥å£å’ŒVXLAN Tunnelè½¬å‘æŠ¥æ–‡ã€‚é€šè¿‡VXLAN Tunnelè½¬å‘æŠ¥æ–‡æ—¶ï¼Œå°è£…VXLANå¤´ã€UDPå¤´å’ŒIPå¤´ï¼Œå°†æ³›æ´ªæŠ¥æ–‡å°è£…äºå•æ’­æŠ¥æ–‡ä¸­ï¼Œå‘é€åˆ°VXLANå†…çš„æ‰€æœ‰è¿œç«¯VTEPã€‚ è¿œç«¯VTEPæ”¶åˆ°VXLANæŠ¥æ–‡åï¼Œè§£å°è£…æŠ¥æ–‡ï¼Œå°†åŸå§‹æ•°æ®åœ¨æœ¬åœ°ç«™ç‚¹çš„VXLANå†…æ³›æ´ªã€‚ä¸ºé¿å…ç¯è·¯ï¼Œè¿œç«¯VTEPä»VXLANéš§é“ä¸Šæ¥æ”¶åˆ°æŠ¥æ–‡åï¼Œä¸ä¼šå†å°†å…¶æ³›æ´ªåˆ°å…¶ä»–çš„VXLANéš§é“ã€‚ é€šè¿‡å¤´ç«¯å¤åˆ¶å®ŒæˆBUMæŠ¥æ–‡çš„å¹¿æ’­ï¼Œä¸éœ€è¦ä¾èµ–ç»„æ’­è·¯ç”±åè®®ã€‚ ç»„æ’­è·¯ç”±æ–¹å¼æ³›æ´ªï¼ˆæ ¸å¿ƒå¤åˆ¶ï¼‰ ç»„æ’­è·¯ç”±æ–¹å¼çš„ç»„ç½‘ä¸­åŒä¸€ä¸ªVXLANå†…çš„æ‰€æœ‰VTEPéƒ½åŠ å…¥åŒä¸€ä¸ªç»„æ’­ç»„ï¼Œåˆ©ç”¨ç»„æ’­è·¯ç”±åè®®ï¼ˆå¦‚PIMï¼‰åœ¨IPç½‘ç»œä¸Šä¸ºè¯¥ç»„æ’­å»ºç«‹ç»„æ’­è½¬å‘è¡¨é¡¹ï¼ŒVTEPä¸Šç›¸åº”ç”Ÿæˆä¸€ä¸ªç»„æ’­éš§é“ã€‚ ä¸å¤´ç«¯å¤åˆ¶æ–¹å¼ä¸åŒï¼Œå½“VTEP 1ä¸Šçš„VM 1å‘å‡ºBUMæŠ¥æ–‡åï¼ŒVTEP 1ä¸ä»…åœ¨æœ¬åœ°ç«™ç‚¹å†…æ³›æ´ªï¼Œè¿˜ä¼šä¸ºå…¶å°è£…ç»„æ’­ç›®çš„IPåœ°å€ï¼Œå°è£…åçš„æŠ¥æ–‡æ ¹æ®å·²å»ºç«‹çš„ç»„æ’­è½¬å‘è¡¨é¡¹è½¬å‘åˆ°IPç½‘ç»œã€‚ åœ¨ç»„æ’­æŠ¥æ–‡åˆ°è¾¾IPç½‘ç»œä¸­çš„ä¸­é—´è®¾å¤‡æ—¶ï¼Œè¯¥è®¾å¤‡æ ¹æ®å·²å»ºç«‹çš„ç»„æ’­è¡¨é¡¹å¯¹æŠ¥æ–‡è¿›è¡Œå¤åˆ¶å¹¶è½¬å‘ã€‚ è¿œç«¯VTEPï¼ˆVTEP 2å’ŒVTEP 3ï¼‰æ¥æ”¶åˆ°æŠ¥æ–‡åï¼Œè§£å°è£…æŠ¥æ–‡ï¼Œå°†åŸå§‹çš„æ•°æ®å¸§åœ¨æœ¬åœ°ç«™ç‚¹çš„æŒ‡å®šVXLANæ³›æ´ªã€‚ä¸ºäº†é¿å…ç¯è·¯ï¼Œè¿œç«¯VTEPä»VXLANéš§é“ä¸Šæ¥æ”¶åˆ°æŠ¥æ–‡åï¼Œä¸ä¼šå†å°†å…¶æ³›æ´ªåˆ°å…¶ä»–çš„VXLANéš§é“ã€‚ ç”±äºæ³›æ´ªæµé‡ä½¿ç”¨äº†ç»„æ’­æŠ€æœ¯ï¼Œæ‰€ä»¥æ•´ä¸ªç»„ç½‘ä¸­çš„ç½‘ç»œè®¾å¤‡éœ€è¦æ”¯æŒç»„æ’­è·¯ç”±åè®®ï¼ˆå¦‚PIMç­‰ï¼‰æ¥å»ºç«‹ç»„æ’­è·¯å¾„ä»¥ä¾¿ç»„æ’­æŠ¥æ–‡è½¬å‘ã€‚ å‚è€ƒæ–‡çŒ® vxlan åè®®åŸç†ç®€ä»‹ åä¸ºæ‚¦è¯»æ±‡æŠ€æœ¯å‘çƒ§å‹ï¼šè®¤è¯†VXLAN åä¸ºVxLANæŠ€æœ¯ç™½çš®ä¹¦","tags":"Networking","url":"https://jiang-hao.com/articles/2020/networking-vxlan-in-depth.html","loc":"https://jiang-hao.com/articles/2020/networking-vxlan-in-depth.html"},{"title":"æ·±å…¥ç†è§£å¤§æ•°æ®ä¹‹â€”â€”äº‹åŠ¡åŠå…¶ACIDç‰¹æ€§","text":"äº‹åŠ¡ç®€ä»‹ äº‹ç‰©çš„å®šä¹‰ äº‹åŠ¡ï¼ˆTransactionï¼‰æ˜¯ç”±ä¸€ç³»åˆ—å¯¹ç³»ç»Ÿä¸­æ•°æ®è¿›è¡Œè®¿é—®æˆ–æ›´æ–°çš„æ“ä½œæ‰€ç»„æˆçš„ä¸€ä¸ªç¨‹åºæ‰§è¡Œé€»è¾‘å•å…ƒï¼ˆUnitï¼‰ã€‚åœ¨è®¡ç®—æœºæœ¯è¯­ä¸­ï¼Œäº‹åŠ¡é€šå¸¸å°±æ˜¯æŒ‡æ•°æ®åº“äº‹åŠ¡ ã€‚ åœ¨æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ˆDBMSï¼‰ä¸­ï¼Œäº‹åŠ¡æ˜¯æ•°æ®åº“æ¢å¤å’Œå¹¶å‘æ§åˆ¶çš„åŸºæœ¬å•ä½ã€‚å®ƒæ˜¯ä¸€ä¸ªæ“ä½œåºåˆ—ï¼Œè¿™äº›æ“ä½œè¦ä¹ˆéƒ½æ‰§è¡Œï¼Œè¦ä¹ˆéƒ½ä¸æ‰§è¡Œï¼Œå®ƒæ˜¯ä¸€ä¸ªä¸å¯åˆ†å‰²çš„å·¥ä½œå•ä½ã€‚ ä¾‹å¦‚ï¼Œé“¶è¡Œè½¬å¸å·¥ä½œï¼šä»æºå¸å·æ‰£æ¬¾å¹¶ä½¿ç›®æ ‡å¸å·å¢æ¬¾ï¼Œè¿™ä¸¤ä¸ªæ“ä½œå¿…é¡»è¦ä¹ˆå…¨éƒ¨æ‰§è¡Œï¼Œè¦ä¹ˆéƒ½ä¸æ‰§è¡Œï¼Œå¦åˆ™å°±ä¼šå‡ºç°è¯¥ç¬”é‡‘é¢å¹³ç™½æ¶ˆå¤±æˆ–å‡ºç°çš„æƒ…å†µã€‚æ‰€ä»¥ï¼Œåº”è¯¥æŠŠä»–ä»¬çœ‹æˆä¸€ä¸ªäº‹åŠ¡ã€‚ åœ¨ç°ä»£æ•°æ®åº“ä¸­ï¼Œäº‹åŠ¡è¿˜å¯ä»¥å®ç°å…¶ä»–ä¸€äº›äº‹æƒ…ï¼Œä¾‹å¦‚ï¼Œç¡®ä¿ä½ ä¸èƒ½è®¿é—®åˆ«äººå†™äº†ä¸€åŠçš„æ•°æ®ï¼›ä½†æ˜¯åŸºæœ¬æ€æƒ³æ˜¯ç›¸åŒçš„â€”â€”äº‹åŠ¡æ˜¯ç”¨æ¥ç¡®ä¿ æ— è®ºå‘ç”Ÿä»€ä¹ˆæƒ…å†µï¼Œä½ ä½¿ç”¨çš„æ•°æ®éƒ½å°†å¤„äºä¸€ä¸ªåˆç†çš„çŠ¶æ€ ï¼š transactions are there to ensure, that no matter what happens, the data you work with will be in a sensible state. å®ƒä¿è¯åœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½ä¸ä¼šå‡ºç°åœ¨è½¬è´¦åä»ä¸€ä¸ªå¸æˆ·ä¸­æ‰£é™¤äº†èµ„é‡‘ï¼Œè€Œæœªå°†å…¶å­˜å…¥å¦ä¸€ä¸ªå¸æˆ·çš„æƒ…å†µã€‚ äº‹åŠ¡çš„ç›®çš„ æ•°æ®åº“äº‹åŠ¡é€šå¸¸åŒ…å«äº†ä¸€ä¸ªåºåˆ—çš„å¯¹æ•°æ®åº“çš„è¯»/å†™æ“ä½œã€‚åŒ…å«æœ‰ä»¥ä¸‹ä¸¤ä¸ªç›®çš„ï¼š ä¸ºæ•°æ®åº“æ“ä½œåºåˆ—æä¾›äº†ä¸€ä¸ªä»å¤±è´¥ä¸­æ¢å¤åˆ°æ­£å¸¸çŠ¶æ€çš„æ–¹æ³•ï¼ŒåŒæ—¶æä¾›äº†æ•°æ®åº“å³ä½¿åœ¨å¼‚å¸¸çŠ¶æ€ä¸‹ä»èƒ½ä¿æŒä¸€è‡´æ€§çš„æ–¹æ³•ã€‚ å½“å¤šä¸ªåº”ç”¨ç¨‹åºåœ¨å¹¶å‘è®¿é—®æ•°æ®åº“æ—¶ï¼Œå¯ä»¥åœ¨è¿™äº›åº”ç”¨ç¨‹åºä¹‹é—´æä¾›ä¸€ä¸ªéš”ç¦»æ–¹æ³•ï¼Œä»¥é˜²æ­¢å½¼æ­¤çš„æ“ä½œäº’ç›¸å¹²æ‰°ã€‚ å½“äº‹åŠ¡è¢«æäº¤ç»™äº†DBMSï¼Œåˆ™DBMSéœ€è¦ç¡®ä¿è¯¥äº‹åŠ¡ä¸­çš„æ‰€æœ‰æ“ä½œéƒ½æˆåŠŸå®Œæˆä¸”å…¶ç»“æœè¢«æ°¸ä¹…ä¿å­˜åœ¨æ•°æ®åº“ä¸­ï¼Œå¦‚æœäº‹åŠ¡ä¸­æœ‰çš„æ“ä½œæ²¡æœ‰æˆåŠŸå®Œæˆï¼Œåˆ™äº‹åŠ¡ä¸­çš„æ‰€æœ‰æ“ä½œéƒ½éœ€è¦å›æ»šï¼Œå›åˆ°äº‹åŠ¡æ‰§è¡Œå‰çš„çŠ¶æ€ï¼›åŒæ—¶ï¼Œè¯¥äº‹åŠ¡å¯¹æ•°æ®åº“æˆ–è€…å…¶ä»–äº‹åŠ¡çš„æ‰§è¡Œæ— å½±å“ï¼Œæ‰€æœ‰çš„äº‹åŠ¡éƒ½å¥½åƒåœ¨ç‹¬ç«‹çš„è¿è¡Œã€‚ Martin Kleppmannåœ¨ä»–çš„ã€ŠDesigning Data-Intensive Applicationsã€‹ä¸€ä¹¦ä¸­æœ‰æåˆ°ï¼š Transactions are not a law of nature; they were created with a purpose, namely to simplify the programming model for applications accessing a database. By using transactions, the application is free to ignore certain potential error scenarios and concurrency issues, because the database takes care of them instead (we call these safety guarantees). åœ¨ç°å®æƒ…å†µä¸‹ï¼Œå¤±è´¥çš„é£é™©å¾ˆé«˜ã€‚åœ¨ä¸€ä¸ªæ•°æ®åº“äº‹åŠ¡çš„æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œæœ‰å¯èƒ½ä¼šé‡ä¸Šäº‹åŠ¡æ“ä½œå¤±è´¥ã€æ•°æ®åº“ç³»ç»Ÿæˆ–æ“ä½œç³»ç»Ÿå‡ºé”™ï¼Œç”šè‡³æ˜¯å­˜å‚¨ä»‹è´¨å‡ºé”™ç­‰æƒ…å†µã€‚è€Œä¸Šè¿°Martinçš„è¯è¯´æ˜äº†äº‹åŠ¡çš„å­˜åœ¨ï¼Œå°±æ˜¯ä¸ºäº†èƒ½å¤Ÿç®€åŒ–æˆ‘ä»¬çš„ç¼–ç¨‹æ¨¡å‹ï¼Œä¸éœ€è¦æˆ‘ä»¬å»è€ƒè™‘å„ç§å„æ ·çš„æ½œåœ¨é”™è¯¯å’Œå¹¶å‘é—®é¢˜ ã€‚æˆ‘ä»¬åœ¨å®é™…ä½¿ç”¨äº‹åŠ¡æ—¶ï¼Œä¸éœ€è¦è€ƒè™‘æ•°æ®åº“å®•æœºï¼Œç½‘ç»œå¼‚å¸¸ï¼Œå¹¶å‘ä¿®æ”¹ç­‰é—®é¢˜ï¼Œæ•´ä¸ªäº‹åŠ¡è¦ä¹ˆæäº¤ï¼Œè¦ä¹ˆå›æ»šï¼Œéå¸¸æ–¹ä¾¿ã€‚æ‰€ä»¥æœ¬è´¨ä¸Šæ¥è¯´ï¼Œ äº‹åŠ¡çš„å‡ºç°äº†æ˜¯ä¸ºäº†åº”ç”¨å±‚æœåŠ¡çš„ï¼Œè€Œä¸æ˜¯æ•°æ®åº“ç³»ç»Ÿæœ¬èº«çš„éœ€è¦ ã€‚ äº‹åŠ¡çš„çŠ¶æ€ å› ä¸ºäº‹åŠ¡å…·æœ‰åŸå­æ€§ï¼Œæ‰€ä»¥ä»å¤–éƒ¨çœ‹çš„è¯ï¼Œäº‹åŠ¡å°±æ˜¯å¯†ä¸å¯åˆ†çš„ä¸€ä¸ªæ•´ä½“ï¼Œäº‹åŠ¡çš„çŠ¶æ€ä¹Ÿåªæœ‰ä¸‰ç§ï¼šActiveã€Commited å’Œ Failedï¼Œäº‹åŠ¡è¦ä¸å°±åœ¨æ‰§è¡Œä¸­ï¼Œè¦ä¸ç„¶å°±æ˜¯æˆåŠŸæˆ–è€…å¤±è´¥çš„çŠ¶æ€ã€‚ è¿›ä¸€æ­¥æ”¾å¤§çœ‹ï¼Œäº‹ç‰©å†…éƒ¨è¿˜æœ‰éƒ¨åˆ†æäº¤è¿™ä¸ªä¸­é—´çŠ¶æ€ï¼Œå…¶å¯¹å¤–æ˜¯ä¸å¯è§çš„ã€‚ æ‰€ä»¥ï¼Œå…·ä½“æ¥è¯´ï¼Œäº‹åŠ¡æœ‰ä»¥ä¸‹å‡ ç§å¯èƒ½çš„çŠ¶æ€ï¼š Activeï¼šäº‹åŠ¡çš„åˆå§‹çŠ¶æ€ï¼Œè¡¨ç¤ºäº‹åŠ¡æ­£åœ¨æ‰§è¡Œï¼› Partially Committedï¼šåœ¨æœ€åä¸€æ¡è¯­å¥æ‰§è¡Œä¹‹åï¼› Failedï¼šå‘ç°äº‹åŠ¡æ— æ³•æ­£å¸¸æ‰§è¡Œä¹‹åï¼› Abortedï¼šäº‹åŠ¡è¢«å›æ»šå¹¶ä¸”æ•°æ®åº“æ¢å¤åˆ°äº†äº‹åŠ¡è¿›è¡Œä¹‹å‰çš„çŠ¶æ€ä¹‹åï¼› Committedï¼šæˆåŠŸæ‰§è¡Œæ•´ä¸ªäº‹åŠ¡ã€‚ æˆ‘ä»¬ä¹Ÿå¯ä»¥çœ‹åˆ°ï¼Œäº‹åŠ¡åœ¨æ‰§è¡Œä¹‹ååªä¼šä»¥Abortedæˆ–è€…CommittedçŠ¶æ€ä½œä¸ºç»“æŸã€‚ äº‹åŠ¡çš„ACIDå±æ€§ ACIDç®€ä»‹ ä¸ºäº†ä¿æŒæ•°æ®åº“çš„ä¸€è‡´æ€§ï¼Œåœ¨äº‹åŠ¡å¤„ç†ä¹‹å‰å’Œä¹‹åï¼Œéƒ½éµå¾ªæŸäº›å±æ€§ï¼Œä¹Ÿå°±æ˜¯å¤§å®¶è€³ç†Ÿèƒ½è¯¦çš„ACIDå±æ€§ï¼š åŸå­æ€§ï¼ˆAtomicityï¼‰ï¼šå³ä¸å¯åˆ†å‰²æ€§ï¼Œäº‹åŠ¡ä¸­çš„æ“ä½œè¦ä¹ˆå…¨ä¸åšï¼Œè¦ä¹ˆå…¨åš ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰ï¼šä¸€ä¸ªäº‹åŠ¡åœ¨æ‰§è¡Œå‰åï¼Œæ•°æ®åº“éƒ½å¿…é¡»å¤„äºæ­£ç¡®çš„çŠ¶æ€ï¼Œæ»¡è¶³ å®Œæ•´æ€§çº¦æŸ éš”ç¦»æ€§ï¼ˆIsolationï¼‰ï¼šå¤šä¸ªäº‹åŠ¡å¹¶å‘æ‰§è¡Œæ—¶ï¼Œä¸€ä¸ªäº‹åŠ¡çš„æ‰§è¡Œä¸åº”å½±å“å…¶ä»–äº‹åŠ¡çš„æ‰§è¡Œ æŒä¹…æ€§ï¼ˆDurabilityï¼‰ï¼šäº‹åŠ¡å¤„ç†å®Œæˆåï¼Œå¯¹æ•°æ®çš„ä¿®æ”¹å°±æ˜¯æ°¸ä¹…çš„ï¼Œå³ä¾¿ç³»ç»Ÿæ•…éšœä¹Ÿä¸ä¼šä¸¢å¤± å¹¶éä»»æ„çš„å¯¹æ•°æ®åº“çš„æ“ä½œåºåˆ—éƒ½æ˜¯æ•°æ®åº“äº‹åŠ¡ã€‚ACIDå±æ€§æ˜¯ä¸€ç³»åˆ—æ“ä½œç»„æˆäº‹åŠ¡çš„å¿…è¦æ¡ä»¶ã€‚æ€»ä½“è€Œè¨€ï¼ŒACIDå±æ€§æä¾›äº†ä¸€ç§æœºåˆ¶ï¼Œä½¿æ¯ä¸ªäº‹åŠ¡éƒ½\"ä½œä¸ºä¸€ä¸ªå•å…ƒï¼Œå®Œæˆä¸€ç»„æ“ä½œï¼Œäº§ç”Ÿä¸€è‡´ç»“æœï¼Œäº‹åŠ¡å½¼æ­¤éš”ç¦»ï¼Œæ›´æ–°æ°¸ä¹…ç”Ÿæ•ˆ\"ï¼Œä»è€Œæ¥ç¡®ä¿æ•°æ®åº“çš„æ­£ç¡®æ€§å’Œä¸€è‡´æ€§ã€‚ åŸå­æ€§ï¼ˆAtomicityï¼‰ åŸå­æ€§ä¹Ÿè¢«ç§°ä¸º\"å…¨æœ‰æˆ–å…¨æ— è§„åˆ™\"ã€‚å®ƒéå¸¸å¥½ç†è§£ï¼Œå³æ•´ä¸ªäº‹åŠ¡è¦ä¹ˆå®Œæ•´å‘ç”Ÿï¼Œè¦ä¹ˆæ ¹æœ¬ä¸å‘ç”Ÿï¼Œä¸ä¼šéƒ¨åˆ†å‘ç”Ÿã€‚å®ƒæ¶‰åŠä»¥ä¸‹ä¸¤ä¸ªæ“ä½œï¼š ä¸­æ­¢ ï¼šå¦‚æœäº‹åŠ¡ä¸­æ­¢ï¼Œåˆ™çœ‹ä¸åˆ°å¯¹æ•°æ®åº“æ‰€åšçš„æ›´æ”¹ã€‚ æäº¤ ï¼šå¦‚æœäº‹åŠ¡æäº¤ï¼Œåˆ™æ‰€åšçš„æ›´æ”¹å¯è§ã€‚ æ‹¿ä¹‹å‰è½¬è´¦çš„ä¾‹å­æ¥è¯´ï¼Œç”¨æˆ·Aç»™ç”¨æˆ·Bè½¬è´¦ï¼Œè‡³å°‘è¦åŒ…å«ä¸¤ä¸ªæ“ä½œï¼Œç”¨æˆ·Aé’±æ•°å‡å°‘ï¼Œç”¨æˆ·Bé’±æ•°å¢åŠ ï¼Œå¢åŠ å’Œå‡å°‘çš„æ“ä½œè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥ï¼Œæ˜¯ä¸€ä¸ªåŸå­æ“ä½œã€‚å¦‚ä¸‹å›¾ï¼Œå¦‚æœäº‹åŠ¡åœ¨ T1 å®Œæˆä¹‹åä½†åœ¨ T2 å®Œæˆä¹‹å‰å¤±è´¥ï¼Œå°†å¯¼è‡´æ•°æ®åº“çŠ¶æ€ä¸æ­£ç¡®ã€‚ ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰ ä¸€è‡´æ€§æ˜¯æŒ‡ï¼Œä¸€ä¸ªäº‹åŠ¡å¿…é¡»ä½¿æ•°æ®åº“ä»ä¸€ä¸ªä¸€è‡´æ€§çŠ¶æ€å˜æ¢åˆ°å¦ä¸€ä¸ªä¸€è‡´æ€§çŠ¶æ€ï¼ˆæ‰§è¡ŒæˆåŠŸï¼‰ï¼Œæˆ–å›æ»šåˆ°åŸå§‹çš„ä¸€è‡´æ€§çŠ¶æ€ï¼ˆæ‰§è¡Œå¤±è´¥ï¼‰ã€‚è¿™æ„å‘³ç€å¿…é¡»ç»´æŠ¤å®Œæ•´æ€§çº¦æŸï¼Œä»¥ä½¿åœ¨äº‹åŠ¡ä¹‹å‰å’Œä¹‹åæ•°æ®åº“ä¿æŒä¸€è‡´æ€§å’Œæ­£ç¡®æ€§ã€‚ å‚è€ƒä¸Šé¢çš„ç¤ºä¾‹ï¼Œå‡è®¾ç”¨æˆ·Aå’Œç”¨æˆ·Bä¸¤è€…çš„é’±åŠ èµ·æ¥ä¸€å…±æ˜¯700ï¼Œé‚£ä¹ˆä¸ç®¡Aå’ŒBä¹‹é—´å¦‚ä½•è½¬è´¦ï¼Œè½¬å‡ æ¬¡è´¦ï¼Œè¿™ä¸€çº¦æŸéƒ½å¾—æˆç«‹ï¼Œå³äº‹åŠ¡ç»“æŸåä¸¤ä¸ªç”¨æˆ·çš„é’±ç›¸åŠ èµ·æ¥è¿˜å¾—æ˜¯700ï¼Œè¿™å°±æ˜¯äº‹åŠ¡çš„ä¸€è‡´æ€§ã€‚ å¦‚æœè½¬è´¦è¿‡ç¨‹ä¸­ï¼Œä»…å®ŒæˆAæ‰£æ¬¾æˆ–Bå¢æ¬¾ä¸¤ä¸ªæ“ä½œä¸­çš„ä¸€ä¸ªï¼Œå³æœªä¿è¯åŸå­æ€§ï¼Œé‚£ä¹ˆç»“æœæ•°æ®å¦‚ä¸Šè¿°å®Œæ•´æ€§çº¦æŸä¹Ÿå°±æ— æ³•å¾—åˆ°ç»´æŠ¤ï¼Œä¸€è‡´æ€§ä¹Ÿå°±è¢«æ‰“ç ´ã€‚å¯ä»¥çœ‹å‡ºï¼Œäº‹åŠ¡çš„ä¸€è‡´æ€§å’ŒåŸå­æ€§æ˜¯å¯†åˆ‡ç›¸å…³çš„ï¼ŒåŸå­æ€§çš„ç ´åå¯èƒ½å¯¼è‡´æ•°æ®åº“çš„ä¸ä¸€è‡´ã€‚ ä½†æ•°æ®çš„ä¸€è‡´æ€§é—®é¢˜å¹¶ä¸éƒ½å’ŒåŸå­æ€§æœ‰å…³ã€‚æ¯”å¦‚è½¬è´¦çš„è¿‡ç¨‹ä¸­ï¼Œç”¨æˆ·Aæ‰£æ¬¾äº†100ï¼Œè€Œç”¨æˆ·Båªæ”¶æ¬¾äº†50ï¼Œé‚£ä¹ˆè¯¥è¿‡ç¨‹å¯ä»¥ç¬¦åˆåŸå­æ€§ï¼Œä½†æ˜¯æ•°æ®çš„ä¸€è‡´æ€§å°±å‡ºç°äº†é—®é¢˜ã€‚ ä¸€è‡´æ€§æ—¢æ˜¯äº‹åŠ¡çš„å±æ€§ï¼Œä¹Ÿæ˜¯äº‹åŠ¡çš„ç›®çš„ ã€‚ä¹Ÿæ­£å¦‚æœ¬æ–‡å¼€ç¯‡æ‰€æåˆ°çš„ï¼Œ\"äº‹åŠ¡æ˜¯ç”¨æ¥ç¡®ä¿æ— è®ºå‘ç”Ÿä»€ä¹ˆæƒ…å†µï¼Œä½ ä½¿ç”¨çš„æ•°æ®éƒ½å°†å¤„äºä¸€ä¸ªåˆç†çš„çŠ¶æ€\"ï¼Œè¿™é‡Œæ‰€è¯´çš„åˆç†/æ­£ç¡®ï¼Œä¹Ÿå°±æ˜¯æŒ‡æ»¡è¶³å®Œæ•´æ€§çº¦æŸã€‚ æ€»çš„æ¥è¯´ï¼Œ ä¸€è‡´æ€§æ˜¯äº‹åŠ¡ACIDå››å¤§ç‰¹æ€§ä¸­æœ€é‡è¦çš„å±æ€§ï¼Œè€ŒåŸå­æ€§ã€éš”ç¦»æ€§å’ŒæŒä¹…æ€§ï¼Œéƒ½æ˜¯ä½œä¸ºä¿éšœä¸€è‡´æ€§çš„æ‰‹æ®µã€‚äº‹åŠ¡ä½œä¸ºè¿™äº›æ€§è´¨çš„è½½ä½“ï¼Œå®ç°äº†è¿™ç§ç”±ACIDä¿éšœCçš„æœºåˆ¶ã€‚ ACIDå’ŒCAPä¸­Cï¼ˆä¸€è‡´æ€§ï¼‰çš„åŒºåˆ« è¯·æ³¨æ„ï¼Œæˆ‘ä»¬ä¸€ç›´åœ¨è®¨è®ºçš„ä¸€è‡´æ€§ï¼Œå³ACIDä¸­çš„Cï¼Œæ˜¯æŒ‡å•ä¸€å®ä½“å†…éƒ¨çš„æ­£ç¡®çŠ¶æ€åœ¨æ—¶é—´ç»´åº¦ä¸Šçš„ä¸€è‡´æ€§ï¼Œè¿›ä¸€æ­¥è¯´ï¼Œæ˜¯é€šè¿‡ç»´æŠ¤æ•°æ®çš„å®Œæ•´æ€§çº¦æŸï¼Œæ¥ä¿æŒæ•°æ®åº“åœ¨æ—¶é—´ä¸Šï¼ˆæ¯”å¦‚äº‹åŠ¡å‰åï¼‰ä¿æŒä¸€è‡´çš„æ­£ç¡®çŠ¶æ€ã€‚å› ä¸ºæ˜¯æè¿°å•ä¸€å®ä½“çš„å†…éƒ¨çŠ¶æ€ï¼Œæ•…åˆç§°\"å†…éƒ¨ä¸€è‡´æ€§\"ã€‚ è€ŒCAPåŸåˆ™ä¸­çš„ä¸€è‡´æ€§æ˜¯æŒ‡åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œç©ºé—´ç»´åº¦ä¸Šï¼ŒæŸä¸€ç‰¹å®šæ—¶åˆ»ï¼Œå¤šä¸ªå®ä½“ä¸­ä¸åŒæ•°æ®å¤‡ä»½ä¹‹é—´å€¼çš„ä¸€è‡´æ€§ï¼Œåˆç§°\"å¤–éƒ¨ä¸€è‡´æ€§\"ã€‚å…·ä½“æˆ‘ä»¬ä¼šåœ¨å¦æ–‡CAPåŸåˆ™ç›¸å…³å†…å®¹ä¸­åšè¯¦ç»†ä»‹ç»ã€‚ éš”ç¦»æ€§ï¼ˆIsolationï¼‰ éš”ç¦»æ€§æ˜¯æŒ‡ï¼Œå¹¶å‘æ‰§è¡Œçš„å„ä¸ªäº‹åŠ¡ä¹‹é—´ä¸èƒ½äº’ç›¸å¹²æ‰°ï¼Œå³ä¸€ä¸ªäº‹åŠ¡å†…éƒ¨çš„æ“ä½œåŠä½¿ç”¨çš„æ•°æ®ï¼Œå¯¹å¹¶å‘çš„å…¶ä»–äº‹åŠ¡æ˜¯éš”ç¦»çš„ã€‚æ­¤å±æ€§ç¡®ä¿å¹¶å‘æ‰§è¡Œä¸€ç³»åˆ—äº‹åŠ¡çš„æ•ˆæœç­‰åŒäºä»¥æŸç§é¡ºåºä¸²è¡Œåœ°æ‰§è¡Œå®ƒä»¬ï¼Œä¹Ÿå°±æ˜¯è¦è¾¾åˆ°è¿™ä¹ˆä¸€ç§æ•ˆæœï¼šå¯¹äºä»»æ„ä¸¤ä¸ªå¹¶å‘çš„äº‹åŠ¡T1å’ŒT2ï¼Œåœ¨äº‹åŠ¡T1çœ‹æ¥ï¼ŒT2è¦ä¹ˆåœ¨T1å¼€å§‹ä¹‹å‰å°±å·²ç»ç»“æŸï¼Œè¦ä¹ˆåœ¨T1ç»“æŸä¹‹åæ‰å¼€å§‹ï¼Œè¿™æ ·æ¯ä¸ªäº‹åŠ¡éƒ½æ„Ÿè§‰ä¸åˆ°æœ‰å…¶ä»–äº‹åŠ¡åœ¨å¹¶å‘åœ°æ‰§è¡Œã€‚è¿™è¦æ±‚ä¸¤ä»¶äº‹: åœ¨ä¸€ä¸ªäº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œæ•°æ®çš„ä¸­é—´çš„ï¼ˆå¯èƒ½ä¸ä¸€è‡´ï¼‰çŠ¶æ€ä¸åº”è¯¥è¢«æš´éœ²ç»™æ‰€æœ‰çš„å…¶ä»–äº‹åŠ¡ã€‚ ä¸¤ä¸ªå¹¶å‘çš„äº‹åŠ¡åº”è¯¥ä¸èƒ½æ“ä½œåŒä¸€é¡¹æ•°æ®ã€‚æ•°æ®åº“ç®¡ç†ç³»ç»Ÿé€šå¸¸ä½¿ç”¨é”æ¥å®ç°è¿™ä¸ªç‰¹å¾ã€‚ è¿˜æ˜¯æ‹¿è½¬è´¦æ¥è¯´ï¼Œåœ¨Aå‘Bè½¬è´¦çš„æ•´ä¸ªè¿‡ç¨‹ä¸­ï¼Œåªè¦äº‹åŠ¡è¿˜æ²¡æœ‰æäº¤ï¼ˆcommitï¼‰ï¼ŒæŸ¥è¯¢Aè´¦æˆ·å’ŒBè´¦æˆ·çš„æ—¶å€™ï¼Œä¸¤ä¸ªè´¦æˆ·é‡Œé¢çš„é’±çš„æ•°é‡éƒ½ä¸ä¼šæœ‰å˜åŒ–ã€‚å¦‚æœåœ¨Aç»™Bè½¬è´¦çš„åŒæ—¶ï¼Œæœ‰å¦å¤–ä¸€ä¸ªäº‹åŠ¡æ‰§è¡Œäº†Cç»™Bè½¬è´¦çš„æ“ä½œï¼Œé‚£ä¹ˆå½“ä¸¤ä¸ªäº‹åŠ¡éƒ½ç»“æŸçš„æ—¶å€™ï¼ŒBè´¦æˆ·é‡Œé¢çš„é’±å¿…å®šæ˜¯Aè½¬ç»™Bçš„é’±åŠ ä¸ŠCè½¬ç»™Bçš„é’±å†åŠ ä¸Šè‡ªå·±åŸæœ‰çš„é’±ã€‚ å¦‚æ­¤ï¼Œéš”ç¦»æ€§é˜²æ­¢äº†å¤šä¸ªäº‹åŠ¡å¹¶å‘æ‰§è¡Œæ—¶ç”±äºäº¤å‰æ‰§è¡Œè€Œå¯¼è‡´æ•°æ®çš„ä¸ä¸€è‡´ã€‚äº‹åŠ¡éš”ç¦»åˆ†ä¸ºä¸åŒçº§åˆ«ï¼ŒåŒ…æ‹¬æœªæäº¤è¯»ï¼ˆRead uncommittedï¼‰ã€æäº¤è¯»ï¼ˆread committedï¼‰ã€å¯é‡å¤è¯»ï¼ˆrepeatable readï¼‰å’Œä¸²è¡ŒåŒ–ï¼ˆSerializableï¼‰ã€‚ä»¥ä¸Š4ä¸ªçº§åˆ«çš„éš”ç¦»æ€§ä¾æ¬¡å¢å¼ºï¼Œåˆ†åˆ«è§£å†³ä¸åŒçš„é—®é¢˜ã€‚ äº‹åŠ¡éš”ç¦»çº§åˆ«è¶Šé«˜ï¼Œå°±è¶Šèƒ½ä¿è¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§ï¼Œä½†åŒæ—¶å¯¹å¹¶å‘æ€§èƒ½çš„å½±å“ä¹Ÿè¶Šå¤§ ã€‚ æŒä¹…æ€§ï¼ˆDurabilityï¼‰ äº‹åŠ¡çš„æŒä¹…æ€§åˆç§°ä¸ºæ°¸ä¹…æ€§ï¼ˆPermanencyï¼‰ï¼Œæ˜¯æŒ‡ä¸€ä¸ªäº‹åŠ¡ä¸€æ—¦æäº¤ï¼Œå¯¹æ•°æ®åº“ä¸­å¯¹åº”æ•°æ®çš„çŠ¶æ€å˜æ›´å°±åº”è¯¥æ˜¯ æ°¸ä¹…æ€§ çš„ã€‚å³ä½¿å‘ç”Ÿç³»ç»Ÿå´©æºƒæˆ–æœºå™¨å®•æœºç­‰æ•…éšœï¼Œåªè¦æ•°æ®åº“èƒ½å¤Ÿé‡æ–°å¯åŠ¨ï¼Œé‚£ä¹ˆä¸€å®šèƒ½å¤Ÿæ ¹æ®äº‹åŠ¡æ—¥å¿—å¯¹æœªæŒä¹…åŒ–çš„æ•°æ®é‡æ–°è¿›è¡Œæ“ä½œï¼Œå°†å…¶ æ¢å¤ åˆ°äº‹åŠ¡æˆåŠŸç»“æŸçš„çŠ¶æ€ã€‚æŒä¹…æ€§æ„å‘³ç€åœ¨äº‹åŠ¡å®Œæˆä»¥åï¼Œè¯¥äº‹åŠ¡æ‰€å¯¹æ•°æ®åº“æ‰€ä½œçš„æ›´æ”¹ä¾¿æŒä¹…çš„ä¿å­˜åœ¨æ•°æ®åº“ä¹‹ä¸­ï¼Œå¹¶ä¸ä¼šå› ä¸ºç³»ç»Ÿæ•…éšœè€Œè¢«å›æ»šã€‚ï¼ˆå®Œæˆçš„äº‹åŠ¡æ˜¯ç³»ç»Ÿæ°¸ä¹…çš„éƒ¨åˆ†ï¼Œå¯¹ç³»ç»Ÿçš„å½±å“æ˜¯æ°¸ä¹…æ€§çš„ï¼‰ è®¸å¤šæ•°æ®åº“é€šè¿‡å¼•å…¥ é¢„å†™å¼æ—¥å¿— ï¼ˆWrite-ahead loggingï¼Œç¼©å†™ WALï¼‰æœºåˆ¶ï¼Œæ¥ä¿è¯äº‹åŠ¡æŒä¹…æ€§å’Œæ•°æ®å®Œæ•´æ€§ï¼ŒåŒæ—¶åˆå¾ˆå¤§ç¨‹åº¦ä¸Šé¿å…äº†åŸºäºäº‹åŠ¡ç›´æ¥åˆ·æ–°æ•°æ®çš„é¢‘ç¹IOå¯¹æ€§èƒ½çš„å½±å“ã€‚ åœ¨ä½¿ç”¨WALçš„ç³»ç»Ÿä¸­ï¼Œæ‰€æœ‰çš„ä¿®æ”¹éƒ½å…ˆè¢«å†™å…¥åˆ°æ—¥å¿—ä¸­ï¼Œç„¶åå†è¢«åº”ç”¨åˆ°ç³»ç»ŸçŠ¶æ€ä¸­ã€‚å‡è®¾ä¸€ä¸ªç¨‹åºåœ¨æ‰§è¡ŒæŸäº›æ“ä½œçš„è¿‡ç¨‹ä¸­æœºå™¨æ‰ç”µäº†ã€‚åœ¨é‡æ–°å¯åŠ¨æ—¶ï¼Œç¨‹åºå¯èƒ½éœ€è¦çŸ¥é“å½“æ—¶æ‰§è¡Œçš„æ“ä½œæ˜¯æˆåŠŸäº†è¿˜æ˜¯éƒ¨åˆ†æˆåŠŸæˆ–è€…æ˜¯å¤±è´¥äº†ã€‚å¦‚æœä½¿ç”¨äº†WALï¼Œç¨‹åºå°±å¯ä»¥æ£€æŸ¥logæ–‡ä»¶ï¼Œå¹¶å¯¹çªç„¶æ‰ç”µæ—¶è®¡åˆ’æ‰§è¡Œçš„æ“ä½œå†…å®¹è·Ÿå®é™…ä¸Šæ‰§è¡Œçš„æ“ä½œå†…å®¹è¿›è¡Œæ¯”è¾ƒã€‚åœ¨è¿™ä¸ªæ¯”è¾ƒçš„åŸºç¡€ä¸Šï¼Œç¨‹åºå°±å¯ä»¥å†³å®šæ˜¯æ’¤é”€å·²åšçš„æ“ä½œè¿˜æ˜¯ç»§ç»­å®Œæˆå·²åšçš„æ“ä½œï¼Œæˆ–è€…æ˜¯ä¿æŒåŸæ ·ã€‚ æ€»ç»“ äº‹åŠ¡ï¼ˆTransactionï¼‰æ˜¯ç”±ä¸€ç³»åˆ—å¯¹ç³»ç»Ÿä¸­æ•°æ®è¿›è¡Œè®¿é—®æˆ–æ›´æ–°çš„æ“ä½œæ‰€ç»„æˆçš„ä¸€ä¸ªç¨‹åºæ‰§è¡Œé€»è¾‘å•å…ƒï¼ˆUnitï¼‰ã€‚åœ¨äº‹åŠ¡çš„ACIDç‰¹æ€§ä¸­ï¼ŒCå³ä¸€è‡´æ€§æ˜¯äº‹åŠ¡çš„æ ¹æœ¬è¿½æ±‚ï¼Œè€Œå¯¹æ•°æ®ä¸€è‡´æ€§çš„ç ´åä¸»è¦æ¥è‡ªä¸¤ä¸ªæ–¹é¢ï¼š äº‹åŠ¡çš„å¹¶å‘æ‰§è¡Œ äº‹åŠ¡æ•…éšœæˆ–ç³»ç»Ÿæ•…éšœ æ•°æ®åº“ç³»ç»Ÿæ˜¯é€šè¿‡å¹¶å‘æ§åˆ¶æŠ€æœ¯å’Œæ—¥å¿—æ¢å¤æŠ€æœ¯æ¥é¿å…è¿™ç§æƒ…å†µå‘ç”Ÿçš„ã€‚ å¹¶å‘æ§åˆ¶æŠ€æœ¯ä¿è¯äº†äº‹åŠ¡çš„éš”ç¦»æ€§ï¼Œä½¿æ•°æ®åº“çš„ä¸€è‡´æ€§çŠ¶æ€ä¸ä¼šå› ä¸ºå¹¶å‘æ‰§è¡Œçš„æ“ä½œè¢«ç ´åã€‚ æ—¥å¿—æ¢å¤æŠ€æœ¯ä¿è¯äº†äº‹åŠ¡çš„åŸå­æ€§ï¼Œä½¿ä¸€è‡´æ€§çŠ¶æ€ä¸ä¼šå› äº‹åŠ¡æˆ–ç³»ç»Ÿæ•…éšœè¢«ç ´åã€‚åŒæ—¶ä½¿å·²æäº¤çš„å¯¹æ•°æ®åº“çš„ä¿®æ”¹ä¸ä¼šå› ç³»ç»Ÿå´©æºƒè€Œä¸¢å¤±ï¼Œä¿è¯äº†äº‹åŠ¡çš„æŒä¹…æ€§ã€‚ æˆ‘ä»¬å°†å¦æ–‡å¯¹ä»¥ä¸Šä¸¤ç§æŠ€æœ¯è¿›è¡Œè¯¦ç»†ä»‹ç»ã€‚ å‚è€ƒæ–‡çŒ® What is a database transaction? (2019). Retrieved November 5, 2019, from Stack Overflow website: https://stackoverflow.com/questions/974596/what-is-a-database-transaction Communcations and Information Processing: First International Conference, ICCIP 2012, Aveiro, Portugal, March 7-11, 2012, Proceedings, ç¬¬ 2 éƒ¨åˆ† Designing Data-Intensive Applications: The Big Ideas Behind Reliable, Scalable, and Maintainable Systems, ç¬¬25èŠ‚ ACID Properties in DBMS - GeeksforGeeks. (2016, August 7). Retrieved November 5, 2019, from GeeksforGeeks website: https://www.geeksforgeeks.org/acid-properties-in-dbms/ ç»´åŸºç™¾ç§‘. (2011, July 25). é¢„å†™å¼æ—¥å¿—. Retrieved November 5, 2019, from Wikipedia.org website: https://zh.wikipedia.org/wiki/%E9%A2%84%E5%86%99%E5%BC%8F%E6%97%A5%E5%BF%97 æ•°æ®åº“äº‹åŠ¡çš„æ¦‚å¿µåŠå…¶å®ç°åŸç† - takumiCX - åšå®¢å›­. (2018). Retrieved November 5, 2019, from Cnblogs.com website: https://www.cnblogs.com/takumicx/p/9998844.html æµ…å…¥æ·±å‡ºMySQLä¸­äº‹åŠ¡çš„å®ç°. (2017, August 20). Retrieved November 5, 2019, from é¢å‘ä¿¡ä»°ç¼–ç¨‹ website: https://draveness.me/mysql-transaction â€Œ","tags":"Backend","url":"https://jiang-hao.com/articles/2019/backend-transactions-acid.html","loc":"https://jiang-hao.com/articles/2019/backend-transactions-acid.html"},{"title":"Flink è¯æ±‡è¡¨","text":"Flinkåº”ç”¨ç¨‹åºé›†ç¾¤ Flinkåº”ç”¨ç¨‹åºé›†ç¾¤æ˜¯æŒ‡ä»…æ‰§è¡Œä¸€ä¸ª Flinkä½œä¸š ä¸“ç”¨çš„ Flinké›†ç¾¤ ã€‚è¯¥ Flinké›†ç¾¤ çš„ç”Ÿå‘½å‘¨æœŸä¸å¯¹åº”Flinkä½œä¸šçš„ç”Ÿå‘½å‘¨æœŸç›¸åŒã€‚åœ¨ å·¥ä½œæ¨¡å¼ä¸‹ï¼Œ ä»¥å‰çš„Flinkåº”ç”¨ç¨‹åºé›†ç¾¤ä¹Ÿç§°ä¸ºFlinké›†ç¾¤ã€‚ç‚¹å‡»æŸ¥çœ‹ä¸ Flink Session Cluster çš„æ¯”è¾ƒã€‚ Flinké›†ç¾¤ ä¸€ç§åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œé€šå¸¸ç”±ä¸€ä¸ª Flink Master å’Œä¸€ä¸ªæˆ–å¤šä¸ª Flink TaskManager è¿›ç¨‹ç»„æˆã€‚ äº‹ä»¶ äº‹ä»¶æ˜¯æœ‰å…³ç”±åº”ç”¨ç¨‹åºå»ºæ¨¡çš„åŸŸçš„çŠ¶æ€æ›´æ”¹çš„å£°æ˜ã€‚äº‹ä»¶å¯ä»¥æ˜¯æµæˆ–æ‰¹å¤„ç†åº”ç”¨ç¨‹åºçš„è¾“å…¥å’Œ/æˆ–è¾“å‡ºã€‚äº‹ä»¶æ˜¯ç‰¹æ®Šç±»å‹çš„ è®°å½• ã€‚ æ‰§è¡Œå›¾ è§ ç‰©ç†å›¾ å‡½æ•° å‡½æ•°ç”±ç”¨æˆ·å®ç°ï¼Œå¹¶å°è£…Flinkç¨‹åºçš„åº”ç”¨ç¨‹åºé€»è¾‘ã€‚å¤§å¤šæ•°å‡½æ•°ç”±ç›¸åº”çš„ ç®—å­ åŒ…è£… ã€‚ å®ä¾‹ æœ¯è¯­ å®ä¾‹ ç”¨äºæè¿°åœ¨è¿è¡ŒæœŸé—´ç‰¹å®šç±»å‹çš„ç‰¹å®šå®ä¾‹ï¼ˆé€šå¸¸æ˜¯ ç®—å­ æˆ– å‡½æ•° ï¼‰ã€‚ç”±äºApache Flinkä¸»è¦æ˜¯ç”¨Javaç¼–å†™çš„ï¼Œå› æ­¤å®ƒå¯¹åº”äºJavaä¸­çš„ Instance æˆ– Object çš„å®šä¹‰ã€‚åœ¨Apache Flinkçš„ä¸Šä¸‹æ–‡ä¸­ï¼Œæœ¯è¯­\" å¹¶è¡Œå®ä¾‹\" ä¹Ÿç»å¸¸ç”¨æ¥å¼ºè°ƒç›¸åŒ ç®—å­ æˆ– å‡½æ•° ç±»å‹çš„å¤šä¸ªå®ä¾‹æ­£åœ¨å¹¶è¡Œè¿è¡Œã€‚ Flinkä½œä¸š Flinkä½œä¸šæ˜¯Flinkç¨‹åºçš„è¿è¡Œæ—¶è¡¨ç¤ºå½¢å¼ã€‚Flinkä½œä¸šæ—¢å¯ä»¥æäº¤åˆ°é•¿æœŸè¿è¡Œçš„ Flinkä¼šè¯é›†ç¾¤ ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºç‹¬ç«‹çš„ Flinkåº”ç”¨ç¨‹åºé›†ç¾¤å¯åŠ¨ ã€‚ ä½œä¸šå›¾ è¯·å‚é˜… é€»è¾‘å›¾ Flink JobManager JobManageræ˜¯ Flink Masterä¸­ è¿è¡Œçš„ç»„ä»¶ä¹‹ä¸€ã€‚JobManagerè´Ÿè´£ç›‘ç£å•ä¸ªä½œä¸šçš„ ä»»åŠ¡ æ‰§è¡Œã€‚å†å²ä¸Šï¼Œæ•´ä¸ª Flink Master éƒ½ç§°ä¸ºJobManagerã€‚ é€»è¾‘å›¾ é€»è¾‘å›¾æ˜¯æè¿°æµå¤„ç†ç¨‹åºçš„é«˜çº§é€»è¾‘çš„æœ‰å‘å›¾ã€‚èŠ‚ç‚¹æ˜¯ ç®—å­ ï¼Œè¾¹æŒ‡ç¤ºè¾“å…¥/è¾“å‡ºå…³ç³»æˆ–æ•°æ®æµæˆ–æ•°æ®é›†ã€‚ å—ç®¡çŠ¶æ€ å—ç®¡çŠ¶æ€æè¿°äº†å·²åœ¨æ¡†æ¶ä¸­æ³¨å†Œçš„åº”ç”¨ç¨‹åºçŠ¶æ€ã€‚å¯¹äºå—ç®¡çŠ¶æ€ï¼ŒApache Flinkå°†ç‰¹åˆ«å…³æ³¨æŒä¹…æ€§å’Œå¯ä¼¸ç¼©æ€§ã€‚ Flink Master Flink Masteræ˜¯ Flinkç¾¤é›† çš„Masterã€‚å®ƒåŒ…å«ä¸‰ä¸ªä¸åŒçš„ç»„ä»¶ï¼šFlink Resource Managerï¼ˆèµ„æºç®¡ç†å™¨ï¼‰ï¼ŒFlink Dispatcherï¼ˆFLink è°ƒåº¦å™¨ï¼‰å’Œæ¯ä¸ªè¿è¡Œçš„ Flink Job çš„ Flink JobManager ã€‚ ç®—å­ é€»è¾‘å›¾çš„ èŠ‚ç‚¹ã€‚ç®—å­æ‰§è¡ŒæŸç§æ“ä½œï¼Œé€šå¸¸ç”± Function æ‰§è¡Œã€‚Sourceå’ŒSInkæ˜¯ç”¨äºæ•°æ®æ‘„å–å’Œæ•°æ®å‡ºå£çš„ç‰¹æ®Šç®—å­ã€‚ ç®—å­é“¾ ä¸€ä¸ªç®—å­é“¾ç”±ä¸¤ä¸ªæˆ–å¤šä¸ªè¿ç»­çš„ ç®—å­ ç»„æˆï¼Œä¸­é—´æ²¡æœ‰ä»»ä½•é‡æ–°åˆ†é…ï¼ˆrebalanceï¼‰ã€‚åŒä¸€ç®—å­é“¾ä¸­çš„ç®—å­æ— éœ€ç»è¿‡åºåˆ—åŒ–æˆ–Flinkçš„ç½‘ç»œå †æ ˆå³å¯ç›´æ¥å°†è®°å½•å½¼æ­¤è½¬å‘ã€‚ åˆ†åŒº åˆ†åŒºæ˜¯æ•´ä¸ªæ•°æ®æµæˆ–æ•°æ®é›†çš„ç‹¬ç«‹å­é›†ã€‚é€šè¿‡å°†æ¯ä¸ª è®°å½• åˆ†é…ç»™ä¸€ä¸ªæˆ–å¤šä¸ªåˆ†åŒºï¼Œå°†æ•°æ®æµæˆ–æ•°æ®é›†åˆ’åˆ†ä¸ºå¤šä¸ªåˆ†åŒºã€‚ ä»»åŠ¡ åœ¨è¿è¡Œæ—¶æ¶ˆè´¹æ•°æ®æµæˆ–æ•°æ®é›†çš„åˆ†åŒºã€‚æ”¹å˜æ•°æ®æµæˆ–æ•°æ®é›†åˆ†åŒºæ–¹å¼çš„è½¬æ¢é€šå¸¸ç§°ä¸ºé‡æ–°åˆ†åŒºï¼ˆrepartitioningï¼‰ã€‚ ç‰©ç†å›¾ ç‰©ç†å›¾æ˜¯è½¬æ¢ é€»è¾‘å›¾ ä»¥åœ¨åˆ†å¸ƒå¼è¿è¡Œæ—¶ä¸­æ‰§è¡Œçš„ç»“æœã€‚èŠ‚ç‚¹æ˜¯ ä»»åŠ¡ ï¼Œè¾¹æŒ‡ç¤ºæ•°æ®æµæˆ–æ•°æ®é›†çš„è¾“å…¥/è¾“å‡ºå…³ç³»æˆ– åˆ†åŒº ã€‚ è®°å½• è®°å½•æ˜¯æ•°æ®é›†æˆ–æ•°æ®æµçš„ç»„æˆå…ƒç´ ã€‚ ç®—å­ å’Œ å‡½æ•° æ¥æ”¶è®°å½•ä½œä¸ºè¾“å…¥ï¼Œå¹¶å‘å‡ºè®°å½•ä½œä¸ºè¾“å‡ºã€‚ Flinkä¼šè¯é›†ç¾¤ é•¿æœŸè¿è¡Œçš„ Flinkç¾¤é›† ï¼Œå®ƒæ¥å—å¤šä¸ª Flinkä½œä¸š æ¥æ‰§è¡Œã€‚æ­¤Flinkç¾¤é›†çš„ç”Ÿå­˜æœŸæœªç»‘å®šåˆ°ä»»ä½•Flinkä½œä¸šçš„ç”Ÿå­˜æœŸã€‚ä»¥å‰ï¼ŒFlinkç¾¤é›†åœ¨ ä¼šè¯æ¨¡å¼ä¸‹ ä¹Ÿç§°ä¸ºFlinkä¼šè¯ç¾¤é›†ã€‚ä¸ Flinkåº”ç”¨ç¨‹åºé›†ç¾¤ è¿›è¡Œæ¯”è¾ƒ ã€‚ çŠ¶æ€åç«¯ å¯¹äºæµå¤„ç†ç¨‹åºï¼Œ Flinkä½œä¸š çš„çŠ¶æ€åç«¯ç¡®å®šå¦‚ä½•åœ¨æ¯ä¸ªTaskManagerï¼ˆTaskManagerçš„Javaå †æˆ–ï¼ˆåµŒå…¥å¼ï¼‰RocksDBï¼‰ä¸Šå­˜å‚¨å…¶ çŠ¶æ€ ï¼Œä»¥åŠåœ¨æ£€æŸ¥ç‚¹ä¸Šå†™å…¥çŠ¶æ€çš„ä½ç½®ï¼ˆ Flink Master æˆ–æ–‡ä»¶ç³»ç»Ÿçš„Javaå †ï¼‰ ï¼‰ã€‚ å­ä»»åŠ¡ å­ä»»åŠ¡æ˜¯è´Ÿè´£å¤„ç†æ•°æ®æµ åˆ†åŒº çš„ ä»»åŠ¡ ã€‚æœ¯è¯­\"å­ä»»åŠ¡\"å¼ºè°ƒé’ˆå¯¹åŒä¸€ ç®—å­ æˆ– ç®—å­é“¾ æœ‰å¤šä¸ªå¹¶è¡Œä»»åŠ¡ ã€‚ ä»»åŠ¡ ç‰©ç†å›¾çš„ èŠ‚ç‚¹ã€‚ä»»åŠ¡æ˜¯åŸºæœ¬å·¥ä½œå•å…ƒï¼Œç”±Flinkçš„è¿è¡Œæ—¶æ‰§è¡Œã€‚ä»»åŠ¡æ°å¥½å°è£…äº† ç®—å­ æˆ– ç®—å­é“¾ çš„ä¸€ä¸ªå¹¶è¡Œå®ä¾‹ ã€‚ Flinkä»»åŠ¡ç®¡ç†å™¨ TaskManageræ˜¯ Flinkç¾¤é›† çš„å·¥ä½œè¿›ç¨‹ã€‚ Tasks å®‰æ’åœ¨TaskManagerä¸­æ‰§è¡Œã€‚å®ƒä»¬å½¼æ­¤é€šä¿¡ä»¥åœ¨è¿ç»­çš„ä»»åŠ¡ä¹‹é—´äº¤æ¢æ•°æ®ã€‚ è½¬æ¢ å°†è½¬æ¢åº”ç”¨äºä¸€ä¸ªæˆ–å¤šä¸ªæ•°æ®æµæˆ–æ•°æ®é›†ï¼Œå¹¶äº§ç”Ÿä¸€ä¸ªæˆ–å¤šä¸ªè¾“å‡ºæ•°æ®æµæˆ–æ•°æ®é›†ã€‚è½¬æ¢å¯èƒ½ä¼šæ›´æ”¹æ•°æ®æµæˆ–æ•°æ®é›†çš„æ¯ä¸ªè®°å½•ï¼Œä½†ä¹Ÿå¯èƒ½ä»…æ›´æ”¹å…¶åˆ†åŒºæˆ–æ‰§è¡Œèšåˆã€‚è™½ç„¶ ç®—å­ å’Œ å‡½æ•° æ˜¯Flink APIçš„\"ç‰©ç†\"éƒ¨åˆ†ï¼Œä½†è½¬æ¢åªæ˜¯APIæ¦‚å¿µã€‚å…·ä½“æ¥è¯´ï¼Œå¤§å¤šæ•°ï¼ˆä½†ä¸æ˜¯å…¨éƒ¨ï¼‰è½¬æ¢æ˜¯ç”±æŸäº› ç®—å­ å®ç°çš„ã€‚","tags":"Big Data","url":"https://jiang-hao.com/articles/2019/big-data-flink-glossary.html","loc":"https://jiang-hao.com/articles/2019/big-data-flink-glossary.html"},{"title":"å¤§é™†è®¿é—®Vultrå„èŠ‚ç‚¹VPSç½‘é€Ÿæµ‹è¯•ç»¼åˆæŠ¥å‘Š","text":"é™æ—¶ç¦åˆ© Vultræ–°ç”¨æˆ·èµ é€$50æ´»åŠ¨å…¥å£ æµ‹è¯•æ–¹æ³• é‡‡ç”¨ä»¥ä¸‹æ–¹æ³•ï¼š æœ¬åœ°Pingæµ‹è¯• è…¾è®¯äº‘ä¸»æœºPingæµ‹è¯• æœ¬åœ°ä¸‹è½½æµ‹è¯• è…¾è®¯äº‘ä¸»æœºä¸‹è½½æµ‹è¯• ç«™é•¿å·¥å…·ç»¼åˆæµ‹è¯• èŠ‚ç‚¹åˆ—è¡¨ Location Looking Glass Download Test File: IPv4 Frankfurt, DE fra-de-ping.vultr.com 100MB 1GB Amsterdam, NL ams-nl-ping.vultr.com 100MB 1GB Paris, France par-fr-ping.vultr.com 100MB 1GB London, UK lon-gb-ping.vultr.com 100MB 1GB Singapore sgp-ping.vultr.com 100MB 1GB Tokyo, Japan hnd-jp-ping.vultr.com 100MB 1GB New York (NJ) nj-us-ping.vultr.com 100MB 1GB Toronto, Canada tor-ca-ping.vultr.com 100MB 1GB Chicago, Illinois il-us-ping.vultr.com 100MB 1GB Atlanta, Georgia ga-us-ping.vultr.com 100MB 1GB Seattle, Washington wa-us-ping.vultr.com 100MB 1GB Miami, Florida fl-us-ping.vultr.com 100MB 1GB Dallas, Texas tx-us-ping.vultr.com 100MB 1GB Silicon Valley, California sjo-ca-us-ping.vultr.com 100MB 1GB Los Angeles, California lax-ca-us-ping.vultr.com 100MB 1GB Sydney, Australia syd-au-ping.vultr.com 100MB 1GB æµ‹è¯•ç»“æœ ç”µä¿¡ ä¼˜é€‰èŠ‚ç‚¹ï¼š Toronto New York Chicago Los Angeles Atlanta Dallas Sillicon Valley è”é€š ä¼˜é€‰èŠ‚ç‚¹ï¼š New York Chicago Atlanta Los Angeles Toronto Dallas ç§»åŠ¨ ä¼˜é€‰èŠ‚ç‚¹ï¼š New York Atlanta Seattle Amsterdam Paris Sillicon Valley å¤šçº¿ ä¼˜é€‰èŠ‚ç‚¹ï¼š New York Chicago Toronto Los Angeles Atlanta Dallas","tags":"Tools","url":"https://jiang-hao.com/articles/2019/tools-Vultr-Nodes-Speed-Tests.html","loc":"https://jiang-hao.com/articles/2019/tools-Vultr-Nodes-Speed-Tests.html"},{"title":"Flink DataStream APIæ•™ç¨‹","text":"åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†ä»å¤´å¼€å§‹ï¼Œä»‹ç»ä»è®¾ç½®Flinké¡¹ç›®åˆ°åœ¨Flinké›†ç¾¤ä¸Šè¿è¡Œæµåˆ†æç¨‹åºã€‚ Wikipediaæä¾›äº†ä¸€ä¸ªIRCé¢‘é“ï¼Œå…¶ä¸­è®°å½•äº†å¯¹Wikiçš„æ‰€æœ‰ç¼–è¾‘ã€‚æˆ‘ä»¬å°†åœ¨Flinkä¸­è¯»å–æ­¤é€šé“ï¼Œå¹¶è®¡ç®—æ¯ä¸ªç”¨æˆ·åœ¨ç»™å®šæ—¶é—´çª—å£å†…ç¼–è¾‘çš„å­—èŠ‚æ•°ã€‚è¿™å¾ˆå®¹æ˜“ä½¿ç”¨Flinkåœ¨å‡ åˆ†é’Ÿå†…å®ç°ï¼Œä½†å®ƒå°†ä¸ºæ‚¨æä¾›ä¸€ä¸ªè‰¯å¥½çš„åŸºç¡€ï¼Œä»è€Œå¼€å§‹è‡ªå·±æ„å»ºæ›´å¤æ‚çš„åˆ†æç¨‹åºã€‚ è®¾ç½®Mavené¡¹ç›® æˆ‘ä»¬å°†ä½¿ç”¨Flink Maven Archetypeæ¥åˆ›å»ºæˆ‘ä»¬çš„é¡¹ç›®ç»“æ„ã€‚æœ‰å…³æ­¤å†…å®¹çš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… Java APIå¿«é€Ÿå…¥é—¨ ã€‚å‡ºäºæˆ‘ä»¬çš„ç›®çš„ï¼Œè¿è¡Œå‘½ä»¤æ˜¯è¿™æ ·çš„ï¼š $ mvn archetype:generate \\ -DarchetypeGroupId = org.apache.flink \\ -DarchetypeArtifactId = flink-quickstart-java \\ -DarchetypeVersion = 1 .8.0 \\ -DgroupId = wiki-edits \\ -DartifactId = wiki-edits \\ -Dversion = 0 .1 \\ -Dpackage = wikiedits \\ -DinteractiveMode = false æ‚¨å¯ä»¥ç¼–è¾‘ groupId ï¼Œ artifactId è€Œ package å¦‚æœä½ å–œæ¬¢ã€‚ä½¿ç”¨ä¸Šé¢çš„å‚æ•°ï¼ŒMavenå°†åˆ›å»ºä¸€ä¸ªå¦‚ä¸‹æ‰€ç¤ºçš„é¡¹ç›®ç»“æ„ï¼š $ tree wiki-edits wiki-edits/ â”œâ”€â”€ pom.xml â””â”€â”€ src â””â”€â”€ main â”œâ”€â”€ java â”‚ â””â”€â”€ wikiedits â”‚ â”œâ”€â”€ BatchJob.java â”‚ â””â”€â”€ StreamingJob.java â””â”€â”€ resources â””â”€â”€ log4j.properties æˆ‘ä»¬çš„ pom.xml æ–‡ä»¶å·²ç»åœ¨æ ¹ç›®å½•ä¸­æ·»åŠ äº†Flinkä¾èµ–é¡¹ï¼Œå¹¶ä¸”æœ‰å‡ ä¸ªç¤ºä¾‹Flinkç¨‹åº src/main/java ã€‚æˆ‘ä»¬å¯ä»¥åˆ é™¤ç¤ºä¾‹ç¨‹åºï¼Œå› ä¸ºæˆ‘ä»¬å°†ä»å¤´å¼€å§‹ï¼š $ rm wiki-edits/src/main/java/wikiedits/*.java ä½œä¸ºæœ€åä¸€æ­¥ï¼Œæˆ‘ä»¬éœ€è¦å°†Flink Wikipediaè¿æ¥å™¨æ·»åŠ ä¸ºä¾èµ–å…³ç³»ï¼Œä»¥ä¾¿æˆ‘ä»¬å¯ä»¥åœ¨æˆ‘ä»¬çš„ç¨‹åºä¸­ä½¿ç”¨å®ƒã€‚ç¼–è¾‘ dependencies éƒ¨åˆ† pom.xml ï¼Œä½¿å…¶çœ‹èµ·æ¥åƒè¿™æ ·ï¼š <dependencies> <dependency> <groupId> org.apache.flink </groupId> <artifactId> flink-java </artifactId> <version> ${flink.version} </version> </dependency> <dependency> <groupId> org.apache.flink </groupId> <artifactId> flink-streaming-java_2.11 </artifactId> <version> ${flink.version} </version> </dependency> <dependency> <groupId> org.apache.flink </groupId> <artifactId> flink-clients_2.11 </artifactId> <version> ${flink.version} </version> </dependency> <dependency> <groupId> org.apache.flink </groupId> <artifactId> flink-connector-wikiedits_2.11 </artifactId> <version> ${flink.version} </version> </dependency> </dependencies> æ³¨æ„æ·»åŠ çš„ä¾èµ–é¡¹ flink-connector-wikiedits_2.11 ã€‚ï¼ˆæ­¤ç¤ºä¾‹å’ŒWikipediaè¿æ¥å™¨çš„çµæ„Ÿæ¥è‡ªApache Samza çš„ Hello Samza ç¤ºä¾‹ã€‚ï¼‰ å†™ä¸€ä¸ªFlinkç¨‹åº æ¥ä¸‹æ¥æ˜¯ç¼–ç ã€‚å¯åŠ¨ä½ å–œæ¬¢çš„IDEå¹¶å¯¼å…¥Mavené¡¹ç›®æˆ–æ‰“å¼€æ–‡æœ¬ç¼–è¾‘å™¨å¹¶åˆ›å»ºæ–‡ä»¶ src/main/java/wikiedits/WikipediaAnalysis.java ï¼š package wikiedits ; public class WikipediaAnalysis { public static void main ( String [] args ) throws Exception { } } è¯¥ç¨‹åºç°åœ¨è¿˜éå¸¸åŸºç¡€ï¼Œä½†æˆ‘ä»¬ä¼šæ…¢æ…¢å¡«å……ã€‚è¯·æ³¨æ„ï¼Œæˆ‘ä¸ä¼šåœ¨æ­¤å¤„æä¾›importè¯­å¥ï¼Œå› ä¸ºIDEå¯ä»¥è‡ªåŠ¨æ·»åŠ å®ƒä»¬ã€‚åœ¨æœ¬æ–‡ç»“å°¾å°†ç»™å‡ºåŒ…æ‹¬importè¯­å¥çš„å®Œæ•´çš„ä»£ç ã€‚ Flinkç¨‹åºçš„ç¬¬ä¸€æ­¥æ˜¯åˆ›å»ºä¸€ä¸ª StreamExecutionEnvironment ï¼ˆæˆ–è€… ExecutionEnvironment ï¼Œå¦‚æœæ‚¨æ­£åœ¨ç¼–å†™æ‰¹å¤„ç†ä½œä¸šï¼‰ã€‚è¿™å¯ç”¨äºè®¾ç½®æ‰§è¡Œå‚æ•°å¹¶åˆ›å»ºä»å¤–éƒ¨ç³»ç»Ÿè¯»å–çš„æºã€‚æ‰€ä»¥è®©æˆ‘ä»¬ç»§ç»­æŠŠå®ƒæ·»åŠ åˆ°mainæ–¹æ³•ä¸­ï¼š StreamExecutionEnvironment see = StreamExecutionEnvironment . getExecutionEnvironment (); æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªä»Wikipedia IRCæ—¥å¿—ä¸­è¯»å–çš„æºï¼š DataStream < WikipediaEditEvent > edits = see . addSource ( new WikipediaEditsSource ()); è¿™åˆ›å»ºäº†æˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥å¤„ç†çš„ä¸€ä¸ªåŒ…å« WikipediaEditEvent å…ƒç´ çš„ DataStream ã€‚å‡ºäºæœ¬ç¤ºä¾‹çš„ç›®çš„ï¼Œæˆ‘ä»¬æ„Ÿå…´è¶£çš„æ˜¯ç¡®å®šæ¯ä¸ªç”¨æˆ·åœ¨ç‰¹å®šæ—¶é—´çª—å£ä¸­æ·»åŠ æˆ–åˆ é™¤çš„å­—èŠ‚æ•°ï¼Œæ¯”å¦‚è¯´äº”ç§’ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬é¦–å…ˆè¦å¯¹æµä»¥ç”¨æˆ·åè¿›è¡Œé”®å€¼åŒ–ï¼Œä¹Ÿå°±æ˜¯è¯´æ­¤æµä¸Šçš„æ“ä½œåº”è€ƒè™‘ç”¨æˆ·åã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œçª—å£ä¸­ç¼–è¾‘çš„å­—èŠ‚çš„æ€»å’Œåº”è¯¥æ˜¯åŸºäºæ¯ä¸ªå”¯ä¸€çš„ç”¨æˆ·åˆ†åˆ«è¿›è¡Œç»Ÿè®¡ã€‚å¯¹æµè¿›è¡Œé”®å€¼åŒ–ï¼Œæˆ‘ä»¬å¿…é¡»æä¾›ä¸€ä¸ª KeySelector ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š KeyedStream < WikipediaEditEvent , String > keyedEdits = edits . keyBy ( new KeySelector < WikipediaEditEvent , String > () { @Override public String getKey ( WikipediaEditEvent event ) { return event . getUser (); } }); è¿™ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªå…·æœ‰ String ç±»å‹ç”¨æˆ·åé”®çš„ WikipediaEditEvent æ•°æ®æµã€‚æˆ‘ä»¬ç°åœ¨å¯ä»¥æŒ‡å®šæˆ‘ä»¬å¸Œæœ›åœ¨æ­¤æµä¸ŠåŠ ä¸Šçª—å£ï¼Œå¹¶æ ¹æ®è¿™äº›çª—å£ä¸­çš„å…ƒç´ è®¡ç®—ç»“æœã€‚çª—å£å®šä¹‰äº†è¦åœ¨å…¶ä¸Šæ‰§è¡Œè®¡ç®—çš„æ•°æ®æµçš„ä¸€ä¸ªåˆ‡ç‰‡ã€‚åœ¨æ— é™çš„å…ƒç´ æµä¸Šè®¡ç®—èšåˆæ—¶éœ€è¦Windowsã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°†è¯´æˆ‘ä»¬æƒ³è¦æ¯äº”ç§’èšåˆä¸€æ¬¡ç¼–è¾‘çš„å­—èŠ‚æ€»å’Œï¼š DataStream < Tuple2 < String , Long >> result = keyedEdits . timeWindow ( Time . seconds ( 5 )) . aggregate ( new AggregateFunction < WikipediaEditEvent , Tuple2 < String , Long > , Tuple2 < String , Long >> () { @Override public Tuple2 < String , Long > createAccumulator () { return new Tuple2 <> ( \"\" , 0 L ); } @Override public Tuple2 < String , Long > add ( WikipediaEditEvent value , Tuple2 < String , Long > accumulator ) { accumulator . f0 = value . getUser (); accumulator . f1 += value . getByteDiff (); return accumulator ; } @Override public Tuple2 < String , Long > getResult ( Tuple2 < String , Long > accumulator ) { return accumulator ; } @Override public Tuple2 < String , Long > merge ( Tuple2 < String , Long > a , Tuple2 < String , Long > b ) { return new Tuple2 <> ( a . f0 , a . f1 + b . f1 ); } }); ç¬¬ä¸€ä¸ªè°ƒç”¨ .timeWindow() è¡¨ç¤ºæˆ‘ä»¬å¸Œæœ›æœ‰äº”ç§’é’Ÿçš„ç¿»æ»šï¼ˆä¸é‡å ï¼‰çª—å£ã€‚ç¬¬äºŒä¸ªè°ƒç”¨ä¸ºæ¯ä¸ªKeyåœ¨æ¯ä¸ªçª—å£åˆ‡ç‰‡ä¸ŠæŒ‡å®š èšåˆè½¬æ¢ ã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä»ä¸€ä¸ªåˆå§‹å€¼ (\"\", 0L) å¼€å§‹ï¼Œå¹¶åœ¨è¯¥æ—¶é—´çª—å£ä¸­ä¸ºç”¨æˆ·æ·»åŠ æ¯æ¬¡ç¼–è¾‘çš„å­—èŠ‚å·®ã€‚ç°åœ¨ï¼Œè¾“å‡ºæµä¸­å°†åŒ…å«æ¯ä¸ªç”¨æˆ·å¯¹åº”ä¸€ä¸ªæ¯äº”ç§’é’Ÿå‘å‡ºä¸€æ¬¡çš„ Tuple2<String, Long> ã€‚ å‰©ä¸‹è¦åšçš„å°±æ˜¯å°†æµæ‰“å°åˆ°æ§åˆ¶å°å¹¶å¼€å§‹æ‰§è¡Œï¼š result . print (); see . execute (); æœ€åä¸€ä¸ªè°ƒç”¨æ˜¯å¯åŠ¨å®é™…Flinkå·¥ä½œæ‰€å¿…éœ€çš„ã€‚æ‰€æœ‰æ“ä½œï¼ˆä¾‹å¦‚åˆ›å»ºæºSourceï¼Œè½¬æ¢Transformationå’Œæ¥æ”¶å™¨Sinkï¼‰ä»…æ„å»ºå†…éƒ¨æ“ä½œçš„å›¾å½¢ã€‚åªæœ‰åœ¨ execute() è¢«è°ƒç”¨æ—¶æ‰ä¼šæäº¤åˆ°é›†ç¾¤ä¸Šæˆ–åœ¨æœ¬åœ°è®¡ç®—æœºä¸Šæ‰§è¡Œæ­¤æ“ä½œå›¾ã€‚ åˆ°ç›®å‰ä¸ºæ­¢å®Œæ•´çš„ä»£ç æ˜¯è¿™æ ·çš„ï¼š package wikiedits ; import org.apache.flink.api.common.functions.AggregateFunction ; import org.apache.flink.api.java.functions.KeySelector ; import org.apache.flink.api.java.tuple.Tuple2 ; import org.apache.flink.streaming.api.datastream.DataStream ; import org.apache.flink.streaming.api.datastream.KeyedStream ; import org.apache.flink.streaming.api.environment.StreamExecutionEnvironment ; import org.apache.flink.streaming.api.windowing.time.Time ; import org.apache.flink.streaming.connectors.wikiedits.WikipediaEditEvent ; import org.apache.flink.streaming.connectors.wikiedits.WikipediaEditsSource ; public class WikipediaAnalysis { public static void main ( String [] args ) throws Exception { StreamExecutionEnvironment see = StreamExecutionEnvironment . getExecutionEnvironment (); DataStream < WikipediaEditEvent > edits = see . addSource ( new WikipediaEditsSource ()); KeyedStream < WikipediaEditEvent , String > keyedEdits = edits . keyBy ( new KeySelector < WikipediaEditEvent , String > () { @Override public String getKey ( WikipediaEditEvent event ) { return event . getUser (); } }); DataStream < Tuple2 < String , Long >> result = keyedEdits . timeWindow ( Time . seconds ( 5 )) . aggregate ( new AggregateFunction < WikipediaEditEvent , Tuple2 < String , Long > , Tuple2 < String , Long >> () { @Override public Tuple2 < String , Long > createAccumulator () { return new Tuple2 <> ( \"\" , 0 L ); } @Override public Tuple2 < String , Long > add ( WikipediaEditEvent value , Tuple2 < String , Long > accumulator ) { accumulator . f0 = value . getUser (); accumulator . f1 += value . getByteDiff (); return accumulator ; } @Override public Tuple2 < String , Long > getResult ( Tuple2 < String , Long > accumulator ) { return accumulator ; } @Override public Tuple2 < String , Long > merge ( Tuple2 < String , Long > a , Tuple2 < String , Long > b ) { return new Tuple2 <> ( a . f0 , a . f1 + b . f1 ); } }); result . print (); see . execute (); } } æ‚¨å¯ä»¥ä½¿ç”¨Mavenåœ¨IDEæˆ–å‘½ä»¤è¡Œä¸Šè¿è¡Œæ­¤ç¤ºä¾‹ï¼š $ mvn clean package $ mvn exec:java -Dexec.mainClass = wikiedits.WikipediaAnalysis ç¬¬ä¸€ä¸ªå‘½ä»¤æ„å»ºæˆ‘ä»¬çš„é¡¹ç›®ï¼Œç¬¬äºŒä¸ªå‘½ä»¤æ‰§è¡Œæˆ‘ä»¬çš„ä¸»ç±»ã€‚è¾“å‡ºåº”è¯¥ç±»ä¼¼äºï¼š 1 > ( Fenix down,114 ) 6 > ( AnomieBOT,155 ) 8 > ( BD2412bot,-3690 ) 7 > ( IgnorantArmies,49 ) 3 > ( Ckh3111,69 ) 5 > ( Slade360,0 ) 7 > ( Narutolovehinata5,2195 ) 6 > ( Vuyisa2001,79 ) 4 > ( Ms Sarah Welch,269 ) 4 > ( KasparBot,-245 ) æ¯è¡Œå‰é¢çš„æ•°å­—å‘Šè¯‰ä½ è¾“å‡ºæ˜¯ç”±å“ªä¸ªæ‰“å°Sinkçš„å¹¶è¡Œå®ä¾‹äº§ç”Ÿçš„ã€‚ è¦äº†è§£æ›´å¤šä¿¡æ¯ï¼Œæ‚¨å¯ä»¥æŸ¥çœ‹æˆ‘ä»¬çš„ åŸºæœ¬æ¦‚å¿µ æŒ‡å—å’Œ DataStream API ã€‚å¦‚æœæ‚¨æƒ³äº†è§£å¦‚ä½•åœ¨è‡ªå·±çš„æœºå™¨ä¸Šè®¾ç½®Flinkç¾¤é›†å¹¶å°†ç»“æœå†™å…¥ Kafka ï¼Œè¯·åšæŒå‚åŠ å¥–åŠ±ç»ƒä¹ ã€‚ é¢å¤–ç»ƒä¹ ï¼šåœ¨ç¾¤é›†ä¸Šè¿è¡Œå¹¶å†™å…¥Kafka è¯·æŒ‰ç…§æˆ‘ä»¬çš„ æœ¬åœ°å®‰è£…æ•™ç¨‹ åœ¨æ‚¨çš„è®¡ç®—æœºä¸Šè®¾ç½®Flinkåˆ†å‘ï¼Œå¹¶åœ¨ç»§ç»­ä¹‹å‰å‚è€ƒ Kafkaå¿«é€Ÿå…¥é—¨ ä»¥è®¾ç½®Kafkaå®‰è£…ã€‚ ä½œä¸ºç¬¬ä¸€æ­¥ï¼Œæˆ‘ä»¬å¿…é¡»æ·»åŠ Flink Kafkaè¿æ¥å™¨ä½œä¸ºä¾èµ–ï¼Œä»¥ä¾¿æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Kafka Sinkã€‚å°†å…¶æ·»åŠ åˆ° pom.xml dependency éƒ¨åˆ†ï¼š <dependency> <groupId> org.apache.flink </groupId> <artifactId> flink-connector-kafka-0.11_2.11 </artifactId> <version> ${ flink . version } </version> </dependency> æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹æˆ‘ä»¬çš„ç¨‹åºã€‚æˆ‘ä»¬å°†ç§»é™¤ print() Sinkï¼Œè€Œæ˜¯ä½¿ç”¨Kafka Sinkã€‚æ–°ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š result .map(new MapFunction<Tuple2<String,Long>, String>() { @Override public String map(Tuple2<String, Long> tuple) { return tuple.toString(); } }) .addSink(new FlinkKafkaProducer011<>(\"localhost:9092\", \"wiki-result\", new SimpleStringSchema())); è¿˜éœ€è¦å¯¼å…¥ç›¸å…³çš„ç±»ï¼š import org.apache.flink.streaming.connectors.kafka.FlinkKafkaProducer011 ; import org.apache.flink.api.common.serialization.SimpleStringSchema ; import org.apache.flink.api.common.functions.MapFunction ; æ³¨æ„æˆ‘ä»¬æ˜¯å¦‚ä½•åœ¨ä¸€å¼€å§‹çš„æ—¶å€™ä½¿ç”¨MapFunctionè½¬æ¢ Tuple2<String, Long> æµä¸º String æµã€‚æˆ‘ä»¬è¿™æ ·åšæ˜¯å› ä¸ºå°†ç®€å•å­—ç¬¦ä¸²å†™å…¥Kafkaæ›´å®¹æ˜“ã€‚ç„¶åï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªKafka Sinkã€‚æ‚¨é¡»å…ˆä¿®æ”¹ä½¿ä¸»æœºåå’Œç«¯å£å¯¹åº”æ‚¨çš„è®¾ç½®ã€‚ \"wiki-result\" æ˜¯åœ¨æˆ‘ä»¬è¿è¡Œç¨‹åºä¹‹å‰æˆ‘ä»¬å°†è¦åˆ›å»ºçš„Kafkaæµçš„åç§°ã€‚ä½¿ç”¨Mavenæ„å»ºé¡¹ç›®ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦jaræ–‡ä»¶åœ¨é›†ç¾¤ä¸Šè¿è¡Œï¼š $ mvn clean package ç”Ÿæˆçš„jaræ–‡ä»¶å°†ä½äº target å­æ–‡ä»¶å¤¹ä¸­ï¼š target/wiki-edits-0.1.jar ã€‚æˆ‘ä»¬ç¨åä¼šç”¨åˆ°å®ƒã€‚ ç°åœ¨æˆ‘ä»¬å‡†å¤‡å¯åŠ¨Flinké›†ç¾¤å¹¶è¿è¡Œå†™å…¥Kafkaçš„ç¨‹åºã€‚è½¬åˆ°å®‰è£…Flinkçš„ä½ç½®å¹¶å¯åŠ¨æœ¬åœ°ç¾¤é›†ï¼š $ cd my/flink/directory $ bin/start-cluster.sh æˆ‘ä»¬è¿˜å¿…é¡»åˆ›å»ºKafkaä¸»é¢˜ï¼Œä»¥ä¾¿æˆ‘ä»¬çš„ç¨‹åºå¯ä»¥å†™å…¥å®ƒï¼š $ cd my/kafka/directory $ bin/kafka-topics.sh --create --zookeeper localhost:2181 --replication-factor 1 --partitions 1 --topic wiki-results ç°åœ¨æˆ‘ä»¬å‡†å¤‡åœ¨æœ¬åœ°Flinké›†ç¾¤ä¸Šè¿è¡Œæˆ‘ä»¬çš„jaræ–‡ä»¶ï¼š $ cd my/flink/directory $ bin/flink run -c wikiedits.WikipediaAnalysis path/to/wikiedits-0.1.jar å¦‚æœä¸€åˆ‡æŒ‰è®¡åˆ’è¿›è¡Œï¼Œé‚£ä¹ˆè¯¥å‘½ä»¤çš„è¾“å‡ºåº”è¯¥ä¸æ­¤ç±»ä¼¼ï¼š 03/08/2016 15:09:27 Job execution switched to status RUNNING. 03/08/2016 15:09:27 Source: Custom Source(1/1) switched to SCHEDULED 03/08/2016 15:09:27 Source: Custom Source(1/1) switched to DEPLOYING 03/08/2016 15:09:27 Window(TumblingProcessingTimeWindows(5000), ProcessingTimeTrigger, AggregateFunction$3, PassThroughWindowFunction) -> Sink: Print to Std. Out (1/1) switched from CREATED to SCHEDULED 03/08/2016 15:09:27 Window(TumblingProcessingTimeWindows(5000), ProcessingTimeTrigger, AggregateFunction$3, PassThroughWindowFunction) -> Sink: Print to Std. Out (1/1) switched from SCHEDULED to DEPLOYING 03/08/2016 15:09:27 Window(TumblingProcessingTimeWindows(5000), ProcessingTimeTrigger, AggregateFunction$3, PassThroughWindowFunction) -> Sink: Print to Std. Out (1/1) switched from DEPLOYING to RUNNING 03/08/2016 15:09:27 Source: Custom Source(1/1) switched to RUNNING æ‚¨å¯ä»¥çœ‹åˆ°å„ä¸ªç®—å­å¦‚ä½•å¼€å§‹è¿è¡Œã€‚æˆ‘ä»¬è¿™é‡Œåªæœ‰ä¸¤ä¸ªï¼Œå› ä¸º window ä¹‹åçš„ç®—å­ç”±äºæ€§èƒ½åŸå› è€ŒæŠ˜å æˆä¸€ä¸ªæ“ä½œã€‚åœ¨Flinkï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º ç®—å­é“¾ ã€‚ æ‚¨å¯ä»¥é€šè¿‡ä½¿ç”¨ Kafka console consumer æ£€æŸ¥Kafka Topicæ¥è§‚å¯Ÿç¨‹åºçš„è¾“å‡ºï¼š bin/kafka-console-consumer.sh --zookeeper localhost:2181 --topic wiki-result æ‚¨è¿˜å¯ä»¥æŸ¥çœ‹åœ¨ httpï¼š// localhostï¼š8081ä¸Š è¿è¡Œçš„Flinkä»ªè¡¨æ¿ã€‚æ‚¨å°†çœ‹åˆ°ç¾¤é›†èµ„æºå’Œæ­£åœ¨è¿è¡Œçš„ä½œä¸šçš„æ¦‚è¿°ï¼š å¦‚æœå•å‡»æ­£åœ¨è¿è¡Œçš„ä½œä¸šï¼Œæ‚¨å°†è·å¾—ä¸€ä¸ªè§†å›¾ï¼Œæ‚¨å¯ä»¥åœ¨å…¶ä¸­æ£€æŸ¥å•ä¸ªæ“ä½œï¼Œä¾‹å¦‚ï¼ŒæŸ¥çœ‹å·²å¤„ç†å…ƒç´ çš„æ•°é‡ï¼š","tags":"Big Data","url":"https://jiang-hao.com/articles/2019/big-data-flink-datastream-api.html","loc":"https://jiang-hao.com/articles/2019/big-data-flink-datastream-api.html"},{"title":"æ·±å…¥ç†è§£å¤§æ•°æ®ä¹‹â€”â€”Lambdaæ¶æ„","text":"ä¼ ç»Ÿç³»ç»Ÿçš„é—®é¢˜ \"æˆ‘ä»¬æ­£åœ¨ä»ITæ—¶ä»£èµ°å‘DTæ—¶ä»£(æ•°æ®æ—¶ä»£)ã€‚ITå’ŒDTä¹‹é—´ï¼Œä¸ä»…ä»…æ˜¯æŠ€æœ¯çš„å˜é©ï¼Œæ›´æ˜¯æ€æƒ³æ„è¯†çš„å˜é©ï¼ŒITä¸»è¦æ˜¯ä¸ºè‡ªæˆ‘æœåŠ¡ï¼Œç”¨æ¥æ›´å¥½åœ°è‡ªæˆ‘æ§åˆ¶å’Œç®¡ç†ï¼ŒDTåˆ™æ˜¯æ¿€æ´»ç”Ÿäº§åŠ›ï¼Œè®©åˆ«äººæ´»å¾—æ¯”ä½ å¥½\" â€”â€”é˜¿é‡Œå·´å·´è‘£äº‹å±€ä¸»å¸­é©¬äº‘ã€‚ æ•°æ®é‡ä»Mçš„çº§åˆ«åˆ°Gçš„çº§åˆ«åˆ°ç°åœ¨Tçš„çº§ã€Pçš„çº§åˆ«ã€‚æ•°æ®é‡çš„å˜åŒ–æ•°æ®ç®¡ç†ç³»ç»Ÿï¼ˆDBMSï¼‰å’Œæ•°ä»“ç³»ç»Ÿï¼ˆDWï¼‰ä¹Ÿåœ¨æ‚„ç„¶çš„å˜åŒ–ç€ã€‚ ä¼ ç»Ÿåº”ç”¨çš„æ•°æ®ç³»ç»Ÿæ¶æ„è®¾è®¡æ—¶ï¼Œåº”ç”¨ç›´æ¥è®¿é—®æ•°æ®åº“ç³»ç»Ÿã€‚å½“ç”¨æˆ·è®¿é—®é‡å¢åŠ æ—¶ï¼Œæ•°æ®åº“æ— æ³•æ”¯æ’‘æ—¥ç›Šå¢é•¿çš„ç”¨æˆ·è¯·æ±‚çš„è´Ÿè½½æ—¶ï¼Œä»è€Œå¯¼è‡´æ•°æ®åº“æœåŠ¡å™¨æ— æ³•åŠæ—¶å“åº”ç”¨æˆ·è¯·æ±‚ï¼Œå‡ºç°è¶…æ—¶çš„é”™è¯¯ã€‚å‡ºç°è¿™ç§æƒ…å†µä»¥åï¼Œåœ¨ç³»ç»Ÿæ¶æ„ä¸Šå°±é‡‡ç”¨ä¸‹å›¾çš„æ¶æ„ï¼Œåœ¨æ•°æ®åº“å’Œåº”ç”¨ä¸­é—´è¿‡ä¸€å±‚ç¼“å†²éš”ç¦»ï¼Œç¼“è§£æ•°æ®åº“çš„è¯»å†™å‹åŠ›ã€‚ ç„¶è€Œï¼Œå½“ç”¨æˆ·è®¿é—®é‡æŒç»­å¢åŠ æ—¶ï¼Œå°±éœ€è¦è€ƒè™‘è¯»å†™åˆ†ç¦»æŠ€æœ¯ï¼ˆMasterï¼Slaveï¼‰æ¶æ„åˆ™å¦‚ä¸‹å›¾ï¼Œåˆ†åº“åˆ†è¡¨æŠ€æœ¯ã€‚ç°åœ¨ï¼Œæ¶æ„å˜å¾—è¶Šæ¥è¶Šå¤æ‚äº†ï¼Œå¢åŠ é˜Ÿåˆ—ã€åˆ†åŒºã€å¤åˆ¶ç­‰å¤„ç†é€»è¾‘ã€‚åº”ç”¨ç¨‹åºéœ€è¦äº†è§£æ•°æ®åº“çš„schemaï¼Œæ‰èƒ½è®¿é—®åˆ°æ­£ç¡®çš„æ•°æ®ã€‚ å•†ä¸šç°å®å·²ç»å‘ç”Ÿäº†å˜åŒ–ï¼Œæ‰€ä»¥ç°åœ¨æ›´å¿«åšå‡ºçš„å†³å®šæ›´æœ‰ä»·å€¼ã€‚é™¤æ­¤ä¹‹å¤–ï¼ŒæŠ€æœ¯ä¹Ÿåœ¨ä¸æ–­å‘å±•ã€‚Kafkaï¼ŒStormï¼ŒTridentï¼ŒSamzaï¼ŒSparkï¼ŒFlinkï¼ŒParquetï¼ŒAvroï¼ŒCloud providersç­‰éƒ½æ˜¯å·¥ç¨‹å¸ˆå’Œä¼ä¸šå¹¿æ³›é‡‡ç”¨çš„æµè¡Œè¯­ã€‚å› æ­¤ï¼Œç°ä»£åŸºäºHadoopçš„M/Rç®¡é“ï¼ˆä½¿ç”¨Kafkaï¼ŒAvroå’Œæ•°æ®ä»“åº“ç­‰ç°ä»£äºŒè¿›åˆ¶æ ¼å¼ï¼Œå³Amazon Redshiftï¼Œç”¨äºä¸´æ—¶æŸ¥è¯¢ï¼‰å¯èƒ½é‡‡ç”¨ä»¥ä¸‹æ–¹å¼ï¼š è¿™çœ‹èµ·æ¥ç›¸å½“ä¸é”™ï¼Œä½†å®ƒä»ç„¶æ˜¯ä¸€ç§ä¼ ç»Ÿçš„æ‰¹å¤„ç†æ–¹å¼ï¼Œå…·æœ‰æ‰€æœ‰å·²çŸ¥çš„ç¼ºç‚¹ï¼Œä¸»è¦åŸå› æ˜¯å®¢æˆ·ç«¯çš„æ•°æ®åœ¨æ‰¹å¤„ç†èŠ±è´¹å¤§é‡æ—¶é—´å®Œæˆä¹‹å‰çš„æ•°æ®å¤„ç†æ—¶ï¼Œæ–°çš„æ•°æ®å·²ç»è¿›å…¥è€Œå¯¼è‡´æ•°æ®è¿‡æ—¶ã€‚ Lambdaæ¶æ„ç®€ä»‹ å¯¹ä½æˆæœ¬è§„æ¨¡åŒ–çš„éœ€æ±‚ä¿ƒä½¿äººä»¬å¼€å§‹ä½¿ç”¨åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼Œä¾‹å¦‚ HDFSå’ŒåŸºäºæ‰¹é‡æ•°æ®çš„è®¡ç®—ç³»ç»Ÿï¼ˆMapReduce ä½œä¸šï¼‰ã€‚ä½†æ˜¯è¿™ç§ç³»ç»Ÿå¾ˆéš¾åšåˆ°ä½å»¶è¿Ÿã€‚ç”¨ Storm å¼€å‘çš„å®æ—¶æµå¤„ç†æŠ€æœ¯å¯ä»¥å¸®åŠ©è§£å†³å»¶è¿Ÿæ€§çš„é—®é¢˜ï¼Œä½†å¹¶ä¸å®Œç¾ã€‚å…¶ä¸­çš„ä¸€ä¸ªåŸå› æ˜¯ï¼ŒStorm ä¸æ”¯æŒ exactly-once è¯­ä¹‰ï¼Œå› æ­¤ä¸èƒ½ä¿è¯çŠ¶æ€æ•°æ®çš„æ­£ç¡®æ€§ï¼Œå¦å¤–å®ƒä¹Ÿä¸æ”¯æŒåŸºäºäº‹ä»¶æ—¶é—´çš„å¤„ç†ã€‚æœ‰ä»¥ä¸Šéœ€æ±‚çš„ç”¨æˆ·ä¸å¾—ä¸åœ¨è‡ªå·±çš„åº”ç”¨ç¨‹åºä»£ç ä¸­åŠ å…¥è¿™äº›åŠŸèƒ½ã€‚åæ¥å‡ºç°äº†ä¸€ç§æ··åˆåˆ†æçš„æ–¹æ³•ï¼Œå®ƒå°†ä¸Šè¿°ä¸¤ä¸ªæ–¹æ¡ˆç»“åˆèµ·æ¥ï¼Œæ—¢ä¿è¯ä½å»¶è¿Ÿï¼Œåˆä¿éšœæ­£ç¡®æ€§ã€‚è¿™ä¸ªæ–¹æ³•è¢«ç§°ä½œ Lambda æ¶æ„ï¼Œå®ƒé€šè¿‡æ‰¹é‡ MapReduceä½œä¸šæä¾›äº†è™½æœ‰äº›å»¶è¿Ÿä½†æ˜¯ç»“æœå‡†ç¡®çš„è®¡ç®—ï¼ŒåŒæ—¶é€šè¿‡Stormå°†æœ€æ–°æ•°æ®çš„è®¡ç®—ç»“æœåˆæ­¥å±•ç¤ºå‡ºæ¥ã€‚ Lambdaæ¶æ„æ˜¯ç”±Stormçš„ä½œè€…Nathan Marzæå‡ºçš„ä¸€ä¸ªå®æ—¶å¤§æ•°æ®å¤„ç†æ¡†æ¶ã€‚Marzåœ¨Twitterå·¥ä½œæœŸé—´å¼€å‘äº†è‘—åçš„å®æ—¶å¤§æ•°æ®å¤„ç†æ¡†æ¶Stormï¼ŒLambdaæ¶æ„æ˜¯å…¶æ ¹æ®å¤šå¹´è¿›è¡Œåˆ†å¸ƒå¼å¤§æ•°æ®ç³»ç»Ÿçš„ç»éªŒæ€»ç»“æç‚¼è€Œæˆã€‚Lambdaæ¶æ„çš„ç›®æ ‡æ˜¯è®¾è®¡å‡ºä¸€ä¸ªèƒ½æ»¡è¶³å®æ—¶å¤§æ•°æ®ç³»ç»Ÿå…³é”®ç‰¹æ€§çš„æ¶æ„ï¼ŒåŒ…æ‹¬æœ‰ï¼šé«˜å®¹é”™ã€ä½å»¶æ—¶å’Œå¯æ‰©å±•ç­‰ã€‚Lambdaæ¶æ„æ•´åˆç¦»çº¿è®¡ç®—å’Œå®æ—¶è®¡ç®—ï¼Œèåˆä¸å¯å˜æ€§ï¼ˆImmunabilityï¼‰ï¼Œè¯»å†™åˆ†ç¦»å’Œå¤æ‚æ€§éš”ç¦»ç­‰ä¸€ç³»åˆ—æ¶æ„åŸåˆ™ï¼Œå¯é›†æˆHadoopï¼ŒKafkaï¼ŒStormï¼ŒSparkï¼ŒHbaseç­‰å„ç±»å¤§æ•°æ®ç»„ä»¶ã€‚ Lambdaæ¶æ„å…³é”®ç‰¹æ€§ Marzè®¤ä¸ºå¤§æ•°æ®ç³»ç»Ÿåº”å…·æœ‰ä»¥ä¸‹çš„å…³é”®ç‰¹æ€§ï¼š Robust and fault-tolerantï¼ˆå®¹é”™æ€§å’Œé²æ£’æ€§ï¼‰ï¼šå¯¹å¤§è§„æ¨¡åˆ†å¸ƒå¼ç³»ç»Ÿæ¥è¯´ï¼Œæœºå™¨æ˜¯ä¸å¯é çš„ï¼Œå¯èƒ½ä¼šå½“æœºï¼Œä½†æ˜¯ç³»ç»Ÿéœ€è¦æ˜¯å¥å£®ã€è¡Œä¸ºæ­£ç¡®çš„ï¼Œå³ä½¿æ˜¯é‡åˆ°æœºå™¨é”™è¯¯ã€‚é™¤äº†æœºå™¨é”™è¯¯ï¼Œäººæ›´å¯èƒ½ä¼šçŠ¯é”™è¯¯ã€‚åœ¨è½¯ä»¶å¼€å‘ä¸­éš¾å…ä¼šæœ‰ä¸€äº›Bugï¼Œç³»ç»Ÿå¿…é¡»å¯¹æœ‰Bugçš„ç¨‹åºå†™å…¥çš„é”™è¯¯æ•°æ®æœ‰è¶³å¤Ÿçš„é€‚åº”èƒ½åŠ›ï¼Œæ‰€ä»¥æ¯”æœºå™¨å®¹é”™æ€§æ›´åŠ é‡è¦çš„å®¹é”™æ€§æ˜¯äººä¸ºæ“ä½œå®¹é”™æ€§ã€‚å¯¹äºå¤§è§„æ¨¡çš„åˆ†å¸ƒå¼ç³»ç»Ÿæ¥è¯´ï¼Œäººå’Œæœºå™¨çš„é”™è¯¯æ¯å¤©éƒ½å¯èƒ½ä¼šå‘ç”Ÿï¼Œå¦‚ä½•åº”å¯¹äººå’Œæœºå™¨çš„é”™è¯¯ï¼Œè®©ç³»ç»Ÿèƒ½å¤Ÿä»é”™è¯¯ä¸­å¿«é€Ÿæ¢å¤å°¤å…¶é‡è¦ã€‚ Low latency reads and updatesï¼ˆä½å»¶æ—¶ï¼‰ï¼šå¾ˆå¤šåº”ç”¨å¯¹äºè¯»å’Œå†™æ“ä½œçš„å»¶æ—¶è¦æ±‚éå¸¸é«˜ï¼Œè¦æ±‚å¯¹æ›´æ–°å’ŒæŸ¥è¯¢çš„å“åº”æ˜¯ä½å»¶æ—¶çš„ã€‚ Scalableï¼ˆæ¨ªå‘æ‰©å®¹ï¼‰ï¼šå½“æ•°æ®é‡/è´Ÿè½½å¢å¤§æ—¶ï¼Œå¯æ‰©å±•æ€§çš„ç³»ç»Ÿé€šè¿‡å¢åŠ æ›´å¤šçš„æœºå™¨èµ„æºæ¥ç»´æŒæ€§èƒ½ã€‚ä¹Ÿå°±æ˜¯å¸¸è¯´çš„ç³»ç»Ÿéœ€è¦çº¿æ€§å¯æ‰©å±•ï¼Œé€šå¸¸é‡‡ç”¨scale outï¼ˆé€šè¿‡å¢åŠ æœºå™¨çš„ä¸ªæ•°ï¼‰è€Œä¸æ˜¯scale upï¼ˆé€šè¿‡å¢å¼ºæœºå™¨çš„æ€§èƒ½ï¼‰ã€‚ Generalï¼ˆé€šç”¨æ€§ï¼‰ï¼šç³»ç»Ÿéœ€è¦èƒ½å¤Ÿé€‚åº”å¹¿æ³›çš„åº”ç”¨ï¼ŒåŒ…æ‹¬é‡‘èé¢†åŸŸã€ç¤¾äº¤ç½‘ç»œã€ç”µå­å•†åŠ¡æ•°æ®åˆ†æç­‰ã€‚ Extensibleï¼ˆå¯æ‰©å±•ï¼‰ï¼šéœ€è¦å¢åŠ æ–°åŠŸèƒ½ã€æ–°ç‰¹æ€§æ—¶ï¼Œå¯æ‰©å±•çš„ç³»ç»Ÿèƒ½ä»¥æœ€å°çš„å¼€å‘ä»£ä»·æ¥å¢åŠ æ–°åŠŸèƒ½ã€‚ Allows ad hoc queriesï¼ˆæ–¹ä¾¿æŸ¥è¯¢ï¼‰ï¼šæ•°æ®ä¸­è•´å«æœ‰ä»·å€¼ï¼Œéœ€è¦èƒ½å¤Ÿæ–¹ä¾¿ã€å¿«é€Ÿçš„æŸ¥è¯¢å‡ºæ‰€éœ€è¦çš„æ•°æ®ã€‚ Minimal maintenanceï¼ˆæ˜“äºç»´æŠ¤ï¼‰ï¼šç³»ç»Ÿè¦æƒ³åšåˆ°æ˜“äºç»´æŠ¤ï¼Œå…¶å…³é”®æ˜¯æ§åˆ¶å…¶å¤æ‚æ€§ï¼Œè¶Šæ˜¯å¤æ‚çš„ç³»ç»Ÿè¶Šå®¹æ˜“å‡ºé”™ã€è¶Šéš¾ç»´æŠ¤ã€‚ Debuggableï¼ˆæ˜“è°ƒè¯•ï¼‰ï¼šå½“å‡ºé—®é¢˜æ—¶ï¼Œç³»ç»Ÿéœ€è¦æœ‰è¶³å¤Ÿçš„ä¿¡æ¯æ¥è°ƒè¯•é”™è¯¯ï¼Œæ‰¾åˆ°é—®é¢˜çš„æ ¹æºã€‚å…¶å…³é”®æ˜¯èƒ½å¤Ÿè¿½æ ¹æº¯æºåˆ°æ¯ä¸ªæ•°æ®ç”Ÿæˆç‚¹ã€‚ æ•°æ®ç³»ç»Ÿçš„æœ¬è´¨ ä¸ºäº†è®¾è®¡å‡ºèƒ½æ»¡è¶³å‰è¿°çš„å¤§æ•°æ®å…³é”®ç‰¹æ€§çš„ç³»ç»Ÿï¼Œæˆ‘ä»¬éœ€è¦å¯¹æ•°æ®ç³»ç»Ÿæœ‰æœ¬è´¨æ€§çš„ç†è§£ã€‚æˆ‘ä»¬å¯å°†æ•°æ®ç³»ç»Ÿç®€åŒ–ä¸ºï¼š æ•°æ®ç³»ç»Ÿ = æ•°æ® + æŸ¥è¯¢ ä»è€Œä»æ•°æ®å’ŒæŸ¥è¯¢ä¸¤æ–¹é¢æ¥è®¤è¯†å¤§æ•°æ®ç³»ç»Ÿçš„æœ¬è´¨ã€‚ æ•°æ®çš„ç‰¹æ€§ï¼š when & what æˆ‘ä»¬å…ˆä»\"æ•°æ®\"çš„ç‰¹æ€§è°ˆèµ·ã€‚æ•°æ®æ˜¯ä¸€ä¸ªä¸å¯åˆ†å‰²çš„å•ä½ï¼Œæ•°æ®æœ‰ä¸¤ä¸ªå…³é”®çš„æ€§è´¨ï¼šWhenå’ŒWhatã€‚ When æ˜¯æŒ‡æ•°æ®æ˜¯ä¸æ—¶é—´ç›¸å…³çš„ï¼Œæ•°æ®ä¸€å®šæ˜¯åœ¨æŸä¸ªæ—¶é—´ç‚¹äº§ç”Ÿçš„ã€‚æ¯”å¦‚Logæ—¥å¿—å°±éšå«ç€æŒ‰ç…§æ—¶é—´å…ˆåé¡ºåºäº§ç”Ÿçš„æ•°æ®ï¼ŒLogå‰é¢çš„æ—¥å¿—æ•°æ®ä¸€å®šå…ˆäºLogåé¢çš„æ—¥å¿—æ•°æ®äº§ç”Ÿï¼›æ¶ˆæ¯ç³»ç»Ÿä¸­æ¶ˆæ¯çš„æ¥å—è€…ä¸€å®šæ˜¯åœ¨æ¶ˆæ¯çš„å‘é€è€…å‘é€æ¶ˆæ¯åæ¥æ”¶åˆ°çš„æ¶ˆæ¯ã€‚ç›¸æ¯”äºæ•°æ®åº“ï¼Œæ•°æ®åº“ä¸­è¡¨çš„è®°å½•å°±ä¸¢å¤±äº†æ—¶é—´å…ˆåé¡ºåºçš„ä¿¡æ¯ï¼Œä¸­é—´æŸæ¡è®°å½•å¯èƒ½æ˜¯åœ¨æœ€åä¸€æ¡è®°å½•äº§ç”Ÿåå‘ç”Ÿæ›´æ–°çš„ã€‚å¯¹äºåˆ†å¸ƒå¼ç³»ç»Ÿï¼Œæ•°æ®çš„æ—¶é—´ç‰¹æ€§å°¤å…¶é‡è¦ã€‚åˆ†å¸ƒå¼ç³»ç»Ÿä¸­æ•°æ®å¯èƒ½äº§ç”Ÿäºä¸åŒçš„ç³»ç»Ÿä¸­ï¼Œæ—¶é—´å†³å®šäº†æ•°æ®å‘ç”Ÿçš„å…¨å±€å…ˆåé¡ºåºã€‚æ¯”å¦‚å¯¹ä¸€ä¸ªå€¼åšç®—æœ¯è¿ç®—ï¼Œå…ˆ+2ï¼Œå 3ï¼Œä¸å…ˆ 3ï¼Œå+2ï¼Œå¾—åˆ°çš„ç»“æœå®Œå…¨ä¸åŒã€‚æ•°æ®çš„æ—¶é—´æ€§è´¨å†³å®šäº†æ•°æ®çš„å…¨å±€å‘ç”Ÿå…ˆåï¼Œä¹Ÿå°±å†³å®šäº†æ•°æ®çš„ç»“æœã€‚ What æ˜¯æŒ‡æ•°æ®çš„æœ¬èº«ã€‚ç”±äºæ•°æ®è·ŸæŸä¸ªæ—¶é—´ç‚¹ç›¸å…³ï¼Œæ‰€ä»¥æ•°æ®çš„æœ¬èº«æ˜¯ä¸å¯å˜çš„(immutable)ï¼Œè¿‡å¾€çš„æ•°æ®å·²ç»æˆä¸ºäº‹å®ï¼ˆFactï¼‰ï¼Œä½ ä¸å¯èƒ½å›åˆ°è¿‡å»çš„æŸä¸ªæ—¶é—´ç‚¹å»æ”¹å˜æ•°æ®äº‹å®ã€‚è¿™ä¹Ÿå°±æ„å‘³ç€å¯¹æ•°æ®çš„æ“ä½œå…¶å®åªæœ‰ä¸¤ç§ï¼šè¯»å–å·²å­˜åœ¨çš„æ•°æ®å’Œæ·»åŠ æ›´å¤šçš„æ–°æ•°æ®ã€‚é‡‡ç”¨æ•°æ®åº“çš„è®°æ³•ï¼ŒCRUDå°±å˜æˆäº†CRï¼ŒUpdateå’ŒDeleteæœ¬è´¨ä¸Šå…¶å®æ˜¯æ–°äº§ç”Ÿçš„æ•°æ®ä¿¡æ¯ï¼Œç”¨Cæ¥è®°å½•ã€‚ æ•°æ®çš„å­˜å‚¨ï¼šStore Everything Rawly and Immutably æ ¹æ®ä¸Šè¿°å¯¹æ•°æ®æœ¬è´¨ç‰¹æ€§çš„åˆ†æï¼ŒLambaæ¶æ„ä¸­å¯¹æ•°æ®çš„å­˜å‚¨é‡‡ç”¨çš„æ–¹å¼æ˜¯ï¼šæ•°æ®ä¸å¯å˜ï¼Œå­˜å‚¨æ‰€æœ‰æ•°æ®ã€‚ é€šè¿‡é‡‡ç”¨ä¸å¯å˜æ–¹å¼å­˜å‚¨æ‰€æœ‰çš„æ•°æ®ï¼Œå¯ä»¥æœ‰å¦‚ä¸‹å¥½å¤„ï¼š ç®€å•ã€‚é‡‡ç”¨ä¸å¯å˜çš„æ•°æ®æ¨¡å‹ï¼Œå­˜å‚¨æ•°æ®æ—¶åªéœ€è¦ç®€å•çš„å¾€ä¸»æ•°æ®é›†åè¿½åŠ æ•°æ®å³å¯ã€‚ç›¸æ¯”äºé‡‡ç”¨å¯å˜çš„æ•°æ®æ¨¡å‹ï¼Œä¸ºäº†Updateæ“ä½œï¼Œæ•°æ®é€šå¸¸éœ€è¦è¢«ç´¢å¼•ï¼Œä»è€Œèƒ½å¿«é€Ÿæ‰¾åˆ°è¦æ›´æ–°çš„æ•°æ®å»åšæ›´æ–°æ“ä½œã€‚ åº”å¯¹äººä¸ºå’Œæœºå™¨çš„é”™è¯¯ã€‚å‰è¿°ä¸­æåˆ°äººå’Œæœºå™¨æ¯å¤©éƒ½å¯èƒ½ä¼šå‡ºé”™ï¼Œå¦‚ä½•åº”å¯¹äººå’Œæœºå™¨çš„é”™è¯¯ï¼Œè®©ç³»ç»Ÿèƒ½å¤Ÿä»é”™è¯¯ä¸­å¿«é€Ÿæ¢å¤æå…¶é‡è¦ã€‚ä¸å¯å˜æ€§ï¼ˆImmutabilityï¼‰å’Œé‡æ–°è®¡ç®—ï¼ˆRecomputationï¼‰åˆ™æ˜¯åº”å¯¹äººä¸ºå’Œæœºå™¨é”™è¯¯çš„å¸¸ç”¨æ–¹æ³•ã€‚é‡‡ç”¨å¯å˜æ•°æ®æ¨¡å‹ï¼Œå¼•å‘é”™è¯¯çš„æ•°æ®æœ‰å¯èƒ½è¢«è¦†ç›–è€Œä¸¢å¤±ã€‚ç›¸æ¯”äºé‡‡ç”¨ä¸å¯å˜çš„æ•°æ®æ¨¡å‹ï¼Œå› ä¸ºæ‰€æœ‰çš„æ•°æ®éƒ½åœ¨ï¼Œå¼•å‘é”™è¯¯çš„æ•°æ®ä¹Ÿåœ¨ã€‚ä¿®å¤çš„æ–¹æ³•å°±å¯ä»¥ç®€å•çš„æ˜¯éå†æ•°æ®é›†ä¸Šå­˜å‚¨çš„æ‰€æœ‰çš„æ•°æ®ï¼Œä¸¢å¼ƒé”™è¯¯çš„æ•°æ®ï¼Œé‡æ–°è®¡ç®—å¾—åˆ°Viewsã€‚é‡æ–°è®¡ç®—çš„å…³é”®ç‚¹åœ¨äºåˆ©ç”¨æ•°æ®çš„æ—¶é—´ç‰¹æ€§å†³å®šçš„å…¨å±€æ¬¡åºï¼Œä¾æ¬¡é¡ºåºé‡æ–°æ‰§è¡Œï¼Œå¿…ç„¶èƒ½å¾—åˆ°æ­£ç¡®çš„ç»“æœã€‚ å½“å‰ä¸šç•Œæœ‰å¾ˆå¤šé‡‡ç”¨ä¸å¯å˜æ•°æ®æ¨¡å‹æ¥å­˜å‚¨æ‰€æœ‰æ•°æ®çš„ä¾‹å­ã€‚æ¯”å¦‚åˆ†å¸ƒå¼æ•°æ®åº“Datomicï¼ŒåŸºäºä¸å¯å˜æ•°æ®æ¨¡å‹æ¥å­˜å‚¨æ•°æ®ï¼Œä»è€Œç®€åŒ–äº†è®¾è®¡ã€‚åˆ†å¸ƒå¼æ¶ˆæ¯ä¸­é—´ä»¶Kafkaï¼ŒåŸºäºLogæ—¥å¿—ï¼Œä»¥è¿½åŠ append-onlyçš„æ–¹å¼æ¥å­˜å‚¨æ¶ˆæ¯ã€‚ æŸ¥è¯¢çš„æœ¬è´¨ æŸ¥è¯¢æ˜¯ä¸ªä»€ä¹ˆæ¦‚å¿µï¼ŸMarzç»™æŸ¥è¯¢å¦‚ä¸‹ä¸€ä¸ªç®€å•çš„å®šä¹‰ï¼š Query = Function(All Data) è¯¥ç­‰å¼çš„å«ä¹‰æ˜¯ï¼šæŸ¥è¯¢æ˜¯åº”ç”¨äºæ•°æ®é›†ä¸Šçš„å‡½æ•°ã€‚è¯¥å®šä¹‰çœ‹ä¼¼ç®€å•ï¼Œå´å‡ ä¹å›Šæ‹¬äº†æ•°æ®åº“å’Œæ•°æ®ç³»ç»Ÿçš„æ‰€æœ‰é¢†åŸŸï¼šRDBMSã€ç´¢å¼•ã€OLAPã€OLTPã€MapReduceã€EFLã€åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿã€NoSQLç­‰éƒ½å¯ä»¥ç”¨è¿™ä¸ªç­‰å¼æ¥è¡¨ç¤ºã€‚ è®©æˆ‘ä»¬è¿›ä¸€æ­¥æ·±å…¥çœ‹ä¸€ä¸‹å‡½æ•°çš„ç‰¹æ€§ï¼Œä»è€ŒæŒ–æ˜å‡½æ•°è‡ªèº«çš„ç‰¹ç‚¹æ¥æ‰§è¡ŒæŸ¥è¯¢ã€‚ æœ‰ä¸€ç±»ç§°ä¸ºMonoidç‰¹æ€§çš„å‡½æ•°åº”ç”¨éå¸¸å¹¿æ³›ã€‚Monoidçš„æ¦‚å¿µæ¥æºäºèŒƒç•´å­¦ï¼ˆCategory Theoryï¼‰ï¼Œå…¶ä¸€ä¸ªé‡è¦ç‰¹æ€§æ˜¯æ»¡è¶³ç»“åˆå¾‹ã€‚å¦‚æ•´æ•°çš„åŠ æ³•å°±æ»¡è¶³Monoidç‰¹æ€§ï¼š (a+b)+c=a+(b+c) ä¸æ»¡è¶³Monoidç‰¹æ€§çš„å‡½æ•°å¾ˆå¤šæ—¶å€™å¯ä»¥è½¬åŒ–æˆå¤šä¸ªæ»¡è¶³Monoidç‰¹æ€§çš„å‡½æ•°çš„è¿ç®—ã€‚å¦‚å¤šä¸ªæ•°çš„å¹³å‡å€¼Avgå‡½æ•°ï¼Œå¤šä¸ªå¹³å‡å€¼æ²¡æ³•ç›´æ¥é€šè¿‡ç»“åˆæ¥å¾—åˆ°æœ€ç»ˆçš„å¹³å‡å€¼ï¼Œä½†æ˜¯å¯ä»¥æ‹†æˆåˆ†æ¯é™¤ä»¥åˆ†å­ï¼Œåˆ†æ¯å’Œåˆ†å­éƒ½æ˜¯æ•´æ•°çš„åŠ æ³•ï¼Œä»è€Œæ»¡è¶³Monoidç‰¹æ€§ã€‚ Monoidçš„ç»“åˆå¾‹ç‰¹æ€§åœ¨åˆ†å¸ƒå¼è®¡ç®—ä¸­æå…¶é‡è¦ï¼Œæ»¡è¶³Monoidç‰¹æ€§æ„å‘³ç€æˆ‘ä»¬å¯ä»¥å°†è®¡ç®—åˆ†è§£åˆ°å¤šå°æœºå™¨å¹¶è¡Œè¿ç®—ï¼Œç„¶åå†ç»“åˆå„è‡ªçš„éƒ¨åˆ†è¿ç®—ç»“æœå¾—åˆ°æœ€ç»ˆç»“æœã€‚åŒæ—¶ä¹Ÿæ„å‘³ç€éƒ¨åˆ†è¿ç®—ç»“æœå¯ä»¥å‚¨å­˜ä¸‹æ¥è¢«åˆ«çš„è¿ç®—å…±äº«åˆ©ç”¨ï¼ˆå¦‚æœè¯¥è¿ç®—ä¹ŸåŒ…å«ç›¸åŒçš„éƒ¨åˆ†å­è¿ç®—ï¼‰ï¼Œä»è€Œå‡å°‘é‡å¤è¿ç®—çš„å·¥ä½œé‡ã€‚ Lambdaçš„ä¸‰å±‚æ¶æ„ æœ‰äº†ä¸Šé¢å¯¹æ•°æ®ç³»ç»Ÿæœ¬è´¨çš„æ¢è®¨ï¼Œä¸‹é¢æˆ‘ä»¬æ¥è®¨è®ºå¤§æ•°æ®ç³»ç»Ÿçš„å…³é”®é—®é¢˜ï¼šå¦‚ä½•å®æ—¶åœ°åœ¨ä»»æ„å¤§æ•°æ®é›†ä¸Šè¿›è¡ŒæŸ¥è¯¢ï¼Ÿå¤§æ•°æ®å†åŠ ä¸Šå®æ—¶è®¡ç®—ï¼Œé—®é¢˜çš„éš¾åº¦æ¯”è¾ƒå¤§ã€‚ æœ€ç®€å•çš„æ–¹æ³•æ˜¯ï¼Œæ ¹æ®å‰è¿°çš„æŸ¥è¯¢ç­‰å¼ Query = Function(All Data) ï¼Œåœ¨å…¨ä½“æ•°æ®é›†ä¸Šåœ¨çº¿è¿è¡ŒæŸ¥è¯¢å‡½æ•°å¾—åˆ°ç»“æœã€‚ä½†å¦‚æœæ•°æ®é‡æ¯”è¾ƒå¤§ï¼Œè¯¥æ–¹æ³•çš„è®¡ç®—ä»£ä»·å¤ªå¤§äº†ï¼Œæ‰€ä»¥ä¸ç°å®ã€‚ Lambdaæ¶æ„é€šè¿‡åˆ†è§£çš„ä¸‰å±‚æ¶æ„æ¥è§£å†³è¯¥é—®é¢˜ï¼šBatch Layerï¼ŒSpeed Layerå’ŒServing Layerã€‚ Batch Layer ç†æƒ³çŠ¶æ€ä¸‹ï¼Œä»»ä½•æ•°æ®è®¿é—®éƒ½å¯ä»¥ä»è¡¨è¾¾å¼Query= function(all data)å¼€å§‹ï¼Œä½†æ˜¯ï¼Œè‹¥æ•°æ®è¾¾åˆ°ç›¸å½“å¤§çš„ä¸€ä¸ªçº§åˆ«ï¼ˆä¾‹å¦‚PBï¼‰ï¼Œä¸”è¿˜éœ€è¦æ”¯æŒå®æ—¶æŸ¥è¯¢æ—¶ï¼Œå°±éœ€è¦è€—è´¹éå¸¸åºå¤§çš„èµ„æºã€‚ä¸€ä¸ªè§£å†³æ–¹å¼æ˜¯é¢„è¿ç®—æŸ¥è¯¢å‡½æ•°ï¼ˆprecomputed query functionï¼‰ã€‚ä¹¦ä¸­å°†è¿™ç§é¢„è¿ç®—æŸ¥è¯¢å‡½æ•°ç§°ä¹‹ä¸ºBatch Viewï¼ˆAï¼‰ï¼Œè¿™æ ·å½“éœ€è¦æ‰§è¡ŒæŸ¥è¯¢æ—¶ï¼Œå¯ä»¥ä»Batch Viewä¸­è¯»å–ç»“æœã€‚è¿™æ ·ä¸€ä¸ªé¢„å…ˆè¿ç®—å¥½çš„Viewæ˜¯å¯ä»¥å»ºç«‹ç´¢å¼•çš„ï¼Œå› è€Œå¯ä»¥æ”¯æŒéšæœºè¯»å–ï¼ˆBï¼‰ã€‚äºæ˜¯ç³»ç»Ÿå°±å˜æˆï¼š ï¼ˆAï¼‰batch view = function(all data) ï¼ˆBï¼‰query = function(batch view) åœ¨Lambdaæ¶æ„ä¸­ï¼Œå®ç°ï¼ˆAï¼‰batch view =function(all data)çš„éƒ¨åˆ†ç§°ä¹‹ä¸ºBatch Layerã€‚Batch Layerçš„åŠŸèƒ½ä¸»è¦æœ‰ä¸¤ç‚¹ï¼š å­˜å‚¨master dataset, è¿™æ˜¯ä¸€ä¸ªä¸å˜çš„æŒç»­å¢é•¿çš„æ•°æ®é›† åœ¨master datasetä¸Šé¢„å…ˆè®¡ç®—æŸ¥è¯¢å‡½æ•°ï¼Œæ„å»ºæŸ¥è¯¢æ‰€å¯¹åº”çš„View å­˜å‚¨æ•°æ®é›† æ ¹æ®å‰è¿°å¯¹æ•°æ®When&Whatç‰¹æ€§çš„è®¨è®ºï¼ŒBatch Layeré‡‡ç”¨ä¸å¯å˜æ¨¡å‹å­˜å‚¨æ‰€æœ‰çš„æ•°æ®ã€‚å› ä¸ºæ•°æ®é‡æ¯”è¾ƒå¤§ï¼Œå¯ä»¥é‡‡ç”¨HDFSä¹‹ç±»çš„å¤§æ•°æ®å‚¨å­˜æ–¹æ¡ˆã€‚å¦‚æœéœ€è¦æŒ‰ç…§æ•°æ®äº§ç”Ÿçš„æ—¶é—´å…ˆåé¡ºåºå­˜æ”¾æ•°æ®ï¼Œå¯ä»¥è€ƒè™‘å¦‚InfluxDBä¹‹ç±»çš„æ—¶é—´åºåˆ—æ•°æ®åº“ï¼ˆTSDBï¼‰å­˜å‚¨æ–¹æ¡ˆã€‚ æ„å»ºæŸ¥è¯¢View ä¸Šé¢è¯´åˆ°æ ¹æ®ç­‰å¼Query = Function(All Data)ï¼Œåœ¨å…¨ä½“æ•°æ®é›†ä¸Šåœ¨çº¿è¿è¡ŒæŸ¥è¯¢å‡½æ•°å¾—åˆ°ç»“æœçš„ä»£ä»·å¤ªå¤§ã€‚ä½†å¦‚æœæˆ‘ä»¬é¢„å…ˆåœ¨æ•°æ®é›†ä¸Šè®¡ç®—å¹¶ä¿å­˜æŸ¥è¯¢å‡½æ•°çš„ç»“æœï¼ŒæŸ¥è¯¢çš„æ—¶å€™å°±å¯ä»¥ç›´æ¥è¿”å›ç»“æœï¼ˆæˆ–é€šè¿‡ç®€å•çš„åŠ å·¥è¿ç®—å°±å¯å¾—åˆ°ç»“æœï¼‰è€Œæ— éœ€é‡æ–°è¿›è¡Œå®Œæ•´è´¹æ—¶çš„è®¡ç®—äº†ã€‚è¿™å„¿å¯ä»¥æŠŠBatch Layerçœ‹æˆæ˜¯ä¸€ä¸ªæ•°æ®é¢„å¤„ç†çš„è¿‡ç¨‹ã€‚æˆ‘ä»¬æŠŠé’ˆå¯¹æŸ¥è¯¢é¢„å…ˆè®¡ç®—å¹¶ä¿å­˜çš„ç»“æœç§°ä¸ºViewï¼ŒViewæ˜¯Lambdaæ¶æ„çš„ä¸€ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼Œå®ƒæ˜¯é’ˆå¯¹æŸ¥è¯¢çš„ä¼˜åŒ–ï¼Œé€šè¿‡Viewå³å¯ä»¥å¿«é€Ÿå¾—åˆ°æŸ¥è¯¢ç»“æœã€‚ æ˜¾ç„¶ï¼Œbatch viewæ˜¯ä¸€ä¸ªæ‰¹å¤„ç†è¿‡ç¨‹ï¼Œå¦‚é‡‡ç”¨Hadoopæˆ–sparkæ”¯æŒçš„mapï¼reduceæ–¹å¼ã€‚é‡‡ç”¨è¿™ç§æ–¹å¼è®¡ç®—å¾—åˆ°çš„æ¯ä¸ªviewéƒ½æ”¯æŒå†æ¬¡è®¡ç®—ï¼Œä¸”æ¯æ¬¡è®¡ç®—çš„ç»“æœéƒ½ç›¸åŒã€‚Batch Layerçš„å·¥ä½œå¯ä»¥ç®€å•çš„ç”¨å¦‚ä¸‹ä¼ªç è¡¨ç¤ºï¼š è¯¥å·¥ä½œçœ‹ä¼¼ç®€å•ï¼Œå®è´¨éå¸¸å¼ºå¤§ã€‚ä»»ä½•äººä¸ºæˆ–æœºå™¨å‘ç”Ÿçš„é”™è¯¯ï¼Œéƒ½å¯ä»¥é€šè¿‡ä¿®æ­£é”™è¯¯åé‡æ–°è®¡ç®—æ¥æ¢å¤å¾—åˆ°æ­£ç¡®ç»“æœã€‚ å¯¹Viewçš„ç†è§£ Viewæ˜¯ä¸€ä¸ªå’Œä¸šåŠ¡å…³è”æ€§æ¯”è¾ƒå¤§çš„æ¦‚å¿µï¼ŒViewçš„åˆ›å»ºéœ€è¦ä»ä¸šåŠ¡è‡ªèº«çš„éœ€æ±‚å‡ºå‘ã€‚ä¸€ä¸ªé€šç”¨çš„æ•°æ®åº“æŸ¥è¯¢ç³»ç»Ÿï¼ŒæŸ¥è¯¢å¯¹åº”çš„å‡½æ•°åƒå˜ä¸‡åŒ–ï¼Œä¸å¯èƒ½ç©·ä¸¾ã€‚ä½†æ˜¯å¦‚æœä»ä¸šåŠ¡è‡ªèº«çš„éœ€æ±‚å‡ºå‘ï¼Œå¯ä»¥å‘ç°ä¸šåŠ¡æ‰€éœ€è¦çš„æŸ¥è¯¢å¸¸å¸¸æ˜¯æœ‰é™çš„ã€‚Batch Layeréœ€è¦åšçš„ä¸€ä»¶é‡è¦çš„å·¥ä½œå°±æ˜¯æ ¹æ®ä¸šåŠ¡çš„éœ€æ±‚ï¼Œè€ƒå¯Ÿå¯èƒ½éœ€è¦çš„å„ç§æŸ¥è¯¢ï¼Œæ ¹æ®æŸ¥è¯¢å®šä¹‰å…¶åœ¨æ•°æ®é›†ä¸Šå¯¹åº”çš„Viewsã€‚ Batch Layerçš„Immutable dataæ¨¡å‹å’ŒViews å¦‚ä¸‹å›¾agent idï¼50023çš„äººï¼Œåœ¨10:00:06åˆ†çš„æ—¶å€™ï¼ŒçŠ¶æ€æ˜¯callingï¼Œåœ¨10:00:10çš„æ—¶å€™çŠ¶æ€ä¸ºwaitingã€‚åœ¨ä¼ ç»Ÿçš„æ•°æ®åº“è®¾è®¡ä¸­ï¼Œç›´æ¥åé¢çš„çºªå½•è¦†ç›–å‰é¢çš„çºªå½•ï¼Œè€Œåœ¨Immutableæ•°æ®æ¨¡å‹ä¸­ï¼Œä¸ä¼šå¯¹åŸæœ‰æ•°æ®è¿›è¡Œæ›´æ”¹ï¼Œè€Œæ˜¯é‡‡ç”¨æ’å…¥ä¿®æ”¹çºªå½•çš„å½¢å¼æ›´æ”¹å†å²çºªå½•ã€‚ ä¸Šæ–‡æ‰€æåŠçš„Viewæ˜¯ä¸Šå›¾ä¸­é¢„å…ˆè®¡ç®—å¾—åˆ°çš„ç›¸å…³è§†å›¾ï¼Œä¾‹å¦‚ï¼š 2016-06-21 å½“å¤©æ‰€æœ‰ä¸Šçº¿çš„agentæ•°ï¼Œæ¯æ¡çƒ­çº¿ã€å…¬å¸ä¸‹ä¸Šçº¿çš„Agentæ•°ã€‚æ ¹æ®ä¸šåŠ¡éœ€è¦ï¼Œé¢„å…ˆè®¡ç®—å‡ºç»“æœã€‚æ­¤è¿‡ç¨‹ç›¸å½“äºä¼ ç»Ÿæ•°ä»“å»ºæ¨¡çš„åº”ç”¨å±‚ï¼Œåº”ç”¨å±‚ä¹Ÿæ˜¯æ ¹æ®ä¸šåŠ¡åœºæ™¯ï¼Œé¢„å…ˆåŠ å·¥å‡ºçš„viewã€‚ Speed Layer Batch Layerå¯ä»¥å¾ˆå¥½çš„å¤„ç†ç¦»çº¿æ•°æ®ï¼Œä½†æœ‰å¾ˆå¤šåœºæ™¯æ•°æ®ä¸æ–­å®æ—¶ç”Ÿæˆï¼Œå¹¶ä¸”éœ€è¦å®æ—¶æŸ¥è¯¢å¤„ç†ã€‚Speed Layeræ­£æ˜¯ç”¨æ¥å¤„ç†å¢é‡çš„å®æ—¶æ•°æ®ã€‚ Speed Layerå’ŒBatch Layeræ¯”è¾ƒç±»ä¼¼ï¼Œå¯¹æ•°æ®è¿›è¡Œè®¡ç®—å¹¶ç”ŸæˆRealtime Viewï¼Œå…¶ä¸»è¦åŒºåˆ«åœ¨äºï¼š Speed Layerå¤„ç†çš„æ•°æ®æ˜¯æœ€è¿‘çš„å¢é‡æ•°æ®æµï¼ŒBatch Layerå¤„ç†çš„å…¨ä½“æ•°æ®é›† Speed Layerä¸ºäº†æ•ˆç‡ï¼Œæ¥æ”¶åˆ°æ–°æ•°æ®æ—¶ä¸æ–­æ›´æ–°Realtime Viewï¼Œè€ŒBatch Layeræ ¹æ®å…¨ä½“ç¦»çº¿æ•°æ®é›†ç›´æ¥å¾—åˆ°Batch Viewã€‚Speed Layeræ˜¯ä¸€ç§å¢é‡è®¡ç®—ï¼Œè€Œéé‡æ–°è®¡ç®—ï¼ˆrecomputationï¼‰ Speed Layerå› ä¸ºé‡‡ç”¨å¢é‡è®¡ç®—ï¼Œæ‰€ä»¥å»¶è¿Ÿå°ï¼Œè€ŒBatch Layeræ˜¯å…¨æ•°æ®é›†çš„è®¡ç®—ï¼Œè€—æ—¶æ¯”è¾ƒé•¿ ç»¼ä¸Šæ‰€è¯‰ï¼ŒSpeed Layeræ˜¯Batch Layeråœ¨å®æ—¶æ€§ä¸Šçš„ä¸€ä¸ªè¡¥å……ã€‚Speed Layerå¯æ€»ç»“ä¸ºï¼š ï¼ˆCï¼‰realtime viewï¼function(realtime viewï¼Œnew data) æ³¨æ„ï¼Œrealtime viewæ˜¯åŸºäºæ–°æ•°æ®å’Œå·²æœ‰çš„realtime viewã€‚ Lambdaæ¶æ„å°†æ•°æ®å¤„ç†åˆ†è§£ä¸ºBatch Layerå’ŒSpeed Layeræœ‰å¦‚ä¸‹ä¼˜ç‚¹ï¼š å®¹é”™æ€§ã€‚Speed Layerä¸­å¤„ç†çš„æ•°æ®ä¹Ÿä¸æ–­å†™å…¥Batch Layerï¼Œå½“Batch Layerä¸­é‡æ–°è®¡ç®—çš„æ•°æ®é›†åŒ…å«Speed Layerå¤„ç†çš„æ•°æ®é›†åï¼Œå½“å‰çš„Realtime Viewå°±å¯ä»¥ä¸¢å¼ƒï¼Œè¿™ä¹Ÿå°±æ„å‘³ç€Speed Layerå¤„ç†ä¸­å¼•å…¥çš„é”™è¯¯ï¼Œåœ¨Batch Layeré‡æ–°è®¡ç®—æ—¶éƒ½å¯ä»¥å¾—åˆ°ä¿®æ­£ã€‚è¿™ç‚¹ä¹Ÿå¯ä»¥çœ‹æˆæ˜¯CAPç†è®ºä¸­çš„æœ€ç»ˆä¸€è‡´æ€§ï¼ˆEventual Consistencyï¼‰çš„ä½“ç°ã€‚ å¤æ‚æ€§éš”ç¦»ã€‚Batch Layerå¤„ç†çš„æ˜¯ç¦»çº¿æ•°æ®ï¼Œå¯ä»¥å¾ˆå¥½çš„æŒæ§ã€‚Speed Layeré‡‡ç”¨å¢é‡ç®—æ³•å¤„ç†å®æ—¶æ•°æ®ï¼Œå¤æ‚æ€§æ¯”Batch Layerè¦é«˜å¾ˆå¤šã€‚é€šè¿‡åˆ†å¼€Batch Layerå’ŒSpeed Layerï¼ŒæŠŠå¤æ‚æ€§éš”ç¦»åˆ°Speed Layerï¼Œå¯ä»¥å¾ˆå¥½çš„æé«˜æ•´ä¸ªç³»ç»Ÿçš„é²æ£’æ€§å’Œå¯é æ€§ã€‚ å¦‚å‰æ‰€è¿°ï¼Œä»»ä½•ä¼ å…¥æŸ¥è¯¢éƒ½å¿…é¡»é€šè¿‡åˆå¹¶æ¥è‡ªæ‰¹é‡è§†å›¾å’Œå®æ—¶è§†å›¾çš„ç»“æœæ¥å¾—åˆ°ç­”æ¡ˆï¼Œå› æ­¤è¿™äº›è§†å›¾éœ€è¦æ»¡è¶³Monoidçš„ç»“åˆå¾‹ç‰¹æ€§ã€‚éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œå®æ—¶è§†å›¾æ˜¯ä»¥å‰çš„å®æ—¶è§†å›¾å’Œæ–°æ•°æ®å¢é‡çš„å‡½æ•°ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨å¢é‡ç®—æ³•ã€‚æ‰¹å¤„ç†è§†å›¾æ˜¯æ‰€æœ‰æ•°æ®çš„å‡½æ•°ï¼Œå› æ­¤åº”è¯¥åœ¨é‚£é‡Œä½¿ç”¨é‡ç®—ç®—æ³•ã€‚ Serving Layer Lambdaæ¶æ„çš„Serving Layerç”¨äºå“åº”ç”¨æˆ·çš„æŸ¥è¯¢è¯·æ±‚ï¼Œåˆå¹¶Batch Viewå’ŒRealtime Viewä¸­çš„ç»“æœæ•°æ®é›†åˆ°æœ€ç»ˆçš„æ•°æ®é›†ã€‚ è¿™å„¿æ¶‰åŠåˆ°æ•°æ®å¦‚ä½•åˆå¹¶çš„é—®é¢˜ã€‚å‰é¢æˆ‘ä»¬è®¨è®ºäº†æŸ¥è¯¢å‡½æ•°çš„Monoidæ€§è´¨ï¼Œå¦‚æœæŸ¥è¯¢å‡½æ•°æ»¡è¶³Monoidæ€§è´¨ï¼Œå³æ»¡è¶³ç»“åˆå¾‹ï¼Œåªéœ€è¦ç®€å•çš„åˆå¹¶Batch Viewå’ŒRealtime Viewä¸­çš„ç»“æœæ•°æ®é›†å³å¯ã€‚å¦åˆ™çš„è¯ï¼Œå¯ä»¥æŠŠæŸ¥è¯¢å‡½æ•°è½¬æ¢æˆå¤šä¸ªæ»¡è¶³Monoidæ€§è´¨çš„æŸ¥è¯¢å‡½æ•°çš„è¿ç®—ï¼Œå•ç‹¬å¯¹æ¯ä¸ªæ»¡è¶³Monoidæ€§è´¨çš„æŸ¥è¯¢å‡½æ•°è¿›è¡ŒBatch Viewå’ŒRealtime Viewä¸­çš„ç»“æœæ•°æ®é›†åˆå¹¶ï¼Œç„¶åå†è®¡ç®—å¾—åˆ°æœ€ç»ˆçš„ç»“æœæ•°æ®é›†ã€‚å¦å¤–ä¹Ÿå¯ä»¥æ ¹æ®ä¸šåŠ¡è‡ªèº«çš„ç‰¹æ€§ï¼Œè¿ç”¨ä¸šåŠ¡è‡ªèº«çš„è§„åˆ™æ¥å¯¹Batch Viewå’ŒRealtime Viewä¸­çš„ç»“æœæ•°æ®é›†åˆå¹¶ã€‚ ç»¼ä¸Šæ‰€è¯‰ï¼ŒServing Layeré‡‡ç”¨å¦‚ä¸‹ç­‰å¼è¡¨ç¤ºï¼š ï¼ˆDï¼‰query ï¼ function(batch view, realtime view) Lambdaæ¶æ„ç»„ä»¶é€‰å‹ ä¸Šé¢åˆ†åˆ«è®¨è®ºäº†Lambdaæ¶æ„çš„ä¸‰å±‚ï¼šBatch Layerï¼ŒSpeed Layerå’ŒServing Layerã€‚æ€»ç»“ä¸‹æ¥ï¼ŒLambdaæ¶æ„å°±æ˜¯å¦‚ä¸‹çš„ä¸‰ä¸ªç­‰å¼ï¼š batch view = function(all data) realtime view = function(realtime view, new data) query = function(batch view, realtime view) ä¸‹å›¾ç»™å‡ºäº†Lambdaæ¶æ„çš„ä¸€ä¸ªå®Œæ•´è§†å›¾å’Œæµç¨‹ã€‚ æ•°æ®æµè¿›å…¥ç³»ç»Ÿåï¼ŒåŒæ—¶å‘å¾€Batch Layerå’ŒSpeed Layerå¤„ç†ã€‚Batch Layerä»¥ä¸å¯å˜æ¨¡å‹ç¦»çº¿å­˜å‚¨æ‰€æœ‰æ•°æ®é›†ï¼Œé€šè¿‡åœ¨å…¨ä½“æ•°æ®é›†ä¸Šä¸æ–­é‡æ–°è®¡ç®—æ„å»ºæŸ¥è¯¢æ‰€å¯¹åº”çš„Batch Viewsã€‚Speed Layerå¤„ç†å¢é‡çš„å®æ—¶æ•°æ®æµï¼Œä¸æ–­æ›´æ–°æŸ¥è¯¢æ‰€å¯¹åº”çš„Realtime Viewsã€‚Serving Layerå“åº”ç”¨æˆ·çš„æŸ¥è¯¢è¯·æ±‚ï¼Œåˆå¹¶Batch Viewå’ŒRealtime Viewä¸­çš„ç»“æœæ•°æ®é›†åˆ°æœ€ç»ˆçš„æ•°æ®é›†ã€‚ ç»„ä»¶é€‰å‹ ä¸‹å›¾ç»™å‡ºäº†Lambdaæ¶æ„ä¸­å„ç»„ä»¶åœ¨å¤§æ•°æ®ç”Ÿæ€ç³»ç»Ÿä¸­å’Œé˜¿é‡Œé›†å›¢çš„å¸¸ç”¨ç»„ä»¶ã€‚æ•°æ®æµå­˜å‚¨é€‰ç”¨ä¸å¯å˜æ—¥å¿—çš„åˆ†å¸ƒå¼ç³»ç»ŸKafkaã€TTã€Metaqï¼›BatchLayeræ•°æ®é›†çš„å­˜å‚¨é€‰ç”¨Hadoopçš„HDFSæˆ–è€…é˜¿é‡Œäº‘çš„ODPSï¼›BatchViewçš„åŠ å·¥é‡‡ç”¨MapReduceï¼›BatchViewæ•°æ®çš„å­˜å‚¨é‡‡ç”¨Mysqlï¼ˆæŸ¥è¯¢å°‘é‡çš„æœ€è¿‘ç»“æœæ•°æ®ï¼‰ã€Hbaseï¼ˆæŸ¥è¯¢å¤§é‡çš„å†å²ç»“æœæ•°æ®ï¼‰ã€‚SpeedLayeré‡‡ç”¨å¢é‡æ•°æ®å¤„ç†Stormã€Flinkï¼›RealtimeViewå¢é‡ç»“æœæ•°æ®é›†é‡‡ç”¨å†…å­˜æ•°æ®åº“Redisã€‚ å¦ä¸€ä¸ªå®ç°ç‰ˆæœ¬ï¼š æ ¹æ®batch layerçš„ç‰¹ç‚¹ï¼Œå…·å¤‡å­˜å‚¨(HDFS)å’Œè®¡ç®—(MapReduce)çš„Hadoopæ˜¾ç„¶æ˜¯ç¬¬ä¸€äººé€‰ï¼Œè€Œbatch view å¯ä»¥æ˜¯hadoopæœ¬èº«çš„hdfs æˆ–è€…åŸºäºhdfsçš„æ‰€æ„å»ºçš„ç±»ä¼¼hiveé‚£æ ·çš„ä»“åº“ï¼Œspeed layerå› ä¸ºæ—¶æ•ˆæ€§çš„å½±å“ï¼Œé‡‡ç”¨å®æ—¶æµå¼å¤„ç†ç³»ç»Ÿï¼Œä¾‹å¦‚stromæˆ–è€…spark streaming, è€Œspeed view å¯ä»¥å­˜åœ¨HBase æˆ–è€…å…¶ä»–ç±»ä¼¼çš„Nosqlæ•°æ®åº“ã€‚server layer æä¾›ç”¨æˆ·æŸ¥è¯¢çš„æ–¹æ³•ï¼Œé‡‡ç”¨facebook å¼€æºçš„Impalaï¼Œç»Ÿä¸€å…¥å£æŸ¥è¯¢ã€‚æˆ–è€…è‡ªå·±å®ç°hiveå’ŒHBaseç»Ÿä¸€æŸ¥è¯¢ã€‚è¿™æ˜¯ä¸¤å¹´å‰çš„æ–‡ç« ï¼Œå½“æ—¶spark è¿˜æ²¡é‚£ä¹ˆç«ï¼Œç°åœ¨çœ‹æ¥sparkå¯ä»¥ç›´æ¥ä½œä¸ºbatchå’Œspeedå±‚çš„æ›¿ä»£è€…äº†ã€‚ é€‰å‹åŸåˆ™ Lambdaæ¶æ„æ˜¯ä¸ªé€šç”¨æ¡†æ¶ï¼Œå„ä¸ªå±‚é€‰å‹æ—¶ä¸è¦å±€é™æ—¶ä¸Šé¢ç»™å‡ºçš„ç»„ä»¶ï¼Œç‰¹åˆ«æ˜¯å¯¹äºViewçš„é€‰å‹ã€‚ä»æˆ‘å¯¹Lambdaæ¶æ„çš„å®è·µæ¥çœ‹ï¼Œå› ä¸ºViewæ˜¯ä¸ªå’Œä¸šåŠ¡å…³è”æ€§éå¸¸å¤§çš„æ¦‚å¿µï¼ŒViewé€‰æ‹©ç»„ä»¶æ—¶å…³é”®æ˜¯è¦æ ¹æ®ä¸šåŠ¡çš„éœ€æ±‚ï¼Œæ¥é€‰æ‹©æœ€é€‚åˆæŸ¥è¯¢çš„ç»„ä»¶ã€‚ä¸åŒçš„Viewç»„ä»¶çš„é€‰æ‹©è¦æ·±å…¥æŒ–æ˜æ•°æ®å’Œè®¡ç®—è‡ªèº«çš„ç‰¹ç‚¹ï¼Œä»è€Œé€‰æ‹©å‡ºæœ€é€‚åˆæ•°æ®å’Œè®¡ç®—è‡ªèº«ç‰¹ç‚¹çš„ç»„ä»¶ï¼ŒåŒæ—¶ä¸åŒçš„Viewå¯ä»¥é€‰æ‹©ä¸åŒçš„ç»„ä»¶ã€‚ æ€»ç»“ åœ¨è¿‡å»Lambdaæ•°æ®æ¶æ„æˆä¸ºæ¯ä¸€ä¸ªå…¬å¸å¤§æ•°æ®å¹³å°å¿…å¤‡çš„æ¶æ„ï¼Œå®ƒè§£å†³äº†ä¸€ä¸ªå…¬å¸å¤§æ•°æ®æ‰¹é‡ç¦»çº¿å¤„ç†å’Œå®æ—¶æ•°æ®å¤„ç†çš„éœ€æ±‚ã€‚ä¸€ä¸ªå…¸å‹çš„Lambdaæ¶æ„å¦‚ä¸‹ï¼š æ•°æ®ä»åº•å±‚çš„æ•°æ®æºå¼€å§‹ï¼Œç»è¿‡å„ç§å„æ ·çš„æ ¼å¼è¿›å…¥å¤§æ•°æ®å¹³å°ï¼Œåœ¨å¤§æ•°æ®å¹³å°ä¸­ç»è¿‡Kafkaã€Flumeç­‰æ•°æ®ç»„ä»¶è¿›è¡Œæ”¶é›†ï¼Œç„¶ååˆ†æˆä¸¤æ¡çº¿è¿›è¡Œè®¡ç®—ã€‚ä¸€æ¡çº¿æ˜¯è¿›å…¥æµå¼è®¡ç®—å¹³å°ï¼ˆä¾‹å¦‚ Stormã€Flinkæˆ–è€…Spark Streamingï¼‰ï¼Œå»è®¡ç®—å®æ—¶çš„ä¸€äº›æŒ‡æ ‡ï¼›å¦ä¸€æ¡çº¿è¿›å…¥æ‰¹é‡æ•°æ®å¤„ç†ç¦»çº¿è®¡ç®—å¹³å°ï¼ˆä¾‹å¦‚Mapreduceã€Hiveï¼ŒSpark SQLï¼‰ï¼Œå»è®¡ç®—T+1çš„ç›¸å…³ä¸šåŠ¡æŒ‡æ ‡ï¼Œè¿™äº›æŒ‡æ ‡éœ€è¦éš”æ—¥æ‰èƒ½çœ‹è§ã€‚ Lambdaæ¶æ„ç»å†å¤šå¹´çš„å‘å±•ï¼Œå…¶ä¼˜ç‚¹æ˜¯ç¨³å®šï¼Œå¯¹äºå®æ—¶è®¡ç®—éƒ¨åˆ†çš„è®¡ç®—æˆæœ¬å¯æ§ï¼Œæ‰¹é‡å¤„ç†å¯ä»¥ç”¨æ™šä¸Šçš„æ—¶é—´æ¥æ•´ä½“æ‰¹é‡è®¡ç®—ï¼Œè¿™æ ·æŠŠå®æ—¶è®¡ç®—å’Œç¦»çº¿è®¡ç®—é«˜å³°åˆ†å¼€ï¼Œè¿™ç§æ¶æ„æ”¯æ’‘äº†æ•°æ®è¡Œä¸šçš„æ—©æœŸå‘å±•ï¼Œä½†æ˜¯å®ƒä¹Ÿæœ‰ä¸€äº›è‡´å‘½ç¼ºç‚¹ï¼Œå¹¶åœ¨å¤§æ•°æ®3.0æ—¶ä»£è¶Šæ¥è¶Šä¸é€‚åº”æ•°æ®åˆ†æä¸šåŠ¡çš„éœ€æ±‚ã€‚ç¼ºç‚¹å¦‚ä¸‹ï¼š å®æ—¶ä¸æ‰¹é‡è®¡ç®—ç»“æœä¸ä¸€è‡´å¼•èµ·çš„æ•°æ®å£å¾„é—®é¢˜ ï¼šå› ä¸ºæ‰¹é‡å’Œå®æ—¶è®¡ç®—èµ°çš„æ˜¯ä¸¤ä¸ªè®¡ç®—æ¡†æ¶å’Œè®¡ç®—ç¨‹åºï¼Œç®—å‡ºçš„ç»“æœå¾€å¾€ä¸åŒï¼Œç»å¸¸çœ‹åˆ°ä¸€ä¸ªæ•°å­—å½“å¤©çœ‹æ˜¯ä¸€ä¸ªæ•°æ®ï¼Œç¬¬äºŒå¤©çœ‹æ˜¨å¤©çš„æ•°æ®åè€Œå‘ç”Ÿäº†å˜åŒ–ã€‚ æ‰¹é‡è®¡ç®—åœ¨è®¡ç®—çª—å£å†…æ— æ³•å®Œæˆ ï¼šåœ¨IOTæ—¶ä»£ï¼Œæ•°æ®é‡çº§è¶Šæ¥è¶Šå¤§ï¼Œç»å¸¸å‘ç°å¤œé—´åªæœ‰4ã€5ä¸ªå°æ—¶çš„æ—¶é—´çª—å£ï¼Œå·²ç»æ— æ³•å®Œæˆç™½å¤©20å¤šä¸ªå°æ—¶ç´¯è®¡çš„æ•°æ®ï¼Œä¿è¯æ—©ä¸Šä¸Šç­å‰å‡†æ—¶å‡ºæ•°æ®å·²æˆä¸ºæ¯ä¸ªå¤§æ•°æ®å›¢é˜Ÿå¤´ç–¼çš„é—®é¢˜ã€‚ å¼€å‘å’Œç»´æŠ¤çš„å¤æ‚æ€§é—®é¢˜ ï¼šLambda æ¶æ„éœ€è¦åœ¨ä¸¤ä¸ªä¸åŒçš„ APIï¼ˆapplication programming interfaceï¼Œåº”ç”¨ç¨‹åºç¼–ç¨‹æ¥å£ï¼‰ä¸­å¯¹åŒæ ·çš„ä¸šåŠ¡é€»è¾‘è¿›è¡Œä¸¤æ¬¡ç¼–ç¨‹ï¼šä¸€æ¬¡ä¸ºæ‰¹é‡è®¡ç®—çš„ETLç³»ç»Ÿï¼Œä¸€æ¬¡ä¸ºæµå¼è®¡ç®—çš„Streamingç³»ç»Ÿã€‚é’ˆå¯¹åŒä¸€ä¸ªä¸šåŠ¡é—®é¢˜äº§ç”Ÿäº†ä¸¤ä¸ªä»£ç åº“ï¼Œå„æœ‰ä¸åŒçš„æ¼æ´ã€‚è¿™ç§ç³»ç»Ÿå®é™…ä¸Šéå¸¸éš¾ç»´æŠ¤ æœåŠ¡å™¨å­˜å‚¨å¤§ ï¼šæ•°æ®ä»“åº“çš„å…¸å‹è®¾è®¡ï¼Œä¼šäº§ç”Ÿå¤§é‡çš„ä¸­é—´ç»“æœè¡¨ï¼Œé€ æˆæ•°æ®æ€¥é€Ÿè†¨èƒ€ï¼ŒåŠ å¤§æœåŠ¡å™¨å­˜å‚¨å‹åŠ›ã€‚ ä¹Ÿå°±æ˜¯ç”±äºLambdaæ¶æ„çš„ä»¥ä¸Šå±€é™æ€§ï¼ŒKappaåº”è¿è€Œç”Ÿï¼Œå®ƒæ¯”Lambdaæ¶æ„æ›´åŠ çµæ´»å’Œç²¾ç®€ï¼Œå…·ä½“å°†å¦æ–‡ä»‹ç»ã€‚ Kappaæ¶æ„ï¼š","tags":"Big Data","url":"https://jiang-hao.com/articles/2019/big-data-lambda-architecture.html","loc":"https://jiang-hao.com/articles/2019/big-data-lambda-architecture.html"},{"title":"Flink åˆ†å¸ƒå¼è¿è¡Œæ—¶ç¯å¢ƒ","text":"Tasks and Operator Chains å¯¹äºåˆ†å¸ƒå¼æ‰§è¡Œï¼ŒFlinkå°†å¤šä¸ªç®—å­å­ä»»åŠ¡é“¾ä¸²è”æˆä»»åŠ¡ã€‚æ¯ä¸ªä»»åŠ¡ç”±ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œã€‚å°†ç®—å­é“¾æ¥åˆ°ä»»åŠ¡æ˜¯ä¸€é¡¹æœ‰ç”¨çš„ä¼˜åŒ–ï¼šå®ƒå¯ä»¥å‡å°‘çº¿ç¨‹åˆ°çº¿ç¨‹åˆ‡æ¢å’Œç¼“å†²çš„å¼€é”€ï¼Œå¹¶åœ¨é™ä½å»¶è¿Ÿçš„åŒæ—¶æé«˜æ•´ä½“ååé‡ã€‚å¯ä»¥é…ç½®é“¾æ¥è¡Œä¸º; æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… é“¾æ¥æ–‡æ¡£ ã€‚ ä¸‹å›¾ä¸­çš„ç¤ºä¾‹æ•°æ®æµç”±äº”ä¸ªå­ä»»åŠ¡æ‰§è¡Œï¼Œå› æ­¤å…·æœ‰äº”ä¸ªå¹¶è¡Œçº¿ç¨‹ã€‚ Job Managers, Task Managers, Clients Flinkè¿è¡Œæ—¶åŒ…å«ä¸¤ç§ç±»å‹çš„è¿›ç¨‹ï¼š JobManagers ï¼ˆä¹Ÿç§°ä¸º masters ï¼‰åè°ƒåˆ†å¸ƒå¼æ‰§è¡Œã€‚ä»–ä»¬å®‰æ’ä»»åŠ¡ï¼Œåè°ƒæ£€æŸ¥ç‚¹ï¼Œåè°ƒæ•…éšœæ¢å¤ç­‰ã€‚ Job Manageræ€»æ˜¯è‡³å°‘æœ‰ä¸€ä¸ªã€‚é«˜å¯ç”¨æ€§è®¾ç½®å°†å…·æœ‰å¤šä¸ªJobManagersï¼Œå…¶ä¸­ä¸€ä¸ªå§‹ç»ˆæ˜¯ é¢†å¯¼è€… ï¼Œå…¶ä»–å¤„äº å¾…æœºçŠ¶æ€ ã€‚ TaskManagers ï¼ˆä¹Ÿå« workers ï¼‰æ‰§è¡Œdataflowçš„ ä»»åŠ¡ ï¼ˆæˆ–è€…æ›´å…·ä½“åœ°è¯´åº”è¯¥æ˜¯å­ä»»åŠ¡ï¼‰ï¼Œä»¥åŠç¼“å†²å’Œäº¤æ¢data streams ã€‚ å¿…é¡»å§‹ç»ˆè‡³å°‘æœ‰ä¸€ä¸ªTaskManagerã€‚ JobManagerså’ŒTaskManagerså¯ä»¥é€šè¿‡å¤šç§æ–¹å¼å¯åŠ¨ï¼šä½œä¸º ç‹¬ç«‹é›†ç¾¤ ç›´æ¥åœ¨è®¡ç®—æœºä¸Šï¼Œåœ¨å®¹å™¨ä¸­ï¼Œæˆ–ç”± YARN æˆ– Mesos ç­‰èµ„æºæ¡†æ¶ç®¡ç†ã€‚TaskManagersè¿æ¥åˆ°JobManagersï¼Œå®£å¸ƒè‡ªå·±å¯ç”¨ï¼Œå¹¶è¢«åˆ†é…å·¥ä½œã€‚ Client ä¸æ˜¯è¿è¡Œæ—¶å’Œç¨‹åºæ‰§è¡Œçš„ä¸€éƒ¨åˆ†ï¼Œè€Œæ˜¯è¢«ç”¨æ¥å‡†å¤‡å’Œå‘é€dataflowåˆ°JobManagerã€‚ä¹‹åï¼Œå®¢æˆ·ç«¯å¯ä»¥æ–­å¼€è¿æ¥æˆ–ä¿æŒè¿æ¥ä»¥æ¥æ”¶è¿›åº¦æŠ¥å‘Šã€‚å®¢æˆ·ç«¯æ—¢å¯ä»¥ä½œä¸ºè§¦å‘æ‰§è¡Œçš„Java / Scalaç¨‹åºçš„ä¸€éƒ¨åˆ†è¿è¡Œï¼Œä¹Ÿå¯ä»¥åœ¨å‘½ä»¤è¡Œè¿›ç¨‹ ./bin/flink run ... ä¸­è¿è¡Œã€‚ Task Slots and Resources æ¯ä¸ªworkerï¼ˆTaskManagerï¼‰éƒ½æ˜¯ä¸€ä¸ª JVMè¿›ç¨‹ ï¼Œå¯ä»¥åœ¨ä¸åŒçš„çº¿ç¨‹ä¸­æ‰§è¡Œä¸€ä¸ªæˆ–å¤šä¸ªå­ä»»åŠ¡ã€‚ä¸ºäº†æ§åˆ¶ä¸€ä¸ªworkeræ¥å—çš„ä»»åŠ¡æ•°é‡ï¼Œæ¯ä¸ªworkeréƒ½æœ‰æ‰€è°“çš„ task slots ï¼ˆè‡³å°‘ä¸€ä¸ªï¼‰ã€‚ æ¯ä¸ª task slot ä»£è¡¨TaskManagerçš„ä¸€ä¸ªå›ºå®šèµ„æºå­é›†ã€‚ä¾‹å¦‚ï¼Œå…·æœ‰3ä¸ªtask slotçš„TaskManagerä¼šå°†å…¶1/3çš„æ‰˜ç®¡å†…å­˜åˆ†é…äºæ¯ä¸ªtask slotã€‚èµ„æºåˆ‡ç‰‡æ„å‘³ç€å­ä»»åŠ¡ä¸ä¼šä¸æ¥è‡ªæ‰˜ç®¡å†…å­˜çš„å…¶ä»–ä½œä¸šçš„å­ä»»åŠ¡ç«äº‰èµ„æºï¼Œç›¸åå…¶å…·æœ‰ä¸€å®šé‡çš„é¢„ç•™æ‰˜ç®¡å†…å­˜ã€‚è¯·æ³¨æ„ï¼Œè¿™é‡Œæ²¡æœ‰CPUéš”ç¦»; å½“å‰task slotsåªåˆ†éš”ä»»åŠ¡çš„æ‰˜ç®¡å†…å­˜ã€‚ é€šè¿‡è°ƒæ•´task slotçš„æ•°é‡ï¼Œç”¨æˆ·å¯ä»¥å®šä¹‰å­ä»»åŠ¡å¦‚ä½•ç›¸äº’éš”ç¦»ã€‚æ¯ä¸ªTaskManageræœ‰ä¸€ä¸ªslotæ„å‘³ç€æ¯ä¸ªä»»åŠ¡ç»„åœ¨ä¸€ä¸ªå•ç‹¬çš„JVMä¸­è¿è¡Œï¼ˆæ¯”å¦‚ä¹Ÿå°±å¯ä»¥åœ¨ä¸€ä¸ªå•ç‹¬çš„å®¹å™¨ä¸­å¯åŠ¨ï¼‰ã€‚æ‹¥æœ‰å¤šä¸ªslotsæ„å‘³ç€æ›´å¤šå­ä»»åŠ¡å…±äº«åŒä¸€ä¸ªJVMã€‚åŒä¸€JVMä¸­çš„ä»»åŠ¡å…±äº«TCPè¿æ¥ï¼ˆé€šè¿‡å¤šè·¯å¤ç”¨ï¼‰å’Œå¿ƒè·³æ¶ˆæ¯ã€‚å®ƒä»¬è¿˜å¯ä»¥å…±äº«æ•°æ®é›†å’Œæ•°æ®ç»“æ„ï¼Œä»è€Œå‡å°‘æ¯ä»»åŠ¡å¼€é”€ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼ŒFlinkå…è®¸å­ä»»åŠ¡å…±äº«slotsï¼Œå³ä½¿å®ƒä»¬æ˜¯ä¸åŒä»»åŠ¡çš„å­ä»»åŠ¡ï¼Œåªè¦å®ƒä»¬æ¥è‡ªåŒä¸€ä¸ªjobã€‚ç»“æœæ˜¯ä¸€ä¸ªslotå¯ä»¥æ‰¿è½½æŸä¸ªjobçš„æ•´ä¸ªpipelineã€‚å…è®¸è¿™ç§ slot å…±äº«æœ‰ä¸¤ä¸ªä¸»è¦å¥½å¤„ï¼š Flinké›†ç¾¤éœ€è¦ä¸jobä¸­ä½¿ç”¨çš„æœ€é«˜å¹¶è¡Œåº¦ä¸€æ ·å¤šçš„task slotã€‚æ— éœ€è®¡ç®—ç¨‹åºæ€»å…±åŒ…å«å¤šå°‘ä»»åŠ¡ï¼ˆå…·æœ‰ä¸åŒçš„å¹¶è¡Œæ€§ï¼‰ã€‚ æ›´å®¹æ˜“è·å¾—æ›´å¥½çš„èµ„æºåˆ©ç”¨ç‡ã€‚æ²¡æœ‰slotå…±äº«ï¼Œéå¯†é›† source/ mapï¼ˆï¼‰ å­ä»»åŠ¡å°†å ç”¨ä¸èµ„æºå¯†é›†å‹ window å­ä»»åŠ¡ä¸€æ ·å¤šçš„èµ„æºã€‚é€šè¿‡slotå…±äº«ï¼Œå°†ç¤ºä¾‹ä¸­çš„åŸºæœ¬å¹¶è¡Œæ€§ä»2å¢åŠ åˆ°6å¯ä»¥å……åˆ†åˆ©ç”¨åˆ‡ç‰‡åçš„èµ„æºï¼ŒåŒæ—¶ç¡®ä¿ç¹é‡çš„å­ä»»åŠ¡åœ¨TaskManagersä¹‹é—´å…¬å¹³åˆ†é…ã€‚ è¯¥APIè¿˜åŒ…æ‹¬å¯ç”¨äºé˜²æ­¢ä¸æœŸæœ›çš„slotå…±äº«å‘ç”Ÿçš„ resource group æœºåˆ¶ã€‚ æ ¹æ®ç»éªŒï¼Œä¸€ä¸ªå¾ˆå¥½çš„é»˜è®¤task slotsæ•°å°±æ˜¯CPUæ ¸å¿ƒæ•°ã€‚ä½¿ç”¨è¶…çº¿ç¨‹ï¼Œæ¯ä¸ªslotåˆ™éœ€è¦2ä¸ªæˆ–æ›´å¤šç¡¬ä»¶çº¿ç¨‹ä¸Šä¸‹æ–‡ã€‚ State Backends å­˜å‚¨é”®/å€¼ç´¢å¼•çš„ç¡®åˆ‡æ•°æ®ç»“æ„å–å†³äºæ‰€é€‰çš„ çŠ¶æ€åç«¯ ã€‚ä¸€ç§çŠ¶æ€åç«¯å°†æ•°æ®å­˜å‚¨åœ¨å†…å­˜ä¸­çš„hash mapä¸­ï¼Œå¦ä¸€ç§çŠ¶æ€åç«¯ä½¿ç”¨ RocksDB ä½œä¸ºé”®/å€¼å­˜å‚¨ã€‚é™¤äº†å®šä¹‰ä¿å­˜çŠ¶æ€çš„æ•°æ®ç»“æ„ä¹‹å¤–ï¼ŒçŠ¶æ€åç«¯è¿˜å®ç°é€»è¾‘ä»¥è·å–é”®/å€¼çŠ¶æ€çš„æ—¶é—´ç‚¹å¿«ç…§ï¼Œå¹¶å°†è¯¥å¿«ç…§å­˜å‚¨ä¸ºä¸€ä¸ªcheckpointçš„ä¸€éƒ¨åˆ†ã€‚ Savepoints ç”¨Data Stream APIç¼–å†™çš„ç¨‹åºå¯ä»¥ä» savepoint æ¢å¤æ‰§è¡Œã€‚savepointå…è®¸æ›´æ–°ç¨‹åºå’ŒFlinkç¾¤é›†ï¼Œè€Œä¸ä¼šä¸¢å¤±ä»»ä½•çŠ¶æ€ã€‚ savepoints æ˜¯ æ‰‹åŠ¨è§¦å‘çš„checkpoints ï¼Œå®ƒ æ•è· ç¨‹åºçš„å¿«ç…§å¹¶å°†å…¶å†™å…¥çŠ¶æ€åç«¯ã€‚ä»–ä»¬ä¾é å¸¸è§„çš„checkpointingæœºåˆ¶ã€‚åœ¨æ‰§è¡ŒæœŸé—´ï¼Œç¨‹åºä¼šå®šæœŸåœ¨å·¥ä½œèŠ‚ç‚¹ä¸Šåˆ›å»ºå¿«ç…§å¹¶ç”Ÿæˆæ£€æŸ¥ç‚¹ã€‚å¯¹äºæ¢å¤ï¼Œä»…éœ€è¦æœ€åå®Œæˆçš„æ£€æŸ¥ç‚¹ï¼›å¹¶ä¸”ä¸€æ—¦å®Œæˆæ–°æ£€æŸ¥ç‚¹å°±å¯ä»¥å®‰å…¨åœ°ä¸¢å¼ƒæ—§æ£€æŸ¥ç‚¹ã€‚ ä¿å­˜ç‚¹ä¸è¿™äº›å®šæœŸæ£€æŸ¥ç‚¹ç±»ä¼¼ï¼Œä¸åŒä¹‹å¤„åœ¨äºå®ƒä»¬ ç”±ç”¨æˆ·è§¦å‘ï¼Œ å¹¶ä¸”åœ¨è¾ƒæ–°çš„æ£€æŸ¥ç‚¹å®Œæˆæ—¶ ä¸ä¼šè‡ªåŠ¨è¿‡æœŸ ã€‚å¯ä»¥ ä»å‘½ä»¤è¡Œ åˆ›å»ºä¿å­˜ç‚¹ï¼Œä¹Ÿå¯ä»¥åœ¨é€šè¿‡ REST API å–æ¶ˆä½œä¸šæ—¶åˆ›å»ºã€‚","tags":"Big Data","url":"https://jiang-hao.com/articles/2019/big-data-flink-distributed-runtime.html","loc":"https://jiang-hao.com/articles/2019/big-data-flink-distributed-runtime.html"},{"title":"Flink FAQ","text":"Apache Flinkä»…ç”¨äºï¼ˆè¿‘ï¼‰å®æ—¶å¤„ç†ç”¨ä¾‹å—ï¼Ÿ Flinkæ˜¯ä¸€ä¸ªéå¸¸é€šç”¨çš„ç³»ç»Ÿï¼Œç”¨äºæ•°æ®å¤„ç†å’Œæ•°æ®é©±åŠ¨çš„åº”ç”¨ç¨‹åºï¼Œ æ•°æ®æµ ä½œä¸ºæ ¸å¿ƒæ„å»ºå—ã€‚è¿™äº›æ•°æ®æµå¯ä»¥æ˜¯å®æ—¶æ•°æ®æµæˆ–å­˜å‚¨çš„å†å²æ•°æ®æµã€‚ä¾‹å¦‚ï¼Œåœ¨Flinkçš„è§†å›¾ä¸­ï¼Œæ–‡ä»¶æ˜¯å­˜å‚¨çš„å­—èŠ‚æµã€‚å› æ­¤ï¼ŒFlinkæ”¯æŒå®æ—¶æ•°æ®å¤„ç†å’Œåº”ç”¨ç¨‹åºï¼Œä»¥åŠæ‰¹å¤„ç†åº”ç”¨ç¨‹åºã€‚ æµå¯ä»¥æ˜¯ æ— ç•Œçš„ ï¼ˆæ²¡æœ‰ç»“æŸï¼Œäº‹ä»¶ä¸æ–­å‘ç”Ÿï¼‰æˆ–å— é™åˆ¶ ï¼ˆæµæœ‰å¼€å§‹å’Œç»“æŸï¼‰ã€‚ä¾‹å¦‚ï¼Œæ¥è‡ªæ¶ˆæ¯é˜Ÿåˆ—çš„Twitteré¦ˆé€æˆ–äº‹ä»¶æµé€šå¸¸æ˜¯æ— ç•Œçš„æµï¼Œè€Œæ¥è‡ªæ–‡ä»¶çš„å­—èŠ‚æµæ˜¯æœ‰ç•Œæµã€‚ å¦‚æœä¸€åˆ‡éƒ½æ˜¯æµï¼Œä¸ºä»€ä¹ˆFlinkä¸­æœ‰DataStreamå’ŒDataSet APIï¼Ÿ æœ‰ç•Œæµé€šå¸¸æ¯”æ— ç•Œæµæ›´é«˜æ•ˆã€‚åœ¨ï¼ˆè¿‘ï¼‰å®æ—¶å¤„ç†æ— é™äº‹ä»¶æµéœ€è¦ç³»ç»Ÿèƒ½å¤Ÿç«‹å³å¯¹äº‹ä»¶èµ·ä½œç”¨å¹¶äº§ç”Ÿä¸­é—´ç»“æœï¼ˆé€šå¸¸å…·æœ‰ä½å»¶è¿Ÿï¼‰ã€‚å¤„ç†æœ‰ç•Œæµé€šå¸¸ä¸éœ€è¦äº§ç”Ÿä½å»¶è¿Ÿç»“æœï¼Œå› ä¸ºæ— è®ºå¦‚ä½•æ•°æ®éƒ½æ˜¯æ—§çš„ï¼ˆç›¸å¯¹è€Œè¨€ï¼‰ã€‚è¿™å…è®¸Flinkä»¥ç®€å•ä¸”æ›´é«˜æ•ˆçš„æ–¹å¼å¤„ç†æ•°æ®ã€‚ DataStream API æ•è·æ— ç•Œå’Œæœ‰ç•Œçš„æµçš„è¿ç»­å¤„ç†ï¼Œä»¥æ”¯æŒä½ç­‰å¾…æ—¶é—´çš„ç»“æœä»¥åŠå¯¹äº‹ä»¶å’Œæ—¶é—´ï¼ˆåŒ…æ‹¬äº‹ä»¶æ—¶é—´ï¼‰çµæ´»ååº”çš„æ¨¡å‹ã€‚ DataSet API å…·æœ‰åŠ å¿«æœ‰ç•Œçš„æ•°æ®æµçš„å¤„ç†çš„æŠ€æœ¯ã€‚å°†æ¥ï¼Œç¤¾åŒºè®¡åˆ’å°†è¿™äº›ä¼˜åŒ–ä¸DataStream APIä¸­çš„æŠ€æœ¯ç›¸ç»“åˆã€‚ Flinkå¦‚ä½•ä¸Hadoopæ ˆç›¸å…³è”ï¼Ÿ Flinkç‹¬ç«‹äº Apache Hadoopï¼Œ å¹¶ä¸”åœ¨æ²¡æœ‰ä»»ä½•Hadoopä¾èµ–æ€§çš„æƒ…å†µä¸‹è¿è¡Œã€‚ ä½†æ˜¯ï¼ŒFlinkä¸è®¸å¤šHadoopç»„ä»¶é›†æˆå¾—éå¸¸å¥½ï¼Œä¾‹å¦‚ HDFS ï¼Œ YARN æˆ– HBase ã€‚ä¸è¿™äº›ç»„ä»¶ä¸€èµ·è¿è¡Œæ—¶ï¼ŒFlinkå¯ä»¥ä½¿ç”¨HDFSè¯»å–æ•°æ®ï¼Œæˆ–å†™å…¥ç»“æœå’Œæ£€æŸ¥ç‚¹/å¿«ç…§ã€‚Flinkå¯ä»¥é€šè¿‡YARNè½»æ¾éƒ¨ç½²ï¼Œå¹¶ä¸YARNå’ŒHDFS Kerberoså®‰å…¨æ¨¡å—é›†æˆã€‚ Flinkå¯è¿è¡Œçš„å…¶ä»–æ ˆæ˜¯ä»€ä¹ˆï¼Ÿ ç”¨æˆ·åœ¨ Kubernetes ï¼Œ Mesos ï¼Œ Docker ä¸Šè¿è¡ŒFlink ï¼Œç”šè‡³ä½œä¸ºç‹¬ç«‹æœåŠ¡è¿è¡Œã€‚ ä½¿ç”¨Flinkæœ‰å“ªäº›å…ˆå†³æ¡ä»¶ï¼Ÿ æ‚¨éœ€è¦ Java 8 æ¥è¿è¡ŒFlinkä½œä¸š/åº”ç”¨ç¨‹åºã€‚ Scala APIï¼ˆå¯é€‰ï¼‰åŸºäºScala 2.11ã€‚ Apache ZooKeeper éœ€è¦é«˜åº¦å¯ç”¨ä¸”æ²¡æœ‰å•ç‚¹æ•…éšœçš„è®¾ç½®ã€‚ å¯¹äºå¯ä»¥ä»æ•…éšœä¸­æ¢å¤çš„é«˜å¯ç”¨æµå¤„ç†è®¾ç½®ï¼ŒFlinkéœ€è¦æŸç§å½¢å¼çš„åˆ†å¸ƒå¼å­˜å‚¨ç”¨äºæ£€æŸ¥ç‚¹ï¼ˆHDFS / S3 / NFS / SAN / GFS / Kosmos / Ceph / ...ï¼‰ã€‚ Flinkæ”¯æŒå¤šå¤§çš„è§„æ¨¡ï¼Ÿ ç”¨æˆ·å¯åœ¨éå¸¸å°çš„é…ç½®ï¼ˆå°‘äº5ä¸ªèŠ‚ç‚¹ï¼‰å’Œ1000ä¸ªèŠ‚ç‚¹ä»¥åŠTBçº§çš„çŠ¶æ€ä¸Šè¿è¡ŒFlinkä½œä¸šã€‚ Flinkæ˜¯å¦ä»…é™äºå†…å­˜æ•°æ®é›†ï¼Ÿ å¯¹äºDataStream APIï¼ŒFlinkæ”¯æŒå¤§äºå†…å­˜çš„çŠ¶æ€æ¥é…ç½®RocksDBçŠ¶æ€åç«¯ã€‚ å¯¹äºDataSet APIï¼Œæ‰€æœ‰æ“ä½œï¼ˆdeltaè¿­ä»£é™¤å¤–ï¼‰éƒ½å¯ä»¥æ‰©å±•åˆ°ä¸»å†…å­˜ä¹‹å¤–ã€‚","tags":"Big Data","url":"https://jiang-hao.com/articles/2019/big-data-flink-FAQ.html","loc":"https://jiang-hao.com/articles/2019/big-data-flink-FAQ.html"},{"title":"Flink Dataflow ç¼–ç¨‹æ¨¡å‹","text":"Apache Flinkæ˜¯ä¸€ä¸ªç”¨äºåˆ†å¸ƒå¼æµå’Œæ‰¹å¤„ç†æ•°æ®å¤„ç†çš„å¼€æºå¹³å°ã€‚Flinkçš„æ ¸å¿ƒæ˜¯æµæ•°æ®æµå¼•æ“ï¼Œä¸ºæ•°æ®æµä¸Šçš„åˆ†å¸ƒå¼è®¡ç®—æä¾›æ•°æ®åˆ†å‘ï¼Œé€šä¿¡å’Œå®¹é”™ã€‚FlinkåŸºäºæµå¼•æ“ä¹‹ä¸Šæ„å»ºæ‰¹å¤„ç†ï¼Œè¦†åŠ æœ¬åœ°è¿­ä»£æ”¯æŒï¼Œå†…å­˜æ‰˜ç®¡å’Œç¨‹åºä¼˜åŒ–ã€‚ æŠ½è±¡å±‚æ¬¡ Flinkæä¾›ä¸åŒçº§åˆ«çš„æŠ½è±¡æ¥å¼€å‘æµ/æ‰¹å¤„ç†åº”ç”¨ç¨‹åºã€‚ æœ€ä½çº§æŠ½è±¡åªæä¾› stateful streaming ã€‚å®ƒé€šè¿‡ Process Function åµŒå…¥åˆ° DataStream APIä¸­ ã€‚å®ƒå…è®¸ç”¨æˆ·è‡ªç”±å¤„ç†æ¥è‡ªä¸€ä¸ªæˆ–å¤šä¸ªæµçš„äº‹ä»¶ï¼Œå¹¶ä½¿ç”¨ä¸€è‡´çš„å®¹é”™ çŠ¶æ€ ã€‚æ­¤å¤–ï¼Œç”¨æˆ·å¯ä»¥æ³¨å†Œäº‹ä»¶æ—¶é—´å’Œå¤„ç†æ—¶é—´å›è°ƒï¼Œå…è®¸ç¨‹åºå®ç°å¤æ‚çš„è®¡ç®—ã€‚ åœ¨å®è·µä¸­ï¼Œå¤§å¤šæ•°åº”ç”¨ç¨‹åºä¸éœ€è¦ä¸Šè¿°ä½çº§æŠ½è±¡ï¼Œè€Œæ˜¯é’ˆå¯¹ Core API ç¼–ç¨‹ï¼Œ å¦‚ DataStream API ï¼ˆæœ‰ç•Œ/æ— ç•Œæµï¼‰å’Œ DataSet API ï¼ˆæœ‰ç•Œæ•°æ®é›†ï¼‰ã€‚è¿™äº›æµç•…çš„APIæä¾›äº†ç”¨äºæ•°æ®å¤„ç†çš„é€šç”¨æ„å»ºå—ï¼Œä¾‹å¦‚å„ç§å½¢å¼çš„ç”¨æˆ·æŒ‡å®šçš„è½¬æ¢ï¼Œè¿æ¥ï¼Œèšåˆï¼Œçª—å£ï¼ŒçŠ¶æ€ç­‰ï¼ˆtransformations, joins, aggregations, windows, state, etc.ï¼‰ã€‚åœ¨è¿™äº›APIä¸­å¤„ç†çš„æ•°æ®ç±»å‹åœ¨ç›¸åº”çš„ç¼–ç¨‹è¯­è¨€ä¸­è¡¨ç¤ºä¸ºç±»ã€‚ ä½çº§ Process Function ä¸ DataStream API é›†æˆåœ¨ä¸€èµ·ï¼Œå› æ­¤åªèƒ½å¯¹æŸäº›æ“ä½œè¿›è¡Œä½çº§æŠ½è±¡ã€‚ DataSet API æä¾›æœ‰é™æ•°æ®é›†é¢å¤–çš„åŸè¯­æ”¯æŒï¼Œå¦‚å¾ªç¯/è¿­ä»£ã€‚ Table API æ˜¯ä»¥ tables ä¸ºä¸­å¿ƒçš„å£°æ˜æ€§DSL ï¼Œæ­¤å¤„çš„è¡¨æ˜¯åŠ¨æ€æ”¹å˜çš„è¡¨ï¼ˆå½“è¡¨ç¤ºæµæ—¶ï¼‰ã€‚ Table API éµå¾ªï¼ˆæ‰©å±•ï¼‰å…³ç³»æ¨¡å‹ï¼šè¡¨æœ‰ä¸€ä¸ªæ¨¡å¼è¿æ¥ï¼ˆç±»ä¼¼äºåœ¨å…³ç³»æ•°æ®åº“ä¸­çš„è¡¨ï¼‰å’ŒAPIæä¾›å¯æ¯”çš„æ“ä½œï¼Œå¦‚select, project, join, group-by, aggregateç­‰ã€‚Table APIç¨‹åºä»¥å£°æ˜æ–¹å¼å®šä¹‰ åº”è¯¥æ‰§è¡Œçš„é€»è¾‘æ“ä½œï¼Œ è€Œä¸æ˜¯å‡†ç¡®æŒ‡å®š æ“ä½œä»£ç çš„å¤–è§‚ ã€‚è™½ç„¶Table APIå¯ä»¥é€šè¿‡å„ç§ç±»å‹çš„ç”¨æˆ·å®šä¹‰å‡½æ•°è¿›è¡Œæ‰©å±•ï¼Œä½†å®ƒçš„è¡¨ç°åŠ›ä¸å¦‚ Core API ï¼Œä½†ä½¿ç”¨æ›´ç®€æ´ï¼ˆç¼–å†™çš„ä»£ç æ›´å°‘ï¼‰ã€‚æ­¤å¤–ï¼ŒTable APIç¨‹åºè¿˜ä¼šé€šè¿‡ä¼˜åŒ–ç¨‹åºï¼Œåœ¨æ‰§è¡Œä¹‹å‰åº”ç”¨ä¼˜åŒ–è§„åˆ™ã€‚ å¯ä»¥åœ¨ tables å’Œ DataStream / DataSet ä¹‹é—´æ— ç¼è½¬æ¢ï¼Œå…è®¸ç¨‹åºæ··åˆ Table API ä»¥åŠ DataStream å’Œ DataSet APIã€‚ Flinkæä¾›çš„æœ€é«˜çº§æŠ½è±¡æ˜¯ SQL ã€‚è¿™ç§æŠ½è±¡åœ¨è¯­ä¹‰å’Œè¡¨è¾¾æ–¹é¢ç±»ä¼¼äº Table API ï¼Œä½†æ˜¯å°†ç¨‹åºè¡¨ç¤ºä¸ºSQLæŸ¥è¯¢è¡¨è¾¾å¼ã€‚ SQL æŠ½è±¡ä¸Table APIç´§å¯†åœ°ç›¸äº’ä½œç”¨ï¼Œå¹¶ä¸”SQLè¯­å¥å¯ä»¥ä½œç”¨åœ¨ Table API å®šä¹‰çš„ tables ä¸Šã€‚ ç¨‹åºå’Œæ•°æ®æµ Flinkç¨‹åºçš„åŸºæœ¬æ„å»ºå—æ˜¯ streams å’Œ transformations ã€‚ï¼ˆè¯·æ³¨æ„ï¼ŒFlinkçš„DataSet APIä¸­ä½¿ç”¨çš„DataSetså…¶å®å†…éƒ¨ä¹Ÿæ˜¯streams - ç¨åä¼šè¯¦ç»†ä»‹ç»ã€‚ï¼‰ä»æ¦‚å¿µä¸Šè®²ï¼Œ stream æ˜¯ï¼ˆå¯èƒ½æ°¸æ— æ­¢å¢ƒçš„ï¼‰æ•°æ®è®°å½•æµï¼Œè€Œ transformation æ˜¯å°†ä¸€ä¸ªæˆ–å¤šä¸ªæµä½œä¸ºè¾“å…¥ï¼Œå¹¶äº§ç”Ÿä¸€ä¸ªæˆ–å¤šä¸ªè¾“å‡ºæµä½œä¸ºç»“æœçš„æ“ä½œã€‚ æ‰§è¡Œæ—¶ï¼ŒFlinkç¨‹åºæ˜ å°„ä¸º streaming dataflows ï¼Œç”± æµ å’Œè½¬æ¢ ç®—å­ ç»„æˆã€‚æ¯ä¸ª dataflow éƒ½ä»¥ä¸€ä¸ªæˆ–å¤šä¸ª sources å¼€å¤´ï¼Œå¹¶ä»¥ä¸€ä¸ªæˆ–å¤šä¸ª sinks ç»“æŸã€‚æ•°æ®æµç±»ä¼¼äºä»»æ„ æœ‰å‘æ— ç¯å›¾ ï¼ˆDAGï¼‰ ã€‚å°½ç®¡é€šè¿‡ è¿­ä»£ ç»“æ„å…è®¸ç‰¹æ®Šå½¢å¼çš„å¾ªç¯ ï¼Œä½†ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬å°†åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ä¸å°†å…¶è€ƒè™‘å…¶ä¸­ã€‚ é€šå¸¸ï¼Œç¨‹åºä¸­çš„transformationsä¸dataflowä¸­çš„operatorsä¹‹é—´å­˜åœ¨ä¸€å¯¹ä¸€çš„å¯¹åº”å…³ç³»ã€‚ä½†æ˜¯ï¼Œæœ‰æ—¶ä¸€ä¸ªè½¬æ¢å¯èƒ½åŒ…å«å¤šä¸ªè½¬æ¢ç®—å­ã€‚ Sourceså’ŒSinksåœ¨ æµè¿æ¥å™¨ å’Œ æ‰¹å¤„ç†è¿æ¥å™¨ æ–‡æ¡£ä¸­æœ‰ä»‹ç»ã€‚ DataStreamç®—å­ å’Œ DataSetè½¬æ¢ ä¸­è®°å½•äº† è½¬æ¢ æœ‰å…³ä»‹ç»ã€‚ å¹¶è¡Œæ•°æ®æµ Flinkä¸­çš„ç¨‹åºæœ¬è´¨ä¸Šæ˜¯å¹¶è¡Œå’Œåˆ†å¸ƒå¼çš„ã€‚åœ¨æ‰§è¡ŒæœŸé—´ï¼Œ stream å…·æœ‰ä¸€ä¸ªæˆ–å¤šä¸ª stream partitions ï¼Œå¹¶ä¸”æ¯ä¸ª ç®—å­ å…·æœ‰ä¸€ä¸ªæˆ–å¤šä¸ª ç®—å­å­ä»»åŠ¡ ã€‚ç®—å­å­ä»»åŠ¡å½¼æ­¤ç‹¬ç«‹ï¼Œå¹¶ä¸”å¯ä»¥åœ¨ä¸åŒçš„çº¿ç¨‹ä¸­æ‰§è¡Œï¼Œå¹¶ä¸”å¯èƒ½åœ¨ä¸åŒçš„æœºå™¨æˆ–å®¹å™¨ä¸Šæ‰§è¡Œã€‚ ç®—å­å­ä»»åŠ¡çš„æ•°é‡æ˜¯è¯¥ç‰¹å®šç®—å­çš„ å¹¶è¡Œ åº¦ã€‚æµçš„å¹¶è¡Œåº¦å§‹ç»ˆæ˜¯å…¶ç”Ÿæˆç®—å­çš„å¹¶è¡Œåº¦ã€‚åŒä¸€ç¨‹åºçš„ä¸åŒç®—å­å¯èƒ½å…·æœ‰ä¸åŒçš„å¹¶è¡Œçº§åˆ«ã€‚ æµå¯ä»¥ ä»¥ä¸€å¯¹ä¸€ ï¼ˆæˆ– è½¬å‘ ï¼‰æ¨¡å¼æˆ–ä»¥ é‡æ–°åˆ†å‘ æ¨¡å¼åœ¨ä¸¤ä¸ªoperatorä¹‹é—´ä¼ è¾“æ•°æ®ï¼š ä¸€å¯¹ä¸€ æµï¼ˆä¾‹å¦‚ï¼Œåœ¨ä¸Šå›¾ä¸­çš„ Source å’Œ mapï¼ˆï¼‰ ç®—å­ä¹‹é—´ï¼‰ä¿ç•™å…ƒç´ çš„åˆ†åŒºå’Œæ’åºã€‚è¿™æ„å‘³ç€ mapï¼ˆï¼‰ ç®—å­çš„subtask [1] å°†ä»¥ Source ç®—å­çš„subtask [1]ç”Ÿæˆçš„ç›¸åŒé¡ºåºçš„ç›¸åŒå…ƒç´ ä½œä¸ºè¾“å…¥ã€‚ é‡æ–°åˆ†é… æµï¼ˆåœ¨ä¸Šé¢çš„ mapï¼ˆï¼‰ å’Œ keyBy / window ä¹‹é—´ï¼Œä»¥åŠ keyBy / window å’Œ Sinkä¹‹é—´ ï¼‰é‡æ–°åˆ†é…æµã€‚æ¯ä¸ª ç®—å­å­ä»»åŠ¡ å°†æ•°æ®å‘é€åˆ°ä¸åŒçš„ç›®æ ‡å­ä»»åŠ¡ï¼Œå…·ä½“å–å†³äºæ‰€é€‰çš„transformationã€‚å®ä¾‹æ˜¯ keyByï¼ˆï¼‰ ï¼ˆå…¶é€šè¿‡æ•£åˆ—å¯†é’¥é‡æ–°åˆ†åŒºï¼‰ï¼Œ broadcastï¼ˆï¼‰ ï¼Œæˆ– rebalanceï¼ˆï¼‰ ï¼ˆéšæœºåœ°é‡æ–°åˆ†åŒºï¼‰ã€‚åœ¨ rebalance äº¤æ¢ä¸­ï¼Œå…ƒç´ ä¹‹é—´çš„æ’åºä»…ä¿ç•™åœ¨æ¯å¯¹å‘é€å’Œæ¥æ”¶å­ä»»åŠ¡ä¸­ï¼ˆä¾‹å¦‚ï¼Œ mapï¼ˆï¼‰çš„ å­ä»»åŠ¡[1] å’Œå­ä»»åŠ¡[2] keyBy / window ï¼‰ã€‚å› æ­¤ï¼Œåœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œä¿ç•™äº†æ¯ä¸ªå¯†é’¥å†…çš„æ’åºï¼Œä½†å¹¶è¡Œæ€§ç¡®å®å¼•å…¥äº†å…³äºä¸åŒå¯†é’¥çš„èšåˆç»“æœåˆ°è¾¾æ¥æ”¶å™¨çš„é¡ºåºçš„éç¡®å®šæ€§ã€‚ æœ‰å…³é…ç½®å’Œæ§åˆ¶å¹¶è¡Œæ€§çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… å¹¶è¡Œæ‰§è¡Œ çš„æ–‡æ¡£ã€‚ çª—å£ èšåˆäº‹ä»¶ï¼ˆä¾‹å¦‚ï¼Œè®¡æ•°ï¼Œæ±‚å’Œï¼‰åœ¨æµä¸Šçš„å·¥ä½œæ–¹å¼ä¸æ‰¹å¤„ç†æ–¹å¼ä¸åŒã€‚ä¾‹å¦‚ï¼Œä¸å¯èƒ½è®¡ç®—æµä¸­çš„æ‰€æœ‰å…ƒç´ ï¼Œå› ä¸ºæµé€šå¸¸æ˜¯æ— é™çš„ï¼ˆæ— ç•Œï¼‰ã€‚ç›¸åï¼Œæµä¸Šçš„èšåˆï¼ˆè®¡æ•°ï¼Œæ€»å’Œç­‰ï¼‰ç”± çª—å£ é™å®šï¼Œä¾‹å¦‚ \"åœ¨æœ€å5åˆ†é’Ÿå†…è®¡æ•°\" æˆ– \"æœ€å100ä¸ªå…ƒç´ çš„æ€»å’Œ\" ã€‚ Windowså¯ä»¥æ˜¯ æ—¶é—´é©±åŠ¨çš„ ï¼ˆä¾‹å¦‚ï¼šæ¯30ç§’ï¼‰æˆ– æ•°æ®é©±åŠ¨ ï¼ˆä¾‹å¦‚ï¼šæ¯100ä¸ªå…ƒç´ ï¼‰ã€‚äººä»¬é€šå¸¸åŒºåˆ†ä¸åŒç±»å‹çš„çª—å£ï¼Œä¾‹å¦‚ ç¿»æ»šçª—å£ ï¼ˆæ²¡æœ‰é‡å ï¼‰ï¼Œ æ»‘åŠ¨çª—å£ ï¼ˆå…·æœ‰é‡å ï¼‰å’Œ ä¼šè¯çª—å£ ï¼ˆç”±ä¸æ´»åŠ¨é—´éš™æ‰“æ–­ï¼‰ã€‚ å¯ä»¥åœ¨æ­¤ åšå®¢æ–‡ç« ä¸­ æ‰¾åˆ°æ›´å¤šçª—å£ç¤ºä¾‹ã€‚æ›´å¤šè¯¦ç»†ä¿¡æ¯åœ¨ çª—å£æ–‡æ¡£ä¸­ ã€‚ æ—¶é—´ å½“åœ¨æµç¨‹åºä¸­å¼•ç”¨æ—¶é—´ï¼ˆä¾‹å¦‚å®šä¹‰çª—å£ï¼‰æ—¶ï¼Œå¯ä»¥å‚è€ƒä¸åŒçš„æ—¶é—´æ¦‚å¿µï¼š äº‹ä»¶æ—¶é—´ æ˜¯åˆ›å»º äº‹ä»¶çš„æ—¶é—´ ã€‚å®ƒé€šå¸¸ç”±äº‹ä»¶ä¸­çš„æ—¶é—´æˆ³æè¿°ï¼Œä¾‹å¦‚ç”±ç”Ÿäº§ä¼ æ„Ÿå™¨æˆ–ç”Ÿäº§æœåŠ¡é™„åŠ ã€‚Flinké€šè¿‡ æ—¶é—´æˆ³åˆ†é…å™¨ è®¿é—®äº‹ä»¶æ—¶é—´æˆ³ã€‚ æ‘„å–æ—¶é—´ æ˜¯äº‹ä»¶åœ¨Sourceç®—å­å¤„è¾“å…¥Flinkæ•°æ®æµçš„æ—¶é—´ã€‚ å¤„ç†æ—¶é—´ æ˜¯æ‰§è¡ŒåŸºäºæ—¶é—´çš„æ“ä½œçš„æ¯ä¸ªç®—å­çš„æœ¬åœ°æ—¶é—´ã€‚ æœ‰å…³å¦‚ä½•å¤„ç†æ—¶é—´çš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… äº‹ä»¶æ—¶é—´æ–‡æ¡£ ã€‚ æœ‰çŠ¶æ€çš„æ“ä½œ è™½ç„¶æ•°æ®æµä¸­çš„è®¸å¤šæ“ä½œåªæ˜¯ä¸€æ¬¡æŸ¥çœ‹ä¸€ä¸ªå•ç‹¬çš„ äº‹ä»¶ ï¼ˆä¾‹å¦‚äº‹ä»¶è§£æå™¨ï¼‰ï¼Œä½†æŸäº›æ“ä½œä¼šè®°ä½å¤šä¸ªäº‹ä»¶ï¼ˆä¾‹å¦‚çª—å£ç®—å­ï¼‰çš„ä¿¡æ¯ã€‚è¿™äº›æ“ä½œç§°ä¸º æœ‰çŠ¶æ€ ã€‚ çŠ¶æ€æ“ä½œçš„çŠ¶æ€ä¿æŒåœ¨å¯ä»¥è¢«è®¤ä¸ºæ˜¯åµŒå…¥å¼é”®/å€¼å­˜å‚¨çš„çŠ¶æ€ä¸­ã€‚çŠ¶æ€è¢«åˆ†åŒºå¹¶ä¸¥æ ¼åœ°ä¸æœ‰çŠ¶æ€ç®—å­è¯»å–çš„æµä¸€èµ·åˆ†å‘ã€‚å› æ­¤ï¼Œåªæœ‰åœ¨ keyByï¼ˆï¼‰ å‡½æ•°ä¹‹åæ‰èƒ½åœ¨ é”®æ§æµ ä¸Šè®¿é—®é”®/å€¼çŠ¶æ€ï¼Œå¹¶ä¸”é™åˆ¶ä¸ºä¸å½“å‰äº‹ä»¶çš„é”®ç›¸å…³è”çš„å€¼ã€‚å¯¹é½æµå’ŒçŠ¶æ€çš„å¯†é’¥å¯ç¡®ä¿æ‰€æœ‰çŠ¶æ€æ›´æ–°éƒ½æ˜¯æœ¬åœ°æ“ä½œï¼Œä»è€Œä¿è¯ä¸€è‡´æ€§è€Œæ— éœ€äº‹åŠ¡å¼€é”€ã€‚æ­¤å¯¹é½è¿˜å…è®¸Flinké‡æ–°åˆ†é…çŠ¶æ€å¹¶é€æ˜åœ°è°ƒæ•´æµåˆ†åŒºã€‚ æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…æœ‰å…³ çŠ¶æ€ çš„æ–‡æ¡£ã€‚ å®¹é”™æ£€æŸ¥ç‚¹ Flinkä½¿ç”¨ æµé‡æ”¾ å’Œ æ£€æŸ¥ç‚¹ çš„ç»„åˆå®ç°å®¹é”™ã€‚æ£€æŸ¥ç‚¹ä¸æ¯ä¸ªè¾“å…¥æµä¸­çš„ç‰¹å®šç‚¹ä»¥åŠæ¯ä¸ªç®—å­çš„å¯¹åº”çŠ¶æ€ç›¸å…³ã€‚é€šè¿‡æ¢å¤ç®—å­çš„çŠ¶æ€å¹¶ä»æ£€æŸ¥ç‚¹é‡æ”¾äº‹ä»¶ï¼Œå¯ä»¥ä»æ£€æŸ¥ç‚¹æ¢å¤æµæ•°æ®æµï¼ŒåŒæ—¶ä¿æŒä¸€è‡´æ€§ ï¼ˆæ°å¥½ä¸€æ¬¡å¤„ç†è¯­ä¹‰ï¼‰ ã€‚ æ£€æŸ¥ç‚¹é—´éš”æ˜¯åœ¨æ‰§è¡ŒæœŸé—´ç”¨æ¢å¤æ—¶é—´ï¼ˆéœ€è¦é‡æ”¾çš„äº‹ä»¶çš„æ•°é‡ï¼‰æ¥æŠ˜è¡·å®¹é”™å¼€é”€çš„æ‰‹æ®µã€‚ å®¹é”™å†…éƒ¨ çš„æè¿°æä¾›äº†æœ‰å…³Flinkå¦‚ä½•ç®¡ç†æ£€æŸ¥ç‚¹å’Œç›¸å…³ä¸»é¢˜çš„æ›´å¤šä¿¡æ¯ã€‚æœ‰å…³å¯ç”¨å’Œé…ç½®æ£€æŸ¥ç‚¹çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… æ£€æŸ¥ç‚¹APIæ–‡æ¡£ ã€‚ æ‰¹é‡æµåª’ä½“ Flinkä»¥æµç¨‹åºçš„ç‰¹æ®Šæƒ…å†µæ‰§è¡Œ æ‰¹å¤„ç†ç¨‹åº ï¼Œå…¶ä¸­æµæ˜¯æœ‰ç•Œçš„ï¼ˆæœ‰é™æ•°é‡çš„å…ƒç´ ï¼‰ã€‚ DataSet åœ¨å†…éƒ¨è§†ä¸ºæ•°æ®æµã€‚å› æ­¤ï¼Œä¸Šè¿°æ¦‚å¿µä»¥é€‚ç”¨äºæµç¨‹åºç›¸åŒçš„æ–¹å¼åº”ç”¨äºæ‰¹å¤„ç†ç¨‹åºï¼Œé™¤äº†å°‘æ•°ä¾‹å¤–ï¼š æ‰¹å¤„ç†ç¨‹åºçš„å®¹é”™ ä¸ä½¿ç”¨æ£€æŸ¥ç‚¹(checkpointing)ã€‚è€Œæ˜¯é€šè¿‡å®Œå…¨é‡æ”¾æµæ¥è¿›è¡Œæ¢å¤ã€‚è¿™æ˜¯å¯è¡Œçš„ï¼Œå› ä¸ºè¾“å…¥çš„æœ‰é™æ€§ã€‚è¿™ä¼šä½¿æˆæœ¬æ›´å¤šåœ°ç”¨äºæ¢å¤ï¼Œä½†ä½¿å¸¸è§„å¤„ç†æ›´è½»æ¾ï¼Œå› ä¸ºå®ƒé¿å…äº†æ£€æŸ¥ç‚¹ã€‚ DataSet APIä¸­çš„æœ‰çŠ¶æ€æ“ä½œä½¿ç”¨ç®€åŒ–çš„å†…å­˜/æ ¸å¤–æ•°æ®ç»“æ„ï¼Œè€Œä¸æ˜¯é”®/å€¼ç´¢å¼•ã€‚ DataSet APIå¼•å…¥äº†ç‰¹æ®Šçš„åŒæ­¥ï¼ˆè¶…çº§æ­¥éª¤ï¼‰è¿­ä»£ï¼Œè¿™äº›è¿­ä»£åªèƒ½åœ¨æœ‰ç•Œæµä¸Šè¿›è¡Œã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹ è¿­ä»£æ–‡æ¡£ ã€‚","tags":"Big Data","url":"https://jiang-hao.com/articles/2019/big-data-flink-programming-model.html","loc":"https://jiang-hao.com/articles/2019/big-data-flink-programming-model.html"},{"title":"Flinkç”¨ä¾‹","text":"Apache Flinkå› å…¶ä¸°å¯Œçš„åŠŸèƒ½é›†è€Œæˆä¸ºå¼€å‘å’Œè¿è¡Œå¤šç§ä¸åŒç±»å‹åº”ç”¨ç¨‹åºçš„ç»ä½³é€‰æ‹©ã€‚Flinkçš„åŠŸèƒ½åŒ…æ‹¬æ”¯æŒæµå’Œæ‰¹å¤„ç†ï¼Œå¤æ‚çš„çŠ¶æ€ç®¡ç†ï¼Œäº‹ä»¶æ—¶é—´å¤„ç†è¯­ä¹‰ä»¥åŠçŠ¶æ€çš„ç²¾ç¡®ä¸€æ¬¡ä¸€è‡´æ€§ä¿è¯ã€‚æ­¤å¤–ï¼ŒFlinkå¯ä»¥éƒ¨ç½²åœ¨å„ç§èµ„æºæä¾›è€…ï¼ˆå¦‚YARNï¼ŒApache Mesoså’ŒKubernetesï¼‰ä¸Šï¼Œä¹Ÿå¯ä»¥ä½œä¸ºè£¸æœºç¡¬ä»¶ä¸Šçš„ç‹¬ç«‹ç¾¤é›†ã€‚é…ç½®ä¸ºé«˜å¯ç”¨æ€§ï¼ŒFlinkæ²¡æœ‰å•ç‚¹æ•…éšœã€‚Flinkå·²è¢«è¯æ˜å¯æ‰©å±•åˆ°æ•°åƒä¸ªæ ¸å¿ƒå’ŒTBçº§çš„åº”ç”¨ç¨‹åºçŠ¶æ€ï¼Œæä¾›é«˜ååé‡å’Œä½å»¶è¿Ÿï¼Œå¹¶ä¸ºä¸–ç•Œä¸Šæœ€è‹›åˆ»çš„æµå¤„ç†åº”ç”¨ç¨‹åºæä¾›æ”¯æŒã€‚ ä¸‹é¢ï¼Œæˆ‘ä»¬å°†æ¢è®¨ç”±Flinkæä¾›æ”¯æŒçš„æœ€å¸¸è§ç±»å‹çš„åº”ç”¨ç¨‹åºï¼Œå¹¶æŒ‡å‡ºå®é™…ç¤ºä¾‹ã€‚ äº‹ä»¶é©±åŠ¨çš„åº”ç”¨ç¨‹åº æ•°æ®åˆ†æåº”ç”¨ æ•°æ®ç®¡é“åº”ç”¨ äº‹ä»¶é©±åŠ¨çš„åº”ç”¨ç¨‹åº ä»€ä¹ˆæ˜¯äº‹ä»¶é©±åŠ¨çš„åº”ç”¨ç¨‹åºï¼Ÿ äº‹ä»¶é©±åŠ¨çš„åº”ç”¨ç¨‹åºæ˜¯ä¸€ä¸ªæœ‰çŠ¶æ€çš„åº”ç”¨ç¨‹åºï¼Œå®ƒä»ä¸€ä¸ªæˆ–å¤šä¸ªäº‹ä»¶æµä¸­æå–äº‹ä»¶ï¼Œå¹¶é€šè¿‡è§¦å‘è®¡ç®—ï¼ŒçŠ¶æ€æ›´æ–°æˆ–å¤–éƒ¨æ“ä½œå¯¹ä¼ å…¥äº‹ä»¶åšå‡ºååº”ã€‚ äº‹ä»¶é©±åŠ¨çš„åº”ç”¨ç¨‹åºæ˜¯ä¼ ç»Ÿåº”ç”¨ç¨‹åºè®¾è®¡çš„æ¼”å˜ã€‚ä¼ ç»Ÿåº”ç”¨ä¸€èˆ¬å…·æœ‰ç‹¬ç«‹çš„è®¡ç®—å’Œæ•°æ®å­˜å‚¨å±‚ï¼Œåœ¨æ­¤ä½“ç³»ç»“æ„ä¸­ï¼Œåº”ç”¨ç¨‹åºä»è¿œç¨‹äº‹åŠ¡æ•°æ®åº“è¯»å–æ•°æ®å¹¶å°†æ•°æ®æŒä¹…åŒ–ã€‚ ç›¸åï¼Œäº‹ä»¶é©±åŠ¨çš„åº”ç”¨ç¨‹åºåŸºäºæœ‰çŠ¶æ€æµå¤„ç†åº”ç”¨ç¨‹åºã€‚åœ¨è¿™ç§è®¾è®¡ä¸­ï¼Œæ•°æ®å’Œè®¡ç®—æ˜¯å…±åŒå®šä½çš„ï¼Œå³æœ¬åœ°ï¼ˆå†…å­˜æˆ–ç£ç›˜ï¼‰æ•°æ®è®¿é—®ã€‚é€šè¿‡å®šæœŸå°†æ£€æŸ¥ç‚¹å†™å…¥è¿œç¨‹æŒä¹…å­˜å‚¨æ¥å®ç°å®¹é”™ã€‚ä¸‹å›¾æç»˜äº†ä¼ ç»Ÿåº”ç”¨ç¨‹åºä½“ç³»ç»“æ„å’Œäº‹ä»¶é©±åŠ¨åº”ç”¨ç¨‹åºä¹‹é—´çš„å·®å¼‚ã€‚ äº‹ä»¶é©±åŠ¨çš„åº”ç”¨ç¨‹åºæœ‰å“ªäº›ä¼˜ç‚¹ï¼Ÿ äº‹ä»¶é©±åŠ¨çš„åº”ç”¨ç¨‹åºä¸æ˜¯æŸ¥è¯¢è¿œç¨‹æ•°æ®åº“ï¼Œè€Œæ˜¯åœ¨æœ¬åœ°è®¿é—®å…¶æ•°æ®ï¼Œä»è€Œåœ¨ååé‡å’Œå»¶è¿Ÿæ–¹é¢äº§ç”Ÿæ›´å¥½çš„æ€§èƒ½ã€‚è¿œç¨‹æŒä¹…å­˜å‚¨çš„å®šæœŸæ£€æŸ¥ç‚¹å¯ä»¥å¼‚æ­¥å’Œé€’å¢å®Œæˆã€‚å› æ­¤ï¼Œæ£€æŸ¥ç‚¹å¯¹å¸¸è§„äº‹ä»¶å¤„ç†çš„å½±å“éå¸¸å°ã€‚ä½†æ˜¯ï¼Œäº‹ä»¶é©±åŠ¨çš„åº”ç”¨ç¨‹åºè®¾è®¡æä¾›çš„ä¸ä»…ä»…æ˜¯æœ¬åœ°æ•°æ®è®¿é—®ã€‚åœ¨åˆ†å±‚ä½“ç³»ç»“æ„ä¸­ï¼Œå¤šä¸ªåº”ç”¨ç¨‹åºå…±äº«åŒä¸€æ•°æ®åº“æ˜¯å¾ˆå¸¸è§çš„ã€‚å› æ­¤ï¼Œéœ€è¦åè°ƒæ•°æ®åº“çš„ä»»ä½•æ›´æ”¹ï¼Œä¾‹å¦‚ç”±äºåº”ç”¨ç¨‹åºæ›´æ–°æˆ–æ‰©å±•æœåŠ¡è€Œæ›´æ”¹æ•°æ®å¸ƒå±€ã€‚ç”±äºæ¯ä¸ªäº‹ä»¶é©±åŠ¨çš„åº”ç”¨ç¨‹åºéƒ½è´Ÿè´£è‡ªå·±çš„æ•°æ®ï¼Œå› æ­¤æ›´æ”¹æ•°æ®è¡¨ç¤ºæˆ–æ‰©å±•åº”ç”¨ç¨‹åºåªéœ€è¦è¾ƒå°‘çš„åè°ƒã€‚ Flinkå¦‚ä½•æ”¯æŒäº‹ä»¶é©±åŠ¨çš„åº”ç”¨ç¨‹åºï¼Ÿ äº‹ä»¶é©±åŠ¨åº”ç”¨ç¨‹åºçš„é™åˆ¶ç”±æµå¤„ç†å™¨å¤„ç†æ—¶é—´å’ŒçŠ¶æ€çš„ç¨‹åº¦æ¥å®šä¹‰ã€‚Flinkçš„è®¸å¤šæ°å‡ºåŠŸèƒ½éƒ½å›´ç»•ç€è¿™äº›æ¦‚å¿µã€‚Flinkæä¾›äº†ä¸€ç»„ä¸°å¯Œçš„çŠ¶æ€åŸè¯­ï¼Œå¯ä»¥ç®¡ç†éå¸¸å¤§çš„æ•°æ®é‡ï¼ˆæœ€å¤šå‡ TBï¼‰ï¼Œå¹¶ä¸”å…·æœ‰ç²¾ç¡®ä¸€æ¬¡æ€§çš„ä¸€è‡´æ€§ä¿è¯ã€‚æ­¤å¤–ï¼ŒFlinkæ”¯æŒäº‹ä»¶æ—¶é—´ï¼Œé«˜åº¦å¯å®šåˆ¶çš„çª—å£é€»è¾‘ï¼Œä»¥åŠé€šè¿‡ ProcessFunction å®ç°é«˜çº§ä¸šåŠ¡é€»è¾‘æä¾›çš„ç»†ç²’åº¦æ—¶é—´æ§åˆ¶ã€‚æ­¤å¤–ï¼ŒFlinkè¿˜æä¾›äº†ä¸€ä¸ªç”¨äºå¤æ‚äº‹ä»¶å¤„ç†ï¼ˆCEPï¼‰çš„åº“ï¼Œç”¨äºæ£€æµ‹æ•°æ®æµä¸­çš„æ¨¡å¼ã€‚ ç„¶è€Œï¼ŒFlinkåœ¨äº‹ä»¶é©±åŠ¨åº”ç”¨ç¨‹åºæ–¹é¢çš„å‡ºè‰²åŠŸèƒ½æ˜¯savepointã€‚ä¿å­˜ç‚¹æ˜¯ä¸€è‡´çš„çŠ¶æ€å¿«ç…§ï¼Œå¯ç”¨ä½œå…¼å®¹åº”ç”¨ç¨‹åºçš„èµ·ç‚¹ã€‚ç»™å®šä¿å­˜ç‚¹ï¼Œå¯ä»¥æ›´æ–°åº”ç”¨ç¨‹åºæˆ–è°ƒæ•´å…¶è§„æ¨¡ï¼Œæˆ–è€…å¯ä»¥å¯åŠ¨åº”ç”¨ç¨‹åºçš„å¤šä¸ªç‰ˆæœ¬ä»¥è¿›è¡ŒA / Bæµ‹è¯•ã€‚ ä»€ä¹ˆæ˜¯å…¸å‹çš„äº‹ä»¶é©±åŠ¨åº”ç”¨ç¨‹åºï¼Ÿ æ¬ºè¯ˆè¯†åˆ« å¼‚å¸¸æ£€æµ‹ åŸºäºè§„åˆ™çš„è­¦æŠ¥ ä¸šåŠ¡æµç¨‹ç›‘æ§ Webåº”ç”¨ç¨‹åºï¼ˆç¤¾äº¤ç½‘ç»œï¼‰ æ•°æ®åˆ†æåº”ç”¨ ä»€ä¹ˆæ˜¯æ•°æ®åˆ†æåº”ç”¨ç¨‹åºï¼Ÿ åˆ†æå·¥ä½œä»åŸå§‹æ•°æ®ä¸­æå–ä¿¡æ¯å’Œæ´å¯ŸåŠ›ã€‚ä¼ ç»Ÿä¸Šï¼Œåˆ†æåœ¨è®°å½•äº‹ä»¶çš„æœ‰ç•Œæ•°æ®é›†ä¸Šä½œä¸ºæ‰¹é‡æŸ¥è¯¢æˆ–åº”ç”¨ç¨‹åºæ‰§è¡Œã€‚ä¸ºäº†å°†æœ€æ–°æ•°æ®åˆå¹¶åˆ°åˆ†æç»“æœä¸­ï¼Œå¿…é¡»å°†å…¶æ·»åŠ åˆ°åˆ†æçš„æ•°æ®é›†ä¸­ï¼Œå¹¶é‡æ–°è¿è¡ŒæŸ¥è¯¢æˆ–åº”ç”¨ç¨‹åºã€‚ç»“æœå°†å†™å…¥å­˜å‚¨ç³»ç»Ÿæˆ–ä½œä¸ºæŠ¥å‘Šå‘å‡ºã€‚ å€ŸåŠ©å…ˆè¿›çš„æµå¤„ç†å¼•æ“ï¼Œè¿˜å¯ä»¥å®æ—¶åœ°æ‰§è¡Œåˆ†æã€‚æµå¼æŸ¥è¯¢æˆ–åº”ç”¨ç¨‹åºä¸æ˜¯è¯»å–æœ‰é™æ•°æ®é›†ï¼Œè€Œæ˜¯æ‘„å–å®æ—¶äº‹ä»¶æµï¼Œå¹¶åœ¨æ¶ˆè€—äº‹ä»¶æ—¶ä¸æ–­ç”Ÿæˆå’Œæ›´æ–°ç»“æœã€‚ç»“æœè¦ä¹ˆå†™å…¥å¤–éƒ¨æ•°æ®åº“ï¼Œè¦ä¹ˆä¿æŒä¸ºå†…éƒ¨çŠ¶æ€ã€‚ä»ªè¡¨æ¿åº”ç”¨ç¨‹åºå¯ä»¥ä»å¤–éƒ¨æ•°æ®åº“è¯»å–æœ€æ–°ç»“æœæˆ–ç›´æ¥æŸ¥è¯¢åº”ç”¨ç¨‹åºçš„å†…éƒ¨çŠ¶æ€ã€‚ Apache Flinkæ”¯æŒæµå¼å’Œæ‰¹é‡åˆ†æåº”ç”¨ç¨‹åºï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ æµå¼åˆ†æåº”ç”¨ç¨‹åºæœ‰å“ªäº›ä¼˜åŠ¿ï¼Ÿ ä¸æ‰¹é‡åˆ†æç›¸æ¯”ï¼Œè¿ç»­æµåˆ†æçš„ä¼˜åŠ¿ä¸ä»…é™äºå› æ¶ˆé™¤å®šæœŸå¯¼å…¥å’ŒæŸ¥è¯¢æ‰§è¡Œè€Œä»äº‹ä»¶åˆ°æ´å¯Ÿçš„ä½å¾—å¤šçš„å»¶è¿Ÿã€‚ä¸æ‰¹é‡æŸ¥è¯¢ç›¸æ¯”ï¼Œæµå¼æŸ¥è¯¢ä¸å¿…å¤„ç†è¾“å…¥æ•°æ®ä¸­çš„äººä¸ºè¾¹ç•Œï¼Œè¿™äº›è¾¹ç•Œæ˜¯ç”±å®šæœŸå¯¼å…¥å’Œè¾“å…¥çš„æœ‰ç•Œæ€§è´¨å¼•èµ·çš„ã€‚ å¦ä¸€æ–¹é¢æ˜¯æ›´ç®€å•çš„åº”ç”¨ç¨‹åºæ¶æ„ã€‚æ‰¹å¤„ç†åˆ†æç®¡é“ç”±è‹¥å¹²ç‹¬ç«‹ç»„ä»¶ç»„æˆï¼Œä»¥å®šæœŸè°ƒåº¦æ•°æ®æå–å’ŒæŸ¥è¯¢æ‰§è¡Œã€‚å¯é åœ°æ“ä½œè¿™æ ·çš„ç®¡é“å¹¶éæ˜“äº‹ï¼Œå› ä¸ºä¸€ä¸ªç»„ä»¶çš„æ•…éšœä¼šå½±å“ç®¡é“çš„åç»­æ­¥éª¤ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œåœ¨åƒFlinkè¿™æ ·çš„å¤æ‚æµå¤„ç†å™¨ä¸Šè¿è¡Œçš„æµåˆ†æåº”ç”¨ç¨‹åºåŒ…å«ä»æ•°æ®æ‘„å–åˆ°è¿ç»­ç»“æœè®¡ç®—çš„æ‰€æœ‰æ­¥éª¤ã€‚å› æ­¤ï¼Œå®ƒå¯ä»¥ä¾èµ–äºå¼•æ“çš„æ•…éšœæ¢å¤æœºåˆ¶ã€‚ Flinkå¦‚ä½•æ”¯æŒæ•°æ®åˆ†æåº”ç”¨ç¨‹åºï¼Ÿ Flinkä¸ºè¿ç»­æµå¼ä¼ è¾“å’Œæ‰¹é‡åˆ†ææä¾›äº†éå¸¸å¥½çš„æ”¯æŒã€‚å…·ä½“æ¥è¯´ï¼Œå®ƒå…·æœ‰ç¬¦åˆANSIæ ‡å‡†çš„SQLæ¥å£ï¼Œå…·æœ‰ç”¨äºæ‰¹å¤„ç†å’Œæµå¼æŸ¥è¯¢çš„ç»Ÿä¸€è¯­ä¹‰ã€‚æ— è®ºæ˜¯åœ¨è®°å½•äº‹ä»¶çš„é™æ€æ•°æ®é›†ä¸Šè¿˜æ˜¯åœ¨å®æ—¶äº‹ä»¶æµä¸Šè¿è¡Œï¼ŒSQLæŸ¥è¯¢éƒ½ä¼šè®¡ç®—ç›¸åŒçš„ç»“æœã€‚å¯¹ç”¨æˆ·å®šä¹‰å‡½æ•°çš„ä¸°å¯Œæ”¯æŒå¯ç¡®ä¿åœ¨SQLæŸ¥è¯¢ä¸­æ‰§è¡Œè‡ªå®šä¹‰ä»£ç ã€‚å¦‚æœéœ€è¦æ›´å¤šçš„è‡ªå®šä¹‰é€»è¾‘ï¼ŒFlinkçš„DataStream APIæˆ–DataSet APIæä¾›æ›´å¤šçš„ä½çº§æ§åˆ¶ã€‚æ­¤å¤–ï¼ŒFlinkçš„Gellyåº“ä¸ºæ‰¹é‡æ•°æ®é›†ä¸Šçš„å¤§è§„æ¨¡å’Œé«˜æ€§èƒ½å›¾å½¢åˆ†ææä¾›ç®—æ³•å’Œæ„å»ºå—ã€‚ ä»€ä¹ˆæ˜¯å…¸å‹çš„æ•°æ®åˆ†æåº”ç”¨ç¨‹åºï¼Ÿ ç”µä¿¡ç½‘ç»œçš„è´¨é‡ç›‘æ§ åˆ†æ ç§»åŠ¨åº”ç”¨ç¨‹åºä¸­ çš„äº§å“æ›´æ–°å’Œå®éªŒè¯„ä¼° å¯¹æ¶ˆè´¹è€…æŠ€æœ¯ä¸­ çš„å®æ—¶æ•°æ® è¿›è¡Œ ç‰¹åˆ«åˆ†æ å¤§è§„æ¨¡å›¾åˆ†æ æ•°æ®ç®¡é“åº”ç”¨ ä»€ä¹ˆæ˜¯æ•°æ®ç®¡é“ï¼Ÿ æå– - è½¬æ¢ - åŠ è½½ï¼ˆETLï¼‰æ˜¯åœ¨å­˜å‚¨ç³»ç»Ÿä¹‹é—´è½¬æ¢å’Œç§»åŠ¨æ•°æ®çš„å¸¸ç”¨æ–¹æ³•ã€‚é€šå¸¸ä¼šå®šæœŸè§¦å‘ETLä½œä¸šï¼Œä»¥å°†æ•°æ®ä»äº‹åŠ¡æ•°æ®åº“ç³»ç»Ÿå¤åˆ¶åˆ°åˆ†ææ•°æ®åº“æˆ–æ•°æ®ä»“åº“ã€‚ æ•°æ®ç®¡é“ä¸ETLä½œä¸šå…·æœ‰ç›¸ä¼¼çš„ç”¨é€”ã€‚å®ƒä»¬å¯ä»¥è½¬æ¢å’Œä¸°å¯Œæ•°æ®ï¼Œå¹¶å¯ä»¥å°†æ•°æ®ä»ä¸€ä¸ªå­˜å‚¨ç³»ç»Ÿç§»åŠ¨åˆ°å¦ä¸€ä¸ªã€‚ä½†æ˜¯ï¼Œå®ƒä»¬ä»¥è¿ç»­æµæ¨¡å¼è¿è¡Œï¼Œè€Œä¸æ˜¯å®šæœŸè§¦å‘ã€‚å› æ­¤ï¼Œä»–ä»¬èƒ½å¤Ÿä»è¿ç»­ç”Ÿæˆæ•°æ®çš„æºä¸­è¯»å–è®°å½•ï¼Œå¹¶ä»¥ä½å»¶è¿Ÿå°†å…¶ç§»åŠ¨åˆ°ç›®çš„åœ°ã€‚ä¾‹å¦‚ï¼Œæ•°æ®ç®¡é“å¯èƒ½ä¼šç›‘è§†æ–‡ä»¶ç³»ç»Ÿç›®å½•ä¸­çš„æ–°æ–‡ä»¶ï¼Œå¹¶å°†å…¶æ•°æ®å†™å…¥äº‹ä»¶æ—¥å¿—ã€‚å¦ä¸€ä¸ªåº”ç”¨ç¨‹åºå¯èƒ½ä¼šå°†äº‹ä»¶æµå®ç°åˆ°æ•°æ®åº“ï¼Œæˆ–è€…é€æ­¥æ„å»ºå’Œä¼˜åŒ–æœç´¢ç´¢å¼•ã€‚ ä¸‹å›¾æè¿°äº†å®šæœŸETLä½œä¸šå’Œè¿ç»­æ•°æ®ç®¡é“ä¹‹é—´çš„å·®å¼‚ã€‚ æ•°æ®ç®¡é“æœ‰å“ªäº›ä¼˜åŠ¿ï¼Ÿ è¿ç»­æ•°æ®æµæ°´çº¿ä¼˜äºå‘¨æœŸæ€§ETLä½œä¸šçš„æ˜æ˜¾ä¼˜åŠ¿æ˜¯å‡å°‘äº†å°†æ•°æ®ç§»åŠ¨åˆ°ç›®çš„åœ°çš„å»¶è¿Ÿã€‚æ­¤å¤–ï¼Œæ•°æ®ç®¡é“æ›´é€šç”¨ï¼Œå¯ç”¨äºæ›´å¤šç”¨ä¾‹ï¼Œå› ä¸ºå®ƒä»¬èƒ½å¤Ÿè¿ç»­æ¶ˆè€—å’Œå‘é€æ•°æ®ã€‚ Flinkå¦‚ä½•æ”¯æŒæ•°æ®ç®¡é“ï¼Ÿ Flinkçš„SQLæ¥å£ï¼ˆæˆ–è¡¨APIï¼‰å¯ä»¥è§£å†³è®¸å¤šå¸¸è§çš„æ•°æ®è½¬æ¢æˆ–ä¸°å¯Œä»»åŠ¡ï¼Œå¹¶æ”¯æŒç”¨æˆ·å®šä¹‰çš„å‡½æ•°ã€‚é€šè¿‡ä½¿ç”¨æ›´é€šç”¨çš„DataStream APIï¼Œå¯ä»¥å®ç°å…·æœ‰æ›´é«˜çº§è¦æ±‚çš„æ•°æ®ç®¡é“ã€‚Flinkä¸ºå„ç§å­˜å‚¨ç³»ç»Ÿï¼ˆå¦‚Kafkaï¼ŒKinesisï¼ŒElasticsearchå’ŒJDBCæ•°æ®åº“ç³»ç»Ÿï¼‰æä¾›äº†ä¸°å¯Œçš„è¿æ¥å™¨ã€‚å®ƒè¿˜å…·æœ‰è¿ç»­çš„æ–‡ä»¶ç³»ç»Ÿæºï¼Œç”¨äºç›‘è§†ä»¥æ—¶é—´åˆ†åŒºæ–¹å¼å†™å…¥æ–‡ä»¶çš„ç›®å½•å’Œæ¥æ”¶å™¨ã€‚ ä»€ä¹ˆæ˜¯å…¸å‹çš„æ•°æ®ç®¡é“åº”ç”¨ï¼Ÿ ç”µå­å•†åŠ¡ä¸­ çš„å®æ—¶æœç´¢ç´¢å¼•æ„å»º ç”µå­å•†åŠ¡ä¸­ æŒç»­çš„ETL","tags":"Big Data","url":"https://jiang-hao.com/articles/2019/big-data-flink-usecases.html","loc":"https://jiang-hao.com/articles/2019/big-data-flink-usecases.html"},{"title":"Flinkå…¥é—¨","text":"ä¸€ã€æ¶æ„ Apache Flinkæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼å¤„ç†å¼•æ“å’Œæ¡†æ¶ï¼Œç”¨äºå¯¹æ— ç•Œå’Œæœ‰ç•Œæ•°æ®æµè¿›è¡ŒçŠ¶æ€è®¡ç®—ã€‚Flinkå¯åœ¨æ‰€æœ‰å¸¸è§çš„é›†ç¾¤ç¯å¢ƒä¸­è¿è¡Œï¼Œå¯ä»¥å†…å­˜çº§é€Ÿåº¦å’Œä»»æ„è§„æ¨¡æ‰§è¡Œè®¡ç®—ã€‚ æ¥ä¸‹æ¥é¦–å…ˆæˆ‘ä»¬é˜è¿°Flinkçš„æ¶æ„ã€‚ å¤„ç†æ— ç•Œå’Œæœ‰ç•Œæ•°æ® ä»»ä½•ç±»å‹çš„æ•°æ®éƒ½æ˜¯ä½œä¸ºäº‹ä»¶æµäº§ç”Ÿçš„ã€‚ä¿¡ç”¨å¡äº¤æ˜“ï¼Œä¼ æ„Ÿå™¨æµ‹é‡ï¼Œæœºå™¨æ—¥å¿—æˆ–ç½‘ç«™æˆ–ç§»åŠ¨åº”ç”¨ç¨‹åºä¸Šçš„ç”¨æˆ·äº¤äº’ï¼Œæ‰€æœ‰è¿™äº›æ•°æ®éƒ½ä½œä¸ºæµç”Ÿæˆã€‚ æ•°æ®å¯ä»¥ä½œä¸º æ— ç•Œ æˆ– æœ‰ç•Œ æµå¤„ç†ã€‚ æ— ç•Œæµ æœ‰ä¸€ä¸ªå¼€å§‹ä½†æ²¡æœ‰æ˜ç¡®å®šä¹‰çš„ç»“æŸã€‚å®ƒä»¬ä¸ä¼šç»ˆæ­¢ï¼Œå¹¶ä¸”æ•°æ®åœ¨ç”Ÿæˆæ—¶å³æä¾›ã€‚å¿…é¡»è¿ç»­å¤„ç†æ— ç•Œæµï¼Œå³å¿…é¡»åœ¨æ‘„å–äº‹ä»¶åç«‹å³å¤„ç†äº‹ä»¶ã€‚æ— æ³•ç­‰å¾…æ‰€æœ‰è¾“å…¥æ•°æ®åˆ°è¾¾ï¼Œå› ä¸ºè¾“å…¥æ˜¯æ— ç•Œçš„ï¼Œå¹¶ä¸”åœ¨ä»»ä½•æ—¶é—´ç‚¹éƒ½ä¸ä¼šå®Œæˆã€‚å¤„ç†æ— ç•Œæ•°æ®é€šå¸¸è¦æ±‚ä»¥ç‰¹å®šé¡ºåºæ‘„å–äº‹ä»¶ï¼Œä¾‹å¦‚äº‹ä»¶å‘ç”Ÿçš„é¡ºåºï¼Œä»¥ä¾¿èƒ½å¤Ÿæ¨æ–­ç»“æœå®Œæ•´æ€§ã€‚æ— ç•Œæµçš„å¤„ç†ä¹Ÿç§°ä¸ºæµå¤„ç†ã€‚ æœ‰ç•Œæµ å…·æœ‰æ˜ç¡®å®šä¹‰çš„å¼€å§‹å’Œç»“æŸã€‚å¯ä»¥é€šè¿‡åœ¨æ‰§è¡Œä»»ä½•è®¡ç®—ä¹‹å‰å…ˆæ‘„å–æ‰€æœ‰æ•°æ®çš„æ–¹å¼æ¥å¤„ç†æœ‰ç•Œæµã€‚å¤„ç†æœ‰ç•Œæµä¸éœ€è¦æœ‰åºæ‘„å–ï¼Œå› ä¸ºå¯ä»¥å§‹ç»ˆå¯¹æœ‰ç•Œæ•°æ®é›†è¿›è¡Œæ’åºã€‚æœ‰ç•Œæµçš„å¤„ç†ä¹Ÿç§°ä¸ºæ‰¹å¤„ç†ã€‚ Apache Flinkæ“…é•¿å¤„ç†æ— ç•Œå’Œæœ‰ç•Œæ•°æ®é›†ã€‚ ç²¾ç¡®æ§åˆ¶æ—¶é—´å’ŒçŠ¶æ€ä½¿Flinkçš„è¿è¡Œæ—¶èƒ½å¤Ÿåœ¨æ— ç•Œæµä¸Šè¿è¡Œä»»ä½•ç±»å‹çš„åº”ç”¨ç¨‹åºã€‚æœ‰ç•Œæµç”±ç®—æ³•å’Œæ•°æ®ç»“æ„å†…éƒ¨å¤„ç†ï¼Œè¿™äº›ç®—æ³•å’Œæ•°æ®ç»“æ„ä¸“ä¸ºå›ºå®šå¤§å°çš„æ•°æ®é›†è€Œè®¾è®¡ï¼Œä»è€Œäº§ç”Ÿå‡ºè‰²çš„æ€§èƒ½ã€‚ éšå¤„éƒ¨ç½²åº”ç”¨ç¨‹åº Apache Flinkæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿï¼Œéœ€è¦è®¡ç®—èµ„æºæ‰èƒ½æ‰§è¡Œåº”ç”¨ç¨‹åºã€‚Flinkå¯ä¸æ‰€æœ‰å¸¸è§çš„é›†ç¾¤èµ„æºç®¡ç†å™¨ï¼ˆResource Manager, å¦‚ Hadoop YARN ï¼Œ Apache Mesos å’Œ Kubernetesï¼‰é›†æˆï¼Œ ä½†ä¹Ÿå¯ä»¥è®¾ç½®ä¸ºä½œä¸ºç‹¬ç«‹é›†ç¾¤è¿è¡Œã€‚ Flinkæ—¨åœ¨å¾ˆå¥½åœ°è¿ä½œä»¥ä¸Šåˆ—å‡ºçš„æ¯ä¸ªèµ„æºç®¡ç†å™¨ã€‚è¿™æ˜¯é€šè¿‡ä¸èµ„æºç®¡ç†å™¨å¯¹åº”çš„éƒ¨ç½²æ¨¡å¼å®ç°çš„ï¼Œè¿™äº›æ¨¡å¼å…è®¸Flinkä»¥å…¶æƒ¯ç”¨æ–¹å¼ä¸æ¯ä¸ªèµ„æºç®¡ç†å™¨è¿›è¡Œäº¤äº’ã€‚ éƒ¨ç½²Flinkåº”ç”¨ç¨‹åºæ—¶ï¼ŒFlinkä¼šæ ¹æ®åº”ç”¨ç¨‹åºé…ç½®çš„å¹¶è¡Œæ€§è‡ªåŠ¨è¯†åˆ«æ‰€éœ€èµ„æºï¼Œå¹¶ä»èµ„æºç®¡ç†å™¨è¯·æ±‚å®ƒä»¬ã€‚å¦‚æœå‘ç”Ÿæ•…éšœï¼ŒFlinkä¼šé€šè¿‡è¯·æ±‚æ–°èµ„æºæ¥æ›¿æ¢å‘ç”Ÿæ•…éšœçš„å®¹å™¨ã€‚æäº¤æˆ–æ§åˆ¶åº”ç”¨ç¨‹åºçš„æ‰€æœ‰é€šä¿¡éƒ½é€šè¿‡RESTè°ƒç”¨è¿›è¡Œã€‚è¿™ç®€åŒ–äº†Flinkåœ¨è®¸å¤šç¯å¢ƒä¸­çš„é›†æˆã€‚ ä»¥ä»»ä½•è§„æ¨¡è¿è¡Œåº”ç”¨ç¨‹åº Flinkæ—¨åœ¨ä»¥ä»»ä½•è§„æ¨¡è¿è¡Œæœ‰çŠ¶æ€æµåº”ç”¨ç¨‹åºã€‚åº”ç”¨ç¨‹åºå¹¶è¡ŒåŒ–ä¸ºæ•°åƒä¸ªåœ¨é›†ç¾¤ä¸­åˆ†å¸ƒå’ŒåŒæ—¶æ‰§è¡Œçš„ä»»åŠ¡ã€‚å› æ­¤ï¼Œåº”ç”¨ç¨‹åºå¯ä»¥åˆ©ç”¨å‡ ä¹æ— é™é‡çš„CPUï¼Œä¸»å†…å­˜ï¼Œç£ç›˜å’Œç½‘ç»œIOã€‚è€Œä¸”ï¼ŒFlinkå¾ˆå®¹æ˜“ä¿æŒéå¸¸å¤§çš„åº”ç”¨ç¨‹åºçŠ¶æ€ã€‚å…¶å¼‚æ­¥å’Œå¢é‡æ£€æŸ¥ç‚¹ç®—æ³•ç¡®ä¿å¯¹å¤„ç†å»¶è¿Ÿçš„å½±å“æœ€å°ï¼ŒåŒæ—¶ä¿è¯\"ç²¾ç¡®ä¸€æ¬¡\"çš„çŠ¶æ€ä¸€è‡´æ€§ã€‚ ç”¨æˆ·æŠ¥å‘Šäº† åœ¨å…¶ç”Ÿäº§ç¯å¢ƒä¸­è¿è¡Œçš„Flinkåº”ç”¨ç¨‹åº ä»¤äººå°è±¡æ·±åˆ»çš„å¯æ‰©å±•æ€§çš„æ•°å­— ï¼Œä¾‹å¦‚ï¼š åº”ç”¨ç¨‹åº æ¯å¤© å¤„ç† æ•°ä¸‡äº¿ä¸ªäº‹ä»¶ ï¼Œ åº”ç”¨ç¨‹åºç»´æŠ¤ å¤šä¸ªTBçš„çŠ¶æ€ ï¼Œ åº”ç”¨ç¨‹åº åœ¨æ•°åƒä¸ªå†…æ ¸çš„è¿è¡Œ ã€‚ åˆ©ç”¨å†…å­˜ä¸­æ€§èƒ½ æœ‰çŠ¶æ€Flinkåº”ç”¨ç¨‹åºé’ˆå¯¹æœ¬åœ°çŠ¶æ€è®¿é—®è¿›è¡Œäº†ä¼˜åŒ–ã€‚ä»»åŠ¡çŠ¶æ€å§‹ç»ˆä¿ç•™åœ¨å†…å­˜ä¸­ï¼Œå¦‚æœçŠ¶æ€å¤§å°è¶…è¿‡å¯ç”¨å†…å­˜ï¼Œåˆ™ä¿å­˜åœ¨è®¿é—®é«˜æ•ˆçš„ç£ç›˜ä¸Šæ•°æ®ç»“æ„ä¸­ã€‚å› æ­¤ï¼Œä»»åŠ¡é€šè¿‡è®¿é—®æœ¬åœ°ï¼ˆé€šå¸¸æ˜¯å†…å­˜ä¸­ï¼‰çŠ¶æ€æ¥æ‰§è¡Œæ‰€æœ‰è®¡ç®—ï¼Œä»è€Œäº§ç”Ÿéå¸¸ä½çš„å¤„ç†å»¶è¿Ÿã€‚Flinké€šè¿‡å®šæœŸå’Œå¼‚æ­¥åœ°å°†æœ¬åœ°çŠ¶æ€checkpointåˆ°æŒä¹…å­˜å‚¨æ¥ä¿è¯åœ¨å‡ºç°æ•…éšœæ—¶çš„\"ç²¾ç¡®ä¸€æ¬¡\"çš„çŠ¶æ€ä¸€è‡´æ€§ã€‚ äºŒã€åº”ç”¨ Apache Flinkæ˜¯ä¸€ä¸ªç”¨äºå¯¹æ— ç•Œå’Œæœ‰ç•Œæ•°æ®æµè¿›è¡Œæœ‰çŠ¶æ€è®¡ç®—çš„æ¡†æ¶ã€‚Flinkåœ¨ä¸åŒçš„æŠ½è±¡çº§åˆ«æä¾›å¤šä¸ªAPIï¼Œå¹¶ä¸ºå¸¸è§ç”¨ä¾‹æä¾›ä¸“ç”¨åº“ã€‚ åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä»‹ç»Flinkæ˜“äºä½¿ç”¨å’Œå¯Œæœ‰è¡¨ç°åŠ›çš„APIå’Œåº“ã€‚ æµå¤„ç†åº”ç”¨çš„æ„å»ºå…ƒç´  å¯ä»¥ç”±æµå¤„ç†æ¡†æ¶æ„å»ºå’Œæ‰§è¡Œçš„åº”ç”¨ç¨‹åºçš„ç±»å‹ç”±æ¡†æ¶æ§åˆ¶ æµ ï¼Œ çŠ¶æ€ å’Œ æ—¶é—´ çš„ç¨‹åº¦æ¥å®šä¹‰ã€‚åœ¨ä¸‹æ–‡ä¸­ï¼Œæˆ‘ä»¬æè¿°äº†æµå¤„ç†åº”ç”¨ç¨‹åºçš„è¿™äº›æ„å»ºå—ï¼Œå¹¶è§£é‡Šäº†Flinkå¤„ç†å®ƒä»¬çš„æ–¹æ³•ã€‚ æµ æ˜¾ç„¶ï¼Œæµæ˜¯æµå¤„ç†çš„ä¸€ä¸ªåŸºæœ¬å…ƒç´ ã€‚ä½†æ˜¯ï¼Œæµå¯ä»¥å…·æœ‰ä¸åŒçš„ç‰¹å¾ï¼Œè¿™äº›ç‰¹å¾ä¼šå½±å“æµçš„å¤„ç†æ–¹å¼ã€‚Flinkæ˜¯ä¸€ä¸ªå¤šåŠŸèƒ½çš„å¤„ç†æ¡†æ¶ï¼Œå¯ä»¥å¤„ç†ä»»ä½•ç±»å‹çš„æµã€‚ æœ‰ç•Œ å’Œ æ— ç•Œ æµï¼šæµå¯ä»¥æ˜¯æ— ç•Œçš„æˆ–æœ‰ç•Œçš„ï¼Œå³å›ºå®šå¤§å°çš„æ•°æ®é›†ã€‚Flinkå…·æœ‰å®Œç¾æ”¯æŒå¤„ç†æ— ç•Œæµçš„æˆç†ŸåŠŸèƒ½ï¼ŒåŒæ—¶ä¹Ÿæœ‰ä¸“é—¨çš„ç®—å­æ¥æœ‰æ•ˆåœ°å¤„ç†æœ‰ç•Œæµã€‚ å®æ—¶ å’Œ è®°å½• æµï¼šæ‰€æœ‰æ•°æ®éƒ½ä½œä¸ºæµç”Ÿæˆã€‚æœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥å¤„ç†æ•°æ®ã€‚åœ¨ç”Ÿæˆæ—¶å®æ—¶å¤„ç†å®ƒæˆ–å°†æµæŒä¹…ä¿å­˜åˆ°å­˜å‚¨ç³»ç»Ÿï¼ˆä¾‹å¦‚ï¼Œæ–‡ä»¶ç³»ç»Ÿæˆ–å¯¹è±¡å­˜å‚¨åº“ï¼‰ï¼Œå¹¶åœ¨ä»¥åå¤„ç†å®ƒã€‚Flinkåº”ç”¨ç¨‹åºå¯ä»¥å¤„ç†è®°å½•æˆ–å®æ—¶æµã€‚ çŠ¶æ€ æ¯ä¸ªæœ‰æ„ä¹‰çš„æµåº”ç”¨ç¨‹åºéƒ½æ˜¯æœ‰çŠ¶æ€çš„ï¼Œåªæœ‰å¯¹å•ä¸ªäº‹ä»¶è¿›è¡Œè½¬æ¢çš„åº”ç”¨æ‰ä¸éœ€è¦çŠ¶æ€ã€‚è¿è¡ŒåŸºæœ¬ä¸šåŠ¡é€»è¾‘çš„ä»»ä½•åº”ç”¨ç¨‹åºéƒ½éœ€è¦è®°ä½äº‹ä»¶æˆ–ä¸­é—´ç»“æœï¼Œä»¥ä¾¿åœ¨ä»¥åçš„æ—¶é—´ç‚¹è®¿é—®å®ƒä»¬ï¼Œä¾‹å¦‚åœ¨æ”¶åˆ°ä¸‹ä¸€ä¸ªäº‹ä»¶æ—¶æˆ–åœ¨ç‰¹å®šæŒç»­æ—¶é—´ä¹‹åã€‚ åº”ç”¨çŠ¶æ€æ˜¯Flinkä¸­çš„\"ä¸€ç­‰å…¬æ°‘\"ã€‚å¯ä»¥é€šè¿‡Flinkåœ¨çŠ¶æ€å¤„ç†ç¯å¢ƒä¸­æä¾›çš„æ‰€æœ‰åŠŸèƒ½æ¥ç¡®è®¤è¿™ä¸€ç‚¹ï¼š å¤šçŠ¶æ€åŸºå…ƒ ï¼šFlinkä¸ºä¸åŒçš„æ•°æ®ç»“æ„æä¾›çŠ¶æ€åŸºå…ƒï¼Œä¾‹å¦‚åŸå­å€¼ï¼Œåˆ—è¡¨æˆ–æ˜ å°„ã€‚å¼€å‘äººå‘˜å¯ä»¥æ ¹æ®å‡½æ•°çš„è®¿é—®æ¨¡å¼é€‰æ‹©æœ€æœ‰æ•ˆçš„çŠ¶æ€åŸè¯­ã€‚ å¯æ’æ‹”çŠ¶æ€åç«¯ ï¼šåº”ç”¨ç¨‹åºçŠ¶æ€ç”±å¯æ’æ‹”çŠ¶æ€åç«¯ç®¡ç†å’Œcheckpointã€‚Flinkå…·æœ‰ä¸åŒçš„çŠ¶æ€åç«¯ï¼Œå¯ä»¥åœ¨å†…å­˜æˆ– RocksDB ä¸­å­˜å‚¨çŠ¶æ€ï¼Œ RocksDB æ˜¯ä¸€ç§é«˜æ•ˆçš„åµŒå…¥å¼ç£ç›˜æ•°æ®å­˜å‚¨ã€‚ä¹Ÿå¯ä»¥æ’å…¥è‡ªå®šä¹‰çŠ¶æ€åç«¯ã€‚ ç²¾ç¡®ä¸€æ¬¡çš„çŠ¶æ€ä¸€è‡´æ€§ ï¼šFlinkçš„checkpointå’Œæ¢å¤ç®—æ³•å¯ç¡®ä¿åœ¨å‘ç”Ÿæ•…éšœæ—¶åº”ç”¨ç¨‹åºçŠ¶æ€çš„ä¸€è‡´æ€§ã€‚å› æ­¤ï¼Œæ•…éšœæ˜¯é€æ˜å¤„ç†çš„ï¼Œä¸ä¼šå½±å“åº”ç”¨ç¨‹åºçš„æ­£ç¡®æ€§ã€‚ éå¸¸å¤§çš„çŠ¶æ€ ï¼šç”±äºå…¶å¼‚æ­¥å’Œå¢é‡æ£€æŸ¥ç‚¹ç®—æ³•ï¼ŒFlinkèƒ½å¤Ÿç»´æŒå‡ å…†å…†å­—èŠ‚çš„åº”ç”¨ç¨‹åºçŠ¶æ€ã€‚ å¯æ‰©å±•çš„åº”ç”¨ç¨‹åº ï¼šFlinké€šè¿‡å°†çŠ¶æ€é‡æ–°åˆ†é…ç»™æ›´å¤šæˆ–æ›´å°‘çš„workersæ¥æ”¯æŒæœ‰çŠ¶æ€åº”ç”¨ç¨‹åºçš„ä¼¸ç¼©ã€‚ æ—¶é—´ æ—¶é—´æ˜¯æµåº”ç”¨ç¨‹åºçš„å¦ä¸€ä¸ªé‡è¦ç»„æˆéƒ¨åˆ†ï¼Œå¤§å¤šæ•°äº‹ä»¶æµéƒ½å…·æœ‰å›ºæœ‰çš„æ—¶é—´è¯­ä¹‰ï¼Œå› ä¸ºæ¯ä¸ªäº‹ä»¶éƒ½æ˜¯åœ¨ç‰¹å®šæ—¶é—´ç‚¹ç”Ÿæˆçš„ã€‚æ­¤å¤–ï¼Œè®¸å¤šå¸¸è§çš„æµè®¡ç®—éƒ½åŸºäºæ—¶é—´ï¼Œæ¯”å¦‚ windows aggregations, sessionization, pattern detection, ä»¥åŠtime-based joinsã€‚æµå¤„ç†çš„ä¸€ä¸ªé‡è¦æ–¹é¢æ˜¯åº”ç”¨ç¨‹åºå¦‚ä½•æµ‹é‡æ—¶é—´ï¼Œå³äº‹ä»¶æ—¶é—´å’Œå¤„ç†æ—¶é—´çš„å·®å¼‚ã€‚ Flinkæä¾›äº†ä¸€ç»„ä¸°å¯Œçš„ä¸æ—¶é—´ç›¸å…³çš„åŠŸèƒ½ã€‚ äº‹ä»¶æ—¶é—´æ¨¡å¼ ï¼šä½¿ç”¨äº‹ä»¶æ—¶é—´è¯­ä¹‰å¤„ç†æµçš„åº”ç”¨ç¨‹åºæ ¹æ®äº‹ä»¶çš„æ—¶é—´æˆ³è®¡ç®—ç»“æœã€‚å› æ­¤ï¼Œæ— è®ºæ˜¯å¦å¤„ç†è®°å½•çš„æˆ–å®æ—¶çš„äº‹ä»¶ï¼Œäº‹ä»¶æ—¶é—´å¤„ç†éƒ½å…è®¸å‡†ç¡®å’Œä¸€è‡´çš„ç»“æœã€‚ æ°´å°æ”¯æŒ ï¼šFlinkä½¿ç”¨æ°´å°æ¥æ¨æ–­äº‹ä»¶æ—¶é—´åº”ç”¨ä¸­çš„æ—¶é—´ã€‚æ°´å°ä¹Ÿæ˜¯ä¸€ç§çµæ´»çš„æœºåˆ¶ï¼Œå¯ä»¥æƒè¡¡å»¶è¿Ÿå’Œç»“æœçš„å®Œæ•´æ€§ã€‚ å»¶è¿Ÿæ•°æ®å¤„ç† ï¼šå½“ä½¿ç”¨æ°´å°åœ¨äº‹ä»¶æ—¶é—´æ¨¡å¼ä¸‹å¤„ç†æµæ—¶ï¼Œå¯èƒ½ä¼šåœ¨æ‰€æœ‰ç›¸å…³äº‹ä»¶åˆ°è¾¾ä¹‹å‰å®Œæˆè®¡ç®—ã€‚è¿™ç±»äº‹ä»¶è¢«ç§°ä¸ºè¿Ÿå‘äº‹ä»¶ã€‚Flinkå…·æœ‰å¤šä¸ªé€‰é¡¹æ¥å¤„ç†å»¶è¿Ÿäº‹ä»¶ï¼Œä¾‹å¦‚é€šè¿‡ä¾§è¾“å‡ºé‡æ–°è·¯ç”±å®ƒä»¬å¹¶æ›´æ–°ä»¥å‰å®Œæˆçš„ç»“æœã€‚ å¤„ç†æ—¶é—´æ¨¡å¼ ï¼šé™¤äº†äº‹ä»¶æ—¶é—´æ¨¡å¼ä¹‹å¤–ï¼ŒFlinkè¿˜æ”¯æŒå¤„ç†æ—¶é—´è¯­ä¹‰ï¼Œè¯¥å¤„ç†æ—¶é—´è¯­ä¹‰æ‰§è¡Œç”±å¤„ç†æœºå™¨çš„æŒ‚é’Ÿæ—¶é—´è§¦å‘çš„è®¡ç®—ã€‚å¤„ç†æ—¶é—´æ¨¡å¼é€‚ç”¨äºå…·æœ‰ä¸¥æ ¼çš„ä½å»¶è¿Ÿè¦æ±‚ã€å¯ä»¥å®¹å¿è¿‘ä¼¼ç»“æœçš„æŸäº›åº”ç”¨ã€‚ åˆ†å±‚API Flinkæä¾›ä¸‰å±‚APIã€‚æ¯ä¸ªAPIåœ¨ç®€æ´æ€§å’Œè¡¨è¾¾æ€§ä¹‹é—´æä¾›ä¸åŒçš„æƒè¡¡ï¼Œå¹¶é’ˆå¯¹ä¸åŒçš„ç”¨ä¾‹ã€‚ æˆ‘ä»¬ç®€è¦ä»‹ç»æ¯ä¸ªAPIï¼Œè®¨è®ºå…¶åº”ç”¨ï¼Œå¹¶æ˜¾ç¤ºä»£ç ç¤ºä¾‹ã€‚ ProcessFunctions ProcessFunctions æ˜¯Flinkæä¾›çš„æœ€å…·è¡¨ç°åŠ›çš„åŠŸèƒ½æ¥å£ã€‚Flinkæä¾›ProcessFunctionæ¥å¤„ç†æ¥è‡ªä¸€ä¸ªæˆ–ä¸¤ä¸ªè¾“å…¥æµçš„å•ä¸ªäº‹ä»¶ï¼Œæˆ–è¢«åˆ†ç»„åœ¨ä¸€ä¸ªçª—å£ä¸­çš„äº‹ä»¶ã€‚ProcessFunctionsæä¾›å¯¹æ—¶é—´å’ŒçŠ¶æ€çš„ç»†ç²’åº¦æ§åˆ¶ã€‚ProcessFunctionå¯ä»¥ä»»æ„ä¿®æ”¹å…¶çŠ¶æ€å¹¶æ³¨å†Œå°†åœ¨æœªæ¥è§¦å‘å›è°ƒå‡½æ•°çš„å®šæ—¶å™¨ã€‚å› æ­¤ï¼ŒProcessFunctionså¯ä»¥æ ¹æ®è®¸å¤š æœ‰çŠ¶æ€äº‹ä»¶é©±åŠ¨çš„åº”ç”¨çš„ éœ€è¦å®ç°å¤æ‚çš„æ¯äº‹ä»¶ä¸šåŠ¡é€»è¾‘ã€‚ ä»¥ä¸‹æ˜¾ç¤ºäº†ä¸€ä¸ª KeyedProcessFunction å¯¹ä¸€ä¸ª KeyedStream è¿›è¡Œæ“ä½œï¼ŒåŒ¹é… START ä»¥åŠ END äº‹ä»¶çš„ç¤ºä¾‹ã€‚å½“ä¸€ä¸ª START äº‹ä»¶è¢«æ¥æ”¶ï¼Œåˆ™è¯¥å‡½æ•°åœ¨çŠ¶æ€ä¸­è®°ä½å…¶æ—¶é—´æˆ³å¹¶ä¸”æ³¨å†Œä¸€ä¸ª4å°æ—¶çš„è®¡æ—¶å™¨ã€‚å¦‚æœåœ¨è®¡æ—¶å™¨è§¦å‘ä¹‹å‰æ”¶åˆ° END äº‹ä»¶ï¼Œåˆ™è¯¥å‡½æ•°è®¡ç®—äº‹ä»¶ END å’Œ START äº‹ä»¶ä¹‹é—´çš„æŒç»­æ—¶é—´ï¼Œæ¸…é™¤çŠ¶æ€å¹¶è¿”å›å€¼ã€‚å¦åˆ™ï¼Œè®¡æ—¶å™¨åªä¼šè¶…æ—¶å¹¶æ¸…é™¤çŠ¶æ€ã€‚ /** * Matches keyed START and END events and computes the difference between * both elements' timestamps. The first String field is the key attribute, * the second String attribute marks START and END events. */ public static class StartEndDuration extends KeyedProcessFunction < String , Tuple2 < String , String > , Tuple2 < String , Long >> { private ValueState < Long > startTime ; @Override public void open ( Configuration conf ) { // obtain state handle startTime = getRuntimeContext () . getState ( new ValueStateDescriptor < Long > ( \"startTime\" , Long . class )); } /** Called for each processed event. */ @Override public void processElement ( Tuple2 < String , String > in , Context ctx , Collector < Tuple2 < String , Long >> out ) throws Exception { switch ( in . f1 ) { case \"START\" : // set the start time if we receive a start event. startTime . update ( ctx . timestamp ()); // register a timer in four hours from the start event. ctx . timerService () . registerEventTimeTimer ( ctx . timestamp () + 4 * 60 * 60 * 1000 ); break ; case \"END\" : // emit the duration between start and end event Long sTime = startTime . value (); if ( sTime != null ) { out . collect ( Tuple2 . of ( in . f0 , ctx . timestamp () - sTime )); // clear the state startTime . clear (); } default : // do nothing } } /** Called when a timer fires. */ @Override public void onTimer ( long timestamp , OnTimerContext ctx , Collector < Tuple2 < String , Long >> out ) { // Timeout interval exceeded. Cleaning up the state. startTime . clear (); } } è¿™ä¸ªä¾‹å­è¯´æ˜äº† KeyedProcessFunction çš„è¡¨ç°åŠ›ï¼Œä½†ä¹Ÿå¼ºè°ƒäº†å®ƒæ˜¯ä¸€ä¸ªç›¸å½“å†—é•¿çš„æ¥å£ã€‚ The DataStream API DataStream API ä¸ºè¯¸å¦‚çª—å£ç­‰è®¸å¤šå¸¸è§çš„æµå¤„ç†æ“ä½œæä¾›åŸè¯­ã€‚DataStream APIå¯ç”¨äºJavaå’ŒScalaï¼ŒåŸºäºå¦‚ map() ï¼Œ reduce() å’Œ aggregate() ç­‰æ–¹æ³•ã€‚å¯ä»¥é€šè¿‡æ‰©å±•æ¥å£ï¼Œæˆ–åƒJavaæˆ–Scalaä¸­lambdaå‡½æ•°ä¸€æ ·æ¥å®šä¹‰å‡½æ•°ã€‚ ä»¥ä¸‹ç¤ºä¾‹æ˜¾ç¤ºå¦‚ä½•å¯¹ç‚¹å‡»æµè¿›è¡Œä¼šè¯åŒ–å¹¶è®¡ç®—æ¯ä¸ªä¼šè¯çš„ç‚¹å‡»æ¬¡æ•°ã€‚ // a stream of website clicks DataStream < Click > clicks = ... DataStream < Tuple2 < String , Long >> result = clicks // project clicks to userId and add a 1 for counting . map ( // define function by implementing the MapFunction interface. new MapFunction < Click , Tuple2 < String , Long >> () { @Override public Tuple2 < String , Long > map ( Click click ) { return Tuple2 . of ( click . userId , 1L ); } }) // key by userId (field 0) . keyBy ( 0 ) // define session window with 30 minute gap . window ( EventTimeSessionWindows . withGap ( Time . minutes ( 30L ))) // count clicks per session. Define function as lambda function. . reduce (( a , b ) -> Tuple2 . of ( a . f0 , a . f1 + b . f1 )); SQL & Table API Flinkå…·æœ‰ä¸¤ä¸ªå…³ç³»å‹APIï¼Œ Table APIå’ŒSQL ã€‚è¿™ä¸¤ä¸ªAPIéƒ½æ˜¯ç”¨äºæ‰¹å¤„ç†å’Œæµå¤„ç†çš„ç»Ÿä¸€APIï¼Œå³ï¼Œåœ¨æ— ç•Œçš„å®æ—¶æµæˆ–æœ‰ç•Œçš„è®°å½•æµä¸Šä»¥ç›¸åŒçš„è¯­ä¹‰æ‰§è¡ŒæŸ¥è¯¢ï¼Œå¹¶äº§ç”Ÿç›¸åŒçš„ç»“æœã€‚Table APIå’ŒSQLåˆ©ç”¨ Apache Calcite è¿›è¡Œè§£æï¼ŒéªŒè¯å’ŒæŸ¥è¯¢ä¼˜åŒ–ã€‚å®ƒä»¬å¯ä»¥ä¸DataStreamå’ŒDataSet APIæ— ç¼é›†æˆï¼Œå¹¶æ”¯æŒç”¨æˆ·å®šä¹‰çš„æ ‡é‡ï¼Œèšåˆå’Œè¡¨å€¼å‡½æ•°ã€‚ Flinkçš„å…³ç³»å‹APIæ—¨åœ¨ç®€åŒ– æ•°æ®åˆ†æ ï¼Œ æ•°æ®pipeliningå’ŒETLåº”ç”¨ çš„å®šä¹‰ã€‚ ä»¥ä¸‹ç¤ºä¾‹æ˜¾ç¤ºç”¨äºä¼šè¯åŒ–ç‚¹å‡»æµå¹¶è®¡ç®—æ¯ä¸ªä¼šè¯çš„ç‚¹å‡»æ¬¡æ•°çš„SQLæŸ¥è¯¢ã€‚è¿™ä¸DataStream APIç¤ºä¾‹ä¸­çš„ç”¨ä¾‹ç›¸åŒã€‚ SELECT userId , COUNT ( * ) FROM clicks GROUP BY SESSION ( clicktime , INTERVAL '30' MINUTE ), userId åº“ Flinkå…·æœ‰å‡ ä¸ªç”¨äºå¸¸è§æ•°æ®å¤„ç†ç”¨ä¾‹çš„åº“ã€‚è¿™äº›åº“é€šå¸¸åµŒå…¥åœ¨APIä¸­ï¼Œè€Œä¸æ˜¯å®Œå…¨ç‹¬ç«‹çš„ã€‚å› æ­¤ï¼Œä»–ä»¬å¯ä»¥ä»APIçš„æ‰€æœ‰åŠŸèƒ½ä¸­å—ç›Šï¼Œå¹¶ä¸å…¶ä»–åº“é›†æˆã€‚ å¤æ‚äº‹ä»¶å¤„ç†ï¼ˆCEPï¼‰ ï¼šæ¨¡å¼æ£€æµ‹æ˜¯äº‹ä»¶æµå¤„ç†çš„ä¸€ä¸ªéå¸¸å¸¸è§çš„ç”¨ä¾‹ã€‚Flinkçš„CEPåº“æä¾›äº†ä¸€ä¸ªAPIæ¥æŒ‡å®šäº‹ä»¶çš„æ¨¡å¼ï¼ˆæƒ³æƒ³æ­£åˆ™è¡¨è¾¾å¼æˆ–çŠ¶æ€æœºï¼‰ã€‚CEPåº“ä¸Flinkçš„DataStream APIé›†æˆï¼Œä»¥ä¾¿åœ¨DataStreamä¸Šè¯„ä¼°æ¨¡å¼ã€‚CEPåº“çš„åº”ç”¨åŒ…æ‹¬ç½‘ç»œå…¥ä¾µæ£€æµ‹ï¼Œä¸šåŠ¡æµç¨‹ç›‘æ§å’Œæ¬ºè¯ˆæ£€æµ‹ã€‚ DataSet API ï¼šDataSet APIæ˜¯Flinkç”¨äºæ‰¹å¤„ç†åº”ç”¨ç¨‹åºçš„æ ¸å¿ƒAPIã€‚DataSet APIçš„åŸè¯­åŒ…æ‹¬ map ï¼Œ reduce ï¼Œ ï¼ˆå¤–éƒ¨ï¼‰join ï¼Œ co-group å’Œ iterate ã€‚æ‰€æœ‰æ“ä½œéƒ½ç”±ç®—æ³•å’Œæ•°æ®ç»“æ„æ”¯æŒï¼Œè¿™äº›ç®—æ³•å’Œæ•°æ®ç»“æ„å¯¹å†…å­˜ä¸­çš„åºåˆ—åŒ–æ•°æ®è¿›è¡Œæ“ä½œï¼Œå¹¶åœ¨æ•°æ®å¤§å°è¶…è¿‡å†…å­˜é¢„ç®—æ—¶æº¢å‡ºåˆ°ç£ç›˜ã€‚Flinkçš„DataSet APIçš„æ•°æ®å¤„ç†ç®—æ³•æ˜¯å—ä¼ ç»Ÿæ•°æ®åº“ç®—å­çš„å¯å‘ï¼Œä¾‹å¦‚æ··åˆæ•£åˆ—è¿æ¥æˆ–å¤–éƒ¨åˆå¹¶æ’åºã€‚ Gelly ï¼šGellyæ˜¯ä¸€ä¸ªå¯æ‰©å±•çš„å›¾å½¢å¤„ç†å’Œåˆ†æåº“ã€‚Gellyåœ¨DataSet APIä¹‹ä¸Šå®ç°å¹¶ä¸ä¹‹é›†æˆã€‚å› æ­¤ï¼Œå®ƒå—ç›Šäºå…¶å¯æ‰©å±•ä¸”å¼ºå¤§çš„ç®—å­ã€‚Gellyå…·æœ‰ å†…ç½®ç®—æ³• ï¼Œä¾‹å¦‚æ ‡ç­¾ä¼ æ’­ï¼Œä¸‰è§’å½¢æšä¸¾å’Œé¡µé¢æ’åï¼Œä½†ä¹Ÿæä¾›äº†ä¸€ç§ Graph API ä»è€Œç®€åŒ–è‡ªå®šä¹‰å›¾ç®—æ³•çš„å®ç°ã€‚ ä¸‰ã€è¿è¡Œ ç”±äºè®¸å¤šæµåº”ç”¨ç¨‹åºæ—¨åœ¨ä»¥æœ€çŸ­çš„åœæœºæ—¶é—´è¿ç»­è¿è¡Œï¼Œå› æ­¤æµå¤„ç†å™¨å¿…é¡»æä¾›å‡ºè‰²çš„æ•…éšœæ¢å¤ï¼Œä»¥åŠåœ¨åº”ç”¨ç¨‹åºè¿è¡Œæ—¶ç›‘è§†å’Œç»´æŠ¤åº”ç”¨ç¨‹åºçš„å·¥å…·ã€‚ Apache Flinkéå¸¸å…³æ³¨æµå¤„ç†çš„è¿ç»´æ–¹é¢ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°†è§£é‡ŠFlinkçš„æ•…éšœæ¢å¤æœºåˆ¶ï¼Œå¹¶ä»‹ç»å…¶ç®¡ç†å’Œç›‘ç£æ­£åœ¨è¿è¡Œçš„åº”ç”¨ç¨‹åºçš„åŠŸèƒ½ã€‚ å…¨å¤©å€™è¿è¡Œæ‚¨çš„åº”ç”¨ç¨‹åº æœºå™¨å’Œè¿‡ç¨‹æ•…éšœåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­æ— å¤„ä¸åœ¨ã€‚åƒFlinkè¿™æ ·çš„åˆ†å¸ƒå¼æµå¤„ç†å™¨å¿…é¡»ä»æ•…éšœä¸­æ¢å¤ï¼Œä»¥ä¾¿èƒ½å¤Ÿ24/7å…¨å¤©å€™è¿è¡Œæµåº”ç”¨ç¨‹åºã€‚æ˜¾ç„¶ï¼Œè¿™ä¸ä»…æ„å‘³ç€åœ¨æ•…éšœåé‡æ–°å¯åŠ¨åº”ç”¨ç¨‹åºï¼Œè€Œä¸”è¿˜è¦ç¡®ä¿å…¶å†…éƒ¨çŠ¶æ€ä¿æŒä¸€è‡´ï¼Œä»¥ä¾¿åº”ç”¨ç¨‹åºå¯ä»¥ç»§ç»­å¤„ç†ï¼Œå°±åƒä»æœªå‘ç”Ÿè¿‡æ•…éšœä¸€æ ·ã€‚ Flinkæä¾›äº†å¤šç§åŠŸèƒ½ï¼Œä»¥ç¡®ä¿åº”ç”¨ç¨‹åºä¿æŒè¿è¡Œå¹¶ä¿æŒä¸€è‡´ï¼š ä¸€è‡´çš„æ£€æŸ¥ç‚¹ ï¼šFlinkçš„æ¢å¤æœºåˆ¶åŸºäºåº”ç”¨ç¨‹åºçŠ¶æ€çš„ä¸€è‡´æ£€æŸ¥ç‚¹ã€‚å¦‚æœå‘ç”Ÿæ•…éšœï¼Œå°†é‡æ–°å¯åŠ¨åº”ç”¨ç¨‹åºå¹¶ä»æœ€æ–°æ£€æŸ¥ç‚¹åŠ è½½å…¶çŠ¶æ€ã€‚ç»“åˆå¯é‡ç½®æµæºï¼Œæ­¤åŠŸèƒ½å¯ä»¥ä¿è¯ ç²¾ç¡®ä¸€æ¬¡çš„çŠ¶æ€ä¸€è‡´æ€§ ã€‚ é«˜æ•ˆæ£€æŸ¥ç‚¹ ï¼šå¦‚æœåº”ç”¨ç¨‹åºä¿æŒTBçº§çŠ¶æ€ï¼Œåˆ™checkpointåº”ç”¨ç¨‹åºçš„çŠ¶æ€å¯èƒ½éå¸¸æ˜‚è´µã€‚Flinkå¯ä»¥æ‰§è¡Œå¼‚æ­¥å’Œå¢é‡æ£€æŸ¥ç‚¹ï¼Œä»¥ä¾¿å°†æ£€æŸ¥ç‚¹å¯¹åº”ç”¨ç¨‹åºçš„å»¶è¿ŸSLAçš„å½±å“ä¿æŒåœ¨éå¸¸å°çš„æ°´å¹³ã€‚ ç«¯åˆ°ç«¯ç²¾ç¡®ä¸€æ¬¡ ï¼šFlinkä¸ºç‰¹å®šå­˜å‚¨ç³»ç»Ÿæä¾›äº‹åŠ¡æ¥æ”¶å™¨ï¼Œä¿è¯æ•°æ®åªå†™å‡ºä¸€æ¬¡ï¼Œå³ä½¿å‡ºç°æ•…éšœã€‚ ä¸é›†ç¾¤ç®¡ç†å™¨é›†æˆ ï¼šFlinkä¸é›†ç¾¤ç®¡ç†å™¨ç´§å¯†é›†æˆï¼Œä¾‹å¦‚ Hadoop YARN ï¼Œ Mesos æˆ– Kubernetes ã€‚å½“è¿›ç¨‹å¤±è´¥æ—¶ï¼Œå°†è‡ªåŠ¨å¯åŠ¨ä¸€ä¸ªæ–°è¿›ç¨‹æ¥æ¥ç®¡å…¶å·¥ä½œã€‚ é«˜å¯ç”¨æ€§è®¾ç½® ï¼šFlinkå…·æœ‰é«˜å¯ç”¨æ€§æ¨¡å¼ï¼Œå¯æ¶ˆé™¤æ‰€æœ‰å•ç‚¹æ•…éšœã€‚HAæ¨¡å¼åŸºäº Apache ZooKeeper ï¼Œè¿™æ˜¯ä¸€ç§ç»è¿‡éªŒè¯çš„å¯é åˆ†å¸ƒå¼åè°ƒæœåŠ¡ã€‚ æ›´æ–°ï¼Œè¿ç§»ï¼Œæš‚åœå’Œæ¢å¤æ‚¨çš„åº”ç”¨ç¨‹åº éœ€è¦ç»´æŠ¤ä¸ºå…³é”®ä¸šåŠ¡æœåŠ¡æä¾›æ”¯æŒçš„æµåº”ç”¨ç¨‹åºã€‚éœ€è¦ä¿®å¤é”™è¯¯ï¼Œå¹¶ä¸”éœ€è¦å®ç°æ”¹è¿›æˆ–æ–°åŠŸèƒ½ã€‚ä½†æ˜¯ï¼Œæ›´æ–°æœ‰çŠ¶æ€æµåº”ç”¨ç¨‹åºå¹¶éæ˜“äº‹ã€‚é€šå¸¸ï¼Œäººä»¬ä¸èƒ½ç®€å•åœ°åœæ­¢åº”ç”¨ç¨‹åºå¹¶é‡æ–°å¯åŠ¨å›ºå®šç‰ˆæœ¬æˆ–æ”¹è¿›ç‰ˆæœ¬ï¼Œå› ä¸ºäººä»¬æ— æ³•æ‰¿å—ä¸¢å¤±åº”ç”¨ç¨‹åºçš„çŠ¶æ€ã€‚ Flinkçš„ Savepoints æ˜¯ä¸€ä¸ªç‹¬ç‰¹è€Œå¼ºå¤§çš„åŠŸèƒ½ï¼Œå¯ä»¥è§£å†³æ›´æ–°æœ‰çŠ¶æ€åº”ç”¨ç¨‹åºå’Œè®¸å¤šå…¶ä»–ç›¸å…³æŒ‘æˆ˜çš„é—®é¢˜ã€‚ä¿å­˜ç‚¹æ˜¯åº”ç”¨ç¨‹åºçŠ¶æ€çš„ä¸€è‡´å¿«ç…§ï¼Œå› æ­¤ä¸æ£€æŸ¥ç‚¹éå¸¸ç›¸ä¼¼ã€‚ä½†æ˜¯ï¼Œä¸æ£€æŸ¥ç‚¹ä¸åŒï¼Œä¿å­˜ç‚¹éœ€è¦æ‰‹åŠ¨è§¦å‘ï¼Œå¹¶ä¸”åœ¨åº”ç”¨ç¨‹åºåœæ­¢æ—¶ä¸ä¼šè‡ªåŠ¨åˆ é™¤ä¿å­˜ç‚¹ã€‚ä¿å­˜ç‚¹å¯ç”¨äºå¯åŠ¨çŠ¶æ€å…¼å®¹çš„åº”ç”¨ç¨‹åºå¹¶åˆå§‹åŒ–å…¶çŠ¶æ€ã€‚ä¿å­˜ç‚¹å…·æœ‰ä»¥ä¸‹åŠŸèƒ½ï¼š åº”ç”¨ç¨‹åºæ¼”å˜ ï¼šä¿å­˜ç‚¹å¯ç”¨äºæ¼”è¿›åº”ç”¨ç¨‹åºã€‚ä¸€ä¸ªåº”ç”¨ç¨‹åºçš„å›ºå®šæˆ–æ”¹è¿›ç‰ˆæœ¬å¯ä»¥ä»å…ˆå‰ç‰ˆæœ¬çš„ä¿å­˜ç‚¹é‡æ–°å¯åŠ¨ã€‚ä¹Ÿå¯ä»¥ä»è¾ƒæ—©çš„æ—¶é—´ç‚¹ï¼ˆå‡è®¾å­˜åœ¨è¿™æ ·çš„ä¿å­˜ç‚¹ï¼‰å¯åŠ¨åº”ç”¨ç¨‹åºï¼Œä»¥ä¿®å¤ç”±æœ‰ç¼ºé™·çš„ç‰ˆæœ¬äº§ç”Ÿçš„é”™è¯¯ç»“æœã€‚ ç¾¤é›†è¿ç§» ï¼šä½¿ç”¨ä¿å­˜ç‚¹ï¼Œå¯ä»¥å°†åº”ç”¨ç¨‹åºè¿ç§»ï¼ˆæˆ–å…‹éš†ï¼‰åˆ°ä¸åŒçš„ç¾¤é›†ã€‚ Flinkç‰ˆæœ¬æ›´æ–° ï¼šå¯ä»¥ä½¿ç”¨ä¿å­˜ç‚¹è¿ç§»åº”ç”¨ç¨‹åºä»¥åœ¨æ–°çš„Flinkç‰ˆæœ¬ä¸Šè¿è¡Œã€‚ åº”ç”¨ç¨‹åºæ‰©å±• ï¼šä¿å­˜ç‚¹å¯ç”¨äºå¢åŠ æˆ–å‡å°‘åº”ç”¨ç¨‹åºçš„å¹¶è¡Œæ€§ã€‚ A / Bæµ‹è¯•å’Œå‡è®¾æƒ…æ™¯ ï¼šå¯ä»¥é€šè¿‡å¯åŠ¨åŒä¸€ä¿å­˜ç‚¹çš„æ‰€æœ‰ç‰ˆæœ¬æ¥æ¯”è¾ƒä¸¤ä¸ªï¼ˆæˆ–æ›´å¤šï¼‰ä¸åŒç‰ˆæœ¬çš„åº”ç”¨ç¨‹åºçš„æ€§èƒ½æˆ–è´¨é‡ã€‚ æš‚åœå’Œæ¢å¤ ï¼šå¯ä»¥é€šè¿‡è·å–ä¿å­˜ç‚¹å¹¶åœæ­¢åº”ç”¨ç¨‹åºæ¥æš‚åœåº”ç”¨ç¨‹åºã€‚åœ¨ä»¥åçš„ä»»ä½•æ—¶é—´ç‚¹ï¼Œéƒ½å¯ä»¥ä»ä¿å­˜ç‚¹æ¢å¤åº”ç”¨ç¨‹åºã€‚ å­˜æ¡£ ï¼šå¯ä»¥å­˜æ¡£ï¼Œä»¥ä¾¿èƒ½å¤Ÿå°†åº”ç”¨ç¨‹åºçš„çŠ¶æ€é‡ç½®ä¸ºè¾ƒæ—©çš„æ—¶é—´ç‚¹ã€‚ ç›‘æ§æ‚¨çš„åº”ç”¨ç¨‹åº ä¸ä»»ä½•å…¶ä»–æœåŠ¡ä¸€æ ·ï¼Œéœ€è¦å¯¹è¿ç»­è¿è¡Œçš„æµåº”ç”¨ç¨‹åºè¿›è¡Œç›‘ç£ï¼Œå¹¶å°†å…¶é›†æˆåˆ°ç»„ç»‡çš„è¿è¥åŸºç¡€æ¶æ„ï¼ˆå³ç›‘æ§å’Œæ—¥å¿—è®°å½•æœåŠ¡ï¼‰ä¸­ã€‚ç›‘æ§æœ‰åŠ©äºé¢„æµ‹é—®é¢˜å¹¶æå‰åšå‡ºååº”ã€‚é€šè¿‡æ—¥å¿—è®°å½•å¯ä»¥è¿›è¡Œæ ¹å› åˆ†æè°ƒæŸ¥å¤±è´¥ã€‚æœ€åï¼Œé€šè¿‡ä¸€ä¸ªæ˜“äºè®¿é—®çš„æ¥å£æ¥æ§åˆ¶è¿è¡Œåº”ç”¨ç¨‹åºçš„æ˜¯ä¸€ä¸ªé‡è¦ç‰¹æ€§ã€‚ Flinkä¸è®¸å¤šå¸¸è§çš„æ—¥å¿—è®°å½•å’Œç›‘è§†æœåŠ¡å¾ˆå¥½åœ°é›†æˆï¼Œå¹¶æä¾›REST APIæ¥æ§åˆ¶åº”ç”¨ç¨‹åºå’ŒæŸ¥è¯¢ä¿¡æ¯ã€‚ Web UI ï¼šFlinkå…·æœ‰Web UIï¼Œå¯ä»¥æ£€æŸ¥ï¼Œç›‘è§†å’Œè°ƒè¯•æ­£åœ¨è¿è¡Œçš„åº”ç”¨ç¨‹åºã€‚å®ƒè¿˜å¯ç”¨äºæäº¤æ‰§è¡Œæˆ–å–æ¶ˆæ‰§è¡Œã€‚ æ—¥å¿—è®°å½• ï¼šFlinkå®ç°äº†æµè¡Œçš„slf4jæ—¥å¿—è®°å½•ç•Œé¢ï¼Œå¹¶ä¸æ—¥å¿—æ¡†æ¶ log4j æˆ– logback é›†æˆã€‚ æŒ‡æ ‡ ï¼šFlinkå…·æœ‰å¤æ‚çš„æŒ‡æ ‡ç³»ç»Ÿï¼Œå¯æ”¶é›†å’ŒæŠ¥å‘Šç³»ç»Ÿå’Œç”¨æˆ·å®šä¹‰çš„æŒ‡æ ‡ã€‚æŒ‡æ ‡å¯ä»¥å¯¼å‡ºåˆ°å¤šä¸ªæŠ¥å‘Šå™¨ï¼ŒåŒ…æ‹¬ JMX ï¼ŒGangliaï¼Œ Graphite ï¼Œ Prometheus ï¼Œ StatsD ï¼Œ Datadog å’Œ Slf4j ã€‚ REST API ï¼šFlinkå…¬å¼€REST APIä»¥æäº¤æ–°åº”ç”¨ç¨‹åºã€ç”Ÿæˆæ­£åœ¨è¿è¡Œçš„åº”ç”¨ç¨‹åºçš„ä¿å­˜ç‚¹æˆ–å–æ¶ˆåº”ç”¨ç¨‹åºã€‚REST APIè¿˜å…¬å¼€å…ƒæ•°æ®å’Œæ”¶é›†è¿è¡Œæˆ–å·²å®Œæˆåº”ç”¨ç¨‹åºçš„æŒ‡æ ‡ã€‚","tags":"Big Data","url":"https://jiang-hao.com/articles/2019/big-data-flink-intro.html","loc":"https://jiang-hao.com/articles/2019/big-data-flink-intro.html"},{"title":"OpenShift è¯¦ç»†æ•™ç¨‹ - åŸºç¡€çŸ¥è¯†å…¥é—¨","text":"ç®€ä»‹ è‡ªç”±å’Œå¼€æ”¾æºç çš„äº‘è®¡ç®—å¹³å°ä½¿å¼€å‘äººå‘˜èƒ½å¤Ÿåˆ›å»ºã€æµ‹è¯•å’Œè¿è¡Œä»–ä»¬çš„åº”ç”¨ç¨‹åºï¼Œå¹¶ä¸”å¯ä»¥æŠŠå®ƒä»¬éƒ¨ç½²åˆ°äº‘ä¸­ã€‚ OpenShiftæ˜¯çº¢å¸½çš„äº‘å¼€å‘å¹³å°å³æœåŠ¡ï¼ˆPaaSï¼‰ã€‚æ˜¯ä¸€ä¸ªåŸºäºä¸»æµçš„å®¹å™¨æŠ€æœ¯Dockerå’ŒK8sæ„å»ºçš„å¼€æºå®¹å™¨äº‘å¹³å°ã€‚åº•å±‚ä»¥Dockerä½œä¸ºå®¹å™¨å¼•æ“é©±åŠ¨ï¼Œä»¥K8sä½œä¸ºå®¹å™¨ç¼–æ’å¼•æ“ç»„ä»¶ï¼Œå¹¶æä¾›äº†å¼€å‘è¯­è¨€ï¼Œä¸­é—´ä»¶ï¼ŒDevOpsè‡ªåŠ¨åŒ–æµç¨‹å·¥å…·å’Œweb consoleç”¨æˆ·ç•Œé¢ç­‰å…ƒç´ ï¼Œæä¾›äº†ä¸€å¥—å®Œæ•´çš„åŸºäºå®¹å™¨çš„åº”ç”¨äº‘å¹³å°ã€‚ Openshiftæä¾›æ¯”ä»»ä½•PaaSæ›´å¤šçš„çµæ´»æ€§ï¼Œå®ƒæ”¯æŒç”¨äºJavaã€Pythonã€PHPã€Perlã€node.jsã€goå’ŒRubyçš„æ›´å¤šçš„å¼€å‘æ¡†æ¶ï¼ŒåŒ…æ‹¬ Springã€Seamã€Weldã€CDIã€Railsã€Rackã€Symfonyã€Zend Frameworkã€Twistedã€Djangoå’ŒJava Eã€‚æ•°æ®åº“è¯­è¨€åˆ™æ”¯æŒMySQLã€MongoDBå’ŒPostgreSQLã€‚ å¦å¤–å®ƒè¿˜æä¾›äº†å¤šç§é›†æˆå¼€å‘å·¥å…·å¦‚Eclipse integrationï¼ŒJBoss Developer Studioå’Œ Jenkinsç­‰ã€‚ OpenShift OnlineæœåŠ¡æ„å»ºåœ¨Red Hat Enterprise Linuxä¸Šã€‚Red Hat Enterprise Linuxæä¾›é›†æˆåº”ç”¨ç¨‹åºï¼Œè¿è¡Œåº“å’Œä¸€ä¸ªé…ç½®å¯ä¼¸ç¼©çš„å¤šç”¨æˆ·å•å®ä¾‹çš„æ“ä½œç³»ç»Ÿï¼Œä»¥æ»¡è¶³ä¼ä¸šçº§åº”ç”¨çš„å„ç§éœ€æ±‚ã€‚ å»ºç«‹åœ¨çº¢å¸½å¼€æºé¢†å¯¼åœ°ä½åŸºç¡€ä¸Šçš„OpenShiftæ—¨åœ¨ç»ˆç»“PaaSçš„å‚å•†é”å®šï¼Œä½¿ç”¨æˆ·å¯ä»¥é€‰æ‹©è‡ª å·±åº”ç”¨è¿è¡Œåœ¨å“ªä¸ªäº‘æä¾›å•†çš„äº‘ä¸­ã€‚OpenShiftå°†ä½œä¸ºåœ¨çº¿æœåŠ¡æ¥æä¾›ã€‚ OpenShiftä½¿ç”¨çš„æ¶æ„ç”±å•ä¸ªèŠ‚ç‚¹ç»„æˆï¼Œä»¥å®¹çº³åº”ç”¨ç¨‹åºä»£ç å’ŒæœåŠ¡ï¼ŒåŒæ—¶è¿˜æœ‰ä¸€ç³»åˆ—çš„å•ç‹¬ä»£ç†æ¥ç®¡ç†èŠ‚ç‚¹å’Œæä¾›æœåŠ¡ã€‚é™¤æ­¤ä¹‹å¤–ï¼ŒOpenShiftçš„æ¶æ„è¿˜åŒ…æ‹¬ä¸€ä¸ªæ¶ˆæ¯ç³»ç»Ÿå°†èŠ‚ç‚¹å’Œä»£ç†ç»‘å®šåˆ°ä¸€èµ·ï¼Œå¹¶ä¸”ä½¿ç”¨ RESTful çš„APIåŒå¤–éƒ¨å·¥å…·æ•´åˆã€‚ OpenshiftåŒ…æ‹¬ç¤¾åŒºç‰ˆå’Œä¼ä¸šç‰ˆï¼š ç¤¾åŒºç‰ˆï¼š Openshift Origin ä¼ä¸šç‰ˆï¼š Openshift Online/Openshift Enterprise é‡è¦æ¦‚å¿µ system:adminä¸ºé»˜è®¤çš„é›†ç¾¤ç®¡ç†å‘˜ï¼Œæ‹¥æœ‰æœ€é«˜çš„æƒé™ã€‚è¯¥ç”¨æˆ·æ²¡æœ‰å¯†ç ï¼Œç™»é™†ä¾èµ–äºè¯ä¹¦å¯†é’¥ã€‚ Service Account æ˜¯ Openshift ä¸­ä¸“é—¨ä¾›ç¨‹åºå’Œç»„ä»¶ä½¿ç”¨çš„è´¦å·ã€‚ä¸åŒçš„ç”¨æˆ·æˆ–ç»„å…³è”ä¸åŒçš„è§’è‰²ï¼ŒåŒæ—¶å…³è”ä¸åŒçš„SCCï¼ˆsecurity context constriantï¼‰å®‰å…¨ä¸Šä¸‹æ–‡ã€‚ æ€»ä½“æ¶æ„ è‡ªåº•è€Œä¸ŠåŒ…æ‹¬å‡ ä¸ªå±‚æ¬¡ï¼šåŸºç¡€æ¶æ„å±‚ï¼Œå®¹å™¨å¼•æ“å±‚ï¼Œå®¹å™¨ç¼–æ’å±‚ï¼ŒPaaSæœåŠ¡å±‚ï¼Œç•Œé¢åŠå·¥å…·å±‚ã€‚ åŸºç¡€æ¶æ„å±‚ï¼šä¸ºOpenshiftå¹³å°çš„è¿è¡Œæä¾›åŸºç¡€çš„è¿è¡Œç¯å¢ƒã€‚Openshiftæ”¯æŒè¿è¡Œåœ¨ç‰©ç†æœºï¼Œè™šæ‹Ÿæœºï¼ˆkvm,vmware,virtual boxç­‰ï¼‰ï¼Œå…¬æœ‰äº‘ï¼ˆé˜¿é‡Œäº‘ï¼ŒAWSç­‰ï¼‰ï¼Œç§æœ‰äº‘ï¼Œæ··åˆäº‘ä¸Šã€‚ å®¹å™¨å¼•æ“å±‚ï¼šä»¥å½“å‰ä¸»æµçš„Dockerä½œä¸ºå®¹å™¨å¼•æ“ã€‚ å®¹å™¨ç¼–æ’å±‚ï¼šä»¥Googleçš„k8sè¿›è¡Œå®¹å™¨ç¼–æ’ã€‚ PaaSæœåŠ¡å±‚ï¼šå®¹å™¨äº‘å¹³å°çš„æœ€ç»ˆç›®çš„æ˜¯ä¸ºä¸Šå±‚åº”ç”¨æœåŠ¡æä¾›æ”¯æŒï¼Œæé«˜å¼€å‘ï¼Œæµ‹è¯•ï¼Œéƒ¨ç½²ï¼Œè¿ç»´çš„é€Ÿåº¦å’Œæ•ˆç‡ã€‚ç”¨æˆ·åœ¨Openshiftäº‘å¹³å°ä¸Šå¯ä»¥å¿«é€Ÿçš„è·å–å’Œéƒ¨ç½²ä¸€ä¸ªæ•°æ®åº“ï¼Œç¼“å­˜ç­‰ã€‚ ç•Œé¢åŠå·¥å…·å±‚ï¼šOpenshiftæä¾›äº†å¤šç§ç”¨æˆ·çš„æ¥å…¥æ¸ é“ï¼šWebæ§åˆ¶å°ï¼Œå‘½ä»¤è¡Œï¼ŒRestFulæ¥å£ç­‰ã€‚ æ ¸å¿ƒç»„ä»¶ MasterèŠ‚ç‚¹ï¼šä¸»æ§èŠ‚ç‚¹ é›†ç¾¤å†…çš„ç®¡ç†ç»„ä»¶éƒ½è¿è¡Œåœ¨MasterèŠ‚ç‚¹ä¸Šã€‚MasterèŠ‚ç‚¹è´Ÿè´£é›†ç¾¤çš„é…ç½®ç®¡ç†ï¼Œç»´æŠ¤é›†ç¾¤çš„çŠ¶æ€ã€‚ MasterèŠ‚ç‚¹è¿è¡Œçš„æœåŠ¡ç»„ä»¶ï¼š API Serverï¼šè´Ÿè´£æä¾›Web consoleå’ŒRESTful APIã€‚é›†ç¾¤å†…æ‰€æœ‰èŠ‚ç‚¹éƒ½ä¼šè®¿é—®API Serverï¼Œæ›´æ–°èŠ‚ç‚¹çš„çŠ¶æ€åŠå…¶ä¸Šçš„å®¹å™¨çŠ¶æ€ã€‚ æ•°æ®æºï¼ˆData storeï¼‰ï¼šé›†ç¾¤å†…æ‰€æœ‰çŠ¶æ€ä¿¡æ¯éƒ½ä¼šå­˜å‚¨åœ¨åç«¯çš„ä¸€ä¸ªetcdçš„åˆ†å¸ƒå¼æ•°æ®åº“ä¸­ã€‚ è°ƒåº¦æ§åˆ¶å™¨ï¼ˆSchedulerï¼‰ï¼šè´Ÿè´£æŒ‰ç”¨æˆ·è¾“å…¥çš„è¦æ±‚å¯»æ‰¾åˆé€‚çš„è®¡ç®—èŠ‚ç‚¹ã€‚ å¤åˆ¶æ§åˆ¶å™¨ï¼ˆReplication Controllerï¼‰ï¼šè´Ÿè´£ç›‘æ§å½“å‰å®¹å™¨å®ä¾‹çš„æ•°é‡å’Œç”¨æˆ·éƒ¨ç½²æŒ‡å®šçš„æ•°é‡æ˜¯å¦åŒ¹é…ï¼Œè‹¥æœ‰å®¹å™¨å¼‚å¸¸é€€å‡ºï¼Œå¤åˆ¶æ§åˆ¶å™¨å‘ç°å®é™…æ•°å°‘äºéƒ¨ç½²å®šä¹‰æ•°ï¼Œä»è€Œè§¦å‘éƒ¨ç½²æ–°çš„å®ä¾‹ã€‚ NodeèŠ‚ç‚¹ï¼šè®¡ç®—èŠ‚ç‚¹ æ¥æ”¶MasterèŠ‚ç‚¹çš„æŒ‡ä»¤ï¼Œè¿è¡Œå’Œç»´æŠ¤Dockerå®¹å™¨ã€‚MasterèŠ‚ç‚¹ä¹Ÿå¯ä»¥æ˜¯NodeèŠ‚ç‚¹ï¼Œåªæ˜¯åœ¨ä¸€èˆ¬ç¯å¢ƒä¸­ï¼Œå…¶è¿è¡Œå®¹å™¨çš„åŠŸèƒ½æ˜¯å…³é—­çš„ã€‚ Project åœ¨k8sä¸­ä½¿ç”¨å‘½åç©ºé—´æ¥åˆ†éš”èµ„æºã€‚åŒä¸€ä¸ªå‘½åç©ºé—´ä¸­ï¼ŒæŸä¸€ä¸ªå¯¹è±¡çš„åç§°åœ¨å…¶åˆ†ç±»ä¸­å¿…é¡»å”¯ä¸€ï¼Œä½†åœ¨ä¸åŒå‘½åç©ºé—´ä¸­çš„å¯¹è±¡åˆ™å¯ä»¥åŒåã€‚Openshifté›†æˆäº†k8så‘½åç©ºé—´çš„æ¦‚å¿µï¼Œè€Œä¸”åœ¨å…¶ä¸Šå®šä¹‰äº†Projectå¯¹è±¡çš„æ¦‚å¿µï¼Œ æ¯ä¸€ä¸ªProjectä¼šå’Œä¸€ä¸ªnamespaceç›¸å…³è” ã€‚ Pod åœ¨Openshiftä¸­çš„å®¹å™¨éƒ½ä¼šPodåŒ…è£¹ï¼Œå³å®¹å™¨éƒ½è¿è¡Œåœ¨Podå†…éƒ¨ï¼Œ ä¸€ä¸ªPodå¯ä»¥è¿è¡Œä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨ï¼Œç»å¤§å¤šå°‘æƒ…å†µä¸‹ï¼Œä¸€ä¸ªPodå†…éƒ¨è¿è¡Œä¸€ä¸ªå®¹å™¨ ã€‚ Service ç”±äºå®¹å™¨æ˜¯ä¸€ä¸ªéæŒä¹…åŒ–çš„å¯¹è±¡ï¼Œæ‰€æœ‰å¯¹å®¹å™¨çš„ä¿®æ”¹åœ¨å®¹å™¨é”€æ¯åéƒ½ä¼šä¸¢å¤±ï¼Œè€Œä¸”æ¯ä¸ªå®¹å™¨çš„IPåœ°å€ä¼šä¸æ–­å˜åŒ–ã€‚k8sæä¾›äº†Serviceç»„ä»¶ï¼Œå½“éƒ¨ç½²æŸä¸ªåº”ç”¨æ—¶ï¼Œä¼šåˆ›å»ºä¸€ä¸ªServiceå¯¹è±¡ï¼Œè¯¥å¯¹è±¡ä¸ä¸€ä¸ªæˆ–å¤šä¸ªPodå…³è”ï¼ŒåŒæ—¶æ¯ä¸ªServiceåˆ†é…ä¸€ä¸ªç›¸å¯¹æ’å®šçš„IPï¼Œé€šè¿‡è®¿é—®è¯¥IPåŠç›¸åº”çš„ç«¯å£ï¼Œè¯·æ±‚å°±ä¼šè½¬å‘åˆ°å¯¹åº”Podç«¯å£ã€‚é™¤äº†å¯é€šè¿‡IPï¼Œä¹Ÿå¯ä»¥é€šè¿‡åŸŸåè®¿é—®Serviceï¼Œæ ¼å¼ä¸ºï¼š..svc.cluster.local Routerå’ŒRoute Serviceæä¾›äº†ä¸€ä¸ªé€šå¾€åç«¯Podé›†ç¾¤çš„ç¨³å®šå…¥å£ï¼Œä½†æ˜¯Serviceçš„IPåœ°å€åªæ˜¯é›†ç¾¤å†…éƒ¨çš„èŠ‚ç‚¹å’Œå®¹å™¨å¯è§ã€‚å¤–éƒ¨éœ€é€šè¿‡Routerï¼ˆè·¯ç”±å™¨ï¼‰æ¥è½¬å‘ã€‚Routerç»„ä»¶æ˜¯Openshifté›†ç¾¤ä¸­ä¸€ä¸ªé‡è¦çš„ç»„ä»¶ï¼Œå®ƒæ˜¯å¤–ç•Œè®¿é—®é›†ç¾¤å†…å®¹å™¨åº”ç”¨çš„å…¥å£ã€‚ç”¨æˆ·å¯ä»¥åˆ›å»ºRouteï¼ˆè·¯ç”±è§„åˆ™ï¼‰å¯¹è±¡ï¼Œä¸€ä¸ªRouteä¼šä¸ä¸€ä¸ªServiceå…³è”ï¼Œå¹¶ç»‘å®šä¸€ä¸ªåŸŸåã€‚Routeè§„åˆ™è¢«RouteråŠ è½½ã€‚å½“é›†ç¾¤å¤–éƒ¨çš„è¯·æ±‚é€šè¿‡æŒ‡å®šåŸŸåè®¿é—®åº”ç”¨æ—¶ï¼ŒåŸŸåè¢«è§£æå¹¶æŒ‡å‘Routeræ‰€åœ¨çš„è®¡ç®—æœºèŠ‚ç‚¹ä¸Šï¼ŒRouterè·å–è¯¥è¯·æ±‚ï¼Œç„¶åæ ¹æ®Routeè§„åˆ™å®šä¹‰è½¬å‘ç»™ä¸è¿™ä¸ªåŸŸåå¯¹åº”çš„Serviceåç«¯æ‰€å…³è”çš„Podå®¹å™¨å®ä¾‹ã€‚ä¸Šè¿°è½¬å‘æµç¨‹ç±»ä¼¼äºnginxã€‚Routerè´Ÿè´£å°†é›†ç¾¤å¤–çš„è¯·æ±‚è½¬å‘åˆ°é›†ç¾¤çš„å®¹å™¨ï¼ŒServiceåˆ™è´Ÿè´£æŠŠæ¥è‡ªé›†ç¾¤å†…éƒ¨çš„è¯·æ±‚è½¬å‘åˆ°æŒ‡å®šçš„å®¹å™¨ä¸­ã€‚ Persistent Storage å®¹å™¨é»˜è®¤æ˜¯éæŒä¹…åŒ–çš„ï¼Œæ‰€æœ‰çš„ä¿®æ”¹åœ¨å®¹å™¨é”€æ¯æ—¶éƒ½ä¼šä¸¢å¤±ã€‚Dockeræä¾›äº†æŒä¹…åŒ–å·æŒ‚è½½çš„èƒ½åŠ›ï¼ŒOpenshifté™¤äº†æä¾›æŒä¹…åŒ–å·æŒ‚è½½çš„èƒ½åŠ›ï¼Œè¿˜æä¾›äº†ä¸€ç§æŒä¹…åŒ–ä¾›ç»™æ¨¡å‹å³PVï¼ˆPersistent Volumeï¼‰å’ŒPVCï¼ˆPersistent Volume Claimï¼‰ã€‚åœ¨PVå’ŒPVCæ¨¡å‹ä¸­ï¼Œé›†ç¾¤ç®¡ç†å‘˜ä¼šåˆ›å»ºå¤§é‡ä¸åŒå¤§å°å’Œä¸åŒç‰¹æ€§çš„PVã€‚ç”¨æˆ·åœ¨éƒ¨ç½²åº”ç”¨æ—¶æ˜¾å¼çš„å£°æ˜å¯¹æŒä¹…åŒ–çš„éœ€æ±‚ï¼Œåˆ›å»ºPVCï¼Œåœ¨PVCä¸­å®šä¹‰æ‰€éœ€è¦çš„å­˜å‚¨å¤§å°ï¼Œè®¿é—®æ–¹å¼ã€‚Openshifté›†ç¾¤ä¼šè‡ªåŠ¨å¯»æ‰¾ç¬¦åˆè¦æ±‚çš„PVä¸PVCè‡ªåŠ¨å¯¹æ¥ã€‚ Registry Openshiftå†…éƒ¨çš„é•œåƒä»“åº“ï¼Œä¸»è¦ç”¨äºå­˜æ”¾å†…ç½®çš„S2Iæ„å»ºæµç¨‹æ‰€äº§ç”Ÿçš„é•œåƒã€‚ S2I Source to Imageï¼Œè´Ÿè´£å°†åº”ç”¨æºç æ„å»ºæˆé•œåƒã€‚æ­¥éª¤ï¼š 1ï¼‰ç”¨æˆ·è¾“å…¥æºä»£ç ä»“åº“çš„åœ°å€ 2ï¼‰é€‰æ‹©S2Iæ„å»ºçš„åŸºç¡€é•œåƒ 3ï¼‰è§¦å‘æ„å»º 4ï¼‰S2Iæ„å»ºæ‰§è¡Œå™¨ä»æŒ‡å®šçš„æºç ä»“åº“åœ°å€ä¸‹è½½ä»£ç  5ï¼‰S2Iæ„å»ºæ‰§è¡Œå™¨å®ä¾‹åŒ–Builderé•œåƒï¼Œå¹¶å°†ä»£ç æ³¨å…¥åˆ°Builderé•œåƒ 6ï¼‰S2Iæ„å»ºæ‰§è¡Œå™¨æŒ‰ç…§é¢„å®šä¹‰çš„é€»è¾‘æ‰§è¡Œæºä»£ç çš„ç¼–è¯‘ï¼Œæ„å»º 7ï¼‰ç”Ÿæˆæ–°çš„é•œåƒ 8ï¼‰S2Iæ„å»ºæ‰§è¡Œå™¨å°†æ–°é•œåƒPushåˆ°Registry 9ï¼‰æ›´æ–°ç›¸å…³çš„Image Streamä¿¡æ¯ æ ¸å¿ƒæµç¨‹ 1ï¼‰åˆ›å»ºåº”ç”¨ï¼šç”¨æˆ·é€šè¿‡webæ§åˆ¶å°æˆ–ocå‘½ä»¤åˆ›å»ºåº”ç”¨ï¼ŒOpenshiftå¹³å°æ ¹æ®ç”¨æˆ·è¾“å…¥çš„æºç åœ°å€å’ŒBuilderé•œåƒï¼Œç”Ÿæˆæ„å»ºé…ç½®Builder configå’Œéƒ¨ç½²é…ç½®Deployment configï¼ŒServiceï¼ŒRouteç­‰ã€‚ 2ï¼‰è§¦å‘æ„å»º 3ï¼‰å®ä¾‹åŒ–æ„å»ºï¼šå¹³å°æ ¹æ®Builder configå®ä¾‹åŒ–Builderå¯¹è±¡ï¼Œä¸‹è½½ä»£ç ï¼Œå¹¶å°†ä»£ç æ³¨å…¥åˆ°Builderå¯¹è±¡ï¼Œæ‰§è¡Œç¼–è¯‘ï¼Œæ„å»º 4ï¼‰ç”Ÿæˆæ–°é•œåƒå¹¶Pushåˆ°Registry 5ï¼‰æ›´æ–°ç›¸å…³çš„Image Streamä¿¡æ¯ 6ï¼‰è§¦å‘éƒ¨ç½²ï¼šå½“Image Streamæ›´æ–°åï¼Œè§¦å‘å¹³å°éƒ¨ç½²é•œåƒ 7ï¼‰å®ä¾‹åŒ–é•œåƒéƒ¨ç½²ï¼šå¹³å°æ ¹æ®Deployment configå®ä¾‹åŒ–éƒ¨ç½²ï¼Œç”ŸæˆDeployå¯¹è±¡ 8ï¼‰ç”ŸæˆReplication Controller 9ï¼‰éƒ¨ç½²å®¹å™¨ï¼šé€šè¿‡Replication Controllerï¼Œå¹³å°å°†podåŠå®¹å™¨éƒ¨ç½²åˆ°å„ä¸ªèŠ‚ç‚¹ä¸Š 10ï¼‰ç”¨æˆ·è®¿é—®ï¼šç”¨æˆ·é€šè¿‡æµè§ˆå™¨è®¿é—®Routeå¯¹è±¡ä¸­å®šä¹‰çš„åº”ç”¨åŸŸå 11ï¼‰è¯·æ±‚å¤„ç†å¹¶è¿”å›ï¼šè¯·æ±‚åˆ°è¾¾Routerç»„ä»¶åï¼Œé€šè¿‡Routeè½¬å‘ç»™ç›¸å…³è”çš„Serviceï¼Œæœ€ç»ˆåˆ°å¯¹åº”çš„å®¹å™¨å®ä¾‹ã€‚ ä¼˜ç‚¹ æ”¯æŒå¿«é€Ÿéƒ¨ç½²ï¼Œå®ç°æ•æ·å¼€å‘ã€‚ æä¾›åŠ¨æ€ä¼¸ç¼©åŠŸèƒ½ï¼Œå°†è¿‡ç¨‹ç®€åŒ–è‡³åªéœ€æ›´æ”¹ä¸€ä¸ªå€¼ã€‚ ç®¡ç†èµ„æºï¼Œä¸ºå®¹å™¨åˆ†é…åˆé€‚çš„èµ„æºï¼Œæé«˜èµ„æºåˆ©ç”¨ç‡ã€‚ æœ‰å¯¹åº”çš„å¹³å°è‡ªåŠ¨åŒ–è¿ç»´å·¥å…·ï¼Œå¤§å¤§å‡å°‘è¿ç»´è´Ÿæ‹…ã€‚ åœ¨å¤§è§„æ¨¡é›†ç¾¤æ—¶æä¾›æ–¹ä¾¿é«˜æ•ˆçš„ç®¡ç†æ–¹æ³•ã€‚ æœ‰å®Œå–„çš„ç»“æ„ï¼Œéƒ¨ç½²ä»¥åèƒ½å¿«é€Ÿåœ°æµ‹è¯•åº”ç”¨ã€‚ ä¸°å¯Œçš„æ¥å£ï¼Œæä¾›ç»™å„ç§æ’ä»¶ä¸äºŒæ¬¡å¼€å‘ä½¿ç”¨ ä¸Šæ‰‹éš¾åº¦ï¼šæ˜¯åŸºäºdockerå’Œk8sçš„å¼€æºé¡¹ç›®ï¼Œæœ‰ä¸°å¯Œçš„ç¤¾åŒºæŠ€æœ¯æ”¯æŒã€‚è¿˜æœ‰å…³äºopenshiftä¸­æ–‡å‚è€ƒä¹¦ã€‚","tags":"Cloud","url":"https://jiang-hao.com/articles/2019/cloud-openshift-basics.html","loc":"https://jiang-hao.com/articles/2019/cloud-openshift-basics.html"},{"title":"è¯¦è§£Javaä¸­çš„finalå…³é”®å­—","text":"final ç®€ä»‹ 1 final å…³é”®å­—å¯ç”¨äºå¤šä¸ªåœºæ™¯ï¼Œä¸”åœ¨ä¸åŒåœºæ™¯å…·æœ‰ä¸åŒçš„ä½œç”¨ã€‚é¦–å…ˆï¼Œ final æ˜¯ä¸€ä¸ª éè®¿é—®ä¿®é¥°ç¬¦ ï¼Œ ä»… é€‚ç”¨ äºå˜é‡ï¼Œæ–¹æ³•æˆ–ç±» ã€‚ä¸‹é¢æ˜¯ä½¿ç”¨finalçš„ä¸åŒåœºæ™¯ï¼š ä¸Šé¢è¿™å¼ å›¾å¯ä»¥æ¦‚æ‹¬æˆï¼š å½“ final ä¿®é¥° å˜é‡ æ—¶ï¼Œè¢«ä¿®é¥°çš„å˜é‡å¿…é¡»è¢«åˆå§‹åŒ–(èµ‹å€¼)ï¼Œä¸”åç»­ä¸èƒ½ä¿®æ”¹å…¶å€¼ï¼Œå®è´¨ä¸Šæ˜¯å¸¸é‡ï¼› å½“ final ä¿®é¥° æ–¹æ³• æ—¶ï¼Œè¢«ä¿®é¥°çš„æ–¹æ³•æ— æ³•è¢«æ‰€åœ¨ç±»çš„å­ç±»é‡å†™ï¼ˆè¦†å†™ï¼‰ï¼› å½“ final ä¿®é¥° ç±» æ—¶ï¼Œè¢«ä¿®é¥°çš„ç±»ä¸èƒ½è¢«ç»§æ‰¿ï¼Œå¹¶ä¸” final ç±»ä¸­çš„æ‰€æœ‰æˆå‘˜æ–¹æ³•éƒ½ä¼šè¢«éšå¼åœ°æŒ‡å®šä¸º final æ–¹æ³•ï¼Œä½†æˆå‘˜å˜é‡åˆ™ä¸ä¼šå˜ã€‚ final ä¿®é¥°å˜é‡ å½“ä½¿ç”¨ final å…³é”®å­—å£°æ˜ç±»æˆå‘˜å˜é‡æˆ–å±€éƒ¨å˜é‡åï¼Œå…¶å€¼ä¸èƒ½è¢«å†æ¬¡ä¿®æ”¹ï¼›ä¹Ÿç»å¸¸å’Œ static å…³é”®å­—ä¸€èµ·ï¼Œä½œä¸º ç±»å¸¸é‡ ä½¿ç”¨ã€‚å¾ˆå¤šæ—¶å€™ä¼šå®¹æ˜“æŠŠ static å’Œ final å…³é”®å­—æ··æ·†ï¼Œ static ä½œç”¨äºæˆå‘˜å˜é‡ç”¨æ¥è¡¨ç¤ºåªä¿å­˜ä¸€ä»½å‰¯æœ¬ï¼Œè€Œ final çš„ä½œç”¨æ˜¯ç”¨æ¥ä¿è¯å˜é‡ä¸å¯å˜ ã€‚å¦‚æœ final å˜é‡æ˜¯å¼•ç”¨ï¼Œè¿™æ„å‘³ç€è¯¥å˜é‡ä¸èƒ½é‡æ–°ç»‘å®šåˆ°å¼•ç”¨å¦ä¸€ä¸ªå¯¹è±¡ï¼Œä½†æ˜¯å¯ä»¥æ›´æ”¹è¯¥å¼•ç”¨å˜é‡æŒ‡å‘çš„å¯¹è±¡çš„å†…éƒ¨çŠ¶æ€ï¼Œå³å¯ä»¥ä» final æ•°ç»„ æˆ– final é›†åˆä¸­æ·»åŠ æˆ–åˆ é™¤å…ƒç´ ã€‚æœ€å¥½ç”¨å…¨éƒ¨å¤§å†™æ¥è¡¨ç¤º final å˜é‡ï¼Œä½¿ç”¨ä¸‹åˆ’çº¿æ¥åˆ†éš”å•è¯ã€‚ ä¾‹å­ ï¼š //ä¸€ä¸ªfinalæˆå‘˜å¸¸é‡ final int THRESHOLD = 5 ; //ä¸€ä¸ªç©ºçš„finalæˆå‘˜å¸¸é‡ final int THRESHOLD ; //ä¸€ä¸ªé™æ€finalç±»å¸¸é‡ static final double PI = 3.141592653589793 ; //ä¸€ä¸ªç©ºçš„é™æ€finalç±»å¸¸é‡ static final double PI ; åˆå§‹åŒ–finalå˜é‡ ï¼š æˆ‘ä»¬å¿…é¡»åˆå§‹åŒ–ä¸€ä¸ª final å˜é‡ï¼Œå¦åˆ™ç¼–è¯‘å™¨å°†æŠ›å‡ºç¼–è¯‘æ—¶é”™è¯¯ã€‚ final å˜é‡åªèƒ½é€šè¿‡ åˆå§‹åŒ–å™¨ æˆ–èµ‹å€¼è¯­å¥åˆå§‹åŒ–ä¸€æ¬¡ã€‚åˆå§‹åŒ– final å˜é‡æœ‰ä¸‰ç§æ–¹æ³•ï¼š å¯ä»¥åœ¨å£°æ˜å®ƒæ—¶åˆå§‹åŒ– final å˜é‡ã€‚è¿™ç§æ–¹æ³•æ˜¯æœ€å¸¸è§çš„ã€‚å¦‚æœåœ¨å£°æ˜æ—¶ æœª åˆå§‹åŒ–ï¼Œåˆ™è¯¥å˜é‡ç§°ä¸º ç©º final å˜é‡ ã€‚ä¸‹é¢æ˜¯åˆå§‹åŒ–ç©º final å˜é‡çš„ä¸¤ç§æ–¹æ³•ã€‚ å¯ä»¥åœ¨ instance-initializerå— æˆ–å†…éƒ¨æ„é€ å‡½æ•°ä¸­ åˆå§‹åŒ– ç©ºçš„ final å˜é‡ã€‚å¦‚æœæ‚¨çš„ç±»ä¸­æœ‰å¤šä¸ªæ„é€ å‡½æ•°ï¼Œåˆ™å¿…é¡»åœ¨æ‰€æœ‰æ„é€ å‡½æ•°ä¸­åˆå§‹åŒ–å®ƒï¼Œå¦åˆ™å°†æŠ›å‡ºç¼–è¯‘æ—¶é”™è¯¯ã€‚ å¯ä»¥åœ¨ é™æ€å— å†…åˆå§‹åŒ–ç©ºçš„ final é™æ€å˜é‡ã€‚ è¿™é‡Œæ³¨æ„æœ‰ä¸€ä¸ªå¾ˆæ™®éçš„è¯¯åŒºã€‚ å¾ˆå¤šäººä¼šè®¤ä¸ºstaticä¿®é¥°çš„finalå¸¸é‡å¿…é¡»åœ¨å£°æ˜æ—¶å°±è¿›è¡Œåˆå§‹åŒ–ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚ä½†å…¶å®åˆ™ä¸ç„¶ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆä½¿ç”¨ static final å…³é”®å­—å£°æ˜ä¸€ä¸ªç±»å¸¸é‡ï¼Œç„¶åå†åœ¨ é™æ€å— å†…åˆå§‹åŒ–ç©ºçš„ final é™æ€å˜é‡ã€‚ è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªä¾‹å­çœ‹ä¸Šé¢åˆå§‹åŒ– final å˜é‡çš„ä¸åŒæ–¹æ³•ã€‚ // Java program to demonstrate different // ways of initializing a final variable class Gfg { // a final variable direct initialize // ç›´æ¥èµ‹å€¼ final int THRESHOLD = 5 ; // a blank final variable // ç©ºfinalå˜é‡ final int CAPACITY ; // another blank final variable final int MINIMUM ; // a final static variable PI direct initialize // ç›´æ¥èµ‹å€¼çš„é™æ€finalå˜é‡ static final double PI = 3.141592653589793 ; // a blank final static variable // ç©ºçš„é™æ€finalå˜é‡ï¼Œæ­¤å¤„å¹¶ä¸ä¼šæŠ¥é”™ï¼Œå› ä¸ºåœ¨ä¸‹æ–¹çš„é™æ€ä»£ç å—å†…å¯¹å…¶è¿›è¡Œäº†åˆå§‹åŒ– static final double EULERCONSTANT ; // instance initializer block for initializing CAPACITY // ç”¨æ¥èµ‹å€¼ç©ºfinalå˜é‡çš„å®ä¾‹åˆå§‹åŒ–å— { CAPACITY = 25 ; } // static initializer block for initializing EULERCONSTANT // ç”¨æ¥èµ‹å€¼ç©ºfinalå˜é‡çš„é™æ€åˆå§‹åŒ–å— static { EULERCONSTANT = 2.3 ; } // constructor for initializing MINIMUM // Note that if there are more than one // constructor, you must initialize MINIMUM // in them also // æ„é€ å‡½æ•°å†…åˆå§‹åŒ–ç©ºfinalå˜é‡ï¼›æ³¨æ„å¦‚æœæœ‰å¤šä¸ª // æ„é€ å‡½æ•°æ—¶ï¼Œå¿…é¡»åœ¨æ¯ä¸ªä¸­éƒ½åˆå§‹åŒ–è¯¥finalå˜é‡ public GFG () { MINIMUM = - 1 ; } } ä½•æ—¶ä½¿ç”¨ final å˜é‡ï¼š æ™®é€šå˜é‡å’Œ final å˜é‡ä¹‹é—´çš„å”¯ä¸€åŒºåˆ«æ˜¯æˆ‘ä»¬å¯ä»¥å°†å€¼é‡æ–°èµ‹å€¼ç»™æ™®é€šå˜é‡ï¼›ä½†æ˜¯å¯¹äº final å˜é‡ï¼Œä¸€æ—¦èµ‹å€¼ï¼Œæˆ‘ä»¬å°±ä¸èƒ½æ”¹å˜ final å˜é‡çš„å€¼ã€‚å› æ­¤ï¼Œ final å˜é‡å¿…é¡»ä»…ç”¨äºæˆ‘ä»¬å¸Œæœ›åœ¨æ•´ä¸ªç¨‹åºæ‰§è¡ŒæœŸé—´ä¿æŒä¸å˜çš„å€¼ã€‚ final å¼•ç”¨å˜é‡ï¼š å½“ final å˜é‡æ˜¯å¯¹è±¡çš„å¼•ç”¨æ—¶ï¼Œåˆ™æ­¤å˜é‡ç§°ä¸º final å¼•ç”¨å˜é‡ã€‚ä¾‹å¦‚ï¼Œ final çš„ StringBuffer å˜é‡ï¼š final StringBuffer sb ; final å˜é‡æ— æ³•é‡æ–°èµ‹å€¼ã€‚ä½†æ˜¯å¯¹äº final çš„å¼•ç”¨å˜é‡ï¼Œå¯ä»¥æ›´æ”¹è¯¥å¼•ç”¨å˜é‡æŒ‡å‘çš„å¯¹è±¡çš„å†…éƒ¨çŠ¶æ€ã€‚è¯·æ³¨æ„ï¼Œè¿™ä¸æ˜¯é‡æ–°èµ‹å€¼ã€‚ finalçš„ è¿™ä¸ªå±æ€§ç§°ä¸º éä¼ é€’æ€§ ã€‚è¦äº†è§£å¯¹è±¡å†…éƒ¨çŠ¶æ€çš„å«ä¹‰ï¼Œè¯·å‚é˜…ä¸‹é¢çš„ç¤ºä¾‹ï¼š // Java program to demonstrate // reference final variable class Gfg { public static void main ( String [] args ) { // a final reference variable sb final StringBuilder sb = new StringBuilder ( \"Geeks\" ); System . out . println ( sb ); // changing internal state of object // reference by final reference variable sb // æ›´æ”¹finalå˜é‡sbå¼•ç”¨çš„å¯¹è±¡çš„å†…éƒ¨çŠ¶æ€ sb . append ( \"ForGeeks\" ); System . out . println ( sb ); } } è¾“å‡ºï¼š Geeks GeeksForGeeks éä¼ é€’ å±æ€§ä¹Ÿé€‚ç”¨äºæ•°ç»„ï¼Œå› ä¸ºåœ¨Javaä¸­ æ•°ç»„ä¹Ÿæ˜¯å¯¹è±¡ ã€‚å¸¦æœ‰ final å…³é”®å­—çš„æ•°ç»„ä¹Ÿç§°ä¸º final æ•°ç»„ ã€‚ æ³¨æ„ ï¼š å¦‚ä¸Šæ‰€è¿°ï¼Œ final å˜é‡ä¸èƒ½é‡æ–°èµ‹å€¼ï¼Œè¿™æ ·åšä¼šæŠ›å‡ºç¼–è¯‘æ—¶é”™è¯¯ã€‚ // Java program to demonstrate re-assigning // final variable will throw compile-time error class Gfg { static final int CAPACITY = 4 ; public static void main ( String args [] ) { // re-assigning final variable // will throw compile-time error CAPACITY = 5 ; } } è¾“å‡ºï¼š Compiler Error: cannot assign a value to final variable CAPACITY å½“åœ¨æ–¹æ³•/æ„é€ å‡½æ•°/å—ä¸­åˆ›å»º final å˜é‡æ—¶ï¼Œå®ƒè¢«ç§°ä¸ºå±€éƒ¨ final å˜é‡ï¼Œå¹¶ä¸”å¿…é¡»åœ¨åˆ›å»ºå®ƒçš„ä½ç½®åˆå§‹åŒ–ä¸€æ¬¡ã€‚å‚è§ä¸‹é¢çš„å±€éƒ¨ final å˜é‡ç¨‹åºï¼š // Java program to demonstrate // local final variable // The following program compiles and runs fine class Gfg { public static void main ( String args [] ) { // local final variable final int i ; i = 20 ; System . out . println ( i ); } } è¾“å‡ºï¼š 20 æ³¨æ„C ++ const å˜é‡å’ŒJava final å˜é‡ä¹‹é—´çš„åŒºåˆ«ã€‚å£°æ˜æ—¶ï¼Œå¿…é¡»ä¸ºC ++ä¸­çš„constå˜é‡èµ‹å€¼ã€‚å¯¹äºJavaä¸­çš„ final å˜é‡ï¼Œæ­£å¦‚æˆ‘ä»¬åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­æ‰€çœ‹åˆ°çš„é‚£æ ·ï¼Œå¯ä»¥ç¨åèµ‹å€¼ï¼Œä½†åªèƒ½èµ‹å€¼ä¸€æ¬¡ã€‚ final åœ¨ foreachå¾ªç¯ ä¸­ï¼šåœ¨foreachè¯­å¥ä¸­ä½¿ç”¨ final å£°æ˜å­˜å‚¨å¾ªç¯å…ƒç´ çš„å˜é‡æ˜¯åˆæ³•çš„ã€‚ // Java program to demonstrate final // with for-each statement class Gfg { public static void main ( String [] args ) { int arr [] = { 1 , 2 , 3 }; // final with for-each statement // legal statement for ( final int i : arr ) System . out . print ( i + \" \" ); } } è¾“å‡ºï¼š 1 2 3 è¯´æ˜ï¼š ç”±äºiå˜é‡åœ¨å¾ªç¯çš„æ¯æ¬¡è¿­ä»£æ—¶è¶…å‡ºèŒƒå›´ï¼Œå› æ­¤å®é™…ä¸Šæ¯æ¬¡è¿­ä»£éƒ½é‡æ–°å£°æ˜ï¼Œå…è®¸ä½¿ç”¨ç›¸åŒçš„æ ‡è®°ï¼ˆå³iï¼‰æ¥è¡¨ç¤ºå¤šä¸ªå˜é‡ã€‚ final ä¿®é¥°ç±» å½“ä½¿ç”¨ final å…³é”®å­—å£°æ˜ä¸€ä¸ªç±»æ—¶ï¼Œå®ƒè¢«ç§°ä¸º final ç±»ã€‚è¢«å£°æ˜ä¸º final çš„ç±»ä¸èƒ½è¢«æ‰©å±•ï¼ˆç»§æ‰¿ï¼‰ã€‚ final ç±»æœ‰ä¸¤ç§ç”¨é€”ï¼š ä¸€ä¸ªæ˜¯å½»åº•é˜²æ­¢è¢« ç»§æ‰¿ ï¼Œå› ä¸º final ç±»ä¸èƒ½è¢«æ‰©å±•ã€‚ä¾‹å¦‚ï¼Œæ‰€æœ‰ åŒ…è£…ç±» å¦‚ Integer ï¼Œ Float ç­‰éƒ½æ˜¯ final ç±»ã€‚æˆ‘ä»¬æ— æ³•æ‰©å±•å®ƒä»¬ã€‚ final ç±»çš„å¦ä¸€ä¸ªç”¨é€”æ˜¯ åˆ›å»ºä¸€ä¸ª ç±»ä¼¼äº String ç±»çš„ä¸å¯å˜ç±»ã€‚åªæœ‰å°†ä¸€ä¸ªç±»å®šä¹‰æˆä¸º final ç±»ï¼Œæ‰èƒ½ä½¿å…¶ä¸å¯å˜ã€‚ final class A { // methods and fields } // ä¸‹é¢çš„è¿™ä¸ªç±»Bæƒ³è¦æ‰©å±•ç±»Aæ˜¯éæ³•çš„ class B extends A { // COMPILE-ERROR! Can't subclass A } Javaæ”¯æŒæŠŠclasså®šä¹‰æˆ final ï¼Œä¼¼ä¹è¿èƒŒäº†é¢å‘å¯¹è±¡ç¼–ç¨‹çš„åŸºæœ¬åŸåˆ™ï¼Œä½†åœ¨å¦ä¸€æ–¹é¢ï¼Œå°é—­çš„ç±»ä¹Ÿä¿è¯äº†è¯¥ç±»çš„æ‰€æœ‰æ–¹æ³•éƒ½æ˜¯å›ºå®šä¸å˜çš„ï¼Œä¸ä¼šæœ‰å­ç±»çš„è¦†ç›–æ–¹æ³•éœ€è¦å»åŠ¨æ€åŠ è½½ã€‚è¿™ç»™ç¼–è¯‘å™¨åšä¼˜åŒ–æ—¶æä¾›äº†æ›´å¤šçš„å¯èƒ½ï¼Œæœ€å¥½çš„ä¾‹å­æ˜¯Stringï¼Œå®ƒå°±æ˜¯ final ç±»ï¼ŒJavaç¼–è¯‘å™¨å°±å¯ä»¥æŠŠå­—ç¬¦ä¸²å¸¸é‡ï¼ˆé‚£äº›åŒ…å«åœ¨åŒå¼•å·ä¸­çš„å†…å®¹ï¼‰ç›´æ¥å˜æˆStringå¯¹è±¡ï¼ŒåŒæ—¶å¯¹è¿ç®—ç¬¦\"+\"çš„æ“ä½œç›´æ¥ä¼˜åŒ–æˆæ–°çš„å¸¸é‡ï¼Œå› ä¸ºfinalä¿®é¥°ä¿è¯äº†ä¸ä¼šæœ‰å­ç±»å¯¹æ‹¼æ¥æ“ä½œè¿”å›ä¸åŒçš„å€¼ã€‚ å¯¹äºæ‰€æœ‰ä¸åŒçš„ç±»å®šä¹‰ä¸€é¡¶å±‚ç±»(å…¨å±€æˆ–åŒ…å¯è§)ã€åµŒå¥—ç±»(å†…éƒ¨ç±»æˆ–é™æ€åµŒå¥—ç±»)éƒ½å¯ä»¥ç”¨finalæ¥ä¿®é¥°ã€‚ä½†æ˜¯ä¸€èˆ¬æ¥è¯´finalå¤šç”¨æ¥ä¿®é¥°åœ¨è¢«å®šä¹‰æˆå…¨å±€(public)çš„ç±»ä¸Šï¼Œå› ä¸ºå¯¹äºéå…¨å±€ç±»ï¼Œè®¿é—®ä¿®é¥°ç¬¦å·²ç»å°†ä»–ä»¬é™åˆ¶äº†å®ƒä»¬çš„ä¹Ÿå¯è§æ€§ï¼Œæƒ³è¦ç»§æ‰¿è¿™äº›ç±»å·²ç»å¾ˆå›°éš¾ï¼Œå°±ä¸ç”¨å†åŠ ä¸€å±‚finalé™åˆ¶ã€‚ final ä¸åŒ¿åå†…éƒ¨ç±» åŒ¿åç±»(Anonymous Class)è™½ç„¶è¯´åŒæ ·ä¸èƒ½è¢«ç»§æ‰¿ï¼Œä½†å®ƒä»¬å¹¶æ²¡æœ‰è¢«ç¼–è¯‘å™¨é™åˆ¶æˆfinalã€‚å¦å¤–è¦æåˆ°çš„æ˜¯ï¼Œç½‘ä¸Šæœ‰è®¸å¤šåœ°æ–¹éƒ½è¯´å› ä¸ºä½¿ç”¨å†…éƒ¨ç±»ï¼Œä¼šæœ‰ä¸¤ä¸ªåœ°æ–¹å¿…é¡»éœ€è¦ä½¿ç”¨ final ä¿®é¥°ç¬¦ï¼š åœ¨å†…éƒ¨ç±»çš„æ–¹æ³•ä½¿ç”¨åˆ°æ–¹æ³•ä¸­å®šä¹‰çš„å±€éƒ¨å˜é‡ï¼Œåˆ™è¯¥å±€éƒ¨å˜é‡éœ€è¦æ·»åŠ  final ä¿®é¥°ç¬¦ åœ¨å†…éƒ¨ç±»çš„æ–¹æ³•å½¢å‚ä½¿ç”¨åˆ°å¤–éƒ¨ä¼ è¿‡æ¥çš„å˜é‡ï¼Œåˆ™å½¢å‚éœ€è¦æ·»åŠ  final ä¿®é¥°ç¬¦ åŸå› å¤§å¤šæ˜¯è¯´å½“æˆ‘ä»¬åˆ›å»ºåŒ¿åå†…éƒ¨ç±»çš„é‚£ä¸ªæ–¹æ³•è°ƒç”¨è¿è¡Œå®Œæ¯•ä¹‹åï¼Œå› ä¸ºå±€éƒ¨å˜é‡çš„ç”Ÿå‘½å‘¨æœŸå’Œæ–¹æ³•çš„ç”Ÿå‘½å‘¨æœŸæ˜¯ä¸€æ ·çš„ï¼Œå½“æ–¹æ³•å¼¹æ ˆï¼Œ è¿™ä¸ªå±€éƒ¨å˜é‡å°±ä¼šæ¶ˆäº¡äº†ï¼Œä½†å†…éƒ¨ç±»å¯¹è±¡å¯èƒ½è¿˜å­˜åœ¨ã€‚ æ­¤æ—¶å°±ä¼šå‡ºç°ä¸€ç§æƒ…å†µï¼Œå°±æ˜¯æˆ‘ä»¬è°ƒç”¨è¿™ä¸ªå†…éƒ¨ç±»å¯¹è±¡å»è®¿é—®ä¸€ä¸ªä¸å­˜åœ¨çš„å±€éƒ¨å˜é‡ï¼Œå°±å¯èƒ½ä¼šå‡ºç°ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚è€Œæ­¤æ—¶éœ€è¦ä½¿ç”¨ final åœ¨ç±»åŠ è½½çš„æ—¶å€™è¿›å…¥å¸¸é‡æ± ï¼Œå³ä½¿æ–¹æ³•å¼¹æ ˆï¼Œå¸¸é‡æ± çš„å¸¸é‡è¿˜åœ¨ï¼Œä¹Ÿå¯ä»¥ç»§ç»­ä½¿ç”¨ï¼ŒJVM ä¼šæŒç»­ç»´æŠ¤è¿™ä¸ªå¼•ç”¨åœ¨å›è°ƒæ–¹æ³•ä¸­çš„ç”Ÿå‘½å‘¨æœŸã€‚ ä½†æ˜¯ JDK 1.8 å–æ¶ˆäº†å¯¹åŒ¿åå†…éƒ¨ç±»å¼•ç”¨çš„å±€éƒ¨å˜é‡ final ä¿®é¥°çš„æ£€æŸ¥ å¯¹æ­¤ï¼Œ theonlin ä¸“é—¨é€šè¿‡å®éªŒåšå‡ºäº†æ€»ç»“ï¼šå…¶å®å±€éƒ¨å†…éƒ¨ç±»å¹¶ä¸æ˜¯ç›´æ¥è°ƒç”¨æ–¹æ³•ä¼ è¿›æ¥çš„å‚æ•°ï¼Œè€Œæ˜¯å†…éƒ¨ç±»å°†ä¼ è¿›æ¥çš„å‚æ•°é€šè¿‡è‡ªå·±çš„æ„é€ å™¨å¤‡ä»½åˆ°äº†è‡ªå·±çš„å†…éƒ¨ï¼Œè‡ªå·±å†…éƒ¨çš„æ–¹æ³•è°ƒç”¨çš„å®é™…æ˜¯è‡ªå·±çš„å±æ€§è€Œä¸æ˜¯å¤–éƒ¨ç±»æ–¹æ³•çš„å‚æ•°ã€‚å¤–éƒ¨ç±»ä¸­çš„æ–¹æ³•ä¸­çš„å˜é‡æˆ–å‚æ•°åªæ˜¯æ–¹æ³•çš„å±€éƒ¨å˜é‡ï¼Œè¿™äº›å˜é‡æˆ–å‚æ•°çš„ä½œç”¨åŸŸåªåœ¨è¿™ä¸ªæ–¹æ³•å†…éƒ¨æœ‰æ•ˆï¼Œæ‰€ä»¥æ–¹æ³•ä¸­è¢« final çš„å˜é‡çš„ä»…ä»…ä½œç”¨æ˜¯è¡¨æ˜è¿™ä¸ªå˜é‡å°†ä½œä¸ºå†…éƒ¨ç±»æ„é€ å™¨å‚æ•°ï¼Œ å…¶å® final ä¸åŠ ä¹Ÿå¯ä»¥ï¼ŒåŠ äº†å¯èƒ½è¿˜ä¼šå ç”¨å†…å­˜ç©ºé—´ï¼Œå½±å“ GC ã€‚æœ€åç»“è®ºå°±æ˜¯ï¼Œéœ€è¦ä½¿ç”¨ final å»æŒç»­ç»´æŠ¤è¿™ä¸ªå¼•ç”¨åœ¨å›è°ƒæ–¹æ³•ä¸­çš„ç”Ÿå‘½å‘¨æœŸè¿™ç§è¯´æ³•åº”è¯¥æ˜¯é”™è¯¯çš„ï¼Œä¹Ÿæ²¡å¿…è¦ã€‚ final ä¿®é¥°æ–¹æ³• ä¸‹é¢è¿™æ®µè¯æ‘˜è‡ªã€ŠJavaç¼–ç¨‹æ€æƒ³ã€‹ç¬¬å››ç‰ˆç¬¬143é¡µï¼š ä½¿ç”¨ final æ–¹æ³•çš„åŸå› æœ‰ä¸¤ä¸ªã€‚ç¬¬ä¸€ä¸ªåŸå› æ˜¯æŠŠæ–¹æ³•é”å®šï¼Œä»¥é˜²ä»»ä½•ç»§æ‰¿ç±»ä¿®æ”¹å®ƒçš„å«ä¹‰ï¼›ç¬¬äºŒä¸ªåŸå› æ˜¯æ•ˆç‡ã€‚ å½“ä½¿ç”¨ final å…³é”®å­—å£°æ˜æ–¹æ³•æ—¶ï¼Œå®ƒè¢«ç§°ä¸º final æ–¹æ³•ã€‚ final æ–¹æ³•æ— æ³•è¢« è¦†ç›– ï¼ˆé‡å†™ï¼‰ã€‚æ¯”å¦‚ Objectç±» ï¼Œå®ƒçš„ä¸€äº›æ–¹æ³•å°±è¢«å£°æ˜æˆä¸ºäº† final ã€‚å¦‚æœä½ è®¤ä¸ºä¸€ä¸ªæ–¹æ³•çš„åŠŸèƒ½å·²ç»è¶³å¤Ÿå®Œæ•´äº†ï¼Œå­ç±»ä¸­ä¸éœ€è¦æ”¹å˜çš„è¯ï¼Œä½ å¯ä»¥å£°æ˜æ­¤æ–¹æ³•ä¸º final ã€‚ä»¥ä¸‹ä»£ç ç‰‡æ®µè¯´æ˜äº†ç”¨ final å…³é”®å­—ä¿®é¥°æ–¹æ³•ï¼š class A { // çˆ¶ç±»çš„mlæ–¹æ³•è¢«ä½¿ç”¨äº†finalå…³é”®å­—ä¿®é¥° final void m1 () { System . out . println ( \"This is a final method.\" ); } } class B extends A { // æ­¤å¤„ä¼šæŠ¥é”™ï¼Œå­ç±»Bå°è¯•é‡å†™çˆ¶ç±»Açš„è¢«finalä¿®é¥°çš„mlæ–¹æ³• @override void m1 () { // COMPILE-ERROR! Can't override. System . out . println ( \"Illegal!\" ); } } è€Œå…³äºé«˜æ•ˆï¼Œæ˜¯å› ä¸ºåœ¨javaæ—©æœŸå®ç°ä¸­ï¼Œå¦‚æœå°†ä¸€ä¸ªæ–¹æ³•æŒ‡æ˜ä¸ºfinalï¼Œå°±æ˜¯åŒæ„ç¼–è¯‘å™¨å°†é’ˆå¯¹è¯¥æ–¹æ³•çš„è°ƒç”¨éƒ½è½¬åŒ–ä¸ºå†…åµŒè°ƒç”¨ï¼ˆå†…è”ï¼‰ã€‚å¤§æ¦‚å°±æ˜¯ï¼Œå¦‚æœæ˜¯å†…åµŒè°ƒç”¨ï¼Œè™šæ‹Ÿæœºä¸å†æ‰§è¡Œæ­£å¸¸çš„æ–¹æ³•è°ƒç”¨ï¼ˆå‚æ•°å‹æ ˆï¼Œè·³è½¬åˆ°æ–¹æ³•å¤„æ‰§è¡Œï¼Œå†è°ƒå›ï¼Œå¤„ç†æ ˆå‚æ•°ï¼Œå¤„ç†è¿”å›å€¼ï¼‰ï¼Œè€Œæ˜¯ç›´æ¥å°†æ–¹æ³•å±•å¼€ï¼Œä»¥æ–¹æ³•ä½“ä¸­çš„å®é™…ä»£ç æ›¿ä»£åŸæ¥çš„æ–¹æ³•è°ƒç”¨ã€‚è¿™æ ·å‡å°‘äº†æ–¹æ³•è°ƒç”¨çš„å¼€é”€ã€‚æ‰€ä»¥æœ‰ä¸€äº›ç¨‹åºå‘˜è®¤ä¸ºï¼š é™¤éæœ‰è¶³å¤Ÿçš„ç†ç”±ä½¿ç”¨å¤šæ€æ€§ï¼Œå¦åˆ™åº”è¯¥å°†æ‰€æœ‰çš„æ–¹æ³•éƒ½ç”¨ final ä¿®é¥°ã€‚è¿™æ ·çš„è®¤è¯†æœªå…æœ‰äº›åæ¿€ ï¼Œå› ä¸ºåœ¨æœ€è¿‘çš„javaè®¾è®¡ä¸­ï¼Œè™šæ‹Ÿæœºï¼ˆç‰¹åˆ«æ˜¯hotspotæŠ€æœ¯ï¼‰å¯ä»¥è‡ªå·±å»æ ¹æ®å…·ä½“æƒ…å†µè‡ªåŠ¨ä¼˜åŒ–é€‰æ‹©æ˜¯å¦è¿›è¡Œå†…è”ï¼Œåªä¸è¿‡ä½¿ç”¨äº† final å…³é”®å­—çš„è¯å¯ä»¥æ˜¾ç¤ºåœ°å½±å“ç¼–è¯‘å™¨å¯¹è¢«ä¿®é¥°çš„ä»£ç è¿›è¡Œå†…è”ä¼˜åŒ–ã€‚æ‰€ä»¥è¯·åˆ‡è®°ï¼Œå¯¹äºJavaè™šæ‹Ÿæœºæ¥è¯´ç¼–è¯‘å™¨åœ¨ç¼–è¯‘æœŸé—´ä¼šè‡ªåŠ¨è¿›è¡Œå†…è”ä¼˜åŒ–ï¼Œè¿™æ˜¯ç”±ç¼–è¯‘å™¨å†³å®šçš„ï¼Œå¯¹äºå¼€å‘äººå‘˜æ¥è¯´ï¼Œä¸€å®šè¦è®¾è®¡å¥½æ—¶ç©ºå¤æ‚åº¦çš„å¹³è¡¡ï¼Œä¸è¦æ»¥ç”¨finalã€‚ æ³¨1ï¼šç±»çš„ private æ–¹æ³•ä¼šéšå¼åœ°è¢«æŒ‡å®šä¸º final æ–¹æ³•ï¼Œä¹Ÿå°±åŒæ ·æ— æ³•è¢«é‡å†™ã€‚å¯ä»¥å¯¹privateæ–¹æ³•æ·»åŠ finalä¿®é¥°ç¬¦ï¼Œä½†å¹¶æ²¡æœ‰æ·»åŠ ä»»ä½•é¢å¤–æ„ä¹‰ã€‚ æ³¨2ï¼šåœ¨javaä¸­ï¼Œä½ æ°¸è¿œä¸ä¼šçœ‹åˆ°åŒæ—¶ä½¿ç”¨ final å’Œ abstract å…³é”®å­—å£°æ˜çš„ç±»æˆ–æ–¹æ³•ã€‚å¯¹äºç±»ï¼Œ final ç”¨äºé˜²æ­¢ ç»§æ‰¿ ï¼Œè€ŒæŠ½è±¡ç±»åè€Œéœ€è¦ä¾èµ–äºå®ƒä»¬çš„å­ç±»æ¥å®Œæˆå®ç°ã€‚åœ¨ä¿®é¥°æ–¹æ³•æ—¶ï¼Œ final ç”¨äºé˜²æ­¢è¢« è¦†ç›– ï¼Œè€ŒæŠ½è±¡æ–¹æ³•åè€Œéœ€è¦åœ¨å­ç±»ä¸­è¢«é‡å†™ã€‚ æœ‰å…³ final æ–¹æ³•å’Œ final ç±»çš„æ›´å¤šç¤ºä¾‹å’Œè¡Œä¸º ï¼Œè¯·å‚é˜… ä½¿ç”¨finalç»§æ‰¿ ã€‚ final ä¼˜åŒ–ç¼–ç çš„è‰ºæœ¯ final å…³é”®å­—åœ¨æ•ˆç‡ä¸Šçš„ä½œç”¨ä¸»è¦å¯ä»¥æ€»ç»“ä¸ºä»¥ä¸‹ä¸‰ç‚¹ï¼š ç¼“å­˜ï¼š final é…åˆ static å…³é”®å­—æé«˜äº†ä»£ç æ€§èƒ½ï¼ŒJVMå’ŒJavaåº”ç”¨éƒ½ä¼šç¼“å­˜ final å˜é‡ã€‚ åŒæ­¥ï¼š final å˜é‡æˆ–å¯¹è±¡æ˜¯åªè¯»çš„ï¼Œå¯ä»¥å®‰å…¨çš„åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹è¿›è¡Œå…±äº«ï¼Œè€Œä¸éœ€è¦é¢å¤–çš„åŒæ­¥å¼€é”€ã€‚ å†…è”ï¼šä½¿ç”¨ final å…³é”®å­—ï¼ŒJVMä¼š æ˜¾å¼åœ° ä¸»åŠ¨å¯¹æ–¹æ³•ã€å˜é‡åŠç±»è¿›è¡Œå†…è”ä¼˜åŒ–ã€‚ æ›´å¤šå…³äº final å…³é”®å­—å¯¹ä»£ç çš„ä¼˜åŒ–æ€»ç»“ä»¥åŠæ³¨æ„ç‚¹å¯ä»¥å‚è€ƒIBMçš„ ã€ŠIs that your final answer?ã€‹ è¿™ç¯‡æ–‡ç« ã€‚ æœ¬æ–‡ç”±ç¬”è€…å‚è€ƒå¤šç¯‡åšæ–‡æ±‡æ€»ä½œæˆï¼Œå› æ•°é‡ä¼—å¤šä¸ä¸€ä¸€åˆ—å‡ºï¼Œä¸»ä½“éƒ¨åˆ†ä»GeeksforGeeksç½‘ç«™ç¿»è¯‘ï¼Œå®é™…ç”± Gaurav Miglani æ’°å†™ã€‚å¦‚æœæ‚¨å‘ç°ä»»ä½•ä¸æ­£ç¡®çš„å†…å®¹ï¼Œæˆ–è€…æ‚¨æƒ³è¦åˆ†äº«æœ‰å…³ä¸Šè¿°ä¸»é¢˜çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·æ’°å†™è¯„è®ºã€‚ â†©","tags":"Backend","url":"https://jiang-hao.com/articles/2019/backend-java-final-keyword.html","loc":"https://jiang-hao.com/articles/2019/backend-java-final-keyword.html"},{"title":"ä¸€ç§é€šè¿‡ç½‘ç›˜å®ç°å¤šç»ˆç«¯æ¡Œé¢åŒæ­¥å’Œäº‘åŒ–å­˜å‚¨çš„æ–¹æ³•","text":"ç®€ä»‹ æ–¹æ³•å…¶å®å¾ˆç®€å•ï¼Œè€Œä¸”å¾ˆå¤šäººå¯èƒ½å·²ç»æƒ³åˆ°æˆ–è€…åœ¨ç”¨äº†ã€‚ä¸€è¨€ä»¥è”½ä¹‹ï¼Œå°±æ˜¯æŠŠæ¡Œé¢æ–‡ä»¶å¤¹è®¾ç½®ä¸ºç½‘ç›˜çš„åŒæ­¥æ–‡ä»¶å¤¹ã€‚ä¹‹æ‰€ä»¥è¦è¿™ä¹ˆåšï¼Œå› ä¸ºå¾ˆå¤šäººä¹ æƒ¯ä½¿ç”¨ä¸€äº›ç¨‹åºæœç´¢å·¥å…·æ¥å¯åŠ¨ç¨‹åºï¼ˆæ¯”å¦‚wox, everything, ç”šè‡³ç³»ç»Ÿè‡ªå¸¦çš„æœç´¢åŠŸèƒ½ç­‰ç­‰ï¼‰ï¼Œä¸åœ¨ç³»ç»Ÿæ¡Œé¢ä¿ç•™æ¡Œé¢å›¾æ ‡ï¼Œè€Œä¸”é€šå¸¸ä¸ºäº†å¹³æ—¶å·¥ä½œæ–¹ä¾¿ï¼Œä¼šç›´æ¥æŠŠæ¡Œé¢å½“åšæ–‡æ¡£åº“æˆ–è€…workshopæ¥ç”¨ï¼Œä¹Ÿå°±æ˜¯æŠŠå¹³æ—¶å¸¸ç”¨çš„ä¸€äº›æ–‡æ¡£ç›´æ¥ä¿å­˜åœ¨æ¡Œé¢ã€‚è¿™ä¸ªæ—¶å€™å¦‚æœç›´æ¥ç”¨ç½‘ç›˜æŠŠæ¡Œé¢è®¾ç½®ä¸ºåŒæ­¥æ–‡ä»¶å¤¹ï¼Œå°±å¯ä»¥ç›´æ¥å®æ—¶å¤‡ä»½æ¡Œé¢ä¸Šçš„æ–‡ä»¶äº†ã€‚è€Œè®¸å¤šäººå¯èƒ½å¹³æ—¶ä¼šç”¨åˆ°è¯¸å¤šä¸åŒè®¾å¤‡ï¼ˆæ¯”å¦‚å·¥ä½œåœºæ‰€çš„ç”µè„‘ï¼Œç§äººç”µè„‘ï¼Œæ‰‹æœºï¼Œipadç­‰ç­‰ï¼‰ï¼Œè¿™ç§æ–¹æ³•å°±å¯ä»¥å®ç°å¤šä¸ªç”µè„‘ä¹‹é—´æ¡Œé¢çš„å®æ—¶æ–‡ä»¶å…±äº«ï¼ŒåŒæ—¶å…¶ä»–ç§»åŠ¨ç«¯è®¾å¤‡ä¹Ÿèƒ½å®æ—¶è¿›è¡ŒåŒæ­¥äº†ã€‚å¹³æ—¶å·¥ä½œæˆ–è€…æ”¶è—çš„æ–‡ä»¶æˆ–è€…ä¸ªäººææ–™ï¼Œåœ¨å¤–ä¸´æ—¶è¦ç”¨çš„æ—¶å€™éšæ—¶éšå¤„éƒ½å¯ä»¥æ‹¿åˆ°ï¼Œè€Œä¸ç”¨åˆ»æ„äº‹å…ˆè¿›è¡Œä¸Šä¼ æˆ–è€…åˆ†äº«ã€‚ æ•ˆæœ ä»¥ä¸‹æ˜¯å¤§è‡´æ•ˆæœ: å·¥å…· ç¨‹åºå¯åŠ¨ å¦‚æœæ‚¨ä¸å–œæ¬¢åº”ç”¨ç¨‹åºå›¾æ ‡ï¼Œå¹¶ä¸”åªå¸Œæœ›åœ¨æ¡Œé¢ä¸Šæ”¾ç½®æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ï¼ˆå¦‚å›¾æ‰€ç¤ºï¼‰ï¼Œä½†ä»ç„¶å¸Œæœ›èƒ½å¤Ÿä»¥ä¸€ç§æ–¹ä¾¿çš„æ–¹å¼å¯åŠ¨åº”ç”¨ç¨‹åºï¼Œåˆ™å¯ä»¥åˆ é™¤æ‰€æœ‰å›¾æ ‡ï¼Œç„¶åå®‰è£… WOX ï¼Œç”¨äºå¿«é€Ÿè®¿é—®åº”ç”¨ç¨‹åºã€‚ ç½‘ç›˜åŒæ­¥ è¿™é‡Œçš„ç½‘ç›˜å¯ä»¥ä½¿ç”¨MEGASyncæˆ–è€…åšæœäº‘ï¼Œå¯ä»¥åœ¨å¤šä¸ªè®¾å¤‡ä¹‹é—´åŒæ­¥æ¡Œé¢ï¼Œå¹¶å¯ä»¥é€šè¿‡ç½‘é¡µæˆ–è€…å®¢æˆ·ç«¯éšæ—¶éšåœ°è®¿é—®æ–‡æ¡£ã€‚ MEGASync æä¾›ä»¥ä¸‹åŠŸèƒ½ï¼š å…·æœ‰50GBå…è´¹å­˜å‚¨ç©ºé—´çš„å®‰å…¨äº‘ç½‘ç»œç£ç›˜ é€šè¿‡ç«¯åˆ°ç«¯åŠ å¯†è¿›è¡Œå¿«é€Ÿä¼ è¾“ å¤šä¸ªè®¾å¤‡ä¹‹é—´çš„æ–‡ä»¶å¤¹åŒæ­¥ å¦‚æˆ‘ä»¬æ‰€è§ï¼ŒMEGASyncçš„ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„åŠŸèƒ½æ˜¯åœ¨å¤šä¸ªè®¾å¤‡ä¹‹é—´åŒæ­¥æ–‡ä»¶å¤¹ã€‚ ä½†æ˜¯ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨å®ƒå°†æ¡Œé¢æ”¾åœ¨äº‘ä¸­æ—¶ï¼Œå®ƒå°†å˜å¾—æ›´åŠ æœ‰è¶£ã€‚ é…ç½® é…ç½®éå¸¸ç®€å•ï¼Œå®‰è£…è½¯ä»¶åè®¾ç½®MEGASyncåŒæ­¥æ–‡ä»¶å¤¹æ—¶åªéœ€å°†æ¡Œé¢ç›®å½•è®¾ç½®ä¸ºåŒæ­¥æ–‡ä»¶å¤¹å³å¯ã€‚","tags":"Tools","url":"https://jiang-hao.com/articles/2019/tools-Cloud-Desktop-Based-On-MegaSync.html","loc":"https://jiang-hao.com/articles/2019/tools-Cloud-Desktop-Based-On-MegaSync.html"},{"title":"A Java TFTP Server","text":"ç®€ä»‹ ä¸€ä¸ªå®Œå…¨å¤šçº¿ç¨‹çš„tftpæœåŠ¡å™¨ã€‚å¯ä»¥åŒæ—¶å¤„ç†å¤šä¸ªå®¢æˆ·ç«¯ã€‚å®ç° RFC 1350 å¹¶åŒ…è£…å—å·ä»¥è·å¾—å¤§æ–‡ä»¶æ”¯æŒã€‚ é€šè¿‡åˆ¤æ–­ç›‘å¬åˆ°çš„è¯·æ±‚tftpPacket_çš„ç±»å‹æ˜¯TFTPReadRequestPacketï¼ˆè¯»ï¼‰æˆ–è€…TFTPWriteRequestPacketï¼ˆå†™ï¼‰ï¼Œå°†å…¶å¯¹åº”äº¤ç”±handleRead()æˆ–è€…handleWrite()æ–¹æ³•å¤„ç†ã€‚ è¦å¯åŠ¨ï¼Œåªéœ€åˆ›å»ºè¯¥ç±»çš„å®ä¾‹ã€‚å¦‚æœæœåŠ¡å™¨ç”±äºæ­£åœ¨ä½¿ç”¨çš„ç«¯å£ï¼Œç«¯å£è¢«æ‹’ç»ç­‰åŸå› è€Œæ— æ³•å¯åŠ¨ï¼Œåˆ™å°†æŠ›å‡ºIOExceptionã€‚ è¦åœæ­¢ï¼Œè¯·ä½¿ç”¨shutdownæ–¹æ³•ã€‚ è¦æ£€æŸ¥æœåŠ¡å™¨æ˜¯å¦ä»åœ¨è¿è¡Œï¼ˆæˆ–è€…ç”±äºé”™è¯¯è€Œåœæ­¢ï¼‰ï¼Œè¯·è°ƒç”¨isRunningæ–¹æ³•ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œäº‹ä»¶ä¸ä¼šè®°å½•åˆ°stdout/stderrã€‚å¯ä»¥ä½¿ç”¨setLogå’ŒsetLogErroræ–¹æ³•æ›´æ”¹æ­¤è®¾ç½®ã€‚ ç¤ºä¾‹ç”¨æ³•å¦‚ä¸‹ï¼š public static void main ( String [] args ) throws Exception { if ( args . length != 1 ) { System . out . println ( \"You must provide 1 argument - the base path for the server to serve from.\" ); System . exit ( 1 ); } TFTPServer ts = new TFTPServer ( new File ( args [ 0 ] ), new File ( args [ 0 ] ), GET_AND_PUT ); ts . setSocketTimeout ( 2000 ); System . out . println ( \"TFTP Server running. Press enter to stop.\" ); new InputStreamReader ( System . in ). read (); ts . shutdown (); System . out . println ( \"Server shut down.\" ); System . exit ( 0 ); } ä»£ç  /* * Licensed to the Apache Software Foundation (ASF) under one or more * contributor license agreements. See the NOTICE file distributed with * this work for additional information regarding copyright ownership. * The ASF licenses this file to You under the Apache License, Version 2.0 * (the \"License\"); you may not use this file except in compliance with * the License. You may obtain a copy of the License at * * http://www.apache.org/licenses/LICENSE-2.0 * * Unless required by applicable law or agreed to in writing, software * distributed under the License is distributed on an \"AS IS\" BASIS, * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. * See the License for the specific language governing permissions and * limitations under the License. */ package org.apache.commons.net.tftp ; import java.io.BufferedInputStream ; import java.io.BufferedOutputStream ; import java.io.File ; import java.io.FileInputStream ; import java.io.FileNotFoundException ; import java.io.FileOutputStream ; import java.io.IOException ; import java.io.InputStream ; import java.io.OutputStream ; import java.io.PrintStream ; import java.net.InetAddress ; import java.net.NetworkInterface ; import java.net.SocketTimeoutException ; import java.util.HashSet ; import java.util.Enumeration ; import java.util.Iterator ; import org.apache.commons.net.io.FromNetASCIIOutputStream ; import org.apache.commons.net.io.ToNetASCIIInputStream ; /** * A fully multi-threaded tftp server. Can handle multiple clients at the same time. Implements RFC * 1350 and wrapping block numbers for large file support. * * To launch, just create an instance of the class. An IOException will be thrown if the server * fails to start for reasons such as port in use, port denied, etc. * * To stop, use the shutdown method. * * To check to see if the server is still running (or if it stopped because of an error), call the * isRunning() method. * * By default, events are not logged to stdout/stderr. This can be changed with the * setLog and setLogError methods. * * <p> * Example usage is below: * * <code> * public static void main(String[] args) throws Exception * { * if (args.length != 1) * { * System.out * .println(\"You must provide 1 argument - the base path for the server to serve from.\"); * System.exit(1); * } * * TFTPServer ts = new TFTPServer(new File(args[0]), new File(args[0]), GET_AND_PUT); * ts.setSocketTimeout(2000); * * System.out.println(\"TFTP Server running. Press enter to stop.\"); * new InputStreamReader(System.in).read(); * * ts.shutdown(); * System.out.println(\"Server shut down.\"); * System.exit(0); * } * * </code> * * @since 2.0 */ public class TFTPServer implements Runnable { private static final int DEFAULT_TFTP_PORT = 69 ; public static enum ServerMode { GET_ONLY , PUT_ONLY , GET_AND_PUT ; } private final HashSet < TFTPTransfer > transfers_ = new HashSet < TFTPTransfer > (); private volatile boolean shutdownServer = false ; private TFTP serverTftp_ ; private File serverReadDirectory_ ; private File serverWriteDirectory_ ; private final int port_ ; private final InetAddress laddr_ ; private Exception serverException = null ; private final ServerMode mode_ ; /* /dev/null output stream (default) */ private static final PrintStream nullStream = new PrintStream ( new OutputStream () { @Override public void write ( int b ){} @Override public void write ( byte [] b ) throws IOException {} } ); // don't have access to a logger api, so we will log to these streams, which // by default are set to a no-op logger private PrintStream log_ ; private PrintStream logError_ ; private int maxTimeoutRetries_ = 3 ; private int socketTimeout_ ; private Thread serverThread ; /** * Start a TFTP Server on the default port (69). Gets and Puts occur in the specified * directories. * * The server will start in another thread, allowing this constructor to return immediately. * * If a get or a put comes in with a relative path that tries to get outside of the * serverDirectory, then the get or put will be denied. * * GET_ONLY mode only allows gets, PUT_ONLY mode only allows puts, and GET_AND_PUT allows both. * Modes are defined as int constants in this class. * * @param serverReadDirectory directory for GET requests * @param serverWriteDirectory directory for PUT requests * @param mode A value as specified above. * @throws IOException if the server directory is invalid or does not exist. */ public TFTPServer ( File serverReadDirectory , File serverWriteDirectory , ServerMode mode ) throws IOException { this ( serverReadDirectory , serverWriteDirectory , DEFAULT_TFTP_PORT , mode , null , null ); } /** * Start a TFTP Server on the specified port. Gets and Puts occur in the specified directory. * * The server will start in another thread, allowing this constructor to return immediately. * * If a get or a put comes in with a relative path that tries to get outside of the * serverDirectory, then the get or put will be denied. * * GET_ONLY mode only allows gets, PUT_ONLY mode only allows puts, and GET_AND_PUT allows both. * Modes are defined as int constants in this class. * * @param serverReadDirectory directory for GET requests * @param serverWriteDirectory directory for PUT requests * @param port the port to use * @param mode A value as specified above. * @param log Stream to write log message to. If not provided, uses System.out * @param errorLog Stream to write error messages to. If not provided, uses System.err. * @throws IOException if the server directory is invalid or does not exist. */ public TFTPServer ( File serverReadDirectory , File serverWriteDirectory , int port , ServerMode mode , PrintStream log , PrintStream errorLog ) throws IOException { port_ = port ; mode_ = mode ; log_ = ( log == null ? nullStream : log ); logError_ = ( errorLog == null ? nullStream : errorLog ); laddr_ = null ; launch ( serverReadDirectory , serverWriteDirectory ); } /** * Start a TFTP Server on the specified port. Gets and Puts occur in the specified directory. * * The server will start in another thread, allowing this constructor to return immediately. * * If a get or a put comes in with a relative path that tries to get outside of the * serverDirectory, then the get or put will be denied. * * GET_ONLY mode only allows gets, PUT_ONLY mode only allows puts, and GET_AND_PUT allows both. * Modes are defined as int constants in this class. * * @param serverReadDirectory directory for GET requests * @param serverWriteDirectory directory for PUT requests * @param port The local port to bind to. * @param localaddr The local address to bind to. * @param mode A value as specified above. * @param log Stream to write log message to. If not provided, uses System.out * @param errorLog Stream to write error messages to. If not provided, uses System.err. * @throws IOException if the server directory is invalid or does not exist. */ public TFTPServer ( File serverReadDirectory , File serverWriteDirectory , int port , InetAddress localaddr , ServerMode mode , PrintStream log , PrintStream errorLog ) throws IOException { port_ = port ; mode_ = mode ; laddr_ = localaddr ; log_ = ( log == null ? nullStream : log ); logError_ = ( errorLog == null ? nullStream : errorLog ); launch ( serverReadDirectory , serverWriteDirectory ); } /** * Start a TFTP Server on the specified port. Gets and Puts occur in the specified directory. * * The server will start in another thread, allowing this constructor to return immediately. * * If a get or a put comes in with a relative path that tries to get outside of the * serverDirectory, then the get or put will be denied. * * GET_ONLY mode only allows gets, PUT_ONLY mode only allows puts, and GET_AND_PUT allows both. * Modes are defined as int constants in this class. * * @param serverReadDirectory directory for GET requests * @param serverWriteDirectory directory for PUT requests * @param port the port to use * @param localiface The local network interface to bind to. * The interface's first address wil be used. * @param mode A value as specified above. * @param log Stream to write log message to. If not provided, uses System.out * @param errorLog Stream to write error messages to. If not provided, uses System.err. * @throws IOException if the server directory is invalid or does not exist. */ public TFTPServer ( File serverReadDirectory , File serverWriteDirectory , int port , NetworkInterface localiface , ServerMode mode , PrintStream log , PrintStream errorLog ) throws IOException { mode_ = mode ; port_ = port ; InetAddress iaddr = null ; if ( localiface != null ) { Enumeration < InetAddress > ifaddrs = localiface . getInetAddresses (); if ( ifaddrs != null ) { if ( ifaddrs . hasMoreElements ()) iaddr = ifaddrs . nextElement (); } } log_ = ( log == null ? nullStream : log ); logError_ = ( errorLog == null ? nullStream : errorLog ); laddr_ = iaddr ; launch ( serverReadDirectory , serverWriteDirectory ); } /** * Set the max number of retries in response to a timeout. Default 3. Min 0. * * @param retries number of retries, must be &gt; 0 */ public void setMaxTimeoutRetries ( int retries ) { if ( retries < 0 ) { throw new RuntimeException ( \"Invalid Value\" ); } maxTimeoutRetries_ = retries ; } /** * Get the current value for maxTimeoutRetries * @return the max allowed number of retries */ public int getMaxTimeoutRetries () { return maxTimeoutRetries_ ; } /** * Set the socket timeout in milliseconds used in transfers. Defaults to the value here: * http://commons.apache.org/net/apidocs/org/apache/commons/net/tftp/TFTP.html#DEFAULT_TIMEOUT * (5000 at the time I write this) Min value of 10. * @param timeout the timeout; must be larger than 10 */ public void setSocketTimeout ( int timeout ) { if ( timeout < 10 ) { throw new RuntimeException ( \"Invalid Value\" ); } socketTimeout_ = timeout ; } /** * The current socket timeout used during transfers in milliseconds. * @return the timeout value */ public int getSocketTimeout () { return socketTimeout_ ; } /* * start the server, throw an error if it can't start. */ private void launch ( File serverReadDirectory , File serverWriteDirectory ) throws IOException { log_ . println ( \"Starting TFTP Server on port \" + port_ + \". Read directory: \" + serverReadDirectory + \" Write directory: \" + serverWriteDirectory + \" Server Mode is \" + mode_ ); serverReadDirectory_ = serverReadDirectory . getCanonicalFile (); if ( ! serverReadDirectory_ . exists () || ! serverReadDirectory . isDirectory ()) { throw new IOException ( \"The server read directory \" + serverReadDirectory_ + \" does not exist\" ); } serverWriteDirectory_ = serverWriteDirectory . getCanonicalFile (); if ( ! serverWriteDirectory_ . exists () || ! serverWriteDirectory . isDirectory ()) { throw new IOException ( \"The server write directory \" + serverWriteDirectory_ + \" does not exist\" ); } serverTftp_ = new TFTP (); // This is the value used in response to each client. socketTimeout_ = serverTftp_ . getDefaultTimeout (); // we want the server thread to listen forever. serverTftp_ . setDefaultTimeout ( 0 ); if ( laddr_ != null ) { serverTftp_ . open ( port_ , laddr_ ); } else { serverTftp_ . open ( port_ ); } serverThread = new Thread ( this ); serverThread . setDaemon ( true ); serverThread . start (); } @Override protected void finalize () throws Throwable { shutdown (); } /** * check if the server thread is still running. * * @return true if running, false if stopped. * @throws Exception throws the exception that stopped the server if the server is stopped from * an exception. */ public boolean isRunning () throws Exception { if ( shutdownServer && serverException != null ) { throw serverException ; } return ! shutdownServer ; } @Override public void run () { try { while ( ! shutdownServer ) { TFTPPacket tftpPacket ; tftpPacket = serverTftp_ . receive (); TFTPTransfer tt = new TFTPTransfer ( tftpPacket ); synchronized ( transfers_ ) { transfers_ . add ( tt ); } Thread thread = new Thread ( tt ); thread . setDaemon ( true ); thread . start (); } } catch ( Exception e ) { if ( ! shutdownServer ) { serverException = e ; logError_ . println ( \"Unexpected Error in TFTP Server - Server shut down! + \" + e ); } } finally { shutdownServer = true ; // set this to true, so the launching thread can check to see if it started. if ( serverTftp_ != null && serverTftp_ . isOpen ()) { serverTftp_ . close (); } } } /** * Stop the tftp server (and any currently running transfers) and release all opened network * resources. */ public void shutdown () { shutdownServer = true ; synchronized ( transfers_ ) { Iterator < TFTPTransfer > it = transfers_ . iterator (); while ( it . hasNext ()) { it . next (). shutdown (); } } try { serverTftp_ . close (); } catch ( RuntimeException e ) { // noop } try { serverThread . join (); } catch ( InterruptedException e ) { // we've done the best we could, return } } /* * An instance of an ongoing transfer. */ private class TFTPTransfer implements Runnable { private final TFTPPacket tftpPacket_ ; private boolean shutdownTransfer = false ; TFTP transferTftp_ = null ; public TFTPTransfer ( TFTPPacket tftpPacket ) { tftpPacket_ = tftpPacket ; } public void shutdown () { shutdownTransfer = true ; try { transferTftp_ . close (); } catch ( RuntimeException e ) { // noop } } @Override public void run () { try { transferTftp_ = newTFTP (); transferTftp_ . beginBufferedOps (); transferTftp_ . setDefaultTimeout ( socketTimeout_ ); transferTftp_ . open (); if ( tftpPacket_ instanceof TFTPReadRequestPacket ) { handleRead ((( TFTPReadRequestPacket ) tftpPacket_ )); } else if ( tftpPacket_ instanceof TFTPWriteRequestPacket ) { handleWrite (( TFTPWriteRequestPacket ) tftpPacket_ ); } else { log_ . println ( \"Unsupported TFTP request (\" + tftpPacket_ + \") - ignored.\" ); } } catch ( Exception e ) { if ( ! shutdownTransfer ) { logError_ . println ( \"Unexpected Error in during TFTP file transfer. Transfer aborted. \" + e ); } } finally { try { if ( transferTftp_ != null && transferTftp_ . isOpen ()) { transferTftp_ . endBufferedOps (); transferTftp_ . close (); } } catch ( Exception e ) { // noop } synchronized ( transfers_ ) { transfers_ . remove ( this ); } } } /* * Handle a tftp read request. */ private void handleRead ( TFTPReadRequestPacket trrp ) throws IOException , TFTPPacketException { InputStream is = null ; try { if ( mode_ == ServerMode . PUT_ONLY ) { transferTftp_ . bufferedSend ( new TFTPErrorPacket ( trrp . getAddress (), trrp . getPort (), TFTPErrorPacket . ILLEGAL_OPERATION , \"Read not allowed by server.\" )); return ; } try { is = new BufferedInputStream ( new FileInputStream ( buildSafeFile ( serverReadDirectory_ , trrp . getFilename (), false ))); } catch ( FileNotFoundException e ) { transferTftp_ . bufferedSend ( new TFTPErrorPacket ( trrp . getAddress (), trrp . getPort (), TFTPErrorPacket . FILE_NOT_FOUND , e . getMessage ())); return ; } catch ( Exception e ) { transferTftp_ . bufferedSend ( new TFTPErrorPacket ( trrp . getAddress (), trrp . getPort (), TFTPErrorPacket . UNDEFINED , e . getMessage ())); return ; } if ( trrp . getMode () == TFTP . NETASCII_MODE ) { is = new ToNetASCIIInputStream ( is ); } byte [] temp = new byte [ TFTPDataPacket . MAX_DATA_LENGTH ] ; TFTPPacket answer ; int block = 1 ; boolean sendNext = true ; int readLength = TFTPDataPacket . MAX_DATA_LENGTH ; TFTPDataPacket lastSentData = null ; // We are reading a file, so when we read less than the // requested bytes, we know that we are at the end of the file. while ( readLength == TFTPDataPacket . MAX_DATA_LENGTH && ! shutdownTransfer ) { if ( sendNext ) { readLength = is . read ( temp ); if ( readLength == - 1 ) { readLength = 0 ; } lastSentData = new TFTPDataPacket ( trrp . getAddress (), trrp . getPort (), block , temp , 0 , readLength ); sendData ( transferTftp_ , lastSentData ); // send the data } answer = null ; int timeoutCount = 0 ; while ( ! shutdownTransfer && ( answer == null || ! answer . getAddress (). equals ( trrp . getAddress ()) || answer . getPort () != trrp . getPort ())) { // listen for an answer. if ( answer != null ) { // The answer that we got didn't come from the // expected source, fire back an error, and continue // listening. log_ . println ( \"TFTP Server ignoring message from unexpected source.\" ); transferTftp_ . bufferedSend ( new TFTPErrorPacket ( answer . getAddress (), answer . getPort (), TFTPErrorPacket . UNKNOWN_TID , \"Unexpected Host or Port\" )); } try { answer = transferTftp_ . bufferedReceive (); } catch ( SocketTimeoutException e ) { if ( timeoutCount >= maxTimeoutRetries_ ) { throw e ; } // didn't get an ack for this data. need to resend // it. timeoutCount ++ ; transferTftp_ . bufferedSend ( lastSentData ); continue ; } } if ( answer == null || ! ( answer instanceof TFTPAckPacket )) { if ( ! shutdownTransfer ) { logError_ . println ( \"Unexpected response from tftp client during transfer (\" + answer + \"). Transfer aborted.\" ); } break ; } else { // once we get here, we know we have an answer packet // from the correct host. TFTPAckPacket ack = ( TFTPAckPacket ) answer ; if ( ack . getBlockNumber () != block ) { /* * The origional tftp spec would have called on us to resend the * previous data here, however, that causes the SAS Syndrome. * http://www.faqs.org/rfcs/rfc1123.html section 4.2.3.1 The modified * spec says that we ignore a duplicate ack. If the packet was really * lost, we will time out on receive, and resend the previous data at * that point. */ sendNext = false ; } else { // send the next block block ++ ; if ( block > 65535 ) { // wrap the block number block = 0 ; } sendNext = true ; } } } } finally { try { if ( is != null ) { is . close (); } } catch ( IOException e ) { // noop } } } /* * handle a tftp write request. */ private void handleWrite ( TFTPWriteRequestPacket twrp ) throws IOException , TFTPPacketException { OutputStream bos = null ; try { if ( mode_ == ServerMode . GET_ONLY ) { transferTftp_ . bufferedSend ( new TFTPErrorPacket ( twrp . getAddress (), twrp . getPort (), TFTPErrorPacket . ILLEGAL_OPERATION , \"Write not allowed by server.\" )); return ; } int lastBlock = 0 ; String fileName = twrp . getFilename (); try { File temp = buildSafeFile ( serverWriteDirectory_ , fileName , true ); if ( temp . exists ()) { transferTftp_ . bufferedSend ( new TFTPErrorPacket ( twrp . getAddress (), twrp . getPort (), TFTPErrorPacket . FILE_EXISTS , \"File already exists\" )); return ; } bos = new BufferedOutputStream ( new FileOutputStream ( temp )); if ( twrp . getMode () == TFTP . NETASCII_MODE ) { bos = new FromNetASCIIOutputStream ( bos ); } } catch ( Exception e ) { transferTftp_ . bufferedSend ( new TFTPErrorPacket ( twrp . getAddress (), twrp . getPort (), TFTPErrorPacket . UNDEFINED , e . getMessage ())); return ; } TFTPAckPacket lastSentAck = new TFTPAckPacket ( twrp . getAddress (), twrp . getPort (), 0 ); sendData ( transferTftp_ , lastSentAck ); // send the data while ( true ) { // get the response - ensure it is from the right place. TFTPPacket dataPacket = null ; int timeoutCount = 0 ; while ( ! shutdownTransfer && ( dataPacket == null || ! dataPacket . getAddress (). equals ( twrp . getAddress ()) || dataPacket . getPort () != twrp . getPort ())) { // listen for an answer. if ( dataPacket != null ) { // The data that we got didn't come from the // expected source, fire back an error, and continue // listening. log_ . println ( \"TFTP Server ignoring message from unexpected source.\" ); transferTftp_ . bufferedSend ( new TFTPErrorPacket ( dataPacket . getAddress (), dataPacket . getPort (), TFTPErrorPacket . UNKNOWN_TID , \"Unexpected Host or Port\" )); } try { dataPacket = transferTftp_ . bufferedReceive (); } catch ( SocketTimeoutException e ) { if ( timeoutCount >= maxTimeoutRetries_ ) { throw e ; } // It didn't get our ack. Resend it. transferTftp_ . bufferedSend ( lastSentAck ); timeoutCount ++ ; continue ; } } if ( dataPacket != null && dataPacket instanceof TFTPWriteRequestPacket ) { // it must have missed our initial ack. Send another. lastSentAck = new TFTPAckPacket ( twrp . getAddress (), twrp . getPort (), 0 ); transferTftp_ . bufferedSend ( lastSentAck ); } else if ( dataPacket == null || ! ( dataPacket instanceof TFTPDataPacket )) { if ( ! shutdownTransfer ) { logError_ . println ( \"Unexpected response from tftp client during transfer (\" + dataPacket + \"). Transfer aborted.\" ); } break ; } else { int block = (( TFTPDataPacket ) dataPacket ). getBlockNumber (); byte [] data = (( TFTPDataPacket ) dataPacket ). getData (); int dataLength = (( TFTPDataPacket ) dataPacket ). getDataLength (); int dataOffset = (( TFTPDataPacket ) dataPacket ). getDataOffset (); if ( block > lastBlock || ( lastBlock == 65535 && block == 0 )) { // it might resend a data block if it missed our ack // - don't rewrite the block. bos . write ( data , dataOffset , dataLength ); lastBlock = block ; } lastSentAck = new TFTPAckPacket ( twrp . getAddress (), twrp . getPort (), block ); sendData ( transferTftp_ , lastSentAck ); // send the data if ( dataLength < TFTPDataPacket . MAX_DATA_LENGTH ) { // end of stream signal - The tranfer is complete. bos . close (); // But my ack may be lost - so listen to see if I // need to resend the ack. for ( int i = 0 ; i < maxTimeoutRetries_ ; i ++ ) { try { dataPacket = transferTftp_ . bufferedReceive (); } catch ( SocketTimeoutException e ) { // this is the expected route - the client // shouldn't be sending any more packets. break ; } if ( dataPacket != null && ( ! dataPacket . getAddress (). equals ( twrp . getAddress ()) || dataPacket . getPort () != twrp . getPort ())) { // make sure it was from the right client... transferTftp_ . bufferedSend ( new TFTPErrorPacket ( dataPacket . getAddress (), dataPacket . getPort (), TFTPErrorPacket . UNKNOWN_TID , \"Unexpected Host or Port\" )); } else { // This means they sent us the last // datapacket again, must have missed our // ack. resend it. transferTftp_ . bufferedSend ( lastSentAck ); } } // all done. break ; } } } } finally { if ( bos != null ) { bos . close (); } } } /* * Utility method to make sure that paths provided by tftp clients do not get outside of the * serverRoot directory. */ private File buildSafeFile ( File serverDirectory , String fileName , boolean createSubDirs ) throws IOException { File temp = new File ( serverDirectory , fileName ); temp = temp . getCanonicalFile (); if ( ! isSubdirectoryOf ( serverDirectory , temp )) { throw new IOException ( \"Cannot access files outside of tftp server root.\" ); } // ensure directory exists (if requested) if ( createSubDirs ) { createDirectory ( temp . getParentFile ()); } return temp ; } /* * recursively create subdirectories */ private void createDirectory ( File file ) throws IOException { File parent = file . getParentFile (); if ( parent == null ) { throw new IOException ( \"Unexpected error creating requested directory\" ); } if ( ! parent . exists ()) { // recurse... createDirectory ( parent ); } if ( parent . isDirectory ()) { if ( file . isDirectory ()) { return ; } boolean result = file . mkdir (); if ( ! result ) { throw new IOException ( \"Couldn't create requested directory\" ); } } else { throw new IOException ( \"Invalid directory path - file in the way of requested folder\" ); } } /* * recursively check to see if one directory is a parent of another. */ private boolean isSubdirectoryOf ( File parent , File child ) { File childsParent = child . getParentFile (); if ( childsParent == null ) { return false ; } if ( childsParent . equals ( parent )) { return true ; } else { return isSubdirectoryOf ( parent , childsParent ); } } } /** * Set the stream object to log debug / informational messages. By default, this is a no-op * * @param log the stream to use for logging */ public void setLog ( PrintStream log ) { this . log_ = log ; } /** * Set the stream object to log error messsages. By default, this is a no-op * * @param logError the stream to use for logging errors */ public void setLogError ( PrintStream logError ) { this . logError_ = logError ; } /* * Allow test code to customise the TFTP instance */ TFTP newTFTP () { return new TFTP (); } /* * Also allow customisation of sending data/ack so can generate errors if needed */ void sendData ( TFTP tftp , TFTPPacket data ) throws IOException { tftp . bufferedSend ( data ); } }","tags":"Backend","url":"https://jiang-hao.com/articles/2019/backend-AJavaTFTPServer.html","loc":"https://jiang-hao.com/articles/2019/backend-AJavaTFTPServer.html"},{"title":"Javaä»£ç ä¼˜åŒ–35ç‚¹æ€»ç»“","text":"å‰è¨€ ä»£ç ä¼˜åŒ–ï¼Œä¸€ä¸ªå¾ˆé‡è¦çš„è¯¾é¢˜ã€‚å¯èƒ½æœ‰äº›äººè§‰å¾—æ²¡ç”¨ï¼Œä¸€äº›ç»†å°çš„åœ°æ–¹æœ‰ä»€ä¹ˆå¥½ä¿®æ”¹çš„ï¼Œæ”¹ä¸ä¸æ”¹å¯¹äºä»£ç çš„è¿è¡Œæ•ˆç‡æœ‰ä»€ä¹ˆå½±å“å‘¢ï¼Ÿè¿™ä¸ªé—®é¢˜æˆ‘æ˜¯è¿™ä¹ˆè€ƒè™‘çš„ï¼Œå°±åƒå¤§æµ·é‡Œé¢çš„é²¸é±¼ä¸€æ ·ï¼Œå®ƒåƒä¸€æ¡å°è™¾ç±³æœ‰ç”¨å—ï¼Ÿæ²¡ç”¨ï¼Œä½†æ˜¯ï¼Œåƒçš„å°è™¾ç±³ä¸€å¤šä¹‹åï¼Œé²¸é±¼å°±è¢«å–‚é¥±äº†ã€‚ä»£ç ä¼˜åŒ–ä¹Ÿæ˜¯ä¸€æ ·ï¼Œå¦‚æœé¡¹ç›®ç€çœ¼äºå°½å¿«æ— BUGä¸Šçº¿ï¼Œé‚£ä¹ˆæ­¤æ—¶å¯ä»¥æŠ“å¤§æ”¾å°ï¼Œä»£ç çš„ç»†èŠ‚å¯ä»¥ä¸ç²¾æ‰“ç»†ç£¨ï¼›ä½†æ˜¯å¦‚æœæœ‰è¶³å¤Ÿçš„æ—¶é—´å¼€å‘ã€ç»´æŠ¤ä»£ç ï¼Œè¿™æ—¶å€™å°±å¿…é¡»è€ƒè™‘æ¯ä¸ªå¯ä»¥ä¼˜åŒ–çš„ç»†èŠ‚äº†ï¼Œä¸€ä¸ªä¸€ä¸ªç»†å°çš„ä¼˜åŒ–ç‚¹ç´¯ç§¯èµ·æ¥ï¼Œå¯¹äºä»£ç çš„è¿è¡Œæ•ˆç‡ç»å¯¹æ˜¯æœ‰æå‡çš„ã€‚ ä»£ç ä¼˜åŒ–çš„ç›®æ ‡æ˜¯ï¼š 1ã€å‡å°ä»£ç çš„ä½“ç§¯ 2ã€æé«˜ä»£ç è¿è¡Œçš„æ•ˆç‡ ä»£ç ä¼˜åŒ–ç»†èŠ‚ 1ã€å°½é‡æŒ‡å®šç±»ã€æ–¹æ³•çš„finalä¿®é¥°ç¬¦ å¸¦æœ‰finalä¿®é¥°ç¬¦çš„ç±»æ˜¯ä¸å¯æ´¾ç”Ÿçš„ã€‚åœ¨Javaæ ¸å¿ƒAPIä¸­ï¼Œæœ‰è®¸å¤šåº”ç”¨finalçš„ä¾‹å­ï¼Œä¾‹å¦‚java.lang.Stringï¼Œæ•´ä¸ªç±»éƒ½æ˜¯finalçš„ã€‚ä¸ºç±»æŒ‡å®šfinalä¿®é¥°ç¬¦å¯ä»¥è®©ç±»ä¸å¯ä»¥è¢«ç»§æ‰¿ï¼Œä¸ºæ–¹æ³•æŒ‡å®šfinalä¿®é¥°ç¬¦å¯ä»¥è®©æ–¹æ³•ä¸å¯ä»¥è¢«é‡å†™ã€‚å¦‚æœæŒ‡å®šäº†ä¸€ä¸ªç±»ä¸ºfinalï¼Œåˆ™è¯¥ç±»æ‰€æœ‰çš„æ–¹æ³•éƒ½æ˜¯finalçš„ã€‚Javaç¼–è¯‘å™¨ä¼šå¯»æ‰¾æœºä¼šå†…è”æ‰€æœ‰çš„finalæ–¹æ³•ï¼Œå†…è”å¯¹äºæå‡Javaè¿è¡Œæ•ˆç‡ä½œç”¨é‡å¤§ï¼Œå…·ä½“å‚è§Javaè¿è¡ŒæœŸä¼˜åŒ–ã€‚æ­¤ä¸¾èƒ½å¤Ÿä½¿æ€§èƒ½å¹³å‡æé«˜50%ã€‚ 2ã€å°½é‡é‡ç”¨å¯¹è±¡ ç‰¹åˆ«æ˜¯Stringå¯¹è±¡çš„ä½¿ç”¨ï¼Œå‡ºç°å­—ç¬¦ä¸²è¿æ¥æ—¶åº”è¯¥ä½¿ç”¨StringBuilder/StringBufferä»£æ›¿ã€‚ç”±äºJavaè™šæ‹Ÿæœºä¸ä»…è¦èŠ±æ—¶é—´ç”Ÿæˆå¯¹è±¡ï¼Œä»¥åå¯èƒ½è¿˜éœ€è¦èŠ±æ—¶é—´å¯¹è¿™äº›å¯¹è±¡è¿›è¡Œåƒåœ¾å›æ”¶å’Œå¤„ç†ï¼Œå› æ­¤ï¼Œç”Ÿæˆè¿‡å¤šçš„å¯¹è±¡å°†ä¼šç»™ç¨‹åºçš„æ€§èƒ½å¸¦æ¥å¾ˆå¤§çš„å½±å“ã€‚ 3ã€å°½å¯èƒ½ä½¿ç”¨å±€éƒ¨å˜é‡ è°ƒç”¨æ–¹æ³•æ—¶ä¼ é€’çš„å‚æ•°ä»¥åŠåœ¨è°ƒç”¨ä¸­åˆ›å»ºçš„ä¸´æ—¶å˜é‡éƒ½ä¿å­˜åœ¨æ ˆä¸­é€Ÿåº¦è¾ƒå¿«ï¼Œå…¶ä»–å˜é‡ï¼Œå¦‚é™æ€å˜é‡ã€å®ä¾‹å˜é‡ç­‰ï¼Œéƒ½åœ¨å †ä¸­åˆ›å»ºï¼Œé€Ÿåº¦è¾ƒæ…¢ã€‚å¦å¤–ï¼Œæ ˆä¸­åˆ›å»ºçš„å˜é‡ï¼Œéšç€æ–¹æ³•çš„è¿è¡Œç»“æŸï¼Œè¿™äº›å†…å®¹å°±æ²¡äº†ï¼Œä¸éœ€è¦é¢å¤–çš„åƒåœ¾å›æ”¶ã€‚ 4ã€åŠæ—¶å…³é—­æµ Javaç¼–ç¨‹è¿‡ç¨‹ä¸­ï¼Œè¿›è¡Œæ•°æ®åº“è¿æ¥ã€I/Oæµæ“ä½œæ—¶åŠ¡å¿…å°å¿ƒï¼Œåœ¨ä½¿ç”¨å®Œæ¯•åï¼ŒåŠæ—¶å…³é—­ä»¥é‡Šæ”¾èµ„æºã€‚å› ä¸ºå¯¹è¿™äº›å¤§å¯¹è±¡çš„æ“ä½œä¼šé€ æˆç³»ç»Ÿå¤§çš„å¼€é”€ï¼Œç¨æœ‰ä¸æ…ï¼Œå°†ä¼šå¯¼è‡´ä¸¥é‡çš„åæœã€‚ 5ã€å°½é‡å‡å°‘å¯¹å˜é‡çš„é‡å¤è®¡ç®— æ˜ç¡®ä¸€ä¸ªæ¦‚å¿µï¼Œå¯¹æ–¹æ³•çš„è°ƒç”¨ï¼Œå³ä½¿æ–¹æ³•ä¸­åªæœ‰ä¸€å¥è¯­å¥ï¼Œä¹Ÿæ˜¯æœ‰æ¶ˆè€—çš„ï¼ŒåŒ…æ‹¬åˆ›å»ºæ ˆå¸§ã€è°ƒç”¨æ–¹æ³•æ—¶ä¿æŠ¤ç°åœºã€è°ƒç”¨æ–¹æ³•å®Œæ¯•æ—¶æ¢å¤ç°åœºç­‰ã€‚æ‰€ä»¥ä¾‹å¦‚ä¸‹é¢çš„æ“ä½œï¼š for ( int i = 0 ; i < list . size (); i ++ ) {...} å»ºè®®æ›¿æ¢ä¸ºï¼š for ( int i = 0 , int length = list . size (); i < length ; i ++ ) {...} è¿™æ ·ï¼Œåœ¨list.size()å¾ˆå¤§çš„æ—¶å€™ï¼Œå°±å‡å°‘äº†å¾ˆå¤šçš„æ¶ˆè€— 6ã€å°½é‡é‡‡ç”¨æ‡’åŠ è½½çš„ç­–ç•¥ï¼Œå³åœ¨éœ€è¦çš„æ—¶å€™æ‰åˆ›å»º ä¾‹å¦‚ï¼š String str = \"aaa\" ; if ( i == 1 ) { list . add ( str ); } å»ºè®®æ›¿æ¢ä¸ºï¼š if ( i == 1 ) { String str = \"aaa\" ; list . add ( str ); } 7ã€æ…ç”¨å¼‚å¸¸ å¼‚å¸¸å¯¹æ€§èƒ½ä¸åˆ©ã€‚æŠ›å‡ºå¼‚å¸¸é¦–å…ˆè¦åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼ŒThrowableæ¥å£çš„æ„é€ å‡½æ•°è°ƒç”¨åä¸ºfillInStackTrace()çš„æœ¬åœ°åŒæ­¥æ–¹æ³•ï¼ŒfillInStackTrace()æ–¹æ³•æ£€æŸ¥å †æ ˆï¼Œæ”¶é›†è°ƒç”¨è·Ÿè¸ªä¿¡æ¯ã€‚åªè¦æœ‰å¼‚å¸¸è¢«æŠ›å‡ºï¼ŒJavaè™šæ‹Ÿæœºå°±å¿…é¡»è°ƒæ•´è°ƒç”¨å †æ ˆï¼Œå› ä¸ºåœ¨å¤„ç†è¿‡ç¨‹ä¸­åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚å¼‚å¸¸åªèƒ½ç”¨äºé”™è¯¯å¤„ç†ï¼Œä¸åº”è¯¥ç”¨æ¥æ§åˆ¶ç¨‹åºæµç¨‹ã€‚ 8ã€ä¸è¦åœ¨å¾ªç¯ä¸­ä½¿ç”¨try...catch...ï¼Œåº”è¯¥æŠŠå…¶æ”¾åœ¨æœ€å¤–å±‚ é™¤éä¸å¾—å·²ã€‚å¦‚æœæ¯«æ— ç†ç”±åœ°è¿™ä¹ˆå†™äº†ï¼Œåªè¦ä½ çš„é¢†å¯¼èµ„æ·±ä¸€ç‚¹ã€æœ‰å¼ºè¿«ç—‡ä¸€ç‚¹ï¼Œå…«æˆå°±è¦éª‚ä½ ä¸ºä»€ä¹ˆå†™å‡ºè¿™ç§åƒåœ¾ä»£ç æ¥äº† 9ã€å¦‚æœèƒ½ä¼°è®¡åˆ°å¾…æ·»åŠ çš„å†…å®¹é•¿åº¦ï¼Œä¸ºåº•å±‚ä»¥æ•°ç»„æ–¹å¼å®ç°çš„é›†åˆã€å·¥å…·ç±»æŒ‡å®šåˆå§‹é•¿åº¦ æ¯”å¦‚ArrayListã€LinkedLlistã€StringBuilderã€StringBufferã€HashMapã€HashSetç­‰ç­‰ï¼Œä»¥StringBuilderä¸ºä¾‹ï¼š StringBuilder () // é»˜è®¤åˆ†é…16ä¸ªå­—ç¬¦çš„ç©ºé—´ StringBuilder ( int size ) // é»˜è®¤åˆ†é…sizeä¸ªå­—ç¬¦çš„ç©ºé—´ StringBuilder ( String str ) // é»˜è®¤åˆ†é…16ä¸ªå­—ç¬¦+str.length()ä¸ªå­—ç¬¦ç©ºé—´ å¯ä»¥é€šè¿‡ç±»ï¼ˆè¿™é‡ŒæŒ‡çš„ä¸ä»…ä»…æ˜¯ä¸Šé¢çš„StringBuilderï¼‰çš„æ¥è®¾å®šå®ƒçš„åˆå§‹åŒ–å®¹é‡ï¼Œè¿™æ ·å¯ä»¥æ˜æ˜¾åœ°æå‡æ€§èƒ½ã€‚æ¯”å¦‚StringBuilderå§ï¼Œlengthè¡¨ç¤ºå½“å‰çš„StringBuilderèƒ½ä¿æŒçš„å­—ç¬¦æ•°é‡ã€‚å› ä¸ºå½“StringBuilderè¾¾åˆ°æœ€å¤§å®¹é‡çš„æ—¶å€™ï¼Œå®ƒä¼šå°†è‡ªèº«å®¹é‡å¢åŠ åˆ°å½“å‰çš„2å€å†åŠ 2ï¼Œæ— è®ºä½•æ—¶åªè¦StringBuilderè¾¾åˆ°å®ƒçš„æœ€å¤§å®¹é‡ï¼Œå®ƒå°±ä¸å¾—ä¸åˆ›å»ºä¸€ä¸ªæ–°çš„å­—ç¬¦æ•°ç»„ç„¶åå°†æ—§çš„å­—ç¬¦æ•°ç»„å†…å®¹æ‹·è´åˆ°æ–°å­—ç¬¦æ•°ç»„ä¸­----è¿™æ˜¯ååˆ†è€—è´¹æ€§èƒ½çš„ä¸€ä¸ªæ“ä½œã€‚è¯•æƒ³ï¼Œå¦‚æœèƒ½é¢„ä¼°åˆ°å­—ç¬¦æ•°ç»„ä¸­å¤§æ¦‚è¦å­˜æ”¾5000ä¸ªå­—ç¬¦è€Œä¸æŒ‡å®šé•¿åº¦ï¼Œæœ€æ¥è¿‘5000çš„2æ¬¡å¹‚æ˜¯4096ï¼Œæ¯æ¬¡æ‰©å®¹åŠ çš„2ä¸ç®¡ï¼Œé‚£ä¹ˆï¼š åœ¨4096 çš„åŸºç¡€ä¸Šï¼Œå†ç”³è¯·8194ä¸ªå¤§å°çš„å­—ç¬¦æ•°ç»„ï¼ŒåŠ èµ·æ¥ç›¸å½“äºä¸€æ¬¡ç”³è¯·äº†12290ä¸ªå¤§å°çš„å­—ç¬¦æ•°ç»„ï¼Œå¦‚æœä¸€å¼€å§‹èƒ½æŒ‡å®š5000ä¸ªå¤§å°çš„å­—ç¬¦æ•°ç»„ï¼Œå°±èŠ‚çœäº†ä¸€å€ä»¥ä¸Šçš„ç©ºé—´ æŠŠåŸæ¥çš„4096ä¸ªå­—ç¬¦æ‹·è´åˆ°æ–°çš„çš„å­—ç¬¦æ•°ç»„ä¸­å» è¿™æ ·ï¼Œæ—¢æµªè´¹å†…å­˜ç©ºé—´åˆé™ä½ä»£ç è¿è¡Œæ•ˆç‡ã€‚æ‰€ä»¥ï¼Œç»™åº•å±‚ä»¥æ•°ç»„å®ç°çš„é›†åˆã€å·¥å…·ç±»è®¾ç½®ä¸€ä¸ªåˆç†çš„åˆå§‹åŒ–å®¹é‡æ˜¯é”™ä¸äº†çš„ï¼Œè¿™ä¼šå¸¦æ¥ç«‹ç«¿è§å½±çš„æ•ˆæœã€‚ä½†æ˜¯ï¼Œæ³¨æ„ï¼ŒåƒHashMapè¿™ç§æ˜¯ä»¥æ•°ç»„+é“¾è¡¨å®ç°çš„é›†åˆï¼Œåˆ«æŠŠåˆå§‹å¤§å°å’Œä½ ä¼°è®¡çš„å¤§å°è®¾ç½®å¾—ä¸€æ ·ï¼Œå› ä¸ºä¸€ä¸ªtableä¸Šåªè¿æ¥ä¸€ä¸ªå¯¹è±¡çš„å¯èƒ½æ€§å‡ ä¹ä¸º0ã€‚åˆå§‹å¤§å°å»ºè®®è®¾ç½®ä¸º2çš„Næ¬¡å¹‚ï¼Œå¦‚æœèƒ½ä¼°è®¡åˆ°æœ‰2000ä¸ªå…ƒç´ ï¼Œè®¾ç½®æˆnew HashMap(128)ã€new HashMap(256)éƒ½å¯ä»¥ã€‚ 10ã€å½“å¤åˆ¶å¤§é‡æ•°æ®æ—¶ï¼Œä½¿ç”¨System.arraycopy()å‘½ä»¤ 11ã€ä¹˜æ³•å’Œé™¤æ³•ä½¿ç”¨ç§»ä½æ“ä½œ ä¾‹å¦‚ï¼š for ( val = 0 ; val < 100000 ; val += 5 ) { a = val * 8 ; b = val / 2 ; } ç”¨ç§»ä½æ“ä½œå¯ä»¥æå¤§åœ°æé«˜æ€§èƒ½ï¼Œå› ä¸ºåœ¨è®¡ç®—æœºåº•å±‚ï¼Œå¯¹ä½çš„æ“ä½œæ˜¯æœ€æ–¹ä¾¿ã€æœ€å¿«çš„ï¼Œå› æ­¤å»ºè®®ä¿®æ”¹ä¸ºï¼š for ( val = 0 ; val < 100000 ; val += 5 ) { a = val << 3 ; b = val >> 1 ; } ç§»ä½æ“ä½œè™½ç„¶å¿«ï¼Œä½†æ˜¯å¯èƒ½ä¼šä½¿ä»£ç ä¸å¤ªå¥½ç†è§£ï¼Œå› æ­¤æœ€å¥½åŠ ä¸Šç›¸åº”çš„æ³¨é‡Šã€‚ 12ã€å¾ªç¯å†…ä¸è¦ä¸æ–­åˆ›å»ºå¯¹è±¡å¼•ç”¨ ä¾‹å¦‚ï¼š for ( int i = 1 ; i <= count ; i ++ ) { Object obj = new Object (); } è¿™ç§åšæ³•ä¼šå¯¼è‡´å†…å­˜ä¸­æœ‰countä»½Objectå¯¹è±¡å¼•ç”¨å­˜åœ¨ï¼Œcountå¾ˆå¤§çš„è¯ï¼Œå°±è€—è´¹å†…å­˜äº†ï¼Œå»ºè®®ä¸ºæ”¹ä¸ºï¼š Object obj = null ; for ( int i = 0 ; i <= count ; i ++ ){ obj = new Object ();} è¿™æ ·çš„è¯ï¼Œå†…å­˜ä¸­åªæœ‰ä¸€ä»½Objectå¯¹è±¡å¼•ç”¨ï¼Œæ¯æ¬¡new Object()çš„æ—¶å€™ï¼ŒObjectå¯¹è±¡å¼•ç”¨æŒ‡å‘ä¸åŒçš„Objectç½¢äº†ï¼Œä½†æ˜¯å†…å­˜ä¸­åªæœ‰ä¸€ä»½ï¼Œè¿™æ ·å°±å¤§å¤§èŠ‚çœäº†å†…å­˜ç©ºé—´äº†ã€‚ 13ã€åŸºäºæ•ˆç‡å’Œç±»å‹æ£€æŸ¥çš„è€ƒè™‘ï¼Œåº”è¯¥å°½å¯èƒ½ä½¿ç”¨array æ— æ³•ç¡®å®šæ•°ç»„å¤§å°æ—¶æ‰ä½¿ç”¨ArrayList 14ã€å°½é‡ä½¿ç”¨HashMapã€ArrayListã€StringBuilder é™¤éçº¿ç¨‹å®‰å…¨éœ€è¦ï¼Œå¦åˆ™ä¸æ¨èä½¿ç”¨Hashtableã€Vectorã€StringBufferï¼Œåä¸‰è€…ç”±äºä½¿ç”¨åŒæ­¥æœºåˆ¶è€Œå¯¼è‡´äº†æ€§èƒ½å¼€é”€ 15ã€ä¸è¦å°†æ•°ç»„å£°æ˜ä¸ºpublic static final å› ä¸ºè¿™æ¯«æ— æ„ä¹‰ï¼Œè¿™æ ·åªæ˜¯å®šä¹‰äº†å¼•ç”¨ä¸ºstatic finalï¼Œæ•°ç»„çš„å†…å®¹è¿˜æ˜¯å¯ä»¥éšæ„æ”¹å˜çš„ï¼Œå°†æ•°ç»„å£°æ˜ä¸ºpublicæ›´æ˜¯ä¸€ä¸ªå®‰å…¨æ¼æ´ï¼Œè¿™æ„å‘³ç€è¿™ä¸ªæ•°ç»„å¯ä»¥è¢«å¤–éƒ¨ç±»æ‰€æ”¹å˜ 16ã€å°½é‡åœ¨åˆé€‚çš„åœºåˆä½¿ç”¨å•ä¾‹ ä½¿ç”¨å•ä¾‹å¯ä»¥å‡è½»åŠ è½½çš„è´Ÿæ‹…ã€ç¼©çŸ­åŠ è½½çš„æ—¶é—´ã€æé«˜åŠ è½½çš„æ•ˆç‡ï¼Œä½†å¹¶ä¸æ˜¯æ‰€æœ‰åœ°æ–¹éƒ½é€‚ç”¨äºå•ä¾‹ï¼Œç®€å•æ¥è¯´ï¼Œå•ä¾‹ä¸»è¦é€‚ç”¨äºä»¥ä¸‹ä¸‰ä¸ªæ–¹é¢ï¼š æ§åˆ¶èµ„æºçš„ä½¿ç”¨ï¼Œé€šè¿‡çº¿ç¨‹åŒæ­¥æ¥æ§åˆ¶èµ„æºçš„å¹¶å‘è®¿é—® æ§åˆ¶å®ä¾‹çš„äº§ç”Ÿï¼Œä»¥è¾¾åˆ°èŠ‚çº¦èµ„æºçš„ç›®çš„ æ§åˆ¶æ•°æ®çš„å…±äº«ï¼Œåœ¨ä¸å»ºç«‹ç›´æ¥å…³è”çš„æ¡ä»¶ä¸‹ï¼Œè®©å¤šä¸ªä¸ç›¸å…³çš„è¿›ç¨‹æˆ–çº¿ç¨‹ä¹‹é—´å®ç°é€šä¿¡ 17ã€å°½é‡é¿å…éšæ„ä½¿ç”¨é™æ€å˜é‡ è¦çŸ¥é“ï¼Œå½“æŸä¸ªå¯¹è±¡è¢«å®šä¹‰ä¸ºstaticçš„å˜é‡æ‰€å¼•ç”¨ï¼Œé‚£ä¹ˆgcé€šå¸¸æ˜¯ä¸ä¼šå›æ”¶è¿™ä¸ªå¯¹è±¡æ‰€å æœ‰çš„å †å†…å­˜çš„ï¼Œå¦‚ï¼š public class A { private static B b = new B (); } æ­¤æ—¶é™æ€å˜é‡bçš„ç”Ÿå‘½å‘¨æœŸä¸Aç±»ç›¸åŒï¼Œå¦‚æœAç±»ä¸è¢«å¸è½½ï¼Œé‚£ä¹ˆå¼•ç”¨BæŒ‡å‘çš„Bå¯¹è±¡ä¼šå¸¸é©»å†…å­˜ï¼Œç›´åˆ°ç¨‹åºç»ˆæ­¢ 18ã€åŠæ—¶æ¸…é™¤ä¸å†éœ€è¦çš„ä¼šè¯ ä¸ºäº†æ¸…é™¤ä¸å†æ´»åŠ¨çš„ä¼šè¯ï¼Œè®¸å¤šåº”ç”¨æœåŠ¡å™¨éƒ½æœ‰é»˜è®¤çš„ä¼šè¯è¶…æ—¶æ—¶é—´ï¼Œä¸€èˆ¬ä¸º30åˆ†é’Ÿã€‚å½“åº”ç”¨æœåŠ¡å™¨éœ€è¦ä¿å­˜æ›´å¤šçš„ä¼šè¯æ—¶ï¼Œå¦‚æœå†…å­˜ä¸è¶³ï¼Œé‚£ä¹ˆæ“ä½œç³»ç»Ÿä¼šæŠŠéƒ¨åˆ†æ•°æ®è½¬ç§»åˆ°ç£ç›˜ï¼Œåº”ç”¨æœåŠ¡å™¨ä¹Ÿå¯èƒ½æ ¹æ®MRUï¼ˆæœ€è¿‘æœ€é¢‘ç¹ä½¿ç”¨ï¼‰ç®—æ³•æŠŠéƒ¨åˆ†ä¸æ´»è·ƒçš„ä¼šè¯è½¬å‚¨åˆ°ç£ç›˜ï¼Œç”šè‡³å¯èƒ½æŠ›å‡ºå†…å­˜ä¸è¶³çš„å¼‚å¸¸ã€‚å¦‚æœä¼šè¯è¦è¢«è½¬å‚¨åˆ°ç£ç›˜ï¼Œé‚£ä¹ˆå¿…é¡»è¦å…ˆè¢«åºåˆ—åŒ–ï¼Œåœ¨å¤§è§„æ¨¡é›†ç¾¤ä¸­ï¼Œå¯¹å¯¹è±¡è¿›è¡Œåºåˆ—åŒ–çš„ä»£ä»·æ˜¯å¾ˆæ˜‚è´µçš„ã€‚å› æ­¤ï¼Œå½“ä¼šè¯ä¸å†éœ€è¦æ—¶ï¼Œåº”å½“åŠæ—¶è°ƒç”¨HttpSessionçš„invalidate()æ–¹æ³•æ¸…é™¤ä¼šè¯ã€‚ 19ã€å®ç°RandomAccessæ¥å£çš„é›†åˆæ¯”å¦‚ArrayListï¼Œåº”å½“ä½¿ç”¨æœ€æ™®é€šçš„forå¾ªç¯è€Œä¸æ˜¯foreachå¾ªç¯æ¥éå† è¿™æ˜¯JDKæ¨èç»™ç”¨æˆ·çš„ã€‚JDK APIå¯¹äºRandomAccessæ¥å£çš„è§£é‡Šæ˜¯ï¼šå®ç°RandomAccessæ¥å£ç”¨æ¥è¡¨æ˜å…¶æ”¯æŒå¿«é€Ÿéšæœºè®¿é—®ï¼Œæ­¤æ¥å£çš„ä¸»è¦ç›®çš„æ˜¯å…è®¸ä¸€èˆ¬çš„ç®—æ³•æ›´æ”¹å…¶è¡Œä¸ºï¼Œä»è€Œå°†å…¶åº”ç”¨åˆ°éšæœºæˆ–è¿ç»­è®¿é—®åˆ—è¡¨æ—¶èƒ½æä¾›è‰¯å¥½çš„æ€§èƒ½ã€‚å®é™…ç»éªŒè¡¨æ˜ï¼Œå®ç°RandomAccessæ¥å£çš„ç±»å®ä¾‹ï¼Œå‡å¦‚æ˜¯éšæœºè®¿é—®çš„ï¼Œä½¿ç”¨æ™®é€šforå¾ªç¯æ•ˆç‡å°†é«˜äºä½¿ç”¨foreachå¾ªç¯ï¼›åè¿‡æ¥ï¼Œå¦‚æœæ˜¯é¡ºåºè®¿é—®çš„ï¼Œåˆ™ä½¿ç”¨Iteratorä¼šæ•ˆç‡æ›´é«˜ã€‚å¯ä»¥ä½¿ç”¨ç±»ä¼¼å¦‚ä¸‹çš„ä»£ç ä½œåˆ¤æ–­ï¼š if ( list instanceof RandomAccess ) { for ( int i = 0 ; i < list . size (); i ++ ){} } else { Iterator <?> iterator = list . iterable (); while ( iterator . hasNext ()){ iterator . next ()} } foreachå¾ªç¯çš„åº•å±‚å®ç°åŸç†å°±æ˜¯è¿­ä»£å™¨Iteratorï¼Œå‚è§Javaè¯­æ³•ç³–1ï¼šå¯å˜é•¿åº¦å‚æ•°ä»¥åŠforeachå¾ªç¯åŸç†ã€‚æ‰€ä»¥ååŠå¥\"åè¿‡æ¥ï¼Œå¦‚æœæ˜¯é¡ºåºè®¿é—®çš„ï¼Œåˆ™ä½¿ç”¨Iteratorä¼šæ•ˆç‡æ›´é«˜\"çš„æ„æ€å°±æ˜¯é¡ºåºè®¿é—®çš„é‚£äº›ç±»å®ä¾‹ï¼Œä½¿ç”¨foreachå¾ªç¯å»éå†ã€‚ 20ã€ä½¿ç”¨åŒæ­¥ä»£ç å—æ›¿ä»£åŒæ­¥æ–¹æ³• è¿™ç‚¹åœ¨å¤šçº¿ç¨‹æ¨¡å—ä¸­çš„synchronizedé”æ–¹æ³•å—ä¸€æ–‡ä¸­å·²ç»è®²å¾—å¾ˆæ¸…æ¥šäº†ï¼Œé™¤éèƒ½ç¡®å®šä¸€æ•´ä¸ªæ–¹æ³•éƒ½æ˜¯éœ€è¦è¿›è¡ŒåŒæ­¥çš„ï¼Œå¦åˆ™å°½é‡ä½¿ç”¨åŒæ­¥ä»£ç å—ï¼Œé¿å…å¯¹é‚£äº›ä¸éœ€è¦è¿›è¡ŒåŒæ­¥çš„ä»£ç ä¹Ÿè¿›è¡Œäº†åŒæ­¥ï¼Œå½±å“äº†ä»£ç æ‰§è¡Œæ•ˆç‡ã€‚ 21ã€å°†å¸¸é‡å£°æ˜ä¸ºstatic finalï¼Œå¹¶ä»¥å¤§å†™å‘½å è¿™æ ·åœ¨ç¼–è¯‘æœŸé—´å°±å¯ä»¥æŠŠè¿™äº›å†…å®¹æ”¾å…¥å¸¸é‡æ± ä¸­ï¼Œé¿å…è¿è¡ŒæœŸé—´è®¡ç®—ç”Ÿæˆå¸¸é‡çš„å€¼ã€‚å¦å¤–ï¼Œå°†å¸¸é‡çš„åå­—ä»¥å¤§å†™å‘½åä¹Ÿå¯ä»¥æ–¹ä¾¿åŒºåˆ†å‡ºå¸¸é‡ä¸å˜é‡ 22ã€ä¸è¦åˆ›å»ºä¸€äº›ä¸ä½¿ç”¨çš„å¯¹è±¡ï¼Œä¸è¦å¯¼å…¥ä¸€äº›ä¸ä½¿ç”¨çš„ç±» è¿™æ¯«æ— æ„ä¹‰ï¼Œå¦‚æœä»£ç ä¸­å‡ºç°\"The value of the local variable i is not used\"ã€\"The import java.util is never used\"ï¼Œé‚£ä¹ˆè¯·åˆ é™¤è¿™äº›æ— ç”¨çš„å†…å®¹ 23ã€ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­é¿å…ä½¿ç”¨åå°„ å…³äºï¼Œè¯·å‚è§åå°„ã€‚åå°„æ˜¯Javaæä¾›ç»™ç”¨æˆ·ä¸€ä¸ªå¾ˆå¼ºå¤§çš„åŠŸèƒ½ï¼ŒåŠŸèƒ½å¼ºå¤§å¾€å¾€æ„å‘³ç€æ•ˆç‡ä¸é«˜ã€‚ä¸å»ºè®®åœ¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­ä½¿ç”¨å°¤å…¶æ˜¯é¢‘ç¹ä½¿ç”¨åå°„æœºåˆ¶ï¼Œç‰¹åˆ«æ˜¯Methodçš„invokeæ–¹æ³•ï¼Œå¦‚æœç¡®å®æœ‰å¿…è¦ï¼Œä¸€ç§å»ºè®®æ€§çš„åšæ³•æ˜¯å°†é‚£äº›éœ€è¦é€šè¿‡åå°„åŠ è½½çš„ç±»åœ¨é¡¹ç›®å¯åŠ¨çš„æ—¶å€™é€šè¿‡åå°„å®ä¾‹åŒ–å‡ºä¸€ä¸ªå¯¹è±¡å¹¶æ”¾å…¥å†…å­˜----ç”¨æˆ·åªå…³å¿ƒå’Œå¯¹ç«¯äº¤äº’çš„æ—¶å€™è·å–æœ€å¿«çš„å“åº”é€Ÿåº¦ï¼Œå¹¶ä¸å…³å¿ƒå¯¹ç«¯çš„é¡¹ç›®å¯åŠ¨èŠ±å¤šä¹…æ—¶é—´ã€‚ 24ã€ä½¿ç”¨æ•°æ®åº“è¿æ¥æ± å’Œçº¿ç¨‹æ±  è¿™ä¸¤ä¸ªæ± éƒ½æ˜¯ç”¨äºé‡ç”¨å¯¹è±¡çš„ï¼Œå‰è€…å¯ä»¥é¿å…é¢‘ç¹åœ°æ‰“å¼€å’Œå…³é—­è¿æ¥ï¼Œåè€…å¯ä»¥é¿å…é¢‘ç¹åœ°åˆ›å»ºå’Œé”€æ¯çº¿ç¨‹ 25ã€ä½¿ç”¨å¸¦ç¼“å†²çš„è¾“å…¥è¾“å‡ºæµè¿›è¡ŒIOæ“ä½œ å¸¦ç¼“å†²çš„è¾“å…¥è¾“å‡ºæµï¼Œå³BufferedReaderã€BufferedWriterã€BufferedInputStreamã€BufferedOutputStreamï¼Œè¿™å¯ä»¥æå¤§åœ°æå‡IOæ•ˆç‡ 26ã€é¡ºåºæ’å…¥å’Œéšæœºè®¿é—®æ¯”è¾ƒå¤šçš„åœºæ™¯ä½¿ç”¨ArrayListï¼Œå…ƒç´ åˆ é™¤å’Œä¸­é—´æ’å…¥æ¯”è¾ƒå¤šçš„åœºæ™¯ä½¿ç”¨LinkedList è¿™ä¸ªï¼Œç†è§£ArrayListå’ŒLinkedListçš„åŸç†å°±çŸ¥é“äº† 27ã€ä¸è¦è®©publicæ–¹æ³•ä¸­æœ‰å¤ªå¤šçš„å½¢å‚ publicæ–¹æ³•å³å¯¹å¤–æä¾›çš„æ–¹æ³•ï¼Œå¦‚æœç»™è¿™äº›æ–¹æ³•å¤ªå¤šå½¢å‚çš„è¯ä¸»è¦æœ‰ä¸¤ç‚¹åå¤„ï¼š è¿åäº†é¢å‘å¯¹è±¡çš„ç¼–ç¨‹æ€æƒ³ï¼ŒJavaè®²æ±‚ä¸€åˆ‡éƒ½æ˜¯å¯¹è±¡ï¼Œå¤ªå¤šçš„å½¢å‚ï¼Œå’Œé¢å‘å¯¹è±¡çš„ç¼–ç¨‹æ€æƒ³å¹¶ä¸å¥‘åˆ å‚æ•°å¤ªå¤šåŠ¿å¿…å¯¼è‡´æ–¹æ³•è°ƒç”¨çš„å‡ºé”™æ¦‚ç‡å¢åŠ  è‡³äºè¿™ä¸ª\"å¤ªå¤š\"æŒ‡çš„æ˜¯å¤šå°‘ä¸ªï¼Œ3ã€4ä¸ªå§ã€‚æ¯”å¦‚æˆ‘ä»¬ç”¨JDBCå†™ä¸€ä¸ªinsertStudentInfoæ–¹æ³•ï¼Œæœ‰10ä¸ªå­¦ç”Ÿä¿¡æ¯å­—æ®µè¦æ’å¦‚Studentè¡¨ä¸­ï¼Œå¯ä»¥æŠŠè¿™10ä¸ªå‚æ•°å°è£…åœ¨ä¸€ä¸ªå®ä½“ç±»ä¸­ï¼Œä½œä¸ºinsertæ–¹æ³•çš„å½¢å‚ 28ã€å­—ç¬¦ä¸²å˜é‡å’Œå­—ç¬¦ä¸²å¸¸é‡equalsçš„æ—¶å€™å°†å­—ç¬¦ä¸²å¸¸é‡å†™åœ¨å‰é¢ è¿™æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¸¸è§çš„å°æŠ€å·§äº†ï¼Œå¦‚æœæœ‰ä»¥ä¸‹ä»£ç ï¼š String str = \"123\" ; if ( str . equals ( \"123\" )){ ... } å»ºè®®ä¿®æ”¹ä¸ºï¼š String str = \"123\" ; if ( \"123\" . equals ( str )) { ... } è¿™ä¹ˆåšä¸»è¦æ˜¯å¯ä»¥é¿å…ç©ºæŒ‡é’ˆå¼‚å¸¸ 29ã€è¯·çŸ¥é“ï¼Œåœ¨javaä¸­if (i == 1)å’Œif (1 == i)æ˜¯æ²¡æœ‰åŒºåˆ«çš„ï¼Œä½†ä»é˜…è¯»ä¹ æƒ¯ä¸Šè®²ï¼Œå»ºè®®ä½¿ç”¨å‰è€… å¹³æ—¶æœ‰äººé—®ï¼Œ if (i == 1) å’Œ if (1== i) æœ‰æ²¡æœ‰åŒºåˆ«ï¼Œè¿™å°±è¦ä»C/C++è®²èµ·ã€‚ åœ¨C/C++ä¸­ï¼Œ if (i == 1) åˆ¤æ–­æ¡ä»¶æˆç«‹ï¼Œæ˜¯ä»¥0ä¸é0ä¸ºåŸºå‡†çš„ï¼Œ0è¡¨ç¤ºfalseï¼Œé0è¡¨ç¤ºtrueï¼Œå¦‚æœæœ‰è¿™ä¹ˆä¸€æ®µä»£ç ï¼š int i = 2 ; if ( i == 1 ) { ... } else { ... } C/C++åˆ¤æ–­\"i==1\"ä¸æˆç«‹ï¼Œæ‰€ä»¥ä»¥0è¡¨ç¤ºï¼Œå³falseã€‚ä½†æ˜¯å¦‚æœï¼š int i = 2 ; if ( i = 1 ){ ...} else { ...} ä¸‡ä¸€ç¨‹åºå‘˜ä¸€ä¸ªä¸å°å¿ƒï¼ŒæŠŠ\"if (i == 1)\"å†™æˆ\"if (i = 1)\"ï¼Œè¿™æ ·å°±æœ‰é—®é¢˜äº†ã€‚åœ¨ifä¹‹å†…å°†ièµ‹å€¼ä¸º1ï¼Œifåˆ¤æ–­é‡Œé¢çš„å†…å®¹é0ï¼Œè¿”å›çš„å°±æ˜¯trueäº†ï¼Œä½†æ˜¯æ˜æ˜iä¸º2ï¼Œæ¯”è¾ƒçš„å€¼æ˜¯1ï¼Œåº”è¯¥è¿”å›çš„falseã€‚è¿™ç§æƒ…å†µåœ¨C/C++çš„å¼€å‘ä¸­æ˜¯å¾ˆå¯èƒ½å‘ç”Ÿçš„å¹¶ä¸”ä¼šå¯¼è‡´ä¸€äº›éš¾ä»¥ç†è§£çš„é”™è¯¯äº§ç”Ÿï¼Œæ‰€ä»¥ï¼Œä¸ºäº†é¿å…å¼€å‘è€…åœ¨ifè¯­å¥ä¸­ä¸æ­£ç¡®çš„èµ‹å€¼æ“ä½œï¼Œå»ºè®®å°†ifè¯­å¥å†™ä¸ºï¼š int i = 2 ; if ( 1 == i ){ ...} else { ...} è¿™æ ·ï¼Œå³ä½¿å¼€å‘è€…ä¸å°å¿ƒå†™æˆäº† 1 = i ï¼ŒC/C++ç¼–è¯‘å™¨ä¹Ÿå¯ä»¥ç¬¬ä¸€æ—¶é—´æ£€æŸ¥å‡ºæ¥ï¼Œå› ä¸ºæˆ‘ä»¬å¯ä»¥å¯¹ä¸€ä¸ªå˜é‡èµ‹å€¼iä¸º1ï¼Œä½†æ˜¯ä¸èƒ½å¯¹ä¸€ä¸ªå¸¸é‡èµ‹å€¼1ä¸ºiã€‚ ä½†æ˜¯ï¼Œåœ¨Javaä¸­ï¼ŒC/C++è¿™ç§ if (i = 1) çš„è¯­æ³•æ˜¯ä¸å¯èƒ½å‡ºç°çš„ï¼Œå› ä¸ºä¸€æ—¦å†™äº†è¿™ç§è¯­æ³•ï¼ŒJavaå°±ä¼šç¼–è¯‘æŠ¥é”™\"Type mismatch: cannot convert from int to boolean\"ã€‚ä½†æ˜¯ï¼Œå°½ç®¡Javaçš„ if (i == 1) å’Œ if (1 == i) åœ¨è¯­ä¹‰ä¸Šæ²¡æœ‰ä»»ä½•åŒºåˆ«ï¼Œä½†æ˜¯ä»é˜…è¯»ä¹ æƒ¯ä¸Šè®²ï¼Œå»ºè®®ä½¿ç”¨å‰è€…ä¼šæ›´å¥½äº›ã€‚ 30ã€ä¸è¦å¯¹æ•°ç»„ä½¿ç”¨toString()æ–¹æ³• çœ‹ä¸€ä¸‹å¯¹æ•°ç»„ä½¿ç”¨toString()æ‰“å°å‡ºæ¥çš„æ˜¯ä»€ä¹ˆï¼š public static void main ( String [] args ) { int [] is = new int [] { 1 , 2 , 3 }; System . out . println ( is . toString ()); } ç»“æœæ˜¯ï¼š [ I @ 18 a992f æœ¬æ„æ˜¯æƒ³æ‰“å°å‡ºæ•°ç»„å†…å®¹ï¼Œå´æœ‰å¯èƒ½å› ä¸ºæ•°ç»„å¼•ç”¨isä¸ºç©ºè€Œå¯¼è‡´ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚ä¸è¿‡è™½ç„¶å¯¹æ•°ç»„toString()æ²¡æœ‰æ„ä¹‰ï¼Œä½†æ˜¯å¯¹é›†åˆtoString()æ˜¯å¯ä»¥æ‰“å°å‡ºé›†åˆé‡Œé¢çš„å†…å®¹çš„ï¼Œå› ä¸ºé›†åˆçš„çˆ¶ç±»AbstractCollections é‡å†™äº†Objectçš„toString()æ–¹æ³•ã€‚ 31ã€ä¸è¦å¯¹è¶…å‡ºèŒƒå›´çš„åŸºæœ¬æ•°æ®ç±»å‹åšå‘ä¸‹å¼ºåˆ¶è½¬å‹ è¿™ç»ä¸ä¼šå¾—åˆ°æƒ³è¦çš„ç»“æœï¼š public static void main ( String [] args ) { long l = 12345678901234L ; int i = ( int ) l ; System . out . println ( i ); } æˆ‘ä»¬å¯èƒ½æœŸæœ›å¾—åˆ°å…¶ä¸­çš„æŸå‡ ä½ï¼Œä½†æ˜¯ç»“æœå´æ˜¯ï¼š 1942892530 è§£é‡Šä¸€ä¸‹ã€‚Javaä¸­longæ˜¯8ä¸ªå­—èŠ‚64ä½çš„ï¼Œæ‰€ä»¥12345678901234åœ¨è®¡ç®—æœºä¸­çš„è¡¨ç¤ºåº”è¯¥æ˜¯ï¼š 0000 0000 0000 0000 0000 1011 0011 1010 0111 0011 1100 1110 0010 1111 1111 0010 ä¸€ä¸ªintå‹æ•°æ®æ˜¯4ä¸ªå­—èŠ‚32ä½çš„ï¼Œä»ä½ä½å–å‡ºä¸Šé¢è¿™ä¸²äºŒè¿›åˆ¶æ•°æ®çš„å‰32ä½æ˜¯ï¼š 0111 0011 1100 1110 0010 1111 1111 0010 è¿™ä¸²äºŒè¿›åˆ¶è¡¨ç¤ºä¸ºåè¿›åˆ¶1942892530ï¼Œæ‰€ä»¥å°±æ˜¯æˆ‘ä»¬ä¸Šé¢çš„æ§åˆ¶å°ä¸Šè¾“å‡ºçš„å†…å®¹ã€‚ä»è¿™ä¸ªä¾‹å­ä¸Šè¿˜èƒ½é¡ºä¾¿å¾—åˆ°ä¸¤ä¸ªç»“è®ºï¼š æ•´å‹é»˜è®¤çš„æ•°æ®ç±»å‹æ˜¯int; long l = 12345678901234L ï¼Œè¿™ä¸ªæ•°å­—å·²ç»è¶…å‡ºäº†intçš„èŒƒå›´äº†ï¼Œæ‰€ä»¥æœ€åæœ‰ä¸€ä¸ªLï¼Œè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªlongå‹æ•°ã€‚é¡ºä¾¿ï¼Œæµ®ç‚¹å‹çš„é»˜è®¤ç±»å‹æ˜¯doubleï¼Œæ‰€ä»¥å®šä¹‰floatçš„æ—¶å€™è¦å†™æˆ float f = 3.5f æ¥ä¸‹æ¥å†å†™ä¸€å¥ int ii = l + i; ä¼šæŠ¥é”™ï¼Œå› ä¸ºlong + intæ˜¯ä¸€ä¸ªlongï¼Œä¸èƒ½èµ‹å€¼ç»™int 32ã€å…¬ç”¨çš„é›†åˆç±»ä¸­ä¸ä½¿ç”¨çš„æ•°æ®ä¸€å®šè¦åŠæ—¶removeæ‰ å¦‚æœä¸€ä¸ªé›†åˆç±»æ˜¯å…¬ç”¨çš„ï¼ˆä¹Ÿå°±æ˜¯è¯´ä¸æ˜¯æ–¹æ³•é‡Œé¢çš„å±æ€§ï¼‰ï¼Œé‚£ä¹ˆè¿™ä¸ªé›†åˆé‡Œé¢çš„å…ƒç´ æ˜¯ä¸ä¼šè‡ªåŠ¨é‡Šæ”¾çš„ï¼Œå› ä¸ºå§‹ç»ˆæœ‰å¼•ç”¨æŒ‡å‘å®ƒä»¬ã€‚æ‰€ä»¥ï¼Œå¦‚æœå…¬ç”¨é›†åˆé‡Œé¢çš„æŸäº›æ•°æ®ä¸ä½¿ç”¨è€Œä¸å»removeæ‰å®ƒä»¬ï¼Œé‚£ä¹ˆå°†ä¼šé€ æˆè¿™ä¸ªå…¬ç”¨é›†åˆä¸æ–­å¢å¤§ï¼Œä½¿å¾—ç³»ç»Ÿæœ‰å†…å­˜æ³„éœ²çš„éšæ‚£ã€‚ 33ã€æŠŠä¸€ä¸ªåŸºæœ¬æ•°æ®ç±»å‹è½¬ä¸ºå­—ç¬¦ä¸²ï¼ŒåŸºæœ¬æ•°æ®ç±»å‹.toString()æ˜¯æœ€å¿«çš„æ–¹å¼ã€String.valueOf(æ•°æ®)æ¬¡ä¹‹ã€æ•°æ®+\"\"æœ€æ…¢ æŠŠä¸€ä¸ªåŸºæœ¬æ•°æ®ç±»å‹è½¬ä¸ºä¸€èˆ¬æœ‰ä¸‰ç§æ–¹å¼ï¼Œæˆ‘æœ‰ä¸€ä¸ªIntegerå‹æ•°æ®iï¼Œå¯ä»¥ä½¿ç”¨i.toString()ã€String.valueOf(i)ã€i+\"\"ä¸‰ç§æ–¹å¼ï¼Œä¸‰ç§æ–¹å¼çš„æ•ˆç‡å¦‚ä½•ï¼Œçœ‹ä¸€ä¸ªæµ‹è¯•ï¼š public static void main ( String [] args ) { int loopTime = 50000 ; Integer i = 0 ; long startTime = System . currentTimeMillis (); for ( int j = 0 ; j < loopTime ; j ++ ) { String str = String . valueOf ( i ); } System . out . println ( \"String.valueOf()ï¼š\" + ( System . currentTimeMillis () - startTime ) + \"ms\" ); startTime = System . currentTimeMillis (); for ( int j = 0 ; j < loopTime ; j ++ ) { String str = i . toString (); } System . out . println ( \"Integer.toString()ï¼š\" + ( System . currentTimeMillis () - startTime ) + \"ms\" ); startTime = System . currentTimeMillis (); for ( int j = 0 ; j < loopTime ; j ++ ) { String str = i + \"\" ; } System . out . println ( \"i + \"\"ï¼š\" + ( System . currentTimeMillis () - startTime ) + \"ms\" ); } è¿è¡Œç»“æœä¸ºï¼š String . valueOf () ï¼š 11 msInteger . toString () ï¼š 5 msi + \"\" ï¼š 25 ms æ‰€ä»¥ä»¥åé‡åˆ°æŠŠä¸€ä¸ªåŸºæœ¬æ•°æ®ç±»å‹è½¬ä¸ºStringçš„æ—¶å€™ï¼Œä¼˜å…ˆè€ƒè™‘ä½¿ç”¨toString()æ–¹æ³•ã€‚è‡³äºä¸ºä»€ä¹ˆï¼Œå¾ˆç®€å•ï¼š String.valueOf()æ–¹æ³•åº•å±‚è°ƒç”¨äº†Integer.toString()æ–¹æ³•ï¼Œä½†æ˜¯ä¼šåœ¨è°ƒç”¨å‰åšç©ºåˆ¤æ–­ Integer.toString()æ–¹æ³•å°±ä¸è¯´äº†ï¼Œç›´æ¥è°ƒç”¨äº† i + \"\"åº•å±‚ä½¿ç”¨äº†StringBuilderå®ç°ï¼Œå…ˆç”¨appendæ–¹æ³•æ‹¼æ¥ï¼Œå†ç”¨toString()æ–¹æ³•è·å–å­—ç¬¦ä¸² ä¸‰è€…å¯¹æ¯”ä¸‹æ¥ï¼Œæ˜æ˜¾æ˜¯2æœ€å¿«ã€1æ¬¡ä¹‹ã€3æœ€æ…¢ 34ã€ä½¿ç”¨æœ€æœ‰æ•ˆç‡çš„æ–¹å¼å»éå†Map éå†Mapçš„æ–¹å¼æœ‰å¾ˆå¤šï¼Œé€šå¸¸åœºæ™¯ä¸‹æˆ‘ä»¬éœ€è¦çš„æ˜¯éå†Mapä¸­çš„Keyå’ŒValueï¼Œé‚£ä¹ˆæ¨èä½¿ç”¨çš„ã€æ•ˆç‡æœ€é«˜çš„æ–¹å¼æ˜¯ï¼š public static void main ( String [] args ) { HashMap < String , String > hm = new HashMap < String , String > (); hm . put ( \"111\" , \"222\" ); Set < Map . Entry < String , String >> entrySet = hm . entrySet (); Iterator < Map . Entry < String , String >> iter = entrySet . iterator (); while ( iter . hasNext ()) { Map . Entry < String , String > entry = iter . next (); System . out . println ( entry . getKey () + \" \" + entry . getValue ()); } } å¦‚æœä½ åªæ˜¯æƒ³éå†ä¸€ä¸‹è¿™ä¸ªMapçš„keyå€¼ï¼Œé‚£ç”¨ Set<String> keySet = hm.keySet(); ä¼šæ¯”è¾ƒåˆé€‚ä¸€äº› 35ã€å¯¹èµ„æºçš„close()å»ºè®®åˆ†å¼€æ“ä½œ æ„æ€æ˜¯ï¼Œæ¯”å¦‚æˆ‘æœ‰è¿™ä¹ˆä¸€æ®µä»£ç ï¼š try { XXX . close (); YYY . close (); } catch ( Exception e ) { ... } å»ºè®®ä¿®æ”¹ä¸ºï¼š try { XXX . close ();} catch ( Exception e ){ ...} try { YYY . close ();} catch ( Exception e ){ ...} è™½ç„¶æœ‰äº›éº»çƒ¦ï¼Œå´èƒ½é¿å…èµ„æºæ³„éœ²ã€‚æˆ‘ä»¬æƒ³ï¼Œå¦‚æœæ²¡æœ‰ä¿®æ”¹è¿‡çš„ä»£ç ï¼Œä¸‡ä¸€XXX.close()æŠ›å¼‚å¸¸äº†ï¼Œé‚£ä¹ˆå°±è¿›å…¥äº†cathå—ä¸­äº†ï¼ŒYYY.close()ä¸ä¼šæ‰§è¡Œï¼ŒYYYè¿™å—èµ„æºå°±ä¸ä¼šå›æ”¶äº†ï¼Œä¸€ç›´å ç”¨ç€ï¼Œè¿™æ ·çš„ä»£ç ä¸€å¤šï¼Œæ˜¯å¯èƒ½å¼•èµ·èµ„æºå¥æŸ„æ³„éœ²çš„ã€‚è€Œæ”¹ä¸ºä¸‹é¢çš„å†™æ³•ä¹‹åï¼Œå°±ä¿è¯äº†æ— è®ºå¦‚ä½•XXXå’ŒYYYéƒ½ä¼šè¢«closeæ‰ã€‚","tags":"Backend","url":"https://jiang-hao.com/articles/2019/backend-Javaä»£ç ä¼˜åŒ–35ç‚¹æ€»ç»“.html","loc":"https://jiang-hao.com/articles/2019/backend-Javaä»£ç ä¼˜åŒ–35ç‚¹æ€»ç»“.html"},{"title":"äººä¹‹ä¸€ç”Ÿ","text":"çƒ­çˆ±ç”Ÿå‘½ æˆ‘ä¸å»æƒ³ï¼Œ æ˜¯å¦èƒ½å¤ŸæˆåŠŸ ï¼Œ æ—¢ç„¶é€‰æ‹©äº†è¿œæ–¹ ï¼Œ ä¾¿åªé¡¾é£é›¨å…¼ç¨‹ã€‚ æˆ‘ä¸å»æƒ³ï¼Œ èƒ½å¦èµ¢å¾—çˆ±æƒ… ï¼Œ æ—¢ç„¶é’Ÿæƒ…äºç«ç‘° ï¼Œ å°±å‹‡æ•¢åœ°åéœ²çœŸè¯š ã€‚ æˆ‘ä¸å»æƒ³ï¼Œ èº«åä¼šä¸ä¼šè¢­æ¥å¯’é£å†·é›¨ ï¼Œ æ—¢ç„¶ç›®æ ‡æ˜¯åœ°å¹³çº¿ï¼Œ ç•™ç»™ä¸–ç•Œçš„åªèƒ½æ˜¯èƒŒå½± ã€‚ æˆ‘ä¸å»æƒ³ï¼Œ æœªæ¥æ˜¯å¹³å¦è¿˜æ˜¯æ³¥æ³ ï¼Œ åªè¦çƒ­çˆ±ç”Ÿå‘½ ï¼Œ ä¸€åˆ‡ï¼Œéƒ½åœ¨æ„æ–™ä¹‹ä¸­ã€‚ å†³å¿ƒ äººä¹‹ä¸€ç”Ÿï¼Œæ€»ä¼šæœ‰è®¸å¤šå›°æƒ‘ä¸å·²ã€çº ç¼ ä¸æ¸…çš„çäº‹ï¼Œéš¾å…å—å…¶å½±å“ï¼Œç»ä¸ä¸ºå…¶å·¦å³ã€‚ æ­¤æ—¶æ‰€éœ€çš„å°±æ˜¯æ–­ç„¶çš„å–èˆä¸æ˜æ™ºçš„æŠ‰æ‹©ï¼Œå”¯ä¸€ä¼šé™åˆ¶æˆ‘ä»¬çš„ï¼Œæ˜¯æˆ‘ä»¬è‡ªå·±çš„å†³å¿ƒã€‚ å»¶ç»­ ä¸‡ç‰©å–„å˜ï¼Œäººç”Ÿæ³›æ»¥çš„æ˜¯é‚£äº›å†²åŠ¨å’Œæ€¥èºï¼šå³å…´çš„çƒ­æƒ…ã€è‚¤æµ…çš„æ€è€ƒã€ä»“ä¿ƒçš„å†³å®šã€æ•·è¡çš„æªå¡å’Œæœ€ç»ˆçš„è‰è‰äº†äº‹ï¼› è€Œçè´µçš„æ˜¯ç”Ÿå‘½ä¸­é‚£äº›ç»ä¹…å’ŒåšæŒï¼Œä¸€ç§ä¿¡ä»°ï¼Œä¸€æ®µæƒ…æ„Ÿï¼Œä¸€ä¸ªä¹ æƒ¯ã€‚ä¸€å¥ç‹¬ç™½è‡ªè§†ä¸ºçº¦å®šï¼Œä¸€æ®µæ„Ÿæƒ…æƒå½“ä½œä½™ç”Ÿã€‚ åŠ¨åŠ› å¦‚æœè¯´ä¸æ¸…è¿½é€çš„åŠ¨åŠ›æºäºä½•å¤„ï¼Œå°±è‡³å°‘è¦è®©ä¼˜ç§€æˆä¸ºè‡ªå·±çš„ä¹ æƒ¯ï¼Œè¦ä¹è§‚é˜³å…‰ï¼Œè¦çŸ¥é“è‡ªå·±èº«åœ¨ä½•å¤„ï¼Œè·¯åœ¨ä½•æ–¹ã€‚ åˆå¿ƒ æ„¿æˆ‘ä»¬åœ¨å¿ƒåº•åŸ‹ä¸‹çš„å‹‡æ°”ã€ä¹è§‚å’Œå‘å–„çš„ç§å­ï¼Œæœ€åéƒ½æˆé•¿ä¸ºè‡ªå·±ä¸€ç›´æ‰€è¿½å¯»çš„æœ€å–œæ¬¢çš„æ ·å­ã€‚","tags":"Notes","url":"https://jiang-hao.com/articles/2019/notes-äººä¹‹ä¸€ç”Ÿ.html","loc":"https://jiang-hao.com/articles/2019/notes-äººä¹‹ä¸€ç”Ÿ.html"},{"title":"JQCloud: ä¸€ä¸ªå‰ç«¯ç”Ÿæˆç¾åŒ–æ ‡ç­¾äº‘çš„ç®€å•JQueryæ’ä»¶","text":"å› ä¸ºåšå®¢éœ€è¦ï¼Œå‘ç°äº†ä¸€ä¸ªç”Ÿæˆç¾åŒ–ç®€çº¦é£æ ¼çš„æ ‡ç­¾äº‘çš„JQueryæ’ä»¶ã€‚ å®˜ç½‘åœ°å€ï¼š http://mistic100.github.io/jQCloud/index.html ä½¿ç”¨æ–¹æ³•å¾ˆç®€å•ï¼Œå¯ä»¥æŠŠJSå’ŒCSSæ–‡ä»¶ä¸‹è½½åˆ°æœ¬åœ°ï¼Œä¹Ÿå¯ä»¥ç›´æ¥é€šè¿‡Scriptæ ‡ç­¾src=\"\"çš„æ–¹æ³•åœ¨çº¿å¼•ç”¨ã€‚ å…·ä½“çš„ä½¿ç”¨æ–¹æ³•å®˜ç½‘éƒ½èƒ½æŸ¥åˆ°ã€‚ è´´å‡ºè‡ªå·±å¾®åšä½¿ç”¨JQCloudçš„å‰ç«¯ä»£ç ï¼š < script src = \"{{ SITEURL }}/theme/jqcloud.js\" ></ script > < link href = \"{{ SITEURL }}/theme/jqcloud.css\" rel = \"stylesheet\" > < script > var words = []; { % for tag , articles in tags | sort % } words . push ({ text : \"{{tag}}\" , weight : Math . random (), link : '{{ SITEURL }}/{{ tag.url }}' }); { % endfor % } { % for category , articles in categories % } words . push ({ text : \"{{category}}\" , weight : Math . random (), link : '{{ SITEURL }}/{{ category.url }}' }); { % endfor % } $ ( function () { $ ( \"#tagcloud\" ). jQCloud ( words , { autoResize : true }); }); </ script > < div id = \"tagcloud\" style = \"width: 80%; height: 450px; align-self: center;\" ></ div > éœ€è¦æ³¨æ„çš„æ˜¯è¦åŒ…å«æ ‡ç­¾äº‘çš„divæ¨¡å—éœ€è¦æ˜¾ç¤ºæŒ‡å®šwidthå’Œheightï¼Œå¦åˆ™éœ€è¦åœ¨JavaScriptä¸­è¿›è¡Œç›¸å…³è®¾ç½®ã€‚ è¸©å‘1ï¼šå› ä¸ºè¦åŸºäºJQueryï¼Œæ³¨æ„å¼•ç”¨çš„JQueryåº“å¯ç”¨ã€‚ç”±äºä¹‹å‰å¼•ç”¨çš„æ˜¯å¤–ç½‘è°·æ­Œçš„åº“ï¼Œå›½å†…è¢«å¢™å¯¼è‡´æ ‡ç­¾äº‘ä¸€ç›´æ²¡æœ‰åˆ·å‡ºæ¥ï¼Œåæ¥æ¢æˆäº†bootcdnçš„JQueryåº“å°±æˆåŠŸäº†ï¼š < script src = \"https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js\" ></ script >","tags":"Frontend","url":"https://jiang-hao.com/articles/2018/frontend-JQCloud.html","loc":"https://jiang-hao.com/articles/2018/frontend-JQCloud.html"},{"title":"ä½¿ç”¨Pelicanåœ¨Github(å›½å¤–)å’ŒCoding(å›½å†…)åŒæ­¥æ‰˜ç®¡åšå®¢","text":"ä»‹ç»ï¼š Github Pages ç¦ç”¨äº†ç™¾åº¦çˆ¬è™«ï¼Œå› æ­¤ç™¾åº¦æœç´¢å¼•æ“ç»å¸¸æŠ“å–ä¸åˆ°åœ¨Githubä¸Šæ‰˜ç®¡çš„åšå®¢é“¾æ¥ã€‚æœ¬æ–‡ä»‹ç»ä¸€ç§å¯è¡Œçš„è§£å†³æ–¹æ³•ï¼š - æ³¨å†ŒCodingç”¨æ¥æ‰˜ç®¡ä¸€ä»½å’ŒGithubä¸Šä¸€æ ·çš„åšå®¢ä»“åº“ä¸“é—¨æœåŠ¡å›½å†…çš„ç´¢å¼• - é…ç½®DNSè§£æï¼Œå°†å›½å†…çš„çº¿è·¯è§£æåˆ°Codingï¼Œå›½å¤–çš„çº¿è·¯è§£æåˆ°Github - é…ç½®Pelicanï¼Œæ”¯æŒä¸€é”®å°†åŒä¸€ä»½æœ¬åœ°åšå®¢ä»“åº“åŒæ—¶å‘å¸ƒåˆ°Githubå’ŒCoding â€‹ ä¸€ã€ ã€ŠPelicanï¼‹Githubåšå®¢æ­å»ºè¯¦ç»†æ•™ç¨‹ã€‹ æŒ‰ç…§æ ‡é¢˜é“¾æ¥ç»™å‡ºçš„æ•™ç¨‹å…ˆæ­å»ºå‡ºä¸€ä¸ªåŸºäºGithubæ‰˜ç®¡çš„åšå®¢ç³»ç»Ÿã€‚æ¥ä¸‹æ¥å°†è¯´æ˜å¦‚ä½•å°†åšå®¢åŒæ­¥åˆ°Codingã€‚ äºŒã€åœ¨Codingåˆ›å»ºä¸€ä¸ªæ–°çš„é¡¹ç›® åœ¨ Codingé¦–é¡µ è¿›è¡Œæ³¨å†Œå¹¶ç™»é™†ï¼Œåˆ›å»ºé¡¹ç›®çš„æ–¹æ³•ä¸Githubç±»ä¼¼ï¼Œä¸åŒä¹‹å¤„åœ¨äºcodingæ–°å»ºçš„å…¬å¼€é¡¹ç›®åå’Œç”¨æˆ·åç›¸åŒï¼Œè€Œä¸åƒGithubé‚£æ ·æ˜¯<ç”¨æˆ·å>.github.ioã€‚åˆ›å»ºå®Œæˆåï¼Œç”Ÿæˆçš„æ–°çš„é¡¹ç›®é“¾æ¥åº”è¯¥ç±»ä¼¼äºï¼š https://coding.net/<usrname>/<username>.git ã€‚ å°†æœ¬åœ°SSHå…¬é’¥æ‹·è´åˆ°codingã€‚æ“ä½œåŒæ ·ä¸Githubç±»ä¼¼ã€‚ç”±äºæœ¬åœ°å·²ç»ä¸ºGithubç”Ÿæˆäº†ä¸€ä¸ªå…¬é’¥ï¼Œè¿™é‡Œåªç”¨cdè¿›å…¥~/.sshæ–‡ä»¶å¤¹æŸ¥çœ‹ä¸€ä¸ªåä¸º id_rsa.pub æ–‡ä»¶çš„å†…å®¹ï¼Œç±»ä¼¼äºå¦‚ä¸‹ã€‚æˆ‘ä»¬åªæ‹·è´ é‚®ç®±ä¹‹å‰ çš„æ‰€æœ‰å†…å®¹åˆ°codingçš„å…¬é’¥ç®¡ç†é¡µé¢ã€‚ ssh-rsa AAAAfafjIJGOF+FDAã€‚ã€‚(çœç•¥)ã€‚ã€‚Ksap Heriam@users.noreply.github.com ä¸‰ã€å°†ä»“åº“æ‹·è´åˆ°Coding è¿›å…¥Pelicançš„outputç›®å½•ä¸‹çš„æœ¬åœ°åšå®¢ä»“åº“ï¼Œæ‰“å¼€.git/configï¼Œä¿®æ”¹è¿œç¨‹ä»“åº“ï¼Œå°† origin æ”¹ä¸º githubï¼Œå¹¶æ·»åŠ  codingï¼š [core] repositoryformatversion = 0 filemode = true bare = false logallrefupdates = true ignorecase = true precomposeunicode = true [remote \"github\"] url = git@github.com:Heriam/heriam.github.io.git fetch = +refs/heads/*:refs/remotes/github/* [remote \"coding\"] url = git@git.coding.net:Heriam/heriam.git fetch = +refs/heads/*:refs/remotes/coding/* [branch \"master\"] remote = origin merge = refs/heads/master 2. ç„¶åå°†ä»“åº“ push åˆ° Codingä¸Šï¼Œåœ¨Codingæ–°å»ºä¸€ä¸ª coding-pages åˆ†æ”¯ï¼š git push -u coding master:coding-pages 3. è¿™æ—¶ç™»å½•Codingå°±å¯ä»¥çœ‹åˆ°åšå®¢å†…å®¹å·²ç»è¢«æ‹·è´åˆ°coding-pagesåˆ†æ”¯ã€‚ å››ã€é…ç½®åŸŸå ç™»å½•åˆ°ç½‘ç«™çš„åŸŸåè§£æç®¡ç†é¡µé¢ï¼ˆæˆ‘ç”¨çš„æ˜¯DNSPODï¼Œåæ¥è½¬å‘Cloudxnsï¼‰ï¼Œç„¶åæ·»åŠ ä¸¤æ¡åŸŸåè§£æè®°å½•ï¼š @ CNAME å›½å†… coding.me www CNAME å›½å†… coding.me åœ¨Coding ä¸Š\"é¡¹ç›®ç®¡ç†\"ä¸­æ‰¾åˆ°\"è‡ªå®šä¹‰åŸŸåï¼Pages\"ï¼Œæ·»åŠ è¦ç»‘å®šçš„åŸŸåï¼Œæ¯”å¦‚æˆ‘æ˜¯ jiang-hao.com å’Œ www.jiang-hao.com ã€‚æ³¨æ„è¿™äº›åŸŸåä¹Ÿå°±æ˜¯æˆ‘ä»¬åˆšåˆšåœ¨dnspodä¸­è®¾ç½®çš„è§£æåŸŸåã€‚ äº”ã€é…ç½®Pelicanå®ç°åŒæ­¥æäº¤ è®¾ç½®ä¸€é”®ä¸Šä¼ ï¼šï¼ˆå¦‚æœ‰ç–‘é—®å‚è§ ã€ŠPelicanï¼‹Githubåšå®¢æ­å»ºè¯¦ç»†æ•™ç¨‹ã€‹ ç¬¬ä¸‰éƒ¨åˆ†ç¬¬4ç‚¹ï¼‰æ‰“å¼€æ ¹ç›®å½•ä¸‹çš„Makefileæ–‡ä»¶ï¼Œä¿®æ”¹ä»¥ä¸‹ä¸‰ä¸ªåœ°æ–¹ï¼š OUTPUTDIR OUTPUTDIR=$(BASEDIR)/output/<username>.github.io #æœ¬åœ°åšå®¢ä»“åº“è·¯å¾„ - publish publish: $(PELICAN) $(INPUTDIR) -o $(OUTPUTDIR) -s $(CONFFILE) $(PELICANOPTS) - github: publish github : publish cd $ ( OUTPUTDIR ) ; git add . ; git commit - am '<æ·»åŠ è‡ªå·±çš„å¤‡æ³¨>' ; git push github master : master ; git push coding master : coding - pages è¿™æ · ï¼Œé€šè¿‡ make github å‘½ä»¤å°±èƒ½ä¸€é”®å‘å¸ƒåšå®¢æ›´æ–°åˆ°Githubå’ŒCodingäº†ã€‚","tags":"Frontend","url":"https://jiang-hao.com/articles/2018/frontend-ä½¿ç”¨Pelicanåœ¨Githubå’ŒCodingåŒæ­¥æ‰˜ç®¡åšå®¢.html","loc":"https://jiang-hao.com/articles/2018/frontend-ä½¿ç”¨Pelicanåœ¨Githubå’ŒCodingåŒæ­¥æ‰˜ç®¡åšå®¢.html"},{"title":"ä½¿ç”¨PelicanåŸºäºGithub Pagesæ­å»ºåšå®¢æ•™ç¨‹","text":"æ“ä½œç³»ç»Ÿï¼š Mac OS / Linux å·¥å…·é›†ï¼š 1.Pelicanâ€”â€”åŸºäºPythonçš„é™æ€ç½‘é¡µç”Ÿæˆå™¨ 2.é©¬å…‹é£è±¡â€”â€”Evernoteå‡ºçš„Markdownæ–‡æœ¬ç¼–è¾‘å™¨ 3.GoDaddyâ€”â€”åŸŸåä¾›åº”å•† 4.DNSPodâ€”â€”æä¾›å…è´¹åŸŸåè§£ææ³¨å†ŒæœåŠ¡ 5.Github Pagesâ€”â€”Githubä¸ºæ¯ä¸ªæ³¨å†Œç”¨æˆ·æä¾›300Mçš„ç«™ç‚¹ç©ºé—´ 6.Pythonâ€”â€”Pelicanå·¥å…·éœ€è¦Pythonè¿è¡Œç¯å¢ƒ 7.Google Analyticsâ€”â€”è°·æ­Œç«™ç‚¹æ•°æ®ç›‘æµ‹åˆ†æå·¥å…· 8.Google Custom Searchâ€”â€”è°·æ­Œè‡ªå®šä¹‰æœç´¢å¼•æ“å¯ç”¨ä½œç«™å†…æœç´¢å·¥å…· 9.Google Webmastersâ€”â€”è°·æ­Œç«™é•¿å·¥å…· 10.Disqusâ€”â€”ç”¨æ¥æä¾›åšå®¢è¯„è®ºåŠŸèƒ½ 11.Sitemapâ€”â€”ç«™ç‚¹åœ°å›¾ï¼Œä¾›è°·æ­Œï¼Œç™¾åº¦ç­‰æœç´¢å¼•æ“æ”¶å½• 12.ä¸ƒç‰›äº‘å­˜å‚¨â€”â€”é™æ€èµ„æºç®¡ç†ï¼Œä¸Šä¼ è‡ªåŠ¨ç”Ÿæˆç½‘ç›˜ç›´é“¾ æœ€ç»ˆæ•ˆæœå±•ç¤ºï¼š æ¬¢è¿è®¿é—®æˆ‘çš„åšå®¢ ï¼šhttps://jiang-hao.com ä¸€ã€ä½¿ç”¨Github Pagesåˆ›å»ºä¸ªäººåšå®¢é¡µé¢ Gitæ˜¯ä¸€ä¸ªå¼€æºçš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œç”¨ä»¥æœ‰æ•ˆã€é«˜é€Ÿçš„å¤„ç†ä»å¾ˆå°åˆ°éå¸¸å¤§çš„é¡¹ç›®ç‰ˆæœ¬ç®¡ç†ã€‚GitHubå¯ä»¥æ‰˜ç®¡å„ç§gitåº“çš„ç«™ç‚¹ã€‚é€šè¿‡GitHub Pagesç”Ÿæˆçš„é™æ€ç«™ç‚¹ï¼Œå¯ä»¥å…è´¹æ‰˜ç®¡ã€è‡ªå®šä¹‰ä¸»é¢˜ã€å¹¶ä¸”è‡ªåˆ¶ç½‘é¡µç•Œé¢ã€‚ â€‹ 1.é¦–å…ˆåˆ°Githubè¿›è¡Œè´¦å·æ³¨å†Œï¼š https://github.com/ ã€‚ 2.æ³¨å†Œåç™»å½•Githubï¼Œå³ä¸Šè§’ç‚¹å‡»\"Creat a new repo\"ï¼Œè·³è½¬åˆ°æ–°é¡µé¢åå¡«å†™ç›¸å…³å†…å®¹ï¼Œæ³¨æ„ç‰ˆæœ¬åº“åä½¿ç”¨'username.github.io'çš„æ ¼å¼ï¼Œè¿™é‡Œå°†usernameæ›¿æ¢æˆè‡ªå·±çš„ç”¨æˆ·åå³å¯ã€‚ 3.è®¾ç½®å’Œé€‰æ‹©å¥½é¡µé¢æ¨¡æ¿åå°±å¯ä»¥ç”Ÿæˆç„¶åå‘å¸ƒæ–°ç½‘é¡µäº†ã€‚ 4.åˆ›å»ºSSHå¯†é’¥å¹¶ä¸Šä¼ åˆ°Githubã€‚ â€‹ â€‹ *ä»¥ä¸Šå†…å®¹éƒ½å¾ˆç®€å•ï¼Œæœ‰é—®é¢˜å¯ä»¥å‚ç…§ï¼š å…³äºGithubæ³¨å†Œç™»å½•ï¼š é€šè¿‡GitHubåˆ›å»ºä¸ªäººæŠ€æœ¯åšå®¢å›¾æ–‡è¯¦è§£1 å…³äºGithubé¡µé¢ç”Ÿæˆï¼š é€šè¿‡GitHubåˆ›å»ºä¸ªäººæŠ€æœ¯åšå®¢å›¾æ–‡è¯¦è§£2 å…³äºSSHè®¤è¯ï¼š Windows/Macä¸‹ä½¿ç”¨SSHå¯†é’¥è¿æ¥Github å®˜æ–¹æ–‡æ¡£ï¼š Githubå®˜æ–¹æ–‡æ¡£åœ¨è¿™é‡Œ äºŒã€å®‰è£…Pythonã€Pelicanå’ŒMarkdown Pelicanæ˜¯ä¸€å¥—å¼€æºçš„ä½¿ç”¨Pythonç¼–å†™çš„åšå®¢é™æ€ç”Ÿæˆ, å¯ä»¥æ·»åŠ æ–‡ç« å’Œå’Œåˆ›å»ºé¡µé¢, å¯ä»¥ä½¿ç”¨MarkDown reStructuredText å’Œ AsiiDoc çš„æ ¼å¼æ¥æŠ’å†™, åŒæ—¶ä½¿ç”¨ Disqusè¯„è®ºç³»ç»Ÿ, æ”¯æŒ RSSå’ŒAtomè¾“å‡º, æ’ä»¶, ä¸»é¢˜, ä»£ç é«˜äº®ç­‰åŠŸèƒ½, é‡‡ç”¨Jajin2æ¨¡æ¿å¼•æ“, å¯ä»¥å¾ˆå®¹æ˜“çš„æ›´æ”¹æ¨¡æ¿ã€‚ â€‹ 1.å®‰è£…Pythonã€‚æœ€æ–°çš„Mac OS ä¸€èˆ¬éƒ½è‡ªå¸¦Pythonç¯å¢ƒã€‚åœ¨ç»ˆç«¯è¾“å…¥\"python\"å³å¯ç¡®è®¤Pythonç‰ˆæœ¬ã€‚å¦‚æœ‰éœ€è¦å¯ä»¥åˆ°å®˜ç½‘å®‰è£…ï¼šhttp://www.python.org/ã€‚ â€‹ 2.å®‰è£…Pelicanã€‚å¯ä»¥ä»githubå…‹éš†æœ€æ–°çš„ä»£ç å®‰è£…, å¹¶ä¸”å»ºè®®åœ¨virtualenvä¸‹ä½¿ç”¨ã€‚é¦–å…ˆå»ºç«‹ virtualenvï¼ˆPythonè™šæ‹Ÿç¯å¢ƒï¼‰: virtualenv pelican # åˆ›å»º cd pelican sh bin/activate # æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ ä»githubå…‹éš†æœ€æ–°ä»£ç å®‰è£…Pelicanï¼š git clone git://github.com/getpelican/pelican.git # ä¸‹è½½ä»£ç  cd pelican python setup.py install 3.å®‰è£…Markdown: pip install markdown ä¸‰ã€åˆ›å»ºåšå®¢éª¨æ¶ æ¥ä¸‹æ¥å°†é€šè¿‡åˆå§‹åŒ–Pelicanè®¾ç½®æ¥ç”Ÿæˆä¸€ä¸ªåŸºæœ¬çš„åšå®¢æ¡†æ¶ã€‚ â€‹ 1.æ­å»ºåšå®¢ç›®å½•ï¼š mkdir blog cd blog pelican-quickstart 2.æ ¹æ®æç¤ºä¸€æ­¥æ­¥è¾“å…¥ç›¸åº”çš„é…ç½®é¡¹ï¼Œä¸çŸ¥é“å¦‚ä½•è®¾ç½®çš„æ¥å—é»˜è®¤å³å¯ï¼Œåç»­å¯ä»¥é€šè¿‡ç¼–è¾‘pelicanconf.pyæ–‡ä»¶æ›´æ”¹é…ç½®ã€‚å®Œæˆåå°†ä¼šåœ¨æ ¹ç›®å½•ç”Ÿæˆä»¥ä¸‹æ–‡ä»¶ï¼š . |-- content # æ‰€æœ‰æ–‡ç« æ”¾äºæ­¤ç›®å½• â”‚ â””â”€â”€ (pages) # å­˜æ”¾æ‰‹å·¥åˆ›å»ºçš„é™æ€é¡µé¢ |-- develop_server.sh # ç”¨äºå¼€å¯æµ‹è¯•æœåŠ¡å™¨ |-- Makefile # æ–¹ä¾¿ç®¡ç†åšå®¢çš„Makefile |-- output # é™æ€ç”Ÿæˆæ–‡ä»¶ |-- pelicanconf.py # é…ç½®æ–‡ä»¶ |-- publishconf.py # é…ç½®æ–‡ä»¶ 3.è¿›å…¥outputæ–‡ä»¶å¤¹ï¼ŒæŠŠè‡ªå·±åˆšåˆšå»ºå¥½çš„username.github.ioç‰ˆæœ¬åº“cloneä¸‹æ¥ï¼Œæ³¨æ„è¿™é‡Œä»¥åŠåæ–‡ä¸­çš„usernameè¦æ›¿æ¢æˆè‡ªå·±çš„Githubç”¨æˆ·åï¼š cd output git clone https://github.com/username/username.github.io.git 4.è®¾ç½®ä¸€é”®ä¸Šä¼ éƒ¨ç½²åˆ°Githubã€‚æ‰“å¼€æ ¹ç›®å½•ä¸‹çš„Makefileæ–‡ä»¶ï¼Œä¿®æ”¹ä»¥ä¸‹ä¸‰ä¸ªåœ°æ–¹ï¼š OUTPUTDIR=$(BASEDIR)/output/username.github.io publish: $(PELICAN) $(INPUTDIR) -o $(OUTPUTDIR) -s $(CONFFILE) $(PELICANOPTS) github: publish cd OUTPUTDIR ; git add . ; git commit -am 'your comments' ; git push 5.è®¾ç½®å®Œåï¼Œä»¥åå†™å®Œæ–‡ç« å°±å¯ä»¥é€šè¿‡åœ¨blogæ ¹ç›®å½•ä¸‹æ‰§è¡Œ\"make github\"è¿›è¡Œä¸€é”®éƒ¨ç½²äº†ã€‚ å››ã€é€šè¿‡Markdownè¯•å†™åšæ–‡å¹¶ä¸Šä¼ Githubå‘å¸ƒ Markdownæ˜¯å½“ä¸‹éå¸¸æµè¡Œçš„ä¸€ç§æ–‡æœ¬ç¼–è¾‘è¯­æ³•ï¼Œæ”¯æŒHTMLè½¬æ¢ï¼Œä¹¦å†™åšæ–‡æ’ç‰ˆä¹Ÿæ–¹ä¾¿å¿«æ·ã€‚ â€‹ 1.å†™ä¸€ç¯‡æ–‡ç« ï¼šç”¨ é©¬å…‹é£è±¡ ç¼–è¾‘å™¨ç”¨Markdownè¯­æ³•æ¥å†™ä¸€ç¯‡æ–‡ç« ä¿å­˜ä¸º.mdæ ¼å¼æ”¾åœ¨contentç›®å½•ä¸‹ã€‚å†™å®Œåï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå³å¯åœ¨æœ¬æœºhttp://127.0.0.1:8000çœ‹åˆ°æ•ˆæœã€‚ make publish make serve 2.åˆ›å»ºä¸€ä¸ªé¡µé¢ï¼šè¿™é‡Œä»¥åˆ›å»º Abouté¡µé¢ä¸ºä¾‹ã€‚åœ¨contentç›®å½•åˆ›å»ºpageså­ç›®å½•ï¼š mkdir content/pages *ç„¶ååˆ›å»ºAbout.mdå¹¶å¡«å…¥ä¸‹é¢å†…å®¹ï¼š title : About Me date : 2013 - 04 - 18 About me content *æ³¨æ„ä¸Šé¢titleå’Œdateæ˜¯.mdæ–‡ä»¶çš„é‡è¦å‚æ•°ï¼Œéœ€è¦å†™åœ¨æ–‡æ¡£å¼€å¤´ã€‚æ¯”å¦‚ï¼š Title : Pelican + Github Date : 2014 - 10 - 07 22 : 20 Modified : 2014 - 10 - 07 23 : 04 Tags : python , pelican Slug : build - blog - system - by - pelican Authors : Joey Huang Summary : blablablablablablablabla ... Status : draft ç›¸å…³ä»‹ç»è¯·å‚è§å®˜æ–¹æ–‡æ¡£ï¼šhttp://pelican-zh.readthedocs.org/en/latest/zh-cn/ ã€‚å®ŒæˆååŒæ ·å¯ä»¥åœ¨æœ¬æœºhttp://127.0.0.1:8000çœ‹æ•ˆæœã€‚ â€‹ 3.åˆ›å»ºå¯¼èˆªç›®å½•é¡¹ï¼šMenu Itemè®¾ç½®ã€‚åœ¨ä½ çš„åšå®¢ä¸­ï¼Œå¯è®¾ç½®ç›¸åº”çš„èœå•é¡¹ï¼Œèœå•é¡¹æ˜¯é€šè¿‡pelicanconf.pyè®¾ç½®çš„ï¼Œå…·ä½“å¦‚ä¸‹æ‰€ç¤ºï¼š MENUITEMS = ((\"ITEM1\",\"http://github.com\"), (\"ITEM2\",URL), ......) äº”ã€å®‰è£…ä¸»é¢˜ è¿™é‡Œä»¥ä¸»é¢˜bootstrap2ä¸ºä¾‹ï¼ŒåŒæ ·è¿˜åœ¨blogç›®å½•ä¸‹ï¼š git clone https://github.com/getpelican/pelican-themes.git cd pelican-themes pelican-themes -i bootstrap2 å¯¹åº”åœ¨åœ¨pelicanconf.pyä¸­æ·»åŠ ä¸»é¢˜é€‰æ‹©æ¡ç›®ï¼š THEME = 'bootstrap2' å…­ã€å®‰è£…ç¬¬ä¸‰æ–¹è¯„è®ºç³»ç»ŸDisqus åœ¨Disqusä¸Šç”³è¯·ä¸€ä¸ªç«™ç‚¹ï¼Œè®°ä½shortnameã€‚ åœ¨pelicanconf.pyæ·»åŠ ï¼š DISQUS_SITENAME = Shortname ä¸ƒã€æ·»åŠ Google Analytics å»Google Analyticsç”³è¯·è´¦å·å¹¶é€šè¿‡éªŒè¯ï¼Œè®°ä¸‹è·Ÿè¸ªIDï¼ˆTrack IDï¼‰ï¼Œ åœ¨pelicanconf.pyæ·»åŠ ï¼š GOOGLE_ANALYTICS = 'è·Ÿè¸ªID' å…«ã€æ·»åŠ Google Webmasterså’Œç™¾åº¦ç«™é•¿æ”¶å½• ä¸ºäº†è®©åšå®¢è¢«Googleæ›´å¥½çš„æ”¶å½•ï¼Œæ¯”å¦‚æ‰‹åŠ¨è®©GooglebotæŠ“å–ã€æäº¤Robotsã€æ›´æ–°Sitemapç­‰ç­‰ã€‚ â€‹ 1.åœ¨Google Webmastersä¸Šæ³¨å†Œå¹¶é€šè¿‡éªŒè¯ã€‚ â€‹ 2.æ·»åŠ sitemapæ’ä»¶ã€‚è¿˜æ˜¯åˆ°/blogç›®å½•ä¸‹æ‰§è¡Œï¼š cd ~/blog git clone git://github.com/getpelican/pelican-plugins.git *ç„¶ååœ¨pelicanconf.pyé‡Œé…ç½®å¦‚ä¸‹ï¼š PLUGIN_PATH = u\"pelican-plugins\" PLUGINS = [\"sitemap\"] SITEMAP = { \"format\": \"xml\", \"priorities\": { \"articles\": 0.7, \"indexes\": 0.5, \"pages\": 0.3, }, \"changefreqs\": { \"articles\": \"monthly\", \"indexes\": \"daily\", \"pages\": \"monthly\", } } 3.å°†make githubå‘½ä»¤ååœ¨outputç›®å½•ä¸‹ç”Ÿæˆçš„sitemapæ–‡ä»¶ä¸Šä¼ åˆ°Google Webmastersã€‚ â€‹ 4.å¯¹äºç™¾åº¦ã€‚å®ƒæ˜¯å®£ç§°æ”¯æŒsitemapçš„ï¼Œä½†æ˜¯ç½‘ä¸Šç›¸å…³é—®é¢˜ä¸€å¤§å †ï¼Œè¦ä¹ˆæ ¼å¼ä¸å¯¹è¦ä¹ˆå°±æ˜¯æŠ“å–å¤±è´¥ï¼Œè¦ä¹ˆçªç„¶ä¸å¼€æ”¾æ”¯æŒã€‚åœ¨å‡ æ¬¡å°è¯•å¤±è´¥ä»¥åï¼Œæˆ‘æ˜¯é€šè¿‡æ·»åŠ JavaScriptä»£ç æ¥è‡ªåŠ¨æ¨é€ç½‘ç«™é“¾æ¥çš„ã€‚å…·ä½“æ˜¯åœ¨ä¸»é¢˜æ¨¡æ¿ï¼ˆbase.htmlï¼‰é¢æœ€åæ·»åŠ ä»£ç ï¼š <script> (function(){ var bp = document.createElement('script'); bp.src = '//push.zhanzhang.baidu.com/push.js'; var s = document.getElementsByTagName(\"script\")[0]; s.parentNode.insertBefore(bp, s); })(); </script> *æˆ‘è¿˜æ˜¯æ¯”è¾ƒæ¨å´‡è¿™ç§æ–¹æ³•çš„ï¼Œå› ä¸ºæ¯”sitemapæ–¹æ³•è¢«æŠ“å–æ”¶å½•çš„æ—¶é—´çŸ­å¾ˆå¤šã€‚è°·æ­Œçš„sitemapæ˜¯xmlæ ¼å¼ã€‚ ä¹ã€æ·»åŠ è°·æ­Œï¼ç™¾åº¦ç«™å†…æœç´¢ è°·æ­Œç«™å†…æœç´¢ 1.ä¿®æ”¹ä¸»é¢˜ã€‚æ‰¾åˆ°è¿™ä¸ªä¸»é¢˜çš„templatesæ–‡ä»¶å¤¹ä¸­çš„base.htmlï¼Œåœ¨ <div class=\"nav-collapse\"> çš„æœ€åï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š <form class= \"navbar-search pull-right\" action= \"/search.html\" > <input type= \"text\" class= \"search-query\" placeholder= \"Search\" name= \"q\" id= \"s\" > </form> 2.åˆ›å»ºsearch.htmlã€‚ä¹‹åï¼Œåœ¨outputç›®å½•ä¸‹ï¼Œæ–°å»ºä¸€ä¸ªåä¸ºsearch.htmlçš„æ–‡ä»¶ï¼Œå†™å…¥ä¸‹é¢çš„å†…å®¹ï¼Œå…¶ä¸­éœ€è¦ä½ è‡ªå·±ä¿®æ”¹çš„æ˜¯googleç«™å†…æœç´¢çš„IDå·ï¼Œéœ€è¦è‡ªå·±åœ¨ googleç«™å†…æœç´¢ çš„ç½‘ç«™ä¸Šè‡ªå·±ç”³è¯·ã€‚ < html lang = \"zh_CN\" > < head > < meta charset = \"utf-8\" > < title > ç«™å†…æœç´¢ </ title > </ head > < body > < style > #search - box { position : relative ; width : 50 % ; margin : 0 ; padding : 1 em ; } #search - form { height : 30 px ; border : 1 px solid #999 ; - webkit - border - radius : 5 px ; - moz - border - radius : 5 px ; border - radius : 5 px ; background - color : #fff ; overflow : hidden ; } #search - text { font - size : 14 px ; color : #ddd ; border - width : 0 ; background : transparent ; } #search - box input [ type=\"text\" ] { width : 90 % ; padding : 4 px 0 12 px 1 em ; color : #333 ; outline : none ; } </ style > < div id = 'search-box' > < form action = '/search.html' id = 'search-form' method = 'get' target = '_top' > < input id = 'search-text' name = 'q' placeholder = 'Search' type = 'text' /> </ form > </ div > < div id = \"cse\" style = \"width: 100%;\" > Loading </ div > < script src = \"http://www.google.com/jsapi\" type = \"text/javascript\" ></ script > < script type = \"text/javascript\" > google . load ( 'search' , '1' , { language : 'zh-CN' , style : google . loader . themes . V2_DEFAULT } ); google . setOnLoadCallback ( function () { var customSearchOptions = {} ; var customSearchControl = new google . search . CustomSearchControl ( '012191777864628038963:**********<!å†™å…¥ä½ ç”³è¯·çš„googleç«™å†…æœç´¢çš„IDå·>ï¼‰' , customSearchOptions ); customSearchControl . setResultSetSize ( google . search . Search . FILTERED_CSE_RESULTSET ); var options = new google . search . DrawOptions (); options . enableSearchResultsOnly (); customSearchControl . draw ( 'cse' , options ); function parseParamsFromUrl () { var params = {} ; var parts = window . location . search . substr ( 1 ). split ( '\\x26' ); for ( var i = 0 ; i < parts . length ; i ++ ) { var keyValuePair = parts [ i ] . split ( '=' ); var key = decodeURIComponent ( keyValuePair [ 0 ] ); params [ key ] = keyValuePair [ 1 ] ? decodeURIComponent ( keyValuePair [ 1 ] . replace ( / \\ +/ g , ' ' )) : keyValuePair [ 1 ] ; } return params ; } var urlParams = parseParamsFromUrl (); var queryParamName = \"q\" ; if ( urlParams [ queryParamName ] ) { customSearchControl . execute ( urlParams [ queryParamName ] ); } } , true ); </ script > </ body > </ html > 3.å°†GOOGLE_CUSTOM_SEARCH_SIDEBAR = \"001578481551708017171:axpo6yvtdyg\" æ·»åŠ åˆ°pelicanconf.pyæ–‡ä»¶ã€‚æ³¨æ„, å¼•å·é‡Œçš„é‚£ä¸€ä¸²å­—ç¬¦æ˜¯ä¹‹å‰ç”³è¯·çš„è‡ªå®šä¹‰æœç´¢å¼•æ“çš„idã€‚ 4.æœ€åå‘å¸ƒåå°±å¯ä»¥çœ‹åˆ°æœç´¢æ¡†äº†ã€‚ â€‹ ç™¾åº¦ç«™å†…æœç´¢ 1.åœ¨ç™¾åº¦ç«™é•¿å¹³å°ä¸­æ³¨å†Œä¸€ä¸ªè´¦å·ï¼Œä¹‹åæ·»åŠ ç½‘ç«™ï¼ŒæŒ‰ç…§æç¤ºéªŒè¯ç½‘ç«™ã€‚ä¹‹åå·¦ä¾§ å…¶ä»–å·¥å…· ä¸­æ‰¾åˆ° ç«™å†…æœç´¢ ï¼ŒæŒ‰ç…§æç¤ºå¡«å†™åŸºæœ¬ä¿¡æ¯ï¼Œé€‰æ‹©æœç´¢æ¡†æ ·å¼ï¼Œä¹‹åç‚¹å‡» æŸ¥çœ‹ä»£ç  ï¼Œå¤åˆ¶å…¶ä¸­å†…å®¹ï¼Œç•™ç”¨ã€‚ 2.åŒæ ·åœ¨base.htmlçš„è¿™ä¸ª <div class=\"nav-collapse\"> çš„æœ€åï¼Œæ–°å»ºä¸€ä¸ª div ï¼Œåˆšæ‰æ³¨å†Œæœ€åå¤åˆ¶çš„ä»£ç ç²˜è´´åˆ°è¿™ä¸ª div ä¸­ï¼š <div class= \"navbar-search pull-right\" > <script> <!ç•¥> </script> </div> 3.å‘å¸ƒéªŒè¯ã€‚ åã€æ·»åŠ Tagsä¾§è¾¹æ  åœ¨å…¶ä»–ä¸€äº›pelicanä¸»é¢˜ä¸­ï¼Œçœ‹åˆ°æœ‰æ ‡ç­¾äº‘ï¼Œæƒ³åˆ°Tagsçš„é“¾æ¥å¯èƒ½æ¯”Categoriesçš„é“¾æ¥æ›´æœ‰ç”¨ï¼Œé€šè¿‡æ›´æ”¹ä¸»é¢˜ï¼Œæ·»åŠ äº†ä¾§æ ä¸­çº¢æ¡†å†…çš„Tagsé“¾æ¥æ¡†ã€‚ â€‹ 1.è¿˜æ˜¯æ‰¾åˆ°base.htmlï¼Œæ‰¾åˆ°categorieséƒ¨åˆ†ï¼š {% if categories %} <div class= \"well\" style= \"padding: 8px 0; background-color: #FBFBFB;\" > <ul class= \"nav nav-list\" > <li class= \"nav-header\" > Categories </li> {% for cat , null in categories %} <li><a href= \" {{ SITEURL }} / {{ cat.url }} \" > {{ cat }} </a></li> {% endfor %} </ul> </div> {% endif %} 2.åœ¨è¿™æ®µåé¢æ·»åŠ ï¼š {% if tags %} <div class= \"well\" style= \"padding: 8px 0; background-color: #FBFBFB;\" > <ul class= \"nav nav-list\" > <li class= \"nav-header\" > Tags </li> {% for name , tag in tags %} <li><a href= \" {{ SITEURL }} / {{ name.url }} \" > {{ name }} </a></li> {% endfor %} </ul> </div> {% endif %} 3.ä¿å­˜ï¼Œé‡æ–°å‘å¸ƒç½‘é¡µéªŒè¯ã€‚ åä¸€ã€æ’å…¥è§†é¢‘ å…¶å®å¾ˆç®€å•, åªéœ€è¦æŠŠhtmlä»£ç æ”¾è¿›markdownæºæ–‡ä»¶å°±è¡Œäº†! è€Œè§†é¢‘çš„htmlä»£ç åœ¨è§†é¢‘ç½‘ç«™ä¸Šä¸€èˆ¬éƒ½ä¼šæä¾›ã€‚å¤åˆ¶ä¸‹æ¥æ”¾è¿›æºæ–‡ä»¶å³å¯ã€‚ åäºŒã€æ‹·è´é™æ€æ–‡ä»¶ å¦‚æœæˆ‘ä»¬å®šä¹‰é™æ€çš„æ–‡ä»¶ï¼Œè¯¥å¦‚ä½•å°†å®ƒåœ¨æ¯æ¬¡ç”Ÿæˆçš„æ—¶å€™æ‹·è´åˆ° output ç›®å½•å‘¢ï¼Œæˆ‘ä»¬ä»¥ç½‘ç«™logoå›¾ç‰‡sitelogo.icoä¸ºä¾‹ï¼Œåœ¨æˆ‘ä»¬çš„ content/extra ä¸‹æ”¾ç½®ç½‘ç«™çš„é™æ€èµ„æºæ–‡ä»¶ï¼šsitelogo.icoï¼Œåœ¨pelicanconf.pyæ›´æ”¹æˆ–æ·»åŠ  FILES_TO_COPYé¡¹ï¼š FILES_TO_COPY = ( (\"extra/sitelogo.ico\", \"sitelogo.ico\"), ) è¿™æ ·åœ¨æ¯æ¬¡ç”Ÿæˆhtmlçš„æ—¶å€™éƒ½ä¼šæŠŠ content/extraä¸‹çš„ sitelogo.ico æ‹·è´åˆ° outputç›®å½•ä¸‹ã€‚ åä¸‰ã€èµ„æºç›®å½•ç®¡ç† ä½¿ç”¨ç›®å½•åä½œä¸ºæ–‡ç« çš„åˆ†ç±»å USE_FOLDER_AS_CATEGORY = True ä½¿ç”¨æ–‡ä»¶åä½œä¸ºæ–‡ç« æˆ–é¡µé¢çš„ slugï¼ˆurlï¼‰ FILENAME_METADATA = '(?P<slug>.*)' é¡µé¢çš„æ˜¾ç¤ºè·¯å¾„å’Œä¿å­˜è·¯å¾„ï¼Œæ¨èä¸‹é¢çš„æ–¹å¼ ARTICLE_URL = '{category}/{slug}.html' ARTICLE_SAVE_AS = ARTICLE_URL PAGE_URL = '{slug}.html' PAGE_SAVE_AS = PAGE_URL CATEGORY_URL = '{slug}/index.html' CATEGORY_SAVE_AS = CATEGORY_URL TAG_URL = 'tag/{slug}.html' TAG_SAVE_AS = TAG_URL TAGS_SAVE_AS = 'tag/index.html' åå››ã€æŒ‡å®šæ–‡ç« æˆ–é¡µé¢URL åœ¨éœ€è¦æŒ‡å®šURLçš„æ–‡ç« æˆ–è€…é¡µé¢ä¸­åŒ…æ‹¬ä¸¤ä¸ªå…ƒæ•°æ®urlä¸save_asï¼Œä¾‹å¦‚ï¼š url : pages /url/ save_as : pages /url/i ndex . html *è¿™ä¸ªä»£ç æŒ‡å®šäº†æœ¬ç¯‡æ–‡ç« çš„urlä¸ºpages/url/index.html â€‹ â€‹ æ ¹æ®ä¸Šé¢å¾ˆå®¹æ˜“æ¨æ–­å¦‚ä½•å°†ä¸€ç¯‡æ–‡ç« è®¾ç½®ä¸ºç½‘ç«™çš„ä¸»é¡µï¼Œå¦‚ä¸‹ä»£ç å³å¯å®ç°å°† content/pages/home.md è®¾ä¸ºä¸»é¡µï¼š Title: [www.yanyulin.info](http://www.yanyulin.info) Date: 2014-01-08 URL: save_as: index.html *å¦å¤–è¿˜å¯ä»¥é€šè¿‡template:å…³é”®å­—æ¥æŒ‡å®šè¦ä½¿ç”¨çš„æ¨¡æ¿ã€‚ åäº”ã€ç‹¬ç«‹åŸŸåè®¾ç½® è¯¦è§ï¼šhttp://www.jianshu.com/p/252b542b1abf Godaddyä¸Šè´­ä¹°ä¸“å±åŸŸåï¼Œç”¨dnspodè¿›è¡ŒåŠ¨æ€åŸŸåè§£æï¼Œæ­¥éª¤å¦‚ä¸‹: æ­¥éª¤1ï¼šä¿®æ”¹Godaddyä¸­çš„NameServersçš„ä¸¤ä¸ªåœ°å€ä¸ºdnspodçš„DNSåœ°å€ï¼š f1g1ns1.dnspod.net f1g1ns2.dnspod.net æ­¥éª¤2ï¼šåœ¨Dnspodä¸­æ·»åŠ ä¸€æ¡Aè®°å½•ï¼ŒæŒ‡å‘Github URL username.github.io æ­¥éª¤3ï¼šåœ¨Pelicanä¸»ç›®å½•ï¼Œå³ä¸Šé¢åˆ›å»ºçš„blog/output/username.github.ioç›®å½•ï¼Œæ·»åŠ CNAMEæ–‡ä»¶ï¼Œåœ¨æ–‡ä»¶ä¸­æ·»åŠ ä½ çš„ç‹¬ç«‹åŸŸåã€‚ â€‹ â€‹ *æ³¨æ„è¿™é‡Œçš„CNAMEå»ºè®®æ”¾åœ¨ç¬¬åäºŒæ­¥æåˆ°çš„contentç›®å½•ä¸‹çš„é™æ€å­ç›®å½• content/extra ä¸‹ï¼Œå¹¶åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ç›¸å…³æ¡ç›®ã€‚ åå…­ã€ç›¸å…³æ–‡ç« ã€ä¸Šä¸‹æ–‡å¯¼èˆª 1.æ‰“å¼€pelicanconf.pyï¼Œå®šä¹‰æ’ä»¶ç›®å½•å’Œå¯ç”¨æ’ä»¶ï¼š #åŠ è½½plugins PLUGIN_PATH = \"plugins\" PLUGINS = [\"sitemap\",\"neighbors\",\"related_posts\"] #sitemap SITEMAP = { 'format': 'xml', 'priorities': { 'articles': 0.7, 'indexes': 0.8, 'pages': 0.5 }, 'changefreqs': { 'articles': 'monthly', 'indexes': 'daily', 'pages': 'monthly' } } #ç›¸å…³æ–‡ç«  RELATED_POSTS_MAX = 10 2.é‚»å±…å¯¼èˆªï¼Œåœ¨ä¸»é¢˜æ¨¡ç‰ˆä¸­è°ƒç”¨å¦‚ä¸‹ä»£ç ï¼Œå¯æ ¹æ®è‡ªå·±çš„æƒ…å†µä¿®æ”¹ï¼š <div class= \"pagination\" > <ul> {% if article.prev_article %} <li class= \"prev\" ><a href= \" {{ SITEURL }} / {{ article.prev_article.url }} \" > â† Previous </a></li> {% else %} <li class= \"prev\" ><a href= \"/\" > â† Previous </a></li> {% endif %} <li><a href= \"/archives.html\" > Archive </a></li> {% if article.next_article %} <li class= \"next\" ><a href= \" {{ SITEURL }} / {{ article.next_article.url }} \" > Next â†’ </a></li> {% else %} <li class= \"next\" ><a href= \"/\" > Next â†’ </a></li> {% endif %} </ul> </div> 3.ç›¸å…³æ–‡ç« ï¼š {% if article.related_posts %} <h4> Related Articles </h4> <ul> {% for related_post in article.related_posts %} <li><a href= \" {{ SITEURL }} / {{ related_post.url }} \" > {{ related_post.title }} </a></li> {% endfor %} </ul> {% endif %} åä¸ƒã€æœ€åï¼Œä¸€äº›æ¯”è¾ƒå ç©ºé—´çš„èµ„æºæ–‡ä»¶ï¼ˆå›¾ç‰‡ã€åª’ä½“ç­‰ï¼‰å¯ä»¥ç”¨ä¸ƒç‰›æ¥è¿›è¡Œå­˜å‚¨ç®¡ç†","tags":"Frontend","url":"https://jiang-hao.com/articles/2018/frontend-ä½¿ç”¨PelicanåŸºäºGithubPagesæ­å»ºåšå®¢æ•™ç¨‹.html","loc":"https://jiang-hao.com/articles/2018/frontend-ä½¿ç”¨PelicanåŸºäºGithubPagesæ­å»ºåšå®¢æ•™ç¨‹.html"},{"title":"Build and Install OpenDaylight on Ubuntu","text":"Operating Systemï¼šLinux x64 / Ubuntu 14.04 Prerequisitesï¼šLinux system with Java and Maven installed Chinese version is also available at Ubuntuç³»ç»Ÿä¸‹OpenDaylightæºç ç¼–è¯‘å®‰è£… STEP 1, Environment Tuning 1. Install Git tool by command line: sudo apt-get install git-core 2. After the installation of Java and Maven, you need to edit a very important file for OpenDaylight which is named \"settings.xml\". It can customize the behavior of Maven at system level. But we often choose to make it in ~/.m2 folder under your home directory to limit it in user scopeï¼š (under ~/ directory) mkdir .m2 cp -n ~/.m2/settings.xml{,.orig} ; \\wget -q -O - https://raw.githubusercontent.com/opendaylight/odlparent/master/settings.xml > ~/.m2/settings.xml You can also use this command instead: curl https://raw.githubusercontent.com/opendaylight/odlparent/master/settings.xml --create-dirs -o ~/.m2/settings.xml 3. A new settings.xml file should now appear in the folder you just created, go and check the content, which should be something similar as belowï¼š # gedit ~/.m2/settings.xml <settings xmlns= \"http://maven.apache.org/SETTINGS/1.0.0\" xmlns:xsi= \"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation= \"http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd\" > <profiles> <profile> <id> opendaylight-release </id> <repositories> <repository> <id> opendaylight-mirror </id> <name> opendaylight-mirror </name> <url> http://nexus.opendaylight.org/content/repositories/public/ </url> <releases> <enabled> true </enabled> <updatePolicy> never </updatePolicy> </releases> <snapshots> <enabled> false </enabled> </snapshots> </repository> </repositories> <pluginRepositories> <pluginRepository> <id> opendaylight-mirror </id> <name> opendaylight-mirror </name> <url> http://nexus.opendaylight.org/content/repositories/public/ </url> <releases> <enabled> true </enabled> <updatePolicy> never </updatePolicy> </releases> <snapshots> <enabled> false </enabled> </snapshots> </pluginRepository> </pluginRepositories> </profile> <profile> <id> opendaylight-snapshots </id> <repositories> <repository> <id> opendaylight-snapshot </id> <name> opendaylight-snapshot </name> <url> http://nexus.opendaylight.org/content/repositories/opendaylight.snapshot/ </url> <releases> <enabled> false </enabled> </releases> <snapshots> <enabled> true </enabled> </snapshots> </repository> </repositories> <pluginRepositories> <pluginRepository> <id> opendaylight-snapshot </id> <name> opendaylight-snapshot </name> <url> http://nexus.opendaylight.org/content/repositories/opendaylight.snapshot/ </url> <releases> <enabled> false </enabled> </releases> <snapshots> <enabled> true </enabled> </snapshots> </pluginRepository> </pluginRepositories> </profile> </profiles> <activeProfiles> <activeProfile> opendaylight-release </activeProfile> <activeProfile> opendaylight-snapshots </activeProfile> </activeProfiles> </settings> STEP 2, Build and Install OpenDaylight Controller Project Please keep in mind that here controller really means core controller without many other additional features, such as WebUI(dlux). As for the development of other features in OpenDaylight and if you need dlux, please refer to next STEP. 1.Create a directory for your project and get the source code of OpenDaylight controller: mkdir openDayLight cd openDayLight git clone https://git.opendaylight.org/gerrit/p/controller.git 2.Specify the version of OpenDaylight you want to build and check: cd controller git checkout stable/lithium //here I specify stable/lithium version git branch 3.Make sure your settings.xml file is right in place. Build the code with Internet connecdtion: mvn clean install -DskipTests 4.Now run your controller: cd controller/karaf/opendaylight-karaf/target/assembly ./bin/karaf 5.And after a while you will enter the OpenDaylight command line mode as shown below: opendaylight-user@root> 6.Some useful command lines to check and install features: feature : list - i //show the features which are already installed feature : list //show all available features (installed ones are marked with \"x\") feature : list | grep < keyword > //show features that contains <keyword> feature : install < feature > //install a <feature> STEP 3, Build and Install OpenDaylight Integration Project Integration Project is more like a framework project which is to integrate all other projects into OpenDaylight. With Integration project you can modify or put your own features under this project directory and test with the controller. 1.Download the Integration source code: git clone https://git.opendaylight.org/gerrit/p/integration.git 2.Get into the integration directory and specify the version you want: cd integration git checkout stable/lithium mvn clean install -DskipTests 3.After previous step is done, you may would like to run the controller: cd integration/distributions/karaf/target/assembly ./bin/karaf 4.Finally you can now begin your development and replace original features with your own ones under this directory, after which you would be able to build and run the controller for testing: username@ubuntu:~/developApps/openDayLight/integration/distributions/karaf/target/assembly/system/org/opendaylight$ ls aaa integration neutron sdninterfaceapp usc bgpcep iotdm nic sfc vpnservice capwap l2switch odlparent snmp vtn controller lacp sxp yangtools coretutorials lispflow mapping tcpmd5 didm mdsal ovsdb topoprocessing dlux nemo packetcable tsdr groupbasedpolicy netconf reservation ttp ï¼ˆENDï¼‰","tags":"Backend","url":"https://jiang-hao.com/articles/2018/backend-BuildandInstallOpenDaylightonUbuntu.html","loc":"https://jiang-hao.com/articles/2018/backend-BuildandInstallOpenDaylightonUbuntu.html"},{"title":"Windowsç³»ç»Ÿé…ç½®WiFiæ— çº¿çƒ­ç‚¹","text":"Windows ç‰ˆæœ¬ï¼š Windows 7/8/10 å‰æï¼šç”µè„‘è£…é…æ— çº¿ç½‘å¡ æ–¹æ³•ï¼šé€šè¿‡Doså‘½ä»¤è¡Œåˆ›å»ºWiFiçƒ­ç‚¹ï¼Œç„¶åå¯ç”¨å…±äº« 1.é¦–å…ˆç¡®å®šæ— çº¿ç½‘å¡æ˜¯å¦æ”¯æŒæ‰¿è½½ç½‘ç»œï¼ˆHosted Networkï¼‰ã€‚åœ¨ç®¡ç†å‘˜æ¨¡å¼çš„CMDçª—å£è¾“å…¥å‘½ä»¤ï¼š netsh wlan show drivers åœ¨è¾“å‡ºä¿¡æ¯ä¸­æ‰¾åˆ° \"æ”¯æŒæ‰¿è½½ç½‘ç»œï¼šæ˜¯\" åˆ™ç»§ç»­ã€‚ 2.ç¡®å®šç”µè„‘æ˜¯å¦å·²ç»é…ç½®æ‰¿è½½ç½‘ç»œã€‚åŒæ ·åœ¨CMDçª—å£åˆ†åˆ«è¾“å…¥å‘½ä»¤ï¼š netsh wlan show hostednetwork netsh wlan show hostednetwork setting=security å¦‚æœçœ‹åˆ°ç¬¬ä¸€æ¡å‘½ä»¤è¾“å‡ºå·²ç»é…ç½®å¥½çš„WiFiçƒ­ç‚¹çš„SSIDï¼Œç¬¬äºŒæ¡è¾“å‡ºWiFiçƒ­ç‚¹çš„å¯†ç ï¼Œç›´æ¥è·³åˆ°ç¬¬å››æ­¥ã€‚ 3.åˆ›å»ºWiFiçƒ­ç‚¹ã€‚å‘½ä»¤è¡Œè¾“å…¥ï¼š netsh wlan set hostednetwork mode=allow ssid=WiFiåç§° key=WiFiå¯†ç  å®Œæˆåæç¤ºæ‰¿è½½ç½‘ç»œè®¾ç½®æˆåŠŸã€‚ 4.å¯ç”¨WiFiçƒ­ç‚¹ã€‚åœ¨å‘½ä»¤è¡Œè¾“å…¥ï¼š netsh wlan start hostednetwork å®Œæˆåæç¤ºå·²å¯åŠ¨æ‰¿è½½ç½‘ç»œã€‚ 5.å¯ç”¨WiFiçƒ­ç‚¹å…±äº«ã€‚æ‰“å¼€ \"ç½‘ç»œå’Œå…±äº«ä¸­å¿ƒ\"ï¼Œåœ¨çª—å£å·¦è¾¹æ æ‰¾åˆ° \"æ›´æ”¹é€‚é…å™¨è®¾ç½®\"ï¼Œå†åœ¨çª—å£å³ä¾§æ‰¾åˆ°åˆšåˆšåˆ›å»ºçš„WiFiç½‘ç»œï¼Œä¸€èˆ¬æ˜¾ç¤ºä¸º \"æœ¬åœ°è¿æ¥\"ï¼Œè®°ä½ã€‚å¦‚ä¸‹æ‰€ç¤º åœ¨ä»¥å¤ªç½‘çš„ç½‘ç»œè¿æ¥å›¾æ ‡ä¸Šç‚¹å‡»å³é”®é€‰æ‹©å±æ€§ï¼Œåœ¨å¼¹å‡ºçš„çª—å£ä¸Šæ–¹æ ‡ç­¾æ ç‚¹å‡» \"å…±äº«\"ã€‚ç„¶ååœ¨ä¸‹æ–¹ç¡®è®¤æ¡†ä¸­å¯ç”¨ \"å…è®¸å…¶å®ƒç½‘ç»œç”¨æˆ·é€šè¿‡æ­¤è®¡ç®—æœºçš„ Internetè¿æ¥æ¥è¿æ¥(N)\"ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼Œä¸‹æ‹‰æ¡†ä¸­é€‰æ‹©åˆšåˆšåˆ›å»ºçš„WiFiçƒ­ç‚¹ï¼Œç¡®å®šï¼Œå®Œæˆã€‚ ï¼ˆå®Œï¼‰","tags":"Tools","url":"https://jiang-hao.com/articles/2017/tools-WifiHotSpotOnWindows.html","loc":"https://jiang-hao.com/articles/2017/tools-WifiHotSpotOnWindows.html"},{"title":"Ubuntuç³»ç»ŸApache Mavenå®‰è£…","text":"æ“ä½œç³»ç»Ÿï¼šLinux x64 / Ubuntu 14.04 Apache Mavenç‰ˆæœ¬ï¼š3.3.9 å»ºè®®é¢„å…ˆæ­å»ºJavaå¼€å‘ç¯å¢ƒï¼šè¯¦è§ ã€ŠLinux Ubuntuç³»ç»Ÿä¸‹Javaå¼€å‘ç¯å¢ƒæ­å»ºã€‹ 1. å‰å¾€Apache Mavenå®˜ç½‘ä¸‹è½½æœ€æ–°ç‰ˆæœ¬ï¼šhttps://maven.apache.org/download.cgiï¼Œæœ¬æ–‡ä»¥apache-maven-3.3.9-bin.tar.gzä¸ºä¾‹ã€‚ 2. åœ¨åˆé€‚çš„è·¯å¾„ä¸‹åˆ›å»ºæ–‡ä»¶å¤¹ç”¨æ¥å­˜å‚¨Mavenï¼Œæœ¬ä¾‹é€‰æ‹©åœ¨/optç›®å½•ä¸‹æ–°å»ºMVNå­æ–‡ä»¶å¤¹ã€‚æ‰“å¼€Terminalï¼ˆåæ–‡æˆä¸ºT1ï¼‰ï¼Œè¾“å…¥ï¼š cd /opt #è¿›å…¥åˆ°optç›®å½• sudo mkdir mvn #æ–°å»ºä¸€ä¸ªmvnæ–‡ä»¶å¤¹ ls #æ˜¾ç¤ºæˆåŠŸæ–°å»ºçš„mvnæ–‡ä»¶å¤¹ cd mvn #è¿›å…¥mvnæ–‡ä»¶å¤¹ 3.å°†ä¸‹è½½çš„MVNå‹ç¼©åŒ…æ‹·è´åˆ°mvnç›®å½•ä¸‹ã€‚æ–°å»ºå¦ä¸€ä¸ªTerminalçª—å£ï¼ˆT2ï¼‰å¹¶è¾“å…¥ï¼š cd Downloads #è¿›å…¥Downloadsæ–‡ä»¶å¤¹ ls #æ˜¾ç¤ºåˆšåˆšä¸‹è½½çš„MVNæ–‡ä»¶ï¼Œ sudo cp apache-maven-3.3.9-bin.tar.gz /opt/mvn #å°†æ–‡ä»¶æ‹·è´åˆ°åˆšåˆšæ–°å»ºçš„mvnæ–‡ä»¶å¤¹ä¸­(è¿™é‡Œå°†\"< >\"éƒ¨åˆ†æ›¿ä»£ä¸ºè‡ªå·±å¯¹åº”çš„MVNæ–‡ä»¶åï¼ŒååŒ) sudo rm apache-maven-3.3.9-bin.tar.gz #åˆ é™¤æœ¬ç›®å½•ä¸‹çš„å®‰è£…åŒ…ï¼ˆå¯é€‰ï¼‰ 4.è§£å‹å®‰è£…MVNï¼Œé…ç½®ç¯å¢ƒå˜é‡ã€‚å›åˆ°ç¬¬ä¸€ä¸ªTerminalï¼ˆT1ï¼‰ï¼Œè¾“å…¥ï¼š ls #æ˜¾ç¤ºæ‹·è´è¿‡æ¥çš„MVNå®‰è£…åŒ… sudo tar -zxvf apache-maven-3.3.9-bin.tar.gz #å°†å®‰è£…åŒ…è§£å‹ ls #æ˜¾ç¤ºè§£å‹å‡ºçš„MVNæ–‡ä»¶å¤¹ï¼Œä»¥åŠåŸå®‰è£…åŒ… sudo rm apache-maven-3.3.9-bin.tar.gz #åˆ é™¤åŸå®‰è£…åŒ… sudo gedit /etc/profile #æ‰“å¼€etcç›®å½•ä¸‹çš„profileæ–‡ä»¶ 5.é…ç½®å…¨å±€ç¯å¢ƒå˜é‡ã€‚åœ¨æ‰“å¼€çš„profileæ–‡æ¡£æœ«å°¾æ·»åŠ MVNå®‰è£…è·¯å¾„ï¼ˆéœ€ä»”ç»†ç¡®è®¤ï¼‰ï¼š #set maven environment export M2_HOME=/opt/mvn/apache-maven-3.3.9 export MAVEN_OPTS=\"-Xmx1024m\" #é¿å…å†…å­˜æº¢å‡ºé”™è¯¯ï¼ˆå¯é€‰ï¼‰ export PATH= ${ M2_HOME } /bin: ${ PATH } 6.ä¿å­˜å¹¶å…³é—­æ–‡æ¡£ã€‚ï¼ˆæ³¨ï¼šä¹Ÿå¯ä»¥é€šè¿‡vim å‘½ä»¤ç¼–è¾‘etc/profileï¼Œæ‰“å¼€å‘½ä»¤ï¼šsudo vim /etc/profileï¼ŒæŒ‰ é”®è¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼Œ é”®é€€å‡ºç¼–è¾‘æ¨¡å¼ï¼Œæ¥ç€æŒ‰\":\"å†è¾“å…¥\"wq!\"ä¿å­˜å¹¶é€€å‡ºï¼›è¾“å…¥\"q!\"ä¸ä¿å­˜é€€å‡ºï¼‰ 7.å¯ç”¨é…ç½®å¹¶éªŒè¯ã€‚åœ¨Terminalè¾“å…¥ï¼š mvn -v 8.æ˜¾ç¤ºæ•ˆæœç±»ä¼¼å¦‚ä¸‹ï¼š Apache Maven 3.3.9 (bb52d8502b132ec0a5a3f4c09453c07478323dc5; 2015-11-10T08:41:47-08:00) Maven home: /opt/developTools/jvm/apache-maven-3.3.9 Java version: 1.8.0_65, vendor: Oracle Corporation Java home: /opt/developTools/jvm/jdk1.8.0_65/jre Default locale: en_US, platform encoding: UTF-8 OS name: \"linux\", version: \"3.19.0-25-generic\", arch: \"amd64\", family: \"unix\" ï¼ˆå®Œï¼‰","tags":"Backend","url":"https://jiang-hao.com/articles/2017/backend-Ubuntuç³»ç»ŸApacheMavenå®‰è£….html","loc":"https://jiang-hao.com/articles/2017/backend-Ubuntuç³»ç»ŸApacheMavenå®‰è£….html"},{"title":"Ubuntuç³»ç»ŸJavaå¼€å‘ç¯å¢ƒçš„æ­å»º","text":"æ“ä½œç³»ç»Ÿï¼šLinux x64 / Ubuntu 14.04 Java JDKç‰ˆæœ¬ï¼šjdk-8u65-linux-x64.tar.gz 1. å‰å¾€ORACLEå®˜ç½‘ä¸‹è½½æœ€æ–°ç‰ˆæœ¬çš„Java JDKï¼šhttp://www.oracle.com/technetwork/java/javase/downloads/index.htmlï¼Œé»˜è®¤ä¸‹è½½åˆ°Downloadsæ–‡ä»¶å¤¹ã€‚ 2. åœ¨åˆé€‚çš„è·¯å¾„ä¸‹åˆ›å»ºæ–‡ä»¶å¤¹ç”¨æ¥å­˜å‚¨Java JDKï¼Œæœ¬ä¾‹é€‰æ‹©åœ¨/optç›®å½•ä¸‹æ–°å»ºJVMå­æ–‡ä»¶å¤¹ã€‚æ‰“å¼€Terminalï¼ˆåæ–‡æˆä¸ºT1ï¼‰ï¼Œè¾“å…¥ï¼š cd /opt sudo mkdir jvm ls cd jvm 3.å°†ä¸‹è½½çš„JDKå‹ç¼©åŒ…æ‹·è´åˆ°jvmç›®å½•ä¸‹ã€‚æ–°å»ºå¦ä¸€ä¸ªTerminalçª—å£ï¼ˆT2ï¼‰å¹¶è¾“å…¥ï¼š cd Downloads ls sudo cp jdk-8u65-linux-x64.tar.gz /opt/jvm sudo rm jdk-8u65-linux-x64.tar.gz 4.è§£å‹å®‰è£…Java JDKï¼Œé…ç½®ç¯å¢ƒå˜é‡ã€‚å›åˆ°ç¬¬ä¸€ä¸ªTerminalï¼ˆT1ï¼‰ï¼Œè¾“å…¥ï¼š ls sudo tar -zxvf jdk-8u65-linux-x64.tar.gz ls sudo rm jdk-8u65-linux-x64.tar.gz sudo gedit /etc/profile 5.é…ç½®å…¨å±€ç¯å¢ƒå˜é‡ã€‚åœ¨æ‰“å¼€çš„profileæ–‡æ¡£æœ«å°¾æ·»åŠ JDKå®‰è£…è·¯å¾„ï¼ˆéœ€ä»”ç»†ç¡®è®¤ï¼‰ï¼š #set java environment export JAVA_HOME=/opt/jvm/jdk1.8.0_65 export JRE_HOME= ${ JAVA_HOME } /jre export CLASSPATH=.: $JAVA_HOME /lib: $JRE_HOME /lib: $CLASSPATH export PATH= $JAVA_HOME /bin: $JRE_HOME /bin: $PATH 6.ä¿å­˜å¹¶å…³é—­æ–‡æ¡£ã€‚ï¼ˆæ³¨ï¼šä¹Ÿå¯ä»¥é€šè¿‡vim å‘½ä»¤ç¼–è¾‘etc/profileï¼Œæ‰“å¼€å‘½ä»¤ï¼šsudo vim /etc/profileï¼ŒæŒ‰ é”®è¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼Œ é”®é€€å‡ºç¼–è¾‘æ¨¡å¼ï¼Œæ¥ç€æŒ‰\":\"å†è¾“å…¥\"wq!\"ä¿å­˜å¹¶é€€å‡ºï¼›è¾“å…¥\"q!\"ä¸ä¿å­˜é€€å‡ºï¼‰ 7.å¯ç”¨é…ç½®å¹¶éªŒè¯ã€‚åœ¨Terminalè¾“å…¥ï¼š java -version 8.æ˜¾ç¤ºæ•ˆæœç±»ä¼¼å¦‚ä¸‹ï¼š java version \"1.8.0_65\" Java(TM) SE Runtime Environment (build 1.8.0_65-b17) Java HotSpot(TM) 64-Bit Server VM (build 25.65-b01, mixed mode) ï¼ˆå®Œï¼‰","tags":"Backend","url":"https://jiang-hao.com/articles/2017/backend-Ubuntuç³»ç»ŸJavaå¼€å‘ç¯å¢ƒçš„æ­å»º.html","loc":"https://jiang-hao.com/articles/2017/backend-Ubuntuç³»ç»ŸJavaå¼€å‘ç¯å¢ƒçš„æ­å»º.html"},{"title":"Install & Run Gedit from Terminal on Mac","text":"App description: gedit (App: gedit.app) App website: https://wiki.gnome.org/Apps/Gedit Install from Terminal 1.Run: ruby -e \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)\" < / dev / null 2 > / dev / null ; brew install caskroom / cask / brew-cask 2 > / dev / null 2.After the command finishes, run: brew cask install gedit Now Gedit is installed. Run Gedit from Terminal Solution 1. Add the following line to ~/.profile or ~/.bash_profile: export PATH=/Users/<Username>/Applications/gedit.app/Contents/MacOS/gedit: $ PATH Solution 2. Create a script named gedit in /usr/local/bin and make it executable: a. Create a new file: sudo vim /usr/local/bin/gedit b. Add content as below, save and quit: 1 2 #!/bin/bash /Users/<Username>/Applications/gedit.app/Contents/MacOS/gedit c. Make it executable: sudo chmod 755 /usr/local/bin/gedit (END)","tags":"Tools","url":"https://jiang-hao.com/articles/2017/tools-InstallAndRunGeditOnMac.html","loc":"https://jiang-hao.com/articles/2017/tools-InstallAndRunGeditOnMac.html"},{"title":"ç½‘é¡µ BacktoTop è¿”å›é¡¶éƒ¨æŒ‰é’®çš„ç®€å•å®ç°","text":"åœ¨è¾ƒé•¿çš„ç½‘é¡µé¡µé¢ä¸­å¾€å¾€éœ€è¦ä¸€ä¸ªå›ºå®šæ¼‚æµ®åœ¨æ˜¾ç¤ºå±å³ä¸‹ä¾§ä½ç½®çš„è¿”å›é¡¶éƒ¨æŒ‰é’®ã€‚ ä¸‹é¢ä»‹ç»ä¸€ç§ç®€å•å®ç°ï¼š HTML éƒ¨åˆ†ï¼š < body > < a href = \"javascript:void(0);\" id = \"scroll\" title = \"Scroll to Top\" style = \"display: none;\" > Top < span ></ span ></ a > ... </ body > CSS éƒ¨åˆ†ï¼š # scroll { position : fixed ; right : 10 px ; bottom : 10 px ; cursor : pointer ; width : 50 px ; height : 50 px ; background-color : #2E435E ; text-indent : -9999 px ; display : none ; -webkit- border-radius : 5 px ; -moz- border-radius : 5 px ; border-radius : 5 px ; } # scroll span { position : absolute ; top : 50 % ; left : 50 % ; margin-left : -8 px ; margin-top : -12 px ; height : 0 ; width : 0 ; border : 8 px solid transparent ; border-bottom-color : #ffffff } # scroll : hover { background-color : #3498db ; opacity : 1 ; filter : \"alpha(opacity=100)\" ; -ms- filter : \"alpha(opacity=100)\" ; } JavaScript éƒ¨åˆ†ï¼š $ ( document ). ready ( function (){ $ ( window ). scroll ( function (){ if ( $ ( this ). scrollTop () > 100 ){ $ ( '#scroll' ). fadeIn (); } else { $ ( '#scroll' ). fadeOut (); } }); $ ( '#scroll' ). click ( function (){ $ ( \"html, body\" ). animate ({ scrollTop : 0 }, 600 ); return false ; }); }); æœ€åçš„æ˜¾ç¤ºæ•ˆæœå¯ä»¥å‚ç…§æœ¬åšå®¢ï¼šï¼‰","tags":"Frontend","url":"https://jiang-hao.com/articles/2017/frontend-ç½‘é¡µBackToTopè¿”å›é¡¶éƒ¨æŒ‰é’®çš„ç®€å•å®ç°.html","loc":"https://jiang-hao.com/articles/2017/frontend-ç½‘é¡µBackToTopè¿”å›é¡¶éƒ¨æŒ‰é’®çš„ç®€å•å®ç°.html"},{"title":"CSSä¼ªç±»content: urlæ”¾å›¾ç‰‡å¦‚ä½•æ”¹å˜å›¾çš„å¤§å°","text":"é‡åˆ°è¿‡ä¸€ä¸ªé—®é¢˜ï¼šç”¨before after ä¹‹ç±»çš„ä¼ªç±»çš„contenté‡Œæ”¾ä¸€ä¸ªå›¾çš„é“¾æ¥ï¼Œå¦‚ä½•å»æ”¹å›¾çš„å¤§å°ï¼Ÿæ¯”å¦‚ï¼š . nav ul li : after { content : url ( ../img/nav_fg.png ); } äº‹å®ä¸Šï¼Œå¦‚æœæƒ³è¦è®¾ç½®å‰ç«¯é¡µé¢é€šè¿‡contentï¼šurlæ˜¾ç¤ºå‡ºæ¥çš„å›¾ç‰‡å¤§å°ï¼Œé‚£åªèƒ½ä¿®æ”¹å›¾ç‰‡çš„å¤§å°ã€‚å› ä¸ºå®ƒæ˜¯ç›´æ¥è¯»å–çš„å›¾ç‰‡ï¼Œå¹¶ä¸æ˜¯ä»£å…¥åˆ°htmlä¸­å†æ˜¾ç¤ºå‡ºæ¥ã€‚ä½†å¯ä»¥é‡‡ç”¨backgroundçš„æ–¹å¼è°ƒæ•´å›¾ç‰‡çš„å¤§å°ï¼Œæ¯”å¦‚æœ¬åšå®¢ä¸­å­¦æœ¯ç¤¾äº¤ç½‘ç«™ResearchGateçš„Logoçš„CSSæ˜¾ç¤ºä»£ç å¦‚ä¸‹ï¼š . social a [ href *= 'researchgate.net' ] : before { background-image : url ( './images/icons/researchgate.png' ); background-size : 100 % ; display : inline-block ; margin-right : 2 px ; vertical-align : -3 px ; height : 16 px ; width : 16 px ; content : \"\" ; } å…¶ä¸­ content=\"\", height, width, background-size, display, background-image éƒ½å¿…é¡»æ˜¾ç¤ºæŒ‡å®šã€‚è¿™æ ·ï¼Œå°±å¯ä»¥é€šè¿‡ height, width æ¥åˆ†åˆ«è®¾ç½®å›¾ç‰‡çš„é•¿å’Œå®½äº†ã€‚","tags":"Frontend","url":"https://jiang-hao.com/articles/2017/frontend-CSSä¼ªç±»contenturlæ”¾å›¾ç‰‡å¦‚ä½•æ”¹å˜å›¾çš„å¤§å°.html","loc":"https://jiang-hao.com/articles/2017/frontend-CSSä¼ªç±»contenturlæ”¾å›¾ç‰‡å¦‚ä½•æ”¹å˜å›¾çš„å¤§å°.html"},{"title":"Install Wireshark on Ubuntu","text":"1. Download WIreshark source code on website: https://www.wireshark.org/download.html 2. Extract files into targeted folder: tar -xvf wireshark-1.10.7.tar.bz2 3. Install compiling tools and dependencies: sudo apt-get install build-essential sudo apt-get install libgtk2.0-dev libglib2.0-dev sudo apt-get install checkinstall sudo apt-get install flex bison sudo apt-get build-dep wireshark sudo apt-get install qt5-default sudo apt-get install libssl-dev sudo apt-get install libgtk-3-dev 4. Go to www.tcpdump.org and find newest version of libpcap(e.g., libpcap-1.5.3.tar.gz): #tar -xvf libpcap-1.5.3.tar.gz #cd libpcap-1.5.3.tar.gz #./configure #make #make install 5. Go to wireshark folder: ./autogen.sh ./configure --with-ssl --enable-setcap-install make make install","tags":"Tools","url":"https://jiang-hao.com/articles/2016/tools-InstallWiresharkonUbuntu.html","loc":"https://jiang-hao.com/articles/2016/tools-InstallWiresharkonUbuntu.html"},{"title":"æ³•å›½çš„ä¸€äº›è‘—åçš„ç²¾æ²¹å“ç‰Œ","text":"æ³•å›½ç²¾æ²¹å“ç‰Œï¼š Florial (Florihana) (èŠ™æ¢¦ä¸½å¨œ) L'OCCITANE ( æ¬§èˆ’ä¸¹ ) Sanoflore (åœ£èŠ™å…°) CAMENAE (å˜‰åªšä¹) NUXE ( æ¬§æ ‘ ) SISLEY ( å¸Œæ€é» ) 1. Florial (Florihana) â€”â€” Få®¶ å“ç‰Œï¼š åœ¨æ¬§æ´²è¢«è§†ä¸ºæ³•å›½ç¬¬ä¸€åŒ»ç–—ç­‰çº§çš„æœ‰æœºè®¤è¯æ¤ç‰©ç²¾æ²¹å“ç‰Œï¼Œå¤šå¹´æ¥ä¸€ç›´æ·±å—ç€å„å›½èŠ³ç–—ç•Œçš„å–œçˆ±ã€‚æ‹¥æœ‰ä¸–ç•Œä¸Šç‹¬ä¸€æ— äºŒçš„ç‰¹æ®Šè’¸é¦æŠ€æœ¯ï¼Œé‡‡ç”¨äººå·¥é‡‡é›†å’Œäº§æ²¹ç‡æä½çš„ä½æ¸©ã€ä½å‹ã€ç¼“æ…¢çš„è’¸é¦æŠ€æœ¯æ¥æç‚¼ç²¾æ²¹ã€‚åŒ…è£…ç“¶é€‰ç”¨ä¸€ç§ç‰¹æ®Šçš„ç»¿è‰²ç»ç’ƒæ¥è£…è½½ç²¾æ²¹ï¼Œæ­¤ç§ç“¶å­ä¸ä½†å¯é˜»æŒ¡ä¸€èˆ¬çš„é˜³å…‰ï¼Œè¿˜æœ‰è¿‡æ»¤ç´«å¤–çº¿å’Œçº¢å¤–çº¿çš„ä½œç”¨ï¼Œæ–¹ä¾¿ç²¾æ²¹æ›´å¥½çš„ä¿æŒåŸå‹çŠ¶æ€ã€‚æ­¤å¤–ï¼ŒFå®¶çš„æœ‰æœºç²¾æ²¹å“ç§ä¸°å¯Œï¼Œå…¶ä¸­å°¤å…¶çº¯éœ²åšçš„éå¸¸å¥½ï¼Œå±äºä¸–ç•Œé¡¶çº§è¡Œåˆ—ã€‚å”¯ä¸€çš„ä¸€ç‚¹ç‘•ç–µæ˜¯è¿™å®¶çš„äº§åœ°æœ‰äº›å¹¶ä¸æ˜¯éå¸¸å¥½ï¼ˆå…¶å®ä¹Ÿå¾ˆå¥½ç†è§£ï¼Œç®—æ˜¯å¤šå“ç§çš„æœºä¼šæˆæœ¬å§ï¼‰ã€‚ å…¬å¸ï¼š J.E Internatioanl (Florihanaã€Florialå•†æ ‡æ‰€æœ‰äºº)å…¬å¸æ€»éƒ¨è®¾ç«‹åœ¨æ³•å›½çš„å—éƒ¨ï¼Œäºå›½å®¶çº§è‡ªç„¶ä¿æŠ¤åŒºå†…çš„ç§‘æ–¯é«˜å±±ï¼ˆCaussols plateauï¼‰ä¸Šã€‚åˆ›åŠäººMR. Durante Alain ç³»å·¥ç¨‹å¸ˆå‡ºèº«ã€‚è‡ª1993å¹´å¼€å§‹ä»äº‹ç²¾æ²¹èƒå–åŠèŠ³ç–—æ¨å¹¿äº‹ä¸šï¼Œç”¨è¿‘15å¹´çš„æ—¶é—´ï¼Œç»ˆäºåˆ›ç«‹å‡ºFlorialå’ŒFlorihanaå“ç‰Œã€‚ æ˜æ˜Ÿäº§å“ï¼š æ°¸ä¹…èŠ±çº¯éœ² ( HELICHRYSUM ITALIAN ORGANIC ) æ ‡ç­¾ï¼š æ³•å›½çŸ¥åç²¾æ²¹å“ç‰Œ 2. L'OCCITANEâ€”â€” æ¬§èˆ’ä¸¹ å“ç‰Œï¼š å…¨ç§°L'OCCITANE EN PROVENCEï¼ˆæ³•è¯­å‘éŸ³ï¼š[lÉ”ksiËˆtan É‘ ÌƒpÊÉ”vÉ‘Ìƒs]ï¼Œæ„å³\"æ™®ç½—æ—ºæ–¯çš„æ¬§èˆ’ä¸¹\")ã€‚äº§å“æ˜¯ä»¥æ™®ç½—æ—ºæ–¯ä¸°å¯Œçš„è‡ªç„¶è‰æœ¬æ¤ç‰©ä¸ºåŸæ–™ï¼Œç”¨ä¼˜è´¨çš„æ¤ç‰©ç”±ä¼ ç»Ÿæ–¹æ³•åˆ¶é€ å¼€å‘è€Œæˆã€‚æ¯ä¸€ä¸ªäº§å“ç³»åˆ—éƒ½æœ‰å…¶ç‹¬ç‰¹ä¼ å¥‡ï¼šè–°è¡£è‰ã€æ©„æ¦„ã€é©¬é­è‰åŠèœ‚èœœèŠ‚å‘æ‰¬æ³•å›½æ™®ç½—æ—ºæ–¯çš„ä¼ ç»Ÿï¼Œèœ¡èŠç»†è¯‰ç§‘è¥¿å˜‰å²›çš„æ•…äº‹ï¼Œä¹³æœ¨æœæ²¹æ˜¯éæ´²çš„ä¼ å¥‡ç‘°å®ã€‚ä»Šå¤©ï¼Œ æ¬§èˆ’ä¸¹å·²æˆä¸ºåœ¨å…¨çƒè¿‘60ä¸ªå›½å®¶å¼€è®¾é€¾550å®¶åˆ†åº—çš„å›½é™…çŸ¥åé¦™æ°›æŠ¤ç†å“ç‰Œã€‚ å…¬å¸ï¼š æ˜¯ä¸€å®¶ä¸“é—¨åˆ¶é€ åŠå”®å–ä¸ªäººæŠ¤ç†äº§å“åŠå®¶å±…äº§å“çš„å›½é™…é›¶å”®ä¼ä¸šï¼Œä¸»è¦ç”Ÿäº§åŸºåœ°è®¾äºæ³•å›½é©¬è¯ºæ–¯å…‹ï¼ˆManosqueï¼‰ã€‚ å…¬å¸æˆç«‹äº1976å¹´ï¼Œ åˆ›åŠäººä¸ºå¥¥åˆ©ç»´åŸƒÂ·åšæ¡‘ï¼ˆOlivier Baussanï¼‰ï¼Œ ä»–å¸Œæœ›å»ºç«‹ä¸€å®¶ä¿ç•™å¹¶å¼˜æ‰¬å®¶ä¹¡æ™®ç½—æ—ºæ–¯ä¼ ç»Ÿçš„å…¬å¸ã€‚å…¬å¸åå­—L'OCCITANEåœ¨æ³•è¯­ä¸­çš„æ„æ€æ˜¯\"æ¥è‡ªæ¬§è¥¿å¦å°¼äºšçš„å¥³äºº\"ã€‚æ¬§èˆ’ä¸¹å¸Œæœ›\"é€è¿‡æä¾›ç‹¬ç‰¹çš„ä¸ªäººæŠ¤ç†åŠå®¶å±…äº§å“ï¼Œæˆä¸ºæå€¡åœ°ä¸­æµ·å¼èˆ’é€‚å®‰åº·æ„Ÿè§‰çš„å›½é™…æ¨¡èŒƒ\"ï¼Œå¹¶ä»¥\"èˆ’é€‚æ„‰æ‚¦\"ã€\"çœŸå®çº¯å‡€\"åŠ\"å…³æ€€å°Šé‡\"ç­‰ä¸ºä¼ä¸šç†å¿µã€‚ æ˜æ˜Ÿäº§å“ï¼š \"Aromachology\" èŠ³é¦™èº«å¿ƒç–—æ³•ç³»åˆ—ï¼šä»¥å¤šç§ç²¾æ²¹æ··åˆåˆ¶æˆï¼Œå°†\"å†¥æƒ³\"çš„æ„å¢ƒè´¯ç©¿å…¶ä¸­ï¼Œèƒ½å¸®åŠ©èº«ä½“ä¸å¤§è‡ªç„¶æ²Ÿé€šã€‚æ•´ä¸ªç³»åˆ—æœ‰æ²æµ´ã€æ´—å‘ã€æ¶¦è‚¤ã€æŒ‰æ‘©æ²¹å’Œèœ¡çƒ›ç­‰äº§å“ï¼Œå…¶ä¸­ä»¥æ²æµ´å“æœ€ä¸ºç•…é”€ã€‚ æ ‡ç­¾ï¼š æ³•å›½çŸ¥åæŠ¤ç†å“ç‰Œ 3. Sanoflore â€”â€” åœ£èŠ™å…° å“ç‰Œï¼š æ³•å›½èŠ³é¦™ç•Œä¸€ä¸ªå¾ˆæœ‰åœ°ä½çš„å“ç‰Œï¼Œæ‰€æœ‰çš„åŸæ–™éƒ½é‡‡è‡ªä»¥æœ‰æœºç§æ¤çš„æ–¹å¼åŸ¹è‚²å‡ºçš„æ¤ç‰©ï¼Œæ˜¯å…¨çƒå”¯ä¸€å…¨ç³»åˆ—å•†å“çš†è·å¾—æ¬§ç›ŸEcocertä¸Cosmebioæœ‰æœºè®¤è¯çš„å“ç‰Œã€‚SANOFLORè¿˜æœ‰å¾ˆå¤šç¾å®¹æŠ¤è‚¤ç±»çš„äº§å“å¦‚ï¼šç«ç‘°é¢æ²¹ï¼ŒæŒ‰æ‘©æ²¹ï¼Œæ—¥éœœï¼Œæ™šéœœï¼Œçœ¼éœœç­‰éƒ½ç”¨çš„æœ‰æœºæ¤ç‰©çš„ç²¾åï¼Œè€Œä¸”æœ€å€¼å¾—ä¸€æçš„æ˜¯ï¼šå®ƒå®¶äº§å“é‡Œå‡¡æ˜¯éœ€è¦æ·»åŠ æ°´ä»½çš„ï¼Œéƒ½æ˜¯æ·»åŠ çš„100%æœ‰æœºçš„èŠ±æ°´ã€‚SANOFLOREå…±æœ‰6ç§èŠ±æ°´ï¼Œç«ç‘°ï¼Œè–°è¡£è‰ï¼Œæ´‹ç”˜èŠï¼Œæ©™èŠ±ï¼Œé‡‘ç¼•æ¢…ï¼ŒçŸ¢è½¦èŠã€‚ç›®å‰ï¼ŒSANOFLOREäº§å“æ¶‰åŠèŠ±è‰ç±»ï¼ˆèŠ±è‰èŒ¶ï¼ŒèŠ±è‰è¯åŒ…ï¼‰ã€èŠ³é¦™ç–—æ³•ï¼ˆç²¾æ²¹ï¼ŒèŠ±æ°´ï¼‰ã€æœ‰æœºç¾å®¹æŠ¤è‚¤å“å’Œå¤©ç„¶é¦™æ–™ã€‚ å…¬å¸ï¼š å…¨ä¸–ç•Œæœ€å¤§æœ‰æœºæ¤ç‰©åŸæ–™ä¾›æœºå•†ï¼Œå°±è¿æ³•å›½SISLEYã€DARPHINï¼Œç”šè‡³æ˜¯æ¾³æ´²AESOPçš„ç²¾æ²¹æˆåˆ†åŠåŸæ–™éƒ½æ¥è‡ªäºå®ƒã€‚Sanofloreæ³•æ–‡çš„åŸæ„æŒ‡çš„æ˜¯ï¼š\"å¥åº·çš„èŠ±æœµ\"ã€‚1972å¹´ï¼Œç‘å£«ç±çš„åœ°çƒåŠè‡ªç„¶ç§‘å­¦ä¸åœ°è´¨å­¦ä¸å•†ä¸šç®¡ç†ç ”ç©¶æ‰€åšå£«RodolpheBALZï¼Œåœ¨æ³•å›½æ™®ç½—æ—ºæ–¯Dromeçš„æ ¸å¿ƒåœ°å¸¦ä¸€ç‰‡é›¶æ±¡æŸ“çš„å±±ä¸˜ä¸Šæˆç«‹äº†ç¬¬ä¸€åº§å®éªŒæ€§çš„èŠ±å›­SanofloreLaboratoryï¼Œç”Ÿäº§å‡ºç¬¬ä¸€ç“¶èŠ±æ°´ï¼›1986å¹´ï¼ŒSANOFLOREæ­£å¼æˆç«‹äº†ä¸“é—¨ç ”ç©¶æœ‰æœºäº§å“çš„å®éªŒå®¤ï¼›1998å¹´ï¼ŒDaniel RICHARDå®¶æ—åŠ å…¥ç»è¥ï¼Œå°†SANOFLOREä»‹ç»ç»™å…¨ä¸–ç•Œã€‚ æ˜æ˜Ÿäº§å“ï¼š èŠ±æ°´ç³»åˆ— æ ‡ç­¾ï¼š æ³•å›½çŸ¥åç²¾æ²¹å“ç‰Œï¼Œä¸–ç•Œæœ€å¤§æœ‰æœºæ¤ç‰©åŸæ–™æä¾›å•† 4. CAMENAE â€”â€” å˜‰åªšä¹ å“ç‰Œï¼š æºè‡ªæ³•å›½æ™®ç½—æ—ºæ–¯çº¯ç²¹çš„äººæ–‡ç²¾é«“çš„åŒ–å¦†å“å“ç‰Œï¼Œåº”è¯¥ç®—æ˜¯æœ€æ¥ä¸­å›½\"åœ°æ°”\"çš„æ³•å›½ç²¾æ²¹å“ç‰Œä¹‹ä¸€äº†ã€‚è‡ª2003å¹´è¿›å…¥ä¸­å›½å¸‚åœºä»¥æ¥ï¼Œåœ¨ä¸€å¹´çš„æ—¶é—´ä¸ä¸‹200ä½™å®¶ä¸“å–åº—å’Œä¸“æŸœç›¸ç»§å¼€ä¸šï¼Œè‡³ä»ŠCAMENAEåº”è¯¥ç®—æ˜¯å›½å†…ç²¾æ²¹æŠ¤è‚¤å“é¢†åŸŸçš„ä½¼ä½¼è€…ã€‚2007å¹´CAMENAEå˜‰åªšä¹æˆåŠŸè·å¾—æ¬§ç›ŸECO-CERTå›½é™…æœ‰æœºè®¤è¯ã€‚å“ç‰Œç†å¿µï¼šå–„ç”¨ç²¾æ²¹ï¼Œå…³æ³¨å¿ƒçµï¼Œå›å½’å¤©ç„¶ã€‚ å…¬å¸ï¼š CAMENAEï¼Œæ³•å›½çŸ¥åç²¾æ²¹å“ç‰Œï¼Œ1970å¹´åˆ›ç«‹äºæ³•å›½çš„æ™®ç½—æ—ºæ–¯ã€‚ä»1970å¹´åˆ›ç«‹èµ·ï¼Œè‡³ä»Šå·²å‘å±•æˆä¸ºæ‹¥æœ‰é€¾3000å®¶é—¨åº—çš„è¶…çº§è¿é”ä½“ç³»ã€‚2003å¹´8æœˆï¼ŒCAMENAEåœ¨åŒ—äº¬å›½è´¸å¼€å¼ äº†ç¬¬ä¸€å®¶ä¸­å›½æ——èˆ°åº—ï¼Œå®£å‘Šè¿™ä¸€æ¬§æ´²ä¸ªäººæŠ¤ç†å“ç‰Œæ­£å¼æŒºè¿›ä¸­å›½ï¼ŒåŒæ—¶å¯åŠ¨ä¸­å›½åŒºç‰¹è®¸ç»è¥é¡¹ç›®ã€‚ æ˜æ˜Ÿäº§å“ï¼š \"æ©„æ¦„ç²¾åç³»åˆ—\" æ ‡ç­¾ï¼š æ³•å›½çŸ¥åæŠ¤ç†å“ç‰Œï¼Œä¸­å›½çŸ¥åå“ç‰Œ 5. NUXE â€”â€” æ¬§æ ‘ å“ç‰Œï¼š æ³•å›½çº¯æ¤ç‰©ç¾å®¹å“ç‰Œï¼Œåå­—å–è‡ªNATUREï¼ˆè‡ªç„¶ï¼‰+LUXEï¼ˆå¥¢åï¼‰ï¼Œæ„å–»è¯¥å“ç‰Œæ˜¯è‡ªç„¶ä¸å¥¢åçš„å®Œç¾çš„ç»“åˆã€‚NUXE å´‡å°šè‡ªç„¶ï¼Œåˆ›ç«‹ä¼Šå§‹ä¾¿åšæŒç‹¬åˆ›ï¼Œæ³¨é‡ä¼˜é€‰æˆåˆ†ï¼Œä¸ä¸€å‘³è¿½é€æ½®æµï¼Œæˆä¸ºå¤©ç„¶ç¾å­¦ï¼Œå›å½’è‡ªç„¶çš„é¢†å¯¼å“ç‰Œã€‚å“ç‰Œç†å¿µï¼šè‡ªç„¶å’Œå¤§èƒ†ï¼Œæ•ˆç‡å’ŒçœŸå®ï¼Œæ€§æ„Ÿä¸å¥¢åï¼ŒåŠ›æ±‚å°†æ¤ç‰©çš„åŠŸæ•ˆå‘æŒ¥åˆ°æè‡´ï¼Œç»“åˆ\"è‡ªç„¶ã€å¥åº·ã€ç¾ä¸½\"ä¸‰å¤§æŠ¤è‚¤è¦ç´ ï¼Œå…±åŒå¤å…´å…ˆé”‹åŒ–å¦†å“ç†å¿µã€‚åœ¨åª’ä½“å’Œå¨±ä¹åœˆå†…å¯¹å…¶ç»™äºˆçš„è¯„ä»·é¢‡é«˜ã€‚ å…¬å¸ï¼š ç”±å·´é»çš„ä¸€ä½è¯æŠ€å¸ˆå…¼èŠ³ç–—åŠæ¤ç‰©ç–—æ³•ä¸“å®¶åœ¨1957å¹´æ‰€åˆ›ç«‹ï¼Œæˆç«‹ä»¥æ¥ï¼Œç ”å‘äº†è®¸å¤šç®€å•ã€æ¸©å’Œã€æœ‰æ•ˆçš„ç¾å®¹ä¿å…»å“ã€‚ä¼ä¸šç²¾ç¥ï¼šè¶…è¶Šæµè¡Œçš„é™åˆ¶ï¼Œè€Œç§‰æŒç€ç»å¯¹ç‹¬ç«‹è‡ªä¸»ã€‚1989 å¹´ç”±å´‡å°šæ¤ç‰©ä¸èŠ³é¦™ç–—æ³•çš„çŸ¥åæ³•å›½å¥³ä¼ä¸šå®¶Aliza Jabesæ”¶è´­ï¼Œç»åŒ»ç–—çº§åˆ«çš„ç²¾å¯†åˆ¶ä½œè¿‡ç¨‹å’Œä¸¥å¯†çš„ä¼ä¸šè¡Œé”€ä¸å“è´¨å¡‘é€ ï¼Œæ›´ä¿ƒä½¿NUXEæˆä¸ºå¤©ç„¶ç¾å­¦çš„æ•™ä¸»å“ç‰Œã€‚ æ˜æ˜Ÿäº§å“ï¼š èœ‚èœœæ´é¢ç³»åˆ—ï¼Œç¡è²é¢éœœï¼Œæ¤ç‰©é²œå¥¶é¢éœœï¼ŒèŠ±æ°´ç³»åˆ—ç­‰ æ ‡ç­¾ï¼š æ³•å›½çŸ¥åçº¯æ¤ç‰©ç¾å®¹å“ç‰Œ 6. SISLEY â€”â€” å¸Œæ€é» å“ç‰Œï¼š å“ç‰Œåç§°Sisleyæ¥è‡ªæ–¼19ä¸–çºªæ³•å›½å°è±¡æ´¾ç”»å®¶Alfred Sisleyï¼Œå› æ­¤å¯ä»¥æƒ³åƒè¿™æ˜¯ä¸ªæµè‘—çƒ­è¡€ä»¥åŠå¤šæƒ…è‰ºæœ¯çš„å“ç‰Œã€‚Sisleyæ‰€æœ‰äº§å“å‡ä»¥æ¤ç‰©èƒå–ç²¾åä¸æ¤ç‰©é¦™ç²¾æ²¹ä½œä¸ºä¸»è¦æˆåˆ†ï¼Œé…ä»¥å…¶ç‹¬æœ‰é…æ–¹ç ”åˆ¶è€Œæˆï¼Œåœ¨å“è´¨ã€ç»å¯¹çš„å®‰å…¨æ€§å’Œé€‚ç”¨æ€§ä¸Šäº«æœ‰ç››èª‰ã€‚äº§å“ä¸»è¦æ¶‰åŠæŠ¤è‚¤ã€å½©å¦†ã€ç¾å‘å’Œé¦™æ°´ï¼ˆå¸Œæ€é»å¤œå¹½æƒ…æ€€å¥³å£«é¦™æ°´ï¼‰ã€‚ç†å¿µå’Œå®šä½ï¼š\"ç”¨ç§‘å­¦å°è¯æ¤ç‰©ç¾å®¹çš„ä¼ è¯´ï¼Œä»¥ä¼˜è´¨å°Šè´µçš„äº§å“ï¼ŒçŒ®ç»™è®²ç©¶çš„äººå£«\"ï¼ˆé€šä¿—çš„è¯´å°±æ˜¯åšæŒé«˜å“è´¨ï¼Œç„¶åé«˜ä»·ä½ï¼ŒæŠ¤è‚¤å“ä¸­å°Šè´µä¸ä¼˜é›…çš„ç»å…¸ä»£è¡¨ï¼‰ã€‚ å…¬å¸ï¼š åœ¨1976å¹´ç”±æ³•å›½ä¿®ä¼¯ç‰¹ï¼å¤šçº³è¯ºä¼¯çˆµåˆ›ç«‹ï¼Œä»¥å½“æ—¶æ¬§æ´²æœ€æ–°çš„æ¤ç‰©ç¾å®¹å­¦ä¸ºåŸºç¡€ï¼ŒæˆåŠŸåœ°ç ”åˆ›å‡ºæ¥çš„æ¤ç‰©æ€§æŠ¤è‚¤å“ç‰Œã€‚æ˜¯ç°ä»Šæå°‘æ•°ä»ç”±å®¶æ—æ‹¥æœ‰ã€ç»è¥çš„åŒ–å¦†å“å“ç‰Œã€‚å…¨ä¸–ç•Œæ‰€æœ‰çš„SisleyæŠ¤è‚¤äº§å“å‡å‡ºè‡ªæ³•å›½å·´é»å·¥å‚ï¼Œä»¥ç¡®ä¿å“ç‰Œäº§å“çš„ä¸€è‡´æ€§ã€‚äº§å“ä¸Šå¸‚å‰å¿…å…ˆç»è¿‡çš®è‚¤ç§‘åŒ»ç”Ÿçš„æµ‹è¯•ï¼Œä»¥ç¡®ä¿äº§å“çš„å®‰å…¨æ€§ã€‚Sisleyæ˜¯å°‘æ•°è¢«çš®è‚¤åŒ»å­¦å®¶è®¤å®šä¸ºæœ€å®‰å…¨çš„æŠ¤è‚¤å“ï¼›å³ä½¿æ˜¯è¿‡æ•æ€§ä¸æ•æ„Ÿæ€§è‚Œè‚¤ï¼Œä¹Ÿå¯å®‰å¿ƒä½¿ç”¨ã€‚ æ˜æ˜Ÿäº§å“ï¼š Ecological Compoundï¼ŒBotanical D-TOX Detoxifyingï¼ŒExpress Flower Gel, etc. æ ‡ç­¾ï¼š æ³•å›½çŸ¥åæ¤ç‰©ç¾å®¹å“ç‰Œ å‚è€ƒ: 1. åå…­ç•ªï¼šæ³•å›½è´­ç‰©æ”»ç•¥ 2. å„å“ç‰Œç™¾åº¦ç™¾ç§‘ 3. å„å“ç‰ŒWikipedia 4. æ–°æ¬§æ´².æˆ˜æ–—åœ¨æ³•å›½ 5. å„å“ç‰Œå®˜ç½‘","tags":"Notes","url":"https://jiang-hao.com/articles/2016/notes-æ³•å›½çš„ä¸€äº›ç²¾æ²¹å“ç‰Œ.html","loc":"https://jiang-hao.com/articles/2016/notes-æ³•å›½çš„ä¸€äº›ç²¾æ²¹å“ç‰Œ.html"},{"title":"Install VMware Workstation in Ubuntu 14.04","text":"1. Use apt-get update system: linuxidc@localhost:~$ sudo apt-get update linuxidc@localhost:~$ sudo apt-get upgrade 2. Download VMware Workstation bundle. 3. Make bundle executable: linuxidc@localhost:~$ chmod a+x VMware-Workstation-Full-11.0.0-2305329.x86_64.bundle 4. Run the bundle: linuxidc@localhost:~$ sudo ./VMware-Workstation-Full-11.0.0-2305329.x86_64.bundle 5. Installation:","tags":"Tools","url":"https://jiang-hao.com/articles/2016/tools-InstallVMwareWorkstationinUbuntu14.04.html","loc":"https://jiang-hao.com/articles/2016/tools-InstallVMwareWorkstationinUbuntu14.04.html"},{"title":"Apache Shiro Multi-tenancy with JDBC MySQL","text":"0. GOALS - Provide user authentication and authorization for multi-tenant scenarios - Provide easy-to-maintain data storage with only one database - Provide domain-differentiated, credential-based authentication - Provide domain-differentiated, role-based, service-specific authorization; 1. QuickStart with Apache Shiro - English Documentation - Chinese Documentation - Example Applications - Architecture: 2. Environment Prerequisites Apache Maven 3.3.9 (bb52d8502b132ec0a5a3f4c09453c07478323dc5; 2015-11-10T17:41:47+01:00) Maven home: /Library/Maven Java version: 1.7.0_79, vendor: Oracle Corporation Java home: /Library/Java/JavaVirtualMachines/jdk1.7.0_79.jdk/Contents/Home/jre Default locale: en_US, platform encoding: UTF-8 OS name: \"mac os x\", version: \"10.11.2\", arch: \"x86_64\", family: \"mac\" 3. Apache Shiro Maven Dependency <dependency> <groupId> org.apache.shiro </groupId> <artifactId> shiro-core </artifactId> <version> 1.1.0 </version> </dependency> <dependency> <groupId> org.slf4j </groupId> <artifactId> slf4j-simple </artifactId> <version> 1.6.1 </version> <scope> test </scope> </dependency> 4. MySQL QuickStart 1. Install MySQL on Mac 2. ä¿®æ”¹Rootå¯†ç  3. W3Schools SQL Tutorial 4. W3Schoolä¸­æ–‡SQLæ•™ç¨‹ 5. RUNOOB MySQLæ•™ç¨‹ 5. Create Tables 1.User Table: 2.Domain_User Table: 3.User_Role Table: 4.Permission_Domain_Role Table: 6. JDBC Setup and Code Customization 1.Maven Dependency: <dependency> <groupId> mysql </groupId> <artifactId> mysql-connector-java </artifactId> <version> 5.1.25 </version> </dependency> <dependency> <groupId> com.alibaba </groupId> <artifactId> druid </artifactId> <version> 0.2.23 </version> </dependency> 2.Rewrite getPermissions method in jdbcRealm protected Set < String > getPermissions ( Connection conn , String username ) throws SQLException { PreparedStatement ps = null ; Set < String > permissions = new LinkedHashSet < String >(); try { ps = conn . prepareStatement ( permissionsQuery ); ps . setString ( 1 , username ); ResultSet rs = null ; try { // Execute query rs = ps . executeQuery (); // Loop over results and add each returned role to a set while ( rs . next ()) { String permissionString = rs . getString ( 1 ); // Add the permission to the set of permissions permissions . add ( permissionString ); } } finally { JdbcUtils . closeResultSet ( rs ); } } finally { JdbcUtils . closeStatement ( ps ); } return permissions ; } 3.Add getUserDomain method in jdbcRealm public Set < String > getUserDomain ( Connection conn , String username ){ PreparedStatement ps = null ; Set < String > domains = new LinkedHashSet <>(); try { ps = conn . prepareStatement ( userDomainQuery ); ps . setString ( 1 , username ); ResultSet rs = null ; try { rs = ps . executeQuery (); while ( rs . next ()) { String domainID = rs . getString ( 1 ); domains . add ( domainID ); } } catch ( SQLException e ) { e . printStackTrace (); } finally { JdbcUtils . closeResultSet ( rs ); } } catch ( SQLException e ) { e . printStackTrace (); } finally { JdbcUtils . closeStatement ( ps ); } return domains ; } 4.Rewrite doGetAuthenticationInfo method in jdbcRealm protected AuthenticationInfo doGetAuthenticationInfo ( AuthenticationToken token ) throws AuthenticationException { VTNAuthNToken upToken = ( VTNAuthNToken ) token ; String username = upToken . getUsername (); String domainID = Integer . toString ( upToken . getDomainId ()); // Null username is invalid if ( username == null ) { throw new AccountException ( \"Null usernames are not allowed by this realm.\" ); } Connection conn = null ; SimpleAuthenticationInfo info = null ; try { conn = dataSource . getConnection (); Set < String > domains = getUserDomain ( conn , username ); if (!( domains . contains ( domainID ))){ throw new AuthenticationException ( \"Domain not found\" ); } String password = null ; String salt = null ; switch ( saltStyle ) { case NO_SALT : password = getPasswordForUser ( conn , username )[ 0 ]; break ; case CRYPT : // TODO: separate password and hash from getPasswordForUser[0] throw new ConfigurationException ( \"Not implemented yet\" ); //break; case COLUMN : String [] queryResults = getPasswordForUser ( conn , username ); password = queryResults [ 0 ]; salt = queryResults [ 1 ]; break ; case EXTERNAL : password = getPasswordForUser ( conn , username )[ 0 ]; salt = getSaltForUser ( username ); } if ( password == null ) { throw new UnknownAccountException ( \"No account found for user [\" + username + \"]\" ); } info = new SimpleAuthenticationInfo ( username , password . toCharArray (), getName ()); if ( salt != null ) { info . setCredentialsSalt ( ByteSource . Util . bytes ( salt )); } } catch ( SQLException e ) { final String message = \"There was a SQL error while authenticating user [\" + username + \"]\" ; if ( log . isErrorEnabled ()) { log . error ( message , e ); } // Rethrow any SQL errors as an authentication exception throw new AuthenticationException ( message , e ); } finally { JdbcUtils . closeConnection ( conn ); } return info ; } 7. Setup Shiro.ini Configuration File [main] #authenticator authenticator = aaa.authn.VTNAuthenticator #(Customized) authenticationStrategy = org.apache.shiro.authc.pam.AtLeastOneSuccessfulStrategy authenticator.authenticationStrategy = $authenticationStrategy securityManager.authenticator = $authenticator #authorizer authorizer = aaa.authz.VTNAuthorizer #(Customized) permissionResolver = org.apache.shiro.authz.permission.WildcardPermissionResolver authorizer.permissionResolver = $permissionResolver securityManager.authorizer = $authorizer #Realm jdbcRealm = aaa.realms.MySQLRealm #(Customized) dataSource = com.alibaba.druid.pool.DruidDataSource dataSource.driverClassName = com.mysql.jdbc.Driver dataSource.url = jdbc:mysql://localhost:3306/vtn dataSource.username = root jdbcRealm.dataSource = $dataSource securityManager.realms = $jdbcRealm jdbcRealm.permissionsLookupEnabled = true #SQL Queries jdbcRealm.authenticationQuery = SELECT password FROM user WHERE user_name = ? jdbcRealm.userRolesQuery = SELECT role_id FROM user_role left join user using(user_id) WHERE user_name = ? jdbcRealm.permissionsQuery = SELECT distinct permission_id FROM perm_domain_role left join domain_user using(domain_id) left join user using(user_id) WHERE (domain_id, role_id) IN ( SELECT domain_id, role_id From user left join user_role using(user_id) left join domain_user using(user_id) WHERE user_name = ?) 8. Tips about SQL permissionsQuery in INI file: 1. Query with same parameter at two places: SELECT T . P FROM ( SELECT distinct permission_id as P , role_id AS R FROM perm_domain_role left join domain_user using ( domain_id ) left join user using ( user_id ) WHERE user_name = ? ) AS T WHERE T . R IN ( SELECT role_id FROM user_role left join user using ( user_id ) WHERE user_name = ? ) 2.Optimization with only one parameter: SELECT DISTINCT permission_id FROM perm_domain_role left join domain_user using ( domain_id ) left join user using ( user_id ) WHERE ( domain_id , role_id ) IN ( SELECT domain_id , role_id FROM user left join user_role using ( user_id ) left join domain_user using ( user_id ) WHERE user_name = ? ) 9. Result: Finally, you can easily test that each user has different services authorized by Shiro according to its tenant domain and its role. for ( VTNAuthNToken token : userTokenList ) { Mappable userRequest = new MappableMsg ( null , null , token ); for ( String service : servList ){ userRequest . setServID ( service ); if ( IShiro . getInstance (). isAuthorized ( userRequest )){ String entry = \"Domain \" + token . getDomainId ()+ \": \" + token . getUsername ()+ \": \" + service ; authZResult . add ( entry ); } } } for ( String i : authZResult ){ System . out . println ( i ); } Output: Domain 1: admin: vtn:topo:create Domain 1: admin: vtn:topo:read Domain 1: admin: vtn:topo:update Domain 1: admin: vtn:topo:delete Domain 1: admin: system:vtn:create Domain 1: admin: system:vtn:update Domain 1: admin: system:vtn:delete Domain 1: admin: serv:firewall:create Domain 1: admin: serv:firewall:read Domain 1: admin: serv:firewall:update Domain 1: admin: serv:firewall:delete Domain 1: boss: system:vtn:read Domain 2: tenant1: vtn:topo:create Domain 2: tenant1: vtn:topo:read Domain 2: tenant1: vtn:topo:update Domain 2: tenant1: vtn:topo:delete Domain 2: tenant1: serv:firewall:create Domain 2: tenant1: serv:firewall:read Domain 2: tenant1: serv:firewall:update Domain 2: tenant1: serv:firewall:delete Domain 2: guest1: vtn:topo:read Domain 2: guest1: serv:firewall:read Domain 3: tenant2: vtn:topo:create Domain 3: tenant2: vtn:topo:read Domain 3: tenant2: vtn:topo:update Domain 3: tenant2: vtn:topo:delete Domain 3: guest2: vtn:topo:read","tags":"Backend","url":"https://jiang-hao.com/articles/2016/backend-Shiro.html","loc":"https://jiang-hao.com/articles/2016/backend-Shiro.html"},{"title":"åœ¨éš¾æçš„æ—¥å­é‡Œä»–ä»¬è¿™æ ·å¯¹ä½ è¯´","text":"åŸå¸‚ï¼šé›·æ© 2016å¹´2æœˆ1æ—¥æ™šï¼Œè·å›½å†…è¿‡æ–°å¹´è¿˜æœ‰7å¤©ã€‚åŸæœ¬åªæ˜¯æƒ³è¦æ‰¾ä¸€å°æ—©æ—¶å€™çš„é¡¹ç›®ç”µé‚®ï¼Œç»“æœä¸å°å¿ƒæ²¡æŠŠæŒä½ï¼Œæ³›æ»¥ç€æ„Ÿæ…¨æ—¶å…‰é£é€çš„å°æƒ…ç»ªç¿»é˜…äº†ä¸€éä»¥å¾€çš„é‚®ä»¶ï¼Œæ„Ÿè§‰å°±åƒæ˜¯åœ¨çœ‹æ—§ç…§ç‰‡ï¼Œå°±åƒæŠŠä»å¤§ä¸€å¼€å§‹åˆ°ç°åœ¨çš„ç”Ÿæ´»é‡æ–°èµ°äº†ä¸€éã€‚è‡³ä»Šæœ‰å¾ˆå¤šéœ€è¦æ„Ÿè°¢çš„äººï¼Œå€¼å¾—çºªå¿µçš„äº‹ï¼Œæˆ‘ä¸æƒ³åœ¨å¿™ç¢Œä¸­å°±è¿™æ ·è®©å®ƒä»¬éšæ—¶é—´æµèµ°ã€‚å› ä¸ºæ‰‹é‡Œçš„ä¸œè¥¿æ€»æ˜¯å¿™ä¸å®Œï¼Œé‚£äº›è®©ä½ æˆé•¿çš„å´ä¸æ€»æœ‰æœºä¼šä¸è¢«é—å¿˜ã€‚ 2012-09-01/2013-08-27 å¤§ä¸‰ 2012å¹´å¤§äºŒæš‘å‡ï¼Œç”±äºæœ¬ä¸“ä¸šå¤§ç±»è¢«é™åˆ¶è½¬ä¸“ä¸šï¼Œæˆ‘å†³å®šé€šè¿‡è€ƒå–æ€ç§‘è®¤è¯æ¥è‡ªå­¦ç½‘ç»œæŠ€æœ¯ã€‚11æœˆï¼Œè™½ç„¶å›½åˆ›(SIETP)é¡¹ç›®æ‰åˆšç«‹é¡¹ä¸€ä¸ªæœˆï¼ŒSRTPé¡¹ç›®å·²ç»ç«‹é¡¹åŠå¹´ï¼Œä½†æ˜¯å­¦ä¹ çš„é‡å¿ƒä»åæœˆä»½èµ·å·²ç»å‘ç½‘ç»œæ–¹å‘åç§»ï¼Œæ•´å¤©è„‘å­é‡Œé™¤äº†æ€ç§‘çš„è·¯ç”±äº¤æ¢å°±æ˜¯å›½åˆ›çš„å»ºç­‘æ¶‚æ–™ï¼Œé—²æš‡ä¹‹ä½™æ‰èƒ½ç¨å¾®é¡¾åŠä¸€ä¸‹ä¸“ä¸šè¯¾ç¨‹å®ä¹ å’Œè€ƒè¯•ï¼Œè€ŒSRTPé¡¹ç›®å·²ç»æ‰“ç®—å½»åº•æ°´æ¼‚è¿‡å»äº†ã€‚è¿™ä¸ªè¿‡ç¨‹æŒç»­äº†ä¸€å¹´ï¼Œå‡†å¤‡å‡ºå›½åˆèŠ±äº†ä¸€å¹´ï¼ŒæœŸé—´å‘ç”Ÿäº†è®¸å¤šäº‹â€”â€”å¾—åˆ°äº†è®¸å¤šäººçš„å¸®åŠ©ï¼Œä¹ŸçŠ¯äº†ä¸å°‘å‚»äº‹ã€‚ 2012-09-Inquiry to Prof. Bai æˆ‘å¸Œæœ›åœ¨æœ¬ç§‘æ¯•ä¸šåå¾€ç½‘ç»œå·¥ç¨‹æ–¹å‘èµ°ã€‚æˆ‘çš„ä¸“ä¸šæ˜¯å†œä¸šèµ„æºä¸ç¯å¢ƒï¼Œä½†å‡ºäºä¸ªäººå…´è¶£å¹¶ä¸”ç»è¿‡äº†æ…é‡è€ƒè™‘åï¼Œæˆ‘æƒ³åœ¨å¤§å­¦æ¥ä¸‹æ¥çš„ä¸¤å¹´å†…è€ƒå–CCIEï¼Œå¯è‡ªå·±ç›®å‰å‡ ä¹æ˜¯é›¶åŸºç¡€ï¼Œæš‚æ—¶æ‰“ç®—åˆ°æ¬§æœ‹å…°åšå…ˆæŠ¥ä¸€ä¸ªCCNAçš„åŸ¹è®­ç­ä½œä¸ºå…¥é—¨ã€‚æˆ‘æœ‰ä¸€ä½é«˜ä¸­åŒå­¦ï¼ˆä¸“ä¸šä¸è®¡ç®—æœºç½‘ç»œæ— å…³ï¼‰åœ¨ä»Šå¹´æš‘å‡æ‹¿åˆ°äº†CCIEè®¤è¯ï¼Œè™½ç„¶æœ‰äº†ä»–çš„å»ºè®®å’Œå¼•å¯¼å¯ä»¥å°‘èµ°äº›å¼¯è·¯ï¼Œä½†ä»–æ¯•ç«Ÿä¸åœ¨è‡ªå·±èº«è¾¹è®¸å¤šäº‹æƒ…è¿˜æ˜¯éœ€è¦è‡ªå·±å»æ‘¸ç´¢ã€‚ä¸‹é¢æ˜¯æˆ‘æƒ³å’¨è¯¢æ‚¨çš„é—®é¢˜ï¼š 1. å­¦æ ¡æœ‰å¼€è®¾ç›¸å…³çš„åŸ¹è®­è¯¾ç¨‹å—ï¼Ÿå¦‚æœæ²¡æœ‰æˆ‘åˆè¯¥å¦‚ä½•å……åˆ†åˆ©ç”¨æœ¬æ ¡çš„è®¾å¤‡æˆ–è€…èµ„æºå‘¢ï¼Ÿ 2. æµ™å¤§æœ‰ä¸CCIEå¯¹å£çš„ç½‘ç»œå·¥ç¨‹æ–¹é¢çš„ç¡•å£«å­¦ä½å—ï¼Ÿæˆ–è€…å…¶å®ƒä¸CCIEç›¸å…³çš„æ·±é€ é¡¹ç›®æˆ–è®¡åˆ’ï¼Ÿ 3. åŒå­¦è¯´CCIEçš„å·¥ä½œç»éªŒï¼ˆé¡¹ç›®èµ„å†ï¼‰å¾ˆé‡è¦ï¼ŒèŠ±ä¸¤å¹´æ—¶é—´å»è¯»ç ”å’Œå·¥ä½œé‚£ç§æ›´åˆ©äºè‡ªå·±ä»Šåå‘å±•ï¼Ÿ 4. ä¸è€ƒè™‘èƒ½åŠ›é—®é¢˜ï¼Œæ‹¿åˆ°CCIEåå‡ºå›½æ˜¯å¦æ˜¯æœ€ä½³é€‰æ‹©ï¼Ÿå¦‚æœè¿™å°±æ˜¯æˆ‘çš„è§„åˆ’ï¼Œè‡ªå·±åº”è¯¥æ—©ä½œå“ªäº›å‡†å¤‡ï¼Ÿ å»ºè®®: æˆ‘å°è±¡ä¸­æ²¡æœ‰è¿™ç§åŸ¹è®­ï¼Œä¸è¿‡ä¸ºä¿é™©èµ·è§ä½ å¯ä»¥æ‰“ç”µè¯é—®é—®è®¡ç®—æœºå­¦é™¢åŠå…¬å®¤ã€‚ç¤¾ä¼šä¸Šå€’æ˜¯æœ‰ï¼Œä½†åŸ¹è®­è´¹ç”¨æœ‰ç‚¹è´µã€‚æˆ‘è®°å¾—CCIEè®¤è¯æœ‰é¢è¯•çš„ï¼Œè¦æ±‚å½“åœºè°ƒè¯•ç½‘ç»œçš„ï¼Œæ‰€ä»¥è‚¯å®šè¦æœ‰è®¾å¤‡è¿›è¡Œå®éªŒï¼Œä½†æ˜¯å­¦æ ¡æœºæˆ¿é‡Œå¹¶æ²¡æœ‰è¿™äº›è®¾å¤‡çš„ï¼Œä¼°è®¡è¦å»é—®é—®è®¡ç®—æœºå­¦é™¢çš„ç›¸å…³å®éªŒå®¤ï¼Œå…·ä½“å“ªé‡Œæœ‰æˆ‘ä¹Ÿä¸æ¸…æ¥šã€‚CCIEåªæ˜¯ä¸€ä¸ªè®¤è¯ï¼Œç¡•å£«å­¦ä½çš„åŸ¹å…»ä¸å¯èƒ½åªå±€é™äºæ­¤çš„ã€‚å…·ä½“æœ‰å…³è®¡ç®—æœºå­¦é™¢çš„ç¡•å£«ä¸“ä¸šæ–¹å‘ä½ å¯ä»¥æŸ¥è¯¢è®¡ç®—æœºå­¦é™¢ç½‘ç«™ã€‚CCIEè®¤è¯æ‹¿åˆ°ä¸€èˆ¬å°±æ˜¯å»å·¥ä½œèµšé’±äº†å§ï¼Œæ²¡æœ‰å¿…è¦å†å»è¯»ä»€ä¹ˆç ”äº†ã€‚å› ä¸ºè¯»ç ”ä¸»è¦å°±æ˜¯å­¦æœ¯æ–¹å‘ï¼ŒCCIEä¸»è¦è¿˜æ˜¯åŠ¨æ‰‹èƒ½åŠ›ã€‚å¦‚æœå‡ºå›½å»å·¥ä½œçš„è¯ï¼Œæ˜¯å¯ä»¥è€ƒè™‘çš„ï¼Œä¸è¿‡å»å¤§åŸå¸‚å¦‚ä¸Šæµ·ä¹Ÿä¸€æ ·å¯ä»¥èµšå¤§é’±ï¼›å¦‚æœå‡ºå›½å»è¯»ç ”ï¼Œé‚£CCIEæ²¡æœ‰ä»€ä¹ˆç”¨ã€‚æˆ‘å°è±¡ä¸­å‰å‡ å¹´CCIEå¾ˆåƒé¦™ï¼Œå› ä¸ºæ‹¿åˆ°è¿™ä¸ªè®¤è¯çš„äººéå¸¸å°‘ï¼Œç°åœ¨ä»€ä¹ˆè¡Œæƒ…æˆ‘å°±ä¸å¤ªæ¸…æ¥šäº†ã€‚æˆ‘è§‰å¾—ä½ ä»¥åçš„æ–¹å‘ä¸èƒ½ä»…å±€é™äºè¿™ä¸ªCCIEï¼Œå¯ä»¥è€ƒè™‘æŠŠé¢æ”¾å¾—æ›´å¹¿ä¸€äº›ï¼Œæè®¡ç®—æœºä¸»è¦æ˜¯æ—¶æ•ˆæ€§å¤ªçŸ­ï¼Œå­¦ä¸œè¥¿èŠ±äº†å¾ˆå¤šç²¾åŠ›å¾ˆå¿«å°±æ·˜æ±°äº†ï¼Œåˆå¾—ä¸æ–­åœ°å­¦æ–°ä¸œè¥¿ï¼Œå¾ˆç´¯çš„ã€‚è¿™ä¸€ç‚¹ä¸åƒåŒ»å­¦ã€å¤–è¯­ï¼Œå¯ä»¥åƒè€æœ¬ã€‚ 2013-05-Inquiry to Prof. Wu æˆ‘å¯¹ç½‘ç»œæŠ€æœ¯å¾ˆæ„Ÿå…´è¶£ï¼Œä»Šåæƒ³è¦æˆä¸ºä¸€åç½‘ç»œå·¥ç¨‹å¸ˆã€‚ä½†åœ¨å°±ä¸šä¹‹å‰ï¼Œæˆ‘æ¸´æœ›è‡ªå·±èƒ½å¤Ÿæ˜¯\"CCIE+ç½‘ç»œå·¥ç¨‹ç¡•å£«\"ã€‚ä½†æ˜¯æˆ‘åœ¨ç½‘ç»œå·¥ç¨‹é¢†åŸŸçš„ç¡¬ä»¶å‚¨å¤‡åŸºæœ¬ä¸ºé›¶ï¼Œè€Œä½œä¸ºæ•²é—¨ç –çš„CCIEè¯ä¹¦ï¼Œè™½ç„¶æˆ‘åœ¨å¾ˆåŠªåŠ›åœ°å‡†å¤‡ï¼Œä½†ä¹Ÿè¦ç­‰åˆ°æš‘å‡æ‰èƒ½è€ƒåˆ°ã€‚æˆ‘æƒ³ç”³è¯·è´µé™¢\"æœ¬æ ¡å…¶ä»–ä¸“ä¸šå…è¯•ç ”ç©¶ç”Ÿ\"çš„èµ„æ ¼â€¦â€¦ è™½ç„¶ä½ ä»¥å‰çš„ä¸“ä¸šå’Œä½ æƒ³è½¬æ¢çš„ä¸åŒï¼Œä½†ä½ å¯¹ç½‘ç»œç ”ç©¶æ–¹å‘æ„Ÿå…´è¶£çš„è¯è‚¯å®šèƒ½æœ‰æ‰€å»ºæ ‘çš„ï¼Œæˆ‘å€’å¾ˆæ„¿æ„æ¨èä½ æ¥æˆ‘å®éªŒå®¤ç ”ç©¶ã€å­¦ä¹ ã€‚ä½ çš„è‹±è¯­è€ƒçº§æƒ…å†µå¦‚ä½•ï¼Ÿä¿é€ç ”ç©¶ç”Ÿçš„èµ„æ ¼æ˜¯å¦å¯ä»¥äº‰å–åˆ°ï¼Ÿä½ ä»¬å­¦é™¢çš„è€å¸ˆæˆ‘å€’æœ‰äº›ç†Ÿæ‚‰çš„ï¼Œå¯ä»¥å¯»æ±‚ä¸€äº›å¸®åŠ©çš„ã€‚ä½ è‹¥æƒ…å†µæ˜æœ—çš„è¯å¯ä»¥æ¥æˆ‘å®éªŒå®¤å­¦ä¹ äº†ï¼Œäº†è§£ä¸€ä¸‹åŸºç¡€ç ”ç©¶æƒ…å†µï¼Œå¹¶æ¨èä½ çœ‹ä¸€äº›åŸºç¡€æ€§çš„æ•™ç¨‹ï¼Œå¹¶ä¸å¸ˆå…„ä»¬è®¨è®ºã€æ±‚æ•™ï¼Œç›¸ä¿¡ä½ ä¼šå¾ˆå¿«æœ‰æ‰€æé«˜çš„ã€‚æˆ‘å®éªŒå®¤åœ¨ç ”çš„ä¸‹ä¸€ä»£ç½‘ç»œå‰æ²¿æŠ€æœ¯ä»Šåå°†ä¼šéå¸¸ä¹‹æ™®åŠçš„ï¼Œè¿™æ–¹é¢äººæ‰çš„å‚¨å¤‡çš„å«é‡‘é‡ä¼šæ„ˆæ¥æ„ˆé«˜çš„ã€‚å»ºè®®å¯ä»¥è¿›ä¸€æ­¥è¿›è¡Œç¡•åšè¿è¯»çš„è®¡åˆ’ã€‚è¿‘æœŸæœ‰è¯¸å¤šå¤§å…¬å¸æ¥æˆ‘ä»¬è¿™é‡Œåˆä½œï¼Œå…¶ä¸­éœ€è¦æˆ‘ä»¬è¿™ä¸ªæ–¹å‘çš„åšå£«ç ”ç©¶ç”Ÿï¼Œæˆ‘è¿™é‡Œåœ¨å­¦é™¢ç”³è¯·åˆ°äº†3ä½ç¡•åšè¿è¯»çš„æ‹›ç”ŸæŒ‡æ ‡ï¼Œå…¶ä¸­1ä¸ªæˆ‘æƒ³åˆ°æ—¶ç»™ä½ ï¼Œè¿™æ ·ä½ åé¢çš„ç ”ç©¶å·¥ä½œå’Œä»Šåçš„å°±ä¸šå°±æ¯”è¾ƒå»åˆä¸€è‡´çš„ï¼Œç›®æ ‡ä¹Ÿæ›´åŠ æ¸…æ™°äº†ï¼›å¦å¤–éœ€è¦åˆ°å›½å¤–è¿›ä¿®çš„è¯æˆ‘è¿™é‡Œä¹Ÿæ˜¯æ¯”è¾ƒä¾¿æ·çš„ï¼Œç¾å›½åŠ å·å¤§å­¦ã€è¥¿åŒ—å¤§å­¦ã€é˜¿æ‹‰å·´é©¬å¤§å­¦éƒ½æœ‰è€å¸ˆåœ¨è¿™é‡Œåˆä½œç ”ç©¶ã€‚ç¡•åšè¿è¯»çš„ä¿ç ”å¯ä»¥ç”³è¯·çš„å§ï¼Œç›®å‰è¯´è¦æ‹›æ”¶å¯¼å¸ˆçš„ç¡®è®¤æ–¹å¯ã€‚ 2013-05-Kind Remind from Prof. Pan ä½ èŠ±äº†å››å¹´å­¦ä¸“ä¸š, å´è¦ä»é›¶å¼€å§‹å­¦ç½‘ç»œ, è¿™ç§æ‰§ä¸šè¯ä¹¦è®¡ç®—æœºä¸“ä¸šå­¦ç”Ÿä¸çœ‹é‡, åŸ¹è®­æœºæ„å…¼é’±çœ‹é‡ï¼Œåªæ˜¯æµªè´¹äº†ä½ çˆ¸çš„è¡€æ±—é’±ï¼çœŸæ­£è¦å­¦ç½‘ç»œè¦å­¦ä¸€ä¸ªè®¡ç®—æœºå­¦ç§‘çš„çŸ¥è¯†ï¼Œæ”¹è¡Œè€Œå‡ºæˆç»©è¦æ¯”åˆ¥äººåŒ–å¤šå€çš„ç²¾åŠ›å’Œè¾›å‹¤æ±—æ°´ï¼è¡Œè¡Œå‡ºçŠ¶å…ƒ, ä¸ºä½•è¦æ¢ä¸“ä¸šï¼Ÿæ–°ææ–™ç ”ç©¶æ˜¯ä¸€å¾ˆéœ€è¦æ–¹å‘ï¼ å› æ­¤ï¼Œè¦ä¸‰æ€è€Œè¡Œï¼Œé™¤éæ‰€å­¦ä¸“ä¸šçš„ç¡®å¾ˆéš¾æ‰¾åˆ°å·¥ä½œï¼Ÿï¼ 2013-09/2014-06 å¤§å›› 2013-09-Inquiry to Dr. Ning æš‘å‡æœŸé—´æˆ‘è¿˜åœ¨å¤‡è€ƒï¼Œæ‰€ä»¥æ²¡æ¥å¾—åŠè”ç³»æ‚¨ï¼Œå‰ä¸ä¹…åˆšåˆšè€ƒå®Œï¼Œä¸‹ä¸€æ­¥æ‰“ç®—ç€æ‰‹å‡†å¤‡å‡ºå›½ã€‚å‡ºå›½çš„è¿™ä¸ªå†³å®šä¸‹å¾—æ¯”è¾ƒä»“ä¿ƒï¼Œæ‰€ä»¥å¯¹å‡ºå›½èµ„é‡‘ï¼Œé€‰æ ¡å®šä½ï¼Œæ–‡ä¹¦å¥—ç£ï¼Œå¥–å­¦é‡‘ç­‰éƒ½è®¤è¯†ä¸æ·±ï¼Œæœ‰å…³çš„ä¸€äº›å‡†å¤‡å·¥ä½œä»¥åŠå­¦ä¸šè§„åˆ’ä¹Ÿå¹¶ä¸æˆç†Ÿã€‚å› æ­¤å¸Œæœ›èƒ½å¬å–ä½ çš„æŒ‡ç‚¹å’Œå¼•å¯¼ï¼Œä»è€Œå°‘èµ°å¼¯è·¯ã€‚æˆ‘ä»¥åæ‰“ç®—ä»äº‹ITï¼ˆç½‘ç»œï¼‰æ–¹é¢çš„å·¥ä½œï¼Œæ‰€ä»¥å¸Œæœ›æœ€å¥½èƒ½å¤Ÿç›´æ¥ç”³è¯·åˆ°ç¾å›½CSæ–¹é¢çš„ç¡•å£«OFFERï¼Œä½†æ˜¯ç”±äºæ˜¯è·¨ä¸“ä¸šï¼Œè€Œä¸”æ‰˜ç¦å’ŒGREæ‰åˆšåˆšå¼€å§‹å‡†å¤‡ï¼Œæ‰€ä»¥æ—¶é—´éå¸¸ç´§å¼ ï¼Œå¹¶ä¸”åº”è¯¥å¯èƒ½ä¼šè¦æ‹–ä¸ªåŠå¹´ä¸€å¹´ï¼Œæ¥å‡†å¤‡è‹±è¯­æˆç»©ï¼Œé€‰ä¿®è®¡ç®—æœºä¸“ä¸šè¯¾ï¼Œè¿˜æœ‰ç§¯ç´¯ç›¸å…³çš„é¡¹ç›®æˆ–è€…å®ä¹ ç»å†ã€‚å¦‚æœè‹±è¯­æˆç»©èƒ½å¤Ÿé¡ºåˆ©è€ƒå‡ºæ¥çš„è¯ï¼Œä»Šå¹´12æœˆåº•åˆ°æ˜å¹´1æœˆä»½åˆè¯•ç”³å‡ æ‰€é™¢æ ¡ï¼Œå¦‚æœè®¡åˆ’ä¸é¡ºåˆ©æˆ–è€…å½•å–ç»“æœä¸ç†æƒ³çš„è¯å†ç­‰æ˜å¹´æ˜¥å­£é‚£ä¸€æ‰¹æ‹›ç”Ÿï¼Œå¹¶ç»§ç»­å†²åˆºè‹±è¯­è€ƒè¯•ï¼ŒåŒæ—¶å¯ä»¥å»ç§¯ç´¯ä¸€ä¸‹å®ä¹ ç»å†æˆ–è€…å¯èƒ½çš„è¯è·Ÿç€è®¡é™¢è€å¸ˆè·å–ç§‘ç ”ç»å†ã€‚å…³äºè´¹ç”¨çš„é—®é¢˜ï¼Œæˆ‘ä»¬å®¶é‡Œçš„ç»æµæ¡ä»¶å¹¶ä¸å®½è£•ï¼Œæ‰€ä»¥æˆ‘å’Œçˆ¸å¦ˆéå¸¸å…³å¿ƒè¿™ä¸€ç‚¹ï¼Œå½“ç„¶é€‰æ ¡çš„æ—¶å€™ä¹Ÿå¿…é¡»è¦è€ƒè™‘è¿™ä¸€ç‚¹ã€‚ä½†æ˜¯ç›®å‰ä¸ºæ­¢æˆ‘å¯¹ç•™å­¦ç¾å›½çš„èŠ±è´¹è¿˜æ²¡æœ‰ä¸€ä¸ªéå¸¸æ¸…æ¥šçš„è®¤è¯†å’Œæ¦‚å¿µï¼Œæ‚¨å¯ä»¥å‘æˆ‘å…·ä½“çš„ä»‹ç»ä¸€ä¸‹å—ï¼Ÿé‰´äºç»è´¹çš„é—®é¢˜å’Œé€‰æ‹©çš„ç©ºé—´ï¼Œå¬åŒå­¦è¯´åŠ æ‹¿å¤§çš„èŠ±è´¹ç¨å¾®ä½ä¸€äº›ï¼Œæˆ‘æ˜¯å¦æœ‰å¿…è¦ä¹ŸåŒæ—¶ç”³è¯·åŠ æ‹¿å¤§çš„é™¢æ ¡å‘¢ï¼Ÿå¦å¤–åŒæ—¶ä»¥è‡ªå·±æœ¬ç§‘çš„ä¸“ä¸šå»ç”³è¯·å‡ æ‰€é™¢æ ¡çš„ç¯å¢ƒç±»ä¸“ä¸šï¼Œç„¶åå†è§†æƒ…å†µè€ƒè™‘è½¬åˆ°CSæ˜¯å¦æ˜¯ä¸€ç§å¯èƒ½çš„åˆç†çš„é€‰æ‹©ï¼Ÿ å»ºè®®ï¼š As you understood, your background is inconsistent with what you try to pursue and your family is not able to provide full financial support for your graduate study oversea. In general, the cost for each credit of a graduate course is about $1000 - $2000 for international students and at least 12 credits are required for a full-time graduate student. Lodging and boarding costs additional $10k per year. That's reality. So you may think about it around the way or alternate approach(es). \"ä»¥è‡ªå·±æœ¬ç§‘çš„ä¸“ä¸šå»ç”³è¯·å‡ æ‰€é™¢æ ¡çš„ç¯å¢ƒç±»ä¸“ä¸šï¼Œç„¶åå†è§†æƒ…å†µè€ƒè™‘è½¬åˆ°CS\" might be the alternate approach, through which you could get a school financial support. I like your attitude for planning your long-run goals. For now, however, you should concentrate on getting as high as possible scores on TOEFL and GRE, which will help you get admitted into a college graduate program and financial support from the college. Once you get high enough scores with them, you can think of what colleges and programs you should apply for. å…³äºå¥—ç£, you should have done certain research on particular professional fields through these you should frequently refer the articles published in professional journals. Then you can naturally get in touch with those authors of the articles to inquire their recent progress, etc. 2013-10-Inquiry to Mr. Li å¾ˆæŠ±æ­‰è¿‘æœŸæ²¡èƒ½å…³æ³¨åˆ°Autodeskå…¬å¸åœ¨æˆ‘ä»¬å­¦æ ¡çš„æ ¡æ‹›æƒ…å†µï¼Œå¯¹è´µå…¬å¸çš„èŒä½éœ€æ±‚ä¸å¤ªäº†è§£ï¼Œæ‰€ä»¥å¸Œæœ›å…ˆæŠŠç®€å†å‘ç»™æ‚¨å¹¶åŒæ‚¨å»ºç«‹è”ç³»ï¼Œæœ›å‰è¾ˆå¤šå¤šæ‰¹è¯„æŒ‡æ­£ã€‚ å»ºè®®ï¼š â€¦â€¦ä¸è¿‡ä½ å¼€å‘ç¼–ç¨‹æ–¹é¢ç»å†è¾ƒå°‘ã€‚å¦‚æœæˆ‘è¿™ä¸ªç†è§£æ²¡é”™ï¼Œè€Œä¸”ä½ åˆå¸Œæœ›åœ¨ITä¸šæ–¹é¢å°è¯•ä¸€ä¸‹å‘å±•çš„è¯ï¼Œçœ‹æ¥ä½ æ¯”è¾ƒé€‚åˆåœ¨å…¬å¸çš„ITéƒ¨é—¨å·¥ä½œï¼Œè¿›è¡Œç½‘ç»œæ–¹é¢ç®¡ç†ï¼Œä¸çŸ¥é“ä½ æ˜¯å¦åŒæ„ã€‚æˆ‘ä»¬å…¬å¸æœ€è¿‘æ‹›äººå¹¶ä¸å¤šï¼Œæ¯ä¸¤å‘¨ä¼šå‘å¸ƒä¸€æ¬¡èŒä½éœ€æ±‚åˆ—è¡¨ï¼Œæœ€è¿‘çš„ä¸€æ¬¡æ²¡æœ‰çœ‹åˆ°ITéƒ¨é—¨çš„èŒä½ï¼Œæˆ‘ä¼šç•™æ„é‚®ä»¶ï¼Œå¦‚æœæœ‰åˆé€‚çš„èŒä½ä¸€å®šä¼šå¸®ä½ æ¨èã€‚ä¸è¿‡ç°åœ¨åæœˆä»½ï¼Œè·ç¦»æ¯•ä¸šè¿˜æ—©ï¼Œä½ å¤§å¯ä»¥å¤šå°è¯•ä¸€äº›å…¶ä»–æ›´åŠ å¯¹å£çš„å…¬å¸ï¼Œæ¯”å¦‚æ€ç§‘åä¸ºè¿™äº›ã€‚æˆ–è€…å‡†å¤‡è€ƒç ”ï¼ˆå¦‚æœä½ æƒ³çš„è¯ï¼‰ã€‚æœ‰é—®é¢˜å°±ç»™æˆ‘å†™ä¿¡ï¼Œç¥å¥½è¿ï¼ 2013-11-Inquiry to Mr. Zhuliu & Mr. Yue 10æœˆåº•å·²ç»æ‹¿åˆ°åä¸ºçš„offeräº†ï¼Œä½†æ˜¯è¿˜æ˜¯éå¸¸æƒ³å‡ºå›½å¿µITï¼Œæ‰€ä»¥è™½ç„¶è½¬ä¸“ä¸šéš¾åº¦æ¯”è¾ƒå¤§ï¼Œä½†è¿˜æ˜¯æƒ³è€ƒè‹±è¯­å†å…¨åŠ›å»è¯•ç€ç”³ä¸€ç”³ï¼Œå¦‚æœå®åœ¨æ—¶é—´æ¥ä¸åŠæˆ–è€…ç»“æœä¸åˆé€‚çš„è¯å°±åªèƒ½åˆ°åä¸ºå·¥ä½œå‡ å¹´å†å‡ºå›½äº†ã€‚æµ™å¤§è¿™è¾¹æœ‰ä¸ªå’ŒKTHçš„4+2çš„é¡¹ç›®æˆ‘å·²ç»æŠ¥åäº†ï¼Œ12æœˆ17æ—¥å¯¹æ–¹ä¼šæ¥æˆ‘ä»¬å­¦æ ¡é¢è¯•ï¼Œå¸Œæœ›é¡ºåˆ©å§!ä»¥ä¸Šæ˜¯æˆ‘ç›®å‰çš„çŠ¶æ€å’Œæ‰“ç®—ã€‚CVå°±æ‹œæ‰˜ä½ äº†ï¼Œå¦å¤–å°±ä½ å¯¹ç¾å›½å¤§å­¦çš„äº†è§£ï¼Œèƒ½å¦å¯¹æˆ‘çš„è½¬ä¸“ä¸šç”³è¯·æä¸€äº›å»ºè®®ï¼Œæ¯”å¦‚è¯´ç¾å›½å­¦æ ¡éå¸¸æ³¨é‡ä»€ä¹ˆï¼›æˆ‘è¿˜å¯ä»¥æ€æ ·å»å¼¥è¡¥è½¬ä¸“ä¸šè¿™ç§æƒ…å†µå¸¦æ¥çš„åŠ£åŠ¿ï¼›è¿˜æœ‰ç”³ç¡•å£«çš„è¯å¥—ç£å¯¹ç”³è¯·ç»“æœä¼šæœ‰å¾ˆå¤§çš„å½±å“å—ï¼Œï¼ˆæ¯”å¦‚è¦æ˜¯æˆ‘çš„æ¯•è®¾è¯¾é¢˜æ˜¯è½¯ä»¶å®šä¹‰ç½‘ç»œSDNè¿™ä¸€å—ï¼Œè€ŒæŸä¸ªæ•™æˆä¹Ÿæ˜¯ç ”ç©¶è¿™ä¸€å—ï¼‰ã€‚ Zhuliuï¼š åœ¨ä½ é¢å‰æœ‰å¾ˆå¤šå¾ˆå¥½çš„é€‰æ‹©ï¼Œæˆ‘ç›¸ä¿¡æ— è®ºä½ èµ°å“ªä¸€æ¡è·¯ï¼Œéƒ½ä¼šä¸€å¦‚æ—¢å¾€çš„ç²¾å½©ã€‚æˆ‘è‡ªå·±ä¸æ˜¯è·¨ä¸“ä¸šç”³è¯·çš„ï¼Œåªæ˜¯å€ŸåŸæ¥çš„ä¸“ä¸šå…¥äº†å­¦æ ¡çš„é—¨ï¼Œç„¶ååˆèƒŒå¼ƒå¸ˆé—¨ï¼Œè½¬è¡Œåšç å†œã€‚æ‰€ä»¥å¯¹äºä½ ç”³è¯·CSä¸“ä¸šï¼Œæˆ‘çš„å¸®åŠ©æ¯”è¾ƒæœ‰é™ã€‚æˆ‘è·Ÿä¸€ä¸ªCSçš„åŒå­¦è®¨è®ºäº†ä½ çš„æƒ…å†µï¼Œå¤§å®¶æ€»ç»“äº†ä¸€äº›æƒ³æ³•ã€‚ ç¬¬ä¸€ï¼Œè·¨ä¸“ä¸šç”³è¯·ï¼Œå°¤å…¶æ˜¯è·¨åº¦è¾ƒå¤§çš„ç”³è¯·ç¡®å®éš¾åº¦å¾ˆå¤§ï¼Œå› ä¸ºå¯¼å¸ˆä¼šé¡¾è™‘å­¦ç”Ÿçš„ä¸“ä¸šåŸºæœ¬åŠŸã€‚ä½†åŒæ—¶ï¼Œå­¦æ ¡å’Œé™¢ç³»ä¹Ÿæ˜¯å¾ˆæ¬£èµå¤šæ ·æ€§çš„ã€‚æˆ‘ä»¬è¿™é‡Œæœ‰EEæ•™æˆç ”åšå¿ƒç†å­¦è¯¾é¢˜çš„ï¼Œè¯­è¨€å­¦æ•™æˆåšè‡ªç„¶è¯­è¨€è®¡ç®—å¤„ç†çš„ã€‚åŒ…æ‹¬æˆ‘çš„é‚£ä½åŒå­¦ï¼Œä»–æœ¬ç§‘æ˜¯æœºæ¢°ç³»åšæœºå™¨äººå’Œç”µè·¯çš„ã€‚æ‰€ä»¥è·¨ä¸“ä¸šç”³è¯·ï¼Œç¡¬æ”»CSçš„è¯ï¼Œæ˜¯è¦æ‰“diversityçš„ç‰Œã€‚æˆ‘è§‰å¾—è¿™ç‚¹ä½ å·²ç»åšå¾—æ¯”è¾ƒå¥½äº†ï¼Œåšäº†CSä¸ä½ æœ¬ä¸“ä¸šç»“åˆçš„è¯¾é¢˜ã€‚æˆ‘ä¹Ÿç›¸ä¿¡CSæŠ€æœ¯å¯ä»¥åœ¨ä½ æ‰€ç†ŸçŸ¥çš„ä¸“ä¸šé¢†åŸŸé‡Œæœ‰å¾ˆå¤šç¾å¦™çš„åº”ç”¨ã€‚ï¼ˆæˆ‘è‡ªå·±å¯¹äºGISä¹Ÿå¾ˆæ„Ÿå…´è¶£ï¼Œç°åœ¨pythonçš„å…´èµ·æ­£åœ¨æ”¹å˜Earth Scienceæ•´ä¸ªå­¦ç§‘çš„é¢è²Œï¼Œå¾ˆå¤šåœ°ç†ä¿¡æ¯çš„æ•™æˆéƒ½æ„Ÿè§‰è‡ªå·±è½ä¼äº†ï¼Œåœ¨å­¦æ ¡é‡Œæ‰¾CSç›¸å…³çš„å­¦ç”Ÿåšç ”ç©¶åŠ©ç†ï¼‰ã€‚è·¨ä¸“ä¸šæˆ–è®¸æ˜¯ä¸€ä¸ªçŸ­æ¿ï¼Œä½†å¦‚æœä½ æŠŠå®ƒä¸CSç»“åˆå¾—å¥½ï¼Œçªå‡ºè‡ªå·±è·¨å­¦ç§‘è§£å†³é—®é¢˜çš„èƒ½åŠ›å’Œå­¦ä¹ èƒ½åŠ›ï¼Œå¹¶ä¸”å¼ºè°ƒè‡ªå·±åº”ç”¨CSçš„å­¦æœ¯æ·±åº¦ï¼Œå°±å¯ä»¥æ‰¬é•¿é¿çŸ­ã€‚å…´è®¸æœ‰æ•™æˆæ°å¥½æœ‰åˆä½ èƒƒå£çš„è·¨ä¸“ä¸šé¡¹ç›®ï¼Œè¿™æ ·å°±æœ€å¥½äº†ã€‚ ç¬¬äºŒï¼Œä¹Ÿå¾—è€ƒè™‘\"æ›²çº¿è¿›å…¥\"çš„æ–¹å¼ã€‚CSæ ¸å¿ƒä¸“ä¸šçš„å½•å–é‡ä¸å¤§ï¼Œè€Œä¸”ç«äº‰æ¿€çƒˆã€‚ä½†ä»¥åˆ«çš„ä¸“ä¸šè¿›å…¥CSå¼ºæ ¡ï¼Œä¸å¤±ä¸ºä¸€ç§åŠæ³•ã€‚ç¾å›½å¤§å­¦æœ‰å¾ˆå¤§çš„è‡ªç”±åº¦ã€‚å°¤å…¶æ˜¯å¯¹äºç¡•å£«å­¦ç”Ÿï¼Œåªè¦ä¿®äº†ç¬¦åˆè¦æ±‚çš„è¯¾ç¨‹ï¼Œå°±èƒ½è½¬å…¥CSç›¸å…³çš„ä¸“ä¸šï¼ˆæœ‰æ—¶å€™EEåè€Œæ¯”è¾ƒçµæ´»åˆåŒ…å®¹ï¼Œç°åœ¨EEçš„ä¹Ÿéƒ½åœ¨codingï¼‰ã€‚ æˆ‘èº«è¾¹æœ‰åŒå­¦åˆšè¿›æ¥å°±ä¿®è¯»CSçš„è¯¾ç¨‹ï¼Œç¬¬äºŒå¹´é¡ºåˆ©ä»civilè½¬åˆ°EEã€‚ä¹Ÿæœ‰åŒå­¦ç›´æ¥ä»civilè½¬åˆ°äº†CSã€‚ç”³è¯·çš„æ—¶å€™è¿å¿ƒåœ°\"æ¬ºéª—\"ä¸€ä¸‹è€å¸ˆçš„æ„Ÿæƒ…ä¹Ÿæ˜¯æ— å¦¨çš„ã€‚åªè¦ä¸æ˜¯éª—phd fundingï¼Œå¥—ä¸ªç¡•å£«å½•å–ï¼Œç„¶åè¿›æ¥å°±è·³ï¼Œæˆ‘è§‰å¾—ä¹Ÿæ˜¯æ— å¯éè®®çš„ã€‚ä»è¿™ä¸ªè§’åº¦è€ƒè™‘ï¼Œç”³è¯·ä½ çš„æœ¬ä¸“ä¸šï¼ˆä¸CSç»“åˆçš„æ›´å¥½ï¼‰ï¼Œæˆ–è€…CSè¾¹ç¼˜çš„ä¸“ä¸šï¼ˆæ¯”å¦‚CMUæœ‰ä¸å°‘éCSæ ¸å¿ƒçš„ä¸“ä¸šå¯ä»¥è€ƒè™‘ï¼‰ï¼Œæˆ–è€…EEçš„æŸäº›æ–¹å‘ï¼ˆæ¯”å¦‚ç½‘ç»œï¼‰å¯èƒ½ä¼šå¢åŠ ä½ è¿›å…¥å­¦æ ¡çš„æŠŠæ¡ã€‚ ç»¼åˆè¿™ä¸¤æ¡ï¼Œä½ çš„ç”³è¯·æ€è·¯å¯ä»¥æ˜¯ä¸¤è€…ç»“åˆçš„ã€‚å¾ˆå¤šå­¦æ ¡éƒ½æ˜¯ä»¥é™¢ç³»ä¸ºå•ä½æ‹›ç”Ÿå½•å–çš„ã€‚æ‰€ä»¥ä½ å¯ä»¥å‡†å¤‡ä¸¤ç§å€¾å‘æ€§çš„ææ–™åˆ†åˆ«æŠ•ç»™CSå’Œå…¶ä»–å­¦é™¢ã€‚åªè¦æœ‰ä¸€ç§æ–¹å¼æˆåŠŸï¼Œä¾¿æ˜¯èƒœåˆ©ã€‚ å¯¹äºç”³è¯·CSä¸“ä¸šçš„CVå’ŒPSï¼Œä½ è¦æŠŠè‡ªå·±çš„ä¸»ä½“å†…å®¹å†™å¾—è·Ÿç§‘ç­å‡ºèº«çš„äººå·®ä¸å¤šã€‚ä½ å¯ä»¥ç®€è¦æ¢³ç†ä¸€ä¸‹ä½ çš„ä¸“ä¸šåŸºç¡€ï¼Œæ¯”å¦‚ï¼Œä¼šå“ªå‡ é—¨è¯­è¨€ï¼Œåˆ†åˆ«ä»€ä¹ˆç¨‹åº¦ï¼ˆproficient, experienced)ã€‚ç®—æ³•è®¾è®¡çš„è¯¾ç¨‹æˆ–é¡¹ç›®ã€‚Object Oriented Programmingæ–¹é¢çš„ç»éªŒã€‚è¿˜æœ‰å°±æ˜¯CSæŸä¸ªå­é¢†åŸŸçš„ç ”ç©¶ã€‚æ¯”å¦‚ä½ æ“…é•¿networké‚£å—ï¼Œä½ å¯ä»¥æŠŠç›¸å…³çš„è¯¾ç¨‹ç»å†å’Œå…·ä½“çš„projectéƒ½æ¢³ç†åˆ°ä¸€èµ·ã€‚ä½ èƒ½å—åˆ°åä¸ºçš„é’çï¼Œè‚¯å®šæœ‰æ‹¿å¾—å‡ºæ‰‹çš„ç›¸å…³é¡¹ç›®ï¼Œè¿™ä¸ªå­é¢†åŸŸçš„å­¦è¯†è‡³å…³é‡è¦ï¼Œè¦çªå‡ºå¼ºè°ƒè¿™ä¸ªï¼Œè®©æ•™æˆè§‰å¾—ä½ æœ‰å¹²è´§ï¼Œå¹¶ä¸”æœ‰å¿—äºç ”ç©¶ä¸‹å»ï¼ˆä»¥ç”³è¯·phdçš„æ€åº¦ç”³è¯·ç¡•å£«ï¼‰ã€‚æ•™æˆåœ¨ç¡®å®šäº†ä½ åŸºç¡€è¿‡å…³çš„æƒ…å†µä¸‹ï¼Œå°±æ˜¯çœ‹å¿—è¶£ç›¸æŠ•äº†ã€‚ç„¶åï¼Œè¿˜æ˜¯é‚£ä¸€ç‚¹ï¼Œç§‘ç­ä¸€æ ·çš„ç®€å†ä¹‹å¤–ï¼Œä¹Ÿä¸å¯èƒ½å›é¿æœ¬ä¸“ä¸šçš„å†…å®¹ã€‚è¿™ä¸ªå’Œæ‰¾å·¥ä½œä¸ä¸€æ ·ï¼Œæˆ‘å¯ä»¥åªå­—ä¸æcivilä¸“ä¸šï¼Œè¯´è‡ªå·±æ˜¯Engineeringçš„ã€‚å­¦æœ¯å½•å–å¯¹äºä½ æ—¢å¾€çš„ä¸“ä¸šè¿˜æ˜¯ä¼šè°ƒæŸ¥çš„è¯¦ç»†æ¸…æ¥šçš„ã€‚è¿™å°±éœ€è¦åƒå‰é¢æ‰€è¯´çš„é‚£æ ·æ‰¬é•¿é¿çŸ­ï¼Œä½ è¦å¼ºè°ƒä½ çš„ä¸“ä¸šå­¦ä¹ ä¸­èå…¥çš„CSæ˜¯å¤šä¹ˆçš„æœ‰æ·±åº¦ã€‚ä»¥ä½ æœ¬ä¸“ä¸šåšå¤–å£³ï¼Œå¤§è®²ä½ çš„CSå†…æ¶µã€‚ è€Œå¯¹äºç”³è¯·ä¸ä½ ä¸“ä¸šæ¯”è¾ƒç›¸è¿‘çš„æ–¹å‘ï¼Œåˆ™è¿˜æ˜¯ä»¥æœ¬ä¸“ä¸šä¸ºåšå®åŸºç¡€ï¼ŒCSä½œä¸ºä½ çš„æ‹¿æ‰‹å¥½æˆã€‚ä½ å–å¾—äº†æœ¬ä¸“ä¸šçš„å­¦ä½ï¼Œæœ‰ä¼˜ç§€çš„æˆç»©ï¼Œè€Œä¸”åšäº†å¾ˆå¤šè·¨å­¦ç§‘çš„è¯¾é¢˜éƒ½éå¸¸æ—¶é«¦ã€‚æ˜¯çš„ï¼Œç°åœ¨ç¾å›½æ•´ä¸ªå­¦æœ¯åœˆéƒ½åœ¨è¿½æ±‚é‡åŒ–å’Œæ¨¡æ‹Ÿï¼Œä½ çš„codingæŠ€èƒ½å¯èƒ½æ˜¯ä½ æœ¬ä¸“ä¸šå¾ˆå¤šè€æ¿æ‰€å‚æ¶çš„ã€‚æˆ‘æƒ³è¿™ç§ç±»å‹çš„ç®€å†ï¼Œä½ å†™èµ·æ¥åº”è¯¥å¾—å¿ƒåº”æ‰‹ã€‚å†æœ‰ä¸€ç‚¹å°±æ˜¯æŠ•å…¶æ‰€å¥½ã€‚å¦‚æœä½ æ˜¯æŠŠCSä½œä¸ºé”¦ä¸Šæ·»èŠ±çš„ï¼Œé‚£ä¹ˆå¯ä»¥ç•¥å†™ä¸“ä¸šæœ¯è¯­å’Œå…·ä½“å†…å®¹ï¼Œå¼ºè°ƒå®ç”¨å’Œå®½åº¦ï¼ˆæ€ä¹ˆåœ¨ä½ çš„ä¸“ä¸šé‡Œç”¨çš„å¥½ï¼‰ã€‚æ¯”å¦‚ä½ çš„Sql DBçš„ç»å†å¯¹äºGISç­‰ä¿¡æ¯ç±»ä½†éCSä¸“ä¸šï¼Œæ˜¯å¾ˆåŠ åˆ†çš„ã€‚ä½†æ˜¯å¯¹äºCSä¸“ä¸šï¼Œå°±è¦æµ“ç¼©åˆ°ä½ çš„å¹²è´§ä¸Šå»ï¼ˆä½ çš„networkæ–¹å‘ï¼‰ï¼Œå› ä¸ºçœ‹ç®€å†çš„å¯¹æ–¹æ˜¯è¡Œå®¶ï¼Œä»–æ‰€å…³å¿ƒçš„æ˜¯å­ä¸“ä¸šçš„åŒ¹é…ã€‚ä½ æœ€å¼ºåŠ¿çš„ï¼Œç”šè‡³æœ‰å¯èƒ½ä½œä¸ºphdè¯¾é¢˜çš„CSé¡¹ç›®å°±è¦è¯¦ç»†çš„å†™ï¼Œçªå‡ºäº®ç‚¹ã€‚æ¬¡è¦çš„å¯ä»¥çœç•¥å’Œå¸¦è¿‡ã€‚ å¯¹äºä½ ç°æœ‰çš„ç®€å†ï¼Œæˆ‘è§‰å¾—è¿™é‡Œå·²ç»æœ‰è¶³å¤Ÿä¸°å¯Œçš„ç´ æäº†ï¼Œå……åˆ†è¯æ˜äº†ä½ çš„å‹¤å¥‹å’Œæ‰èƒ½ã€‚æ¥ä¸‹æ¥çš„å°±æ˜¯ä¸ºä¸¤ç§æˆ˜æœ¯æŒ‘é€‰ç´ æ, é‡èº«å®šåšäº†ã€‚è‡³äºæ‰¾CSä¸“ä¸šç®€å†çš„æ¨¡æ¿ï¼Œä½ å¯ä»¥googleåˆ°å¾ˆå¤šä¸“ä¸šäººå£«çš„ï¼ˆç å†œçš„CVå¾ˆå¤šï¼‰ï¼Œä½ å¯ä»¥æ¨¡ä»¿ä»–ä»¬çš„ç¬”è°ƒå»å†™è‡ªå·±å†…å®¹ï¼Œå¦‚æœé¡ºå¸¦ç”¨ä¸€ä¸‹latexå†™çš„è¯ï¼Œç»™äººä¸“ä¸šçš„æ„Ÿè§‰ï¼ˆè¿™ä¸ªä¸æ˜¯å¾ˆé‡è¦ï¼‰ã€‚è¿˜æœ‰ä¸€ç‚¹ï¼Œé™¤éæ˜¯å¯¹æ–¹è®¤è¯†çš„çŸ¥åæ•™æˆï¼Œä¸€èˆ¬éƒ½ä¸å¿…åˆ—ä¸¾ä½ çš„æŒ‡å¯¼è€å¸ˆçš„åå­—ã€‚è¿™æ ·å ç¯‡å¹…ï¼Œè€Œä¸”æ›´ç»™å¯¹æ–¹ç–ç¦»æ„Ÿï¼Œè¿™é‡Œä½ æ˜¯æ˜æ˜Ÿï¼è¿˜æœ‰è¯¦ç•¥çš„æ§åˆ¶ã€‚è¦åšçš„ç²¾ç®€çš„åŸºç¡€ä¸Šï¼Œè®©å¯¹æ–¹å¤§æ¦‚äº†è§£åˆ°ä½ åšäº†ä»€ä¹ˆå·¥ä½œï¼Œç”¨äº†ä»€ä¹ˆæŠ€æœ¯ã€‚æ¯”å¦‚ä½ çš„MySQLé¡¹ç›®ï¼Œä½ æŒ‡å‡ºçš„GUIï¼Œä¸€çœ‹å°±å¾ˆæ˜æ˜¾äº†ï¼Œç¡®å®ä¸å¿…å¤šè§£é‡Šï¼Œä½†å¦‚æœä½ è¯´ä½ ç”¨java swingæˆ–è€…phpï¼Œrubyåšweb interfaceé‚£å°±æ›´ä»¤äººä¿¡æœã€‚ä½†main funciton moduleså°±æ˜¯å¾ˆå«ç³Šçš„æ¦‚å¿µï¼Œä½ æ˜¯è´Ÿè´£DBå’Œä½ ä»¬çš„programäº¤äº’çš„moduleï¼Œè¿˜æ˜¯æ•°æ®ä¸DBäº¤äº’å‰çš„å…¶ä»–å¤„ç†ï¼ˆå¦‚æœæ˜¯ï¼Œé‚£ä¹ˆå¯èƒ½ç”¨åˆ°ä»€ä¹ˆæ ¸å¿ƒç®—æ³•æˆ–æ•°æ®ç»“æ„ï¼Œä½ ä¹Ÿå¯ä»¥åšæ–‡ç« ï¼‰ã€‚åŒç†ï¼Œä½ åœ¨implement intellecutal queuing systemæ—¶å€™çš„ä¸»è¦è§£å†³çš„éš¾é¢˜æ˜¯ä»€ä¹ˆï¼Œæ ¸å¿ƒç®—æ³•å€Ÿé‰´äº†ä»€ä¹ˆã€‚è¿™äº›éƒ½æ˜¯å¯ä»¥å¥—ç”¨æœ¯è¯­ç®€è¦çš„äº¤ä»£æ¸…æ¥šçš„ã€‚å¦å¤–ï¼Œä½ ç”¨åŠ¨è¯å¼€å¤´çš„æè¿°å¾ˆå¥½ï¼Œç¡®å®æ˜¯è¿™æ ·çš„è§„èŒƒã€‚å¯ä»¥æ”¹è¿›çš„åœ°æ–¹åœ¨äºæŠŠåŠ¨è¯æ›¿æ¢æˆé«˜çº§çš„åŒä¹‰è¯ï¼Œæ¯”å¦‚æŠŠhelpedæ¢æˆassistedã€‚ Yueï¼š åä¸ºofferæ¯”è¾ƒä¸é”™ï¼Œå®åœ¨ä¸è¡Œå…ˆåœ¨å›½å†…å·¥ä½œä¸‹ä¹Ÿè¿˜å¥½ï¼Œå›½å¤–å¾ˆå¤šäººéƒ½æ˜¯æœ‰å‡ å¹´å·¥ä½œç»éªŒå†è¯»ç¡•å£«çš„ã€‚æˆ‘ç¨å¾®çœ‹äº†ä¸‹ï¼Œæ ‡æ³¨äº†ä¸€äº›åœ°æ–¹å¯ä»¥æ”¹ä¸‹ï¼Œä½†è¿˜å»ºè®®ä½ å¯ä»¥è‡ªå·±å†ä»”ç»†ä¿®æ”¹ï¼Œå¹¶ä¸”å’Œæ›´å¤šäººä¸€èµ·ç›¸äº’ä¿®æ”¹ï¼Œç„¶åæ‰¾æ›´ä¸“ä¸šçš„äººå£«å¸®å¿™ä¿®æ”¹ã€‚å¦å¤–æ³¨æ„å†™ç»å†æ—¶å°½é‡èƒ½é‡åŒ–æˆæœï¼Œä»¥ä¾¿æ›´å¥½åœ°differentiate yourselfã€‚è¿˜å¯ä»¥åœ¨ç½‘ä¸Šæœä¸‹é¡¶å°–ç¾å›½å¤§å­¦çš„CVæ¨¡æ¿ï¼Œå¯¹ç…§ç€è‡ªå·±çš„æ”¹ä¸‹ã€‚ä½ è¦è½¬åˆ°CS/ITç›¸å…³æ–¹å‘æ˜¯å§ï¼Œå»ºè®®ä½ åœ¨ç®€å†é‡Œå†åŠ ä¸Šä½ ç†Ÿç»ƒè¿ç”¨çš„ç¼–ç¨‹è¯­è¨€ã€è®¡ç®—æœºè½¯ä»¶å§ã€‚æˆ‘æ„Ÿè§‰ç”³ç¾å›½ç¡•å£«ç°åœ¨ä¸æ˜¯ç‰¹åˆ«éš¾ï¼Œç¾å›½é«˜æ ¡æœ€è¿‘æ‹›ç¡•å£«æ¯”è¾ƒå¤šï¼ˆæ°´ï¼‰ä¸€äº›ï¼Œè™½ç„¶æœªæ¥æ‰©æ‹›çš„è¶‹åŠ¿ä¸å¤ªå¯èƒ½æŒç»­ã€‚è¦è½¬ä¸“ä¸šçš„è¯ï¼Œç›¸å…³ä¸“ä¸šçš„è¯¾ç¨‹ã€ç§‘ç ”é¡¹ç›®ã€ç«èµ›æˆæœã€å®ä¹ å·¥ä½œç»éªŒã€CSå¥½æ•™æˆçš„æ¨èä¿¡å¯èƒ½ä¼šæ¯”è¾ƒæœ‰å¸®åŠ©ï¼ˆæœ€å¥½è¿™äº›éƒ½æ˜¯åœ¨å›½é™…ä¸Šè®¤å¯çš„ï¼‰ï¼Œè¿™äº›ä¼°è®¡ç¾å›½å­¦æ ¡éƒ½ä¼šçœ‹é‡ã€‚é™¶ç“·æˆ‘ä¼°è®¡å¯¹ç”³ç¡•å£«å¸®åŠ©ä¸å¤§ï¼Œå¦‚æœä½ æƒ³è¿‡å»è·Ÿè€å¸ˆåšç‚¹è¯¾é¢˜ã€äº‰å–RAçš„è¯ï¼Œè¿˜æ˜¯å¯ä»¥å¥—çš„ã€‚ 2014-04-From Mr. Chisyliu æˆ‘ä¸ªäººè§‰å¾— å­¦ä¹ internet technologyæœ¬èº«ä¸é”™ ä¸è¿‡ä¸è¦åªæ³¨é‡ç½‘ç»œä¸ªä½“ è€Œè¦åŒæ—¶å­¦ä¹ ç›¸å…³çš„å®ç°æ–¹å¼ ä¾‹å¦‚ ç½‘ç»œåº”ç”¨ javaæˆ–è€…æ•°æ®åº“ ç½‘é¡µå¼€å‘ä¹‹ç±»çš„ç¼–ç¨‹ è¿™æ ·æ¯•ä¸šæ—¶å€™è‡ªç„¶è¾ƒå¥½æ‰¾å·¥ä½œ æ³•å›½ä¸æ˜¯éå¸¸äº†è§£ ä½†å­¦ä½æœ¬èº«å¹¶æ²¡æœ‰ä½ æƒ³è±¡é‚£ä¹ˆé‡è¦ ä¸»è¦æ˜¯ä½ éœ€è¦æ‰¾åˆ°åˆé€‚çš„å…¬å¸å®ä¹ æˆ–è€…è®ºæ–‡ å¹¶ä¸”æŠŠç¼–ç¨‹å­¦å¥½ æ— è®ºä½ å­¦ä¹ ä»€ä¹ˆä¸“ä¸š åŸºæœ¬ä¸Šå¤§å­¦éƒ½æ˜¯æ•™æˆæŠ€æœ¯æœ¬èº« è€Œä¸€èˆ¬è¾ƒå°‘æ•™æˆå®ç°çš„æ‰‹æ®µ ä½ æ‰€éœ€è¦çš„å°±æ˜¯æ‰¾å…¬å¸å®ä¹ å»å¼ºåŒ–å®ç°æ‰‹æ®µ å°±æ˜¯æ‰€è°“çš„å†™ç¨‹åº å·¥ç¨‹å¸ˆå­¦ä½é‡ç‚¹å¹¶ä¸æ˜¯å­¦ä½ è€Œæ˜¯å¼ºåˆ¶çš„internè·Ÿæ³•è¯­","tags":"Notes","url":"https://jiang-hao.com/articles/2016/notes-å¿ƒè·¯.html","loc":"https://jiang-hao.com/articles/2016/notes-å¿ƒè·¯.html"}]};